const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-DGor_zIB.js","assets/vendor-Dazix4UH.js","assets/router-48E-HUcn.js","assets/ui-DX2C4xdf.js"])))=>i.map(i=>d[i]);
import{r as Jp,a as Kp,g as Ru}from"./vendor-Dazix4UH.js";import{L as kt,u as gs,r as b,a as vl,R as ht,b as Yp,N as Zp,O as Bx,c as Ux,d as Xp,B as Qp}from"./router-48E-HUcn.js";import{P as Ve,r as eb,R as oc,B as qx,C as Fu,X as Ou,Y as Du,T as cc,L as dc,a as zd,b as tb,c as sb,d as rb,e as ab,f as nb}from"./ui-DX2C4xdf.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var id={exports:{}},Hi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function ib(){if(qm)return Hi;qm=1;var t=Jp(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(o,c,d){var u,f={},g=null,x=null;d!==void 0&&(g=""+d),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(x=c.ref);for(u in c)a.call(c,u)&&!i.hasOwnProperty(u)&&(f[u]=c[u]);if(o&&o.defaultProps)for(u in c=o.defaultProps,c)f[u]===void 0&&(f[u]=c[u]);return{$$typeof:s,type:o,key:g,ref:x,props:f,_owner:n.current}}return Hi.Fragment=r,Hi.jsx=l,Hi.jsxs=l,Hi}var zm;function lb(){return zm||(zm=1,id.exports=ib()),id.exports}var e=lb(),mo={},Wm;function ob(){if(Wm)return mo;Wm=1;var t=Kp();return mo.createRoot=t.createRoot,mo.hydrateRoot=t.hydrateRoot,mo}var cb=ob();function db(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-2xl w-full text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-9xl md:text-[12rem] font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 animate-pulse",children:"404"}),e.jsx("div",{className:"absolute inset-0 text-9xl md:text-[12rem] font-bold text-gray-200 -z-10 blur-sm",children:"404"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Oops! Page Not Found"}),e.jsx("p",{className:"text-lg md:text-xl text-gray-600 leading-relaxed",children:"The page you're looking for seems to have vanished into the digital void. Don't worry, even the best explorers sometimes take a wrong turn!"}),e.jsxs("div",{className:"flex justify-center space-x-2 my-8",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[e.jsx(kt,{to:"/",className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",children:"🏠 Go Home"}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-8 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transform hover:scale-105 transition-all duration-200 shadow-md hover:shadow-lg",children:"← Go Back"})]}),e.jsxs("div",{className:"mt-12 p-6 bg-white/50 backdrop-blur-sm rounded-xl border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"What can you do?"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("li",{children:"• Check the URL for typos"}),e.jsx("li",{children:"• Use the navigation menu to find what you need"}),e.jsx("li",{children:"• Contact support if you believe this is an error"})]})]})]})]})})}function Lt(){const t=a=>{const n=a.getItem("userInfo");if(n)try{const c=JSON.parse(n),d=c.role||c.userType||"user";if(c.token&&typeof c.token=="string"&&c.token.length>10)return{isAuthenticated:!0,userData:{...c,userType:d},userType:d};console.warn("UserInfo found but token is missing or invalid:",c)}catch(c){console.error("Error parsing userInfo data:",c)}const i=a.getItem("user");if(i)try{const c=JSON.parse(i),d=a.getItem("token")||a.getItem("userToken");if(d)return{isAuthenticated:!0,userData:{...c,userType:"user",token:d},userType:"user"}}catch(c){console.error("Error parsing user data:",c)}const l=a.getItem("admin");if(l)try{const c=JSON.parse(l),d=a.getItem("adminToken");if(d)return{isAuthenticated:!0,userData:{...c,userType:"admin",token:d},userType:"admin"}}catch(c){console.error("Error parsing admin data:",c)}const o=a.getItem("staff");if(o)try{const c=JSON.parse(o),d=a.getItem("staffToken")||a.getItem("token");if(d)return{isAuthenticated:!0,userData:{...c,userType:"staff",token:d},userType:"staff"}}catch(c){console.error("Error parsing staff data:",c)}return null},s=t(localStorage);if(s)return s;const r=t(sessionStorage);return r||{isAuthenticated:!1,userData:null,userType:null}}function Da(){localStorage.removeItem("userInfo"),sessionStorage.removeItem("userInfo"),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("staff"),sessionStorage.removeItem("user"),sessionStorage.removeItem("admin"),sessionStorage.removeItem("staff"),window.dispatchEvent(new Event("authStateChanged"))}function Xn(t){const s=Lt();if(!s.isAuthenticated||!s.userType)return;const r=s.userType,a=sessionStorage;a.setItem(r,JSON.stringify(t)),a.setItem("userInfo",JSON.stringify({...t,role:t.userType||"user"})),window.dispatchEvent(new Event("authStateChanged"))}const zx="/api",Wx=()=>{console.log("Getting auth token from storage...");const t=localStorage.getItem("userInfo");if(t)try{const n=JSON.parse(t);if(console.log("userInfo found in localStorage:",{hasToken:!!n.token,tokenLength:n.token?n.token.length:0,userType:n.userType||n.role}),n.token&&typeof n.token=="string"&&n.token.length>10)return console.log("Token found in localStorage userInfo"),n.token;console.warn("userInfo exists but token is missing or invalid")}catch(n){console.error("Error parsing userInfo from localStorage:",n)}else console.log("No userInfo found in localStorage");const s=sessionStorage.getItem("userInfo");if(s)try{const n=JSON.parse(s);if(console.log("userInfo found in sessionStorage:",{hasToken:!!n.token,tokenLength:n.token?n.token.length:0,userType:n.userType||n.role}),n.token&&typeof n.token=="string"&&n.token.length>10)return console.log("Token found in sessionStorage userInfo"),n.token;console.warn("sessionStorage userInfo exists but token is missing or invalid")}catch(n){console.error("Error parsing userInfo from sessionStorage:",n)}else console.log("No userInfo found in sessionStorage");const r=localStorage.getItem("adminToken");if(r&&r.length>10)return console.log("Using legacy adminToken, length:",r.length),r;r?console.warn("adminToken found but too short:",r.length):console.log("No adminToken found in localStorage");const a=localStorage.getItem("token")||localStorage.getItem("userToken");return a&&a.length>10?(console.log("Using legacy userToken, length:",a.length),a):(a?console.warn("userToken found but too short:",a.length):console.log("No userToken found in localStorage"),console.log("No valid token found in any storage location"),null)},Hx=()=>{console.log("Clearing auth data due to token error"),localStorage.removeItem("userInfo"),sessionStorage.removeItem("userInfo"),localStorage.removeItem("adminToken"),window.dispatchEvent(new Event("authStateChanged"))},ub=()=>{const t={"Content-Type":"application/json"},s=Wx();return s&&(t.Authorization=`Bearer ${s}`,console.log("Authorization header set with token")),t},Mu=async(t,s,r={})=>{const a=`${zx}${t}`,n={},i=Wx();i&&(n.Authorization=`Bearer ${i}`);const l={method:"POST",body:s,headers:n,...r};console.log(`API Form Request: POST ${a}`);try{const o=await fetch(a,l);if(o.status===401||o.status===403&&!t.includes("/routing/")){console.warn(`Authentication error (${o.status}) for ${t}`);let d;try{d=await o.json()}catch{d={message:"Authentication failed"}}throw Hx(),new Error(d.message||"Authentication failed. Please log in again.")}if(!o.ok){let d=`HTTP error! status: ${o.status}`,u;try{u=await o.json(),u.message?d=u.message:u.error&&(d=u.error)}catch{d=o.statusText||d}throw console.error(`API Form Error for ${t}:`,{status:o.status,statusText:o.statusText,errorData:u,url:a}),new Error(d)}const c=await o.json();return console.log(`API Form Success for ${t}:`,c.success!==void 0?c.success:"No success field"),c}catch(o){throw console.error(`API form request failed for ${t}:`,o),o instanceof Error?o.message.includes("Authentication")||o.message.includes("token")?new Error(`Authentication error: ${o.message}`):o:new Error(`Unknown error occurred: ${String(o)}`)}},Je=async(t,s={})=>{const r=`${zx}${t}`,n={headers:ub(),...s};t.includes("/auth/login/")||console.log(`API Request: ${n.method||"GET"} ${r}`);try{const i=await fetch(r,n);if(i.status===401||i.status===403&&!t.includes("/routing/")){t.includes("/auth/login/")||console.warn(`Authentication error (${i.status}) for ${t}`);let o;try{o=await i.json()}catch{o={message:"Authentication failed"}}if(!t.includes("/auth/login/"))throw Hx(),new Error(o.message||"Authentication failed. Please log in again.")}if(!i.ok){if(t.includes("/auth/login/")&&i.status===401){let d;try{d=await i.json()}catch{d={success:!1,message:"Authentication failed"}}return d}let o=`HTTP error! status: ${i.status}`,c;try{c=await i.json(),c.message?o=c.message:c.error&&(o=c.error)}catch{o=i.statusText||o}throw console.error(`API Error for ${t}:`,{status:i.status,statusText:i.statusText,errorData:c,url:r}),new Error(o)}const l=await i.json();return t.includes("/auth/login/")||console.log(`API Success for ${t}:`,l.success!==void 0?l.success:"No success field"),l}catch(i){throw t.includes("/auth/login/")||console.error(`API request failed for ${t}:`,i),i instanceof Error?i.message.includes("Authentication")||i.message.includes("token")?new Error(`Authentication error: ${i.message}`):i:new Error(`Unknown error occurred: ${String(i)}`)}},ti={register:async(t,s,r)=>Je("/admin/auth/register",{method:"POST",body:JSON.stringify({name:t,email:s,password:r})}),login:async(t,s)=>Je("/admin/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s})}),logout:async()=>Je("/admin/auth/logout",{method:"POST"}),getProfile:async()=>Je("/admin/auth/profile"),updateProfile:async t=>Je("/admin/auth/profile",{method:"PUT",body:JSON.stringify(t)}),changePassword:async(t,s)=>Je("/admin/auth/change-password",{method:"POST",body:JSON.stringify({currentPassword:t,newPassword:s})})},mb={login:async(t,s)=>Je("/auth/login/user",{method:"POST",body:JSON.stringify({email:t,password:s})}),logout:async()=>Je("/auth/logout/user",{method:"POST"})},hb={login:async(t,s)=>Je("/auth/login/staff",{method:"POST",body:JSON.stringify({email:t,password:s})}),logout:async()=>Je("/auth/logout/staff",{method:"POST"})},Un={getStats:async()=>Je("/admin/dashboard/stats"),getOverview:async()=>Je("/admin/dashboard/overview"),getAnalytics:async()=>Je("/admin/dashboard/analytics"),getLocationIncidents:async()=>Je("/admin/dashboard/location-incidents"),getSeasonalPatterns:async()=>Je("/admin/dashboard/seasonal-patterns"),getMonthlyTrends:async(t="months",s=12)=>Je(`/admin/dashboard/monthly-trends?period=${t}&limit=${s}`)},ho={getUsers:async(t={})=>{const s=new URLSearchParams(Object.entries(t).reduce((r,[a,n])=>(n!=null&&n!==""&&(r[a]=String(n)),r),{})).toString();return Je(`/users?${s}`)},getUserById:async t=>Je(`/users/${t}`),updateUser:async(t,s)=>Je(`/users/${t}`,{method:"PUT",body:JSON.stringify(s)}),updateUserStatus:async(t,s,r)=>{const a={status:s};return r!==void 0&&(a.created_by=r),Je(`/users/${t}/status`,{method:"PUT",body:JSON.stringify(a)})},deleteUser:async t=>Je(`/users/${t}`,{method:"DELETE"}),getUserStats:async()=>Je("/users/stats")},Xi={getStaff:async(t={})=>{const s=new URLSearchParams(Object.entries(t).reduce((r,[a,n])=>(n!=null&&n!==""&&(r[a]=String(n)),r),{})).toString();return Je(`/staff?${s}`)},createStaff:async t=>Je("/staff",{method:"POST",body:JSON.stringify(t)}),getStaffById:async t=>Je(`/staff/${t}`),updateStaff:async(t,s)=>Je(`/staff/${t}`,{method:"PUT",body:JSON.stringify(s)}),updateStaffAvailability:async(t,s)=>Je(`/staff/${t}/availability`,{method:"PUT",body:JSON.stringify({availability:s})}),updateStaffStatus:async(t,s)=>Je(`/staff/${t}/status`,{method:"PUT",body:JSON.stringify({status:s})}),deleteStaff:async t=>Je(`/staff/${t}`,{method:"DELETE"}),getStaffStats:async()=>Je("/staff/stats")},ld={getLogs:async(t={})=>{const s=new URLSearchParams(Object.entries(t).reduce((r,[a,n])=>(n!=null&&n!==""&&(r[a]=String(n)),r),{})).toString();return Je(`/activity-logs?${s}`)},getLogStats:async()=>Je("/activity-logs/stats"),logActivity:async t=>Je("/activity-logs/log",{method:"POST",body:JSON.stringify(t)}),cleanupLogs:async(t=90)=>Je(`/activity-logs/cleanup?days=${t}`,{method:"DELETE"})},Jn={getAlerts:async()=>Je("/alerts"),createAlert:async t=>Je("/alerts",{method:"POST",body:JSON.stringify(t)}),updateAlert:async(t,s)=>Je(`/alerts/${t}`,{method:"PUT",body:JSON.stringify(s)}),sendAlert:async t=>Je(`/alerts/${t}/send`,{method:"POST"}),deleteAlert:async t=>Je(`/alerts/${t}`,{method:"DELETE"})},xo={getRoutes:async t=>{const s=t?`/evacuation-routes?center_id=${t}`:"/evacuation-routes";return Je(s)},createRoute:async t=>Je("/evacuation-routes",{method:"POST",body:JSON.stringify(t)}),updateRoute:async(t,s)=>Je(`/evacuation-routes/${t}`,{method:"PUT",body:JSON.stringify(s)}),deleteRoute:async t=>Je(`/evacuation-routes/${t}`,{method:"DELETE"})},Xs={getCenters:async()=>Je("/evacuation-centers"),createCenter:async t=>Je("/evacuation-centers",{method:"POST",body:JSON.stringify(t)}),updateCenter:async(t,s)=>Je(`/evacuation-centers/${t}`,{method:"PUT",body:JSON.stringify(s)}),deleteCenter:async t=>Je(`/evacuation-centers/${t}`,{method:"DELETE"}),getResources:async t=>Je(`/evacuation-centers/${t}/resources`),createResource:async(t,s)=>Je(`/evacuation-centers/${t}/resources`,{method:"POST",body:JSON.stringify(s)}),updateResource:async(t,s,r)=>Je(`/evacuation-centers/${t}/resources/${s}`,{method:"PUT",body:JSON.stringify(r)}),deleteResource:async(t,s)=>Je(`/evacuation-centers/${t}/resources/${s}`,{method:"DELETE"}),uploadResourcePicture:async(t,s,r)=>{const a=new FormData;return a.append("picture",r),Mu(`/evacuation-centers/${t}/resources/${s}/picture`,a)}},Bu={getTeams:async()=>Je("/teams"),getTeamById:async t=>Je(`/teams/${t}`),getTeamStaff:async t=>Je(`/teams/${t}/staff`),assignStaffToTeam:async(t,s,r="member")=>Je(`/teams/${t}/staff/${s}`,{method:"POST",body:JSON.stringify({role:r})}),removeStaffFromTeam:async(t,s)=>Je(`/teams/${t}/staff/${s}`,{method:"DELETE"})},Hs={getIncidents:async()=>Je("/incidents"),getStaffIncidents:async t=>Je(`/incidents/staff/${t}`),getIncidentById:async t=>Je(`/incidents/${t}`),validateIncident:async(t,s)=>Je(`/incidents/${t}/validate`,{method:"PUT",body:JSON.stringify(s)}),assignTeamToIncident:async(t,s)=>Je(`/incidents/${t}/assign-team`,{method:"PUT",body:JSON.stringify({teamId:s})}),assignTeamsToIncident:async(t,s)=>Je(`/incidents/${t}/assign-teams`,{method:"PUT",body:JSON.stringify({teamIds:s})}),assignStaffToIncident:async(t,s)=>Je(`/incidents/${t}/assign-staff`,{method:"PUT",body:JSON.stringify({staffId:s})}),updateIncidentStatus:async(t,s)=>Je(`/incidents/${t}/update-status`,{method:"PUT",body:JSON.stringify(s)})},Vi={getProfile:async()=>Je("/profile/me"),updateProfile:async t=>Je("/profile/update",{method:"PUT",body:JSON.stringify(t)}),changePassword:async(t,s)=>Je("/profile/change-password",{method:"POST",body:JSON.stringify({currentPassword:t,newPassword:s})}),uploadProfilePicture:async t=>{const s=new FormData;return s.append("profilePicture",t),Mu("/profile/upload-picture",s)},deleteProfilePicture:async()=>Je("/profile/delete-picture",{method:"DELETE"})},Uu={submitFeedback:async t=>Je("/feedback/submit",{method:"POST",body:JSON.stringify(t)}),getFeedback:async(t={})=>{const s=new URLSearchParams(Object.entries(t).reduce((r,[a,n])=>(n!=null&&n!==""&&(r[a]=String(n)),r),{})).toString();return Je(`/feedback?${s}`)},updateFeedbackStatus:async(t,s)=>Je(`/feedback/${t}/status`,{method:"PUT",body:JSON.stringify({status:s})})},Hm={getHomeStats:async()=>Je("/public/stats"),getTestimonials:async t=>{const s=t?`?limit=${t}`:"";return Je(`/public/testimonials${s}`)}},Kn={getProtocols:async()=>Je("/safety-protocols/public"),uploadAttachment:async t=>{const s=new FormData;return s.append("attachment",t),Mu("/safety-protocols/upload",s)},createProtocol:async t=>Je("/safety-protocols",{method:"POST",body:JSON.stringify(t)}),updateProtocol:async(t,s)=>Je(`/safety-protocols/${t}`,{method:"PUT",body:JSON.stringify(s)}),deleteProtocol:async t=>Je(`/safety-protocols/${t}`,{method:"DELETE"})},xb={getStats:async()=>Je("/staff/dashboard/stats")},si={getNotifications:async(t,s)=>{const r=new URLSearchParams;t&&r.append("limit",t.toString()),s&&r.append("offset",s.toString());const a=r.toString();return Je(`/notifications${a?`?${a}`:""}`)},markAsRead:async t=>Je(`/notifications/${t}/read`,{method:"PUT"}),markAllAsRead:async()=>Je("/notifications/read-all",{method:"PUT"}),deleteNotification:async t=>Je(`/notifications/${t}`,{method:"DELETE"}),getSettings:async()=>Je("/notifications/settings"),updateSettings:async t=>Je("/notifications/settings",{method:"PUT",body:JSON.stringify(t)})};function vt({children:t,variant:s="primary",size:r="md",fullWidth:a=!1,disabled:n=!1,onClick:i,type:l="button",className:o=""}){const c="whitespace-nowrap cursor-pointer font-medium rounded-lg transition-all duration-200 flex items-center justify-center gap-2 focus:ring-4 focus:outline-none",d={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-100 disabled:bg-gray-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-100 disabled:bg-gray-300",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-100 disabled:border-gray-300 disabled:text-gray-400",ghost:"text-blue-600 hover:bg-blue-50 focus:ring-blue-100 disabled:text-gray-400"},u={sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"},f=a?"w-full":"";return e.jsx("button",{type:l,onClick:i,disabled:n,className:`${c} ${d[s]} ${u[r]} ${f} ${o}`,children:t})}function jl({isOpen:t,onClose:s,onConfirm:r,isLoading:a=!1}){return t?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:s}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all duration-300 scale-100 overflow-hidden",onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 px-6 py-8 text-center",children:e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Are You Sure?"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-center text-gray-700 mb-6",children:"Are you sure you want to sign out?"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(vt,{variant:"secondary",size:"lg",onClick:r,disabled:a,fullWidth:!0,children:a?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Signing out..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-logout-box-line mr-2"}),"Yes"]})}),e.jsxs(vt,{variant:"outline",size:"lg",onClick:s,disabled:a,fullWidth:!0,children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Cancel"]})]})]})]})})]}):null}const fb=({isOpen:t,onClose:s,alert:r})=>{if(!t||!r)return null;const a=l=>{switch(l){case"emergency":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-orange-600 bg-orange-50 border-orange-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},n=l=>{switch(l){case"emergency":return"ri-error-warning-fill";case"warning":return"ri-alarm-warning-line";case"info":return"ri-information-line";default:return"ri-notification-line"}},i=l=>{switch(l){case"emergency":return"Emergency Alert";case"warning":return"Warning Alert";case"info":return"Information Alert";default:return"Alert"}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-md transform overflow-hidden rounded-lg bg-white shadow-xl transition-all",children:[e.jsx("div",{className:`px-6 py-4 border-b ${a(r.severity)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a(r.severity)}`,children:e.jsx("i",{className:`${n(r.severity)} text-xl`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i(r.severity)}),e.jsx("p",{className:"text-sm text-gray-600",children:r.created_at?new Date(r.created_at).toLocaleString():"Unknown time"})]})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:r.title||"Alert Notification"}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:r.alert_type?r.alert_type.replace("_"," ").toUpperCase():"ALERT"})}),e.jsx("div",{className:"text-gray-700 leading-relaxed",children:r.description||r.message||"No description available"})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})})]})]})})};function ri({name:t,email:s,profilePicture:r,size:a="md",className:n="",showBadge:i=!1,badgeColor:l="green",badgeIcon:o="ri-check-line",onClick:c}){const d={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-16 h-16 text-xl","2xl":"w-20 h-20 text-2xl"},u={xs:"w-2 h-2",sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5",xl:"w-6 h-6","2xl":"w-8 h-8"},f={green:"bg-green-500",red:"bg-red-500",yellow:"bg-yellow-500",blue:"bg-blue-500"},g={xs:"-bottom-0.5 -right-0.5",sm:"-bottom-0.5 -right-0.5",md:"-bottom-1 -right-1",lg:"-bottom-1 -right-1",xl:"-bottom-2 -right-2","2xl":"-bottom-2 -right-2"},x=()=>{if(t){const S=t.trim().split(" ");return S.length>=2?`${S[0].charAt(0)}${S[1].charAt(0)}`.toUpperCase():S[0].charAt(0).toUpperCase()}return s?s.charAt(0).toUpperCase():"U"},y="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg text-white font-bold relative overflow-hidden",$=c?"cursor-pointer hover:shadow-xl transition-shadow duration-200":"",N=r?r.startsWith("http")?r:r.startsWith("/uploads")?`http://localhost:5000${r}`:r:null;return e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:`${y} ${d[a]} ${$} ${n}`,onClick:c,children:N?e.jsx("img",{src:N,alt:t||s||"Profile",className:"w-full h-full object-cover",onError:S=>{S.currentTarget.style.display="none"}}):x()}),i&&e.jsx("div",{className:`absolute ${g[a]} ${u[a]} ${f[l]} rounded-full border-2 border-white flex items-center justify-center`,children:e.jsx("i",{className:`${o} text-white text-xs`})})]})}const Ts=({isAuthenticated:t,userData:s})=>{const r=gs(),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(t||!1),[d,u]=b.useState(s||null),[f,g]=b.useState(null),[x,y]=b.useState(!1),[$,j]=b.useState(!1),[N,S]=b.useState(!1),[_,A]=b.useState(null),[P,M]=b.useState([]),[ne,V]=b.useState(!1),[L,Q]=b.useState(()=>{const J=localStorage.getItem("readNotifications");return J?new Set(JSON.parse(J)):new Set});b.useEffect(()=>{const J=Lt(),W=J.isAuthenticated&&J.userType==="user";c(W),u(W?J.userData:null),g(W?J.userType:null);const le=()=>{const he=Lt(),se=he.isAuthenticated&&he.userType==="user";c(se),u(se?he.userData:null),g(se?he.userType:null)};return window.addEventListener("storage",le),window.addEventListener("authStateChanged",le),()=>{window.removeEventListener("storage",le),window.removeEventListener("authStateChanged",le)}},[]),b.useEffect(()=>{localStorage.setItem("readNotifications",JSON.stringify([...L]))},[L]),b.useEffect(()=>{console.log("Auth state changed:",{isAuthenticated:o,userType:f}),o&&w()},[o]),b.useEffect(()=>{if(!o)return;const J=setInterval(()=>{w()},3e4);return()=>clearInterval(J)},[o]),b.useEffect(()=>{const J=le=>{le.key==="Escape"&&(a&&n(!1),i&&l(!1))},W=le=>{const he=le.target;i&&!he.closest(".profile-dropdown")&&l(!1),ne&&!he.closest(".notification-dropdown")&&V(!1)};return a?(document.addEventListener("keydown",J),document.body.style.overflow="hidden"):document.body.style.overflow="unset",(i||ne)&&(document.addEventListener("keydown",J),document.addEventListener("click",W)),()=>{document.removeEventListener("keydown",J),document.removeEventListener("click",W),document.body.style.overflow="unset"}},[a,i,ne]);const w=async()=>{if(!o){console.log("Not authenticated, skipping notification fetch");return}console.log("Fetching notifications for authenticated user");try{const J=await si.getNotifications(10,0);if(J.success&&Array.isArray(J.notifications)){M(J.notifications);const W=new Set(J.notifications.map(le=>le.id));Q(le=>new Set([...le].filter(se=>W.has(se))))}}catch(J){console.error("Failed to fetch notifications:",J),M([])}},R=()=>{ne||w(),V(!ne)},Z=async J=>{try{await si.markAsRead(J),Q(W=>new Set([...W,J]))}catch(W){console.error("Failed to mark notification as read:",W),Q(le=>new Set([...le,J]))}},I=async()=>{try{await si.markAllAsRead();const J=P.map(W=>W.id);Q(new Set(J))}catch(J){console.error("Failed to mark all notifications as read:",J);const W=P.map(le=>le.id);Q(new Set(W))}},re=P.filter(J=>!L.has(J.id)).length,ee=()=>{R(),l(!1)},ge=()=>{V(!1)},G=()=>{n(!a),l(!1),V(!1)},fe=()=>{n(!1)},ke=()=>{l(!i),n(!1)},X=()=>{l(!1)},k=J=>{if(X(),fe(),window.location.pathname==="/profile"){window.location.href=J;return}if(window.location.pathname===J){window.location.reload();return}try{r(J,{replace:!1})}catch(W){console.error("Navigation error:",W),window.location.href=J}},q=()=>{k("/profile")},T=()=>{y(!0),X(),fe()},B=async()=>{j(!0);try{await mb.logout(),Da(),r("/")}catch(J){console.error("Logout error:",J),Da(),r("/")}finally{j(!1),y(!1)}},F=()=>{y(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"bg-white/95 backdrop-blur-sm shadow-lg border-b border-gray-200 sticky top-0 z-50 transition-all duration-200",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center min-w-0 flex-shrink-0",children:e.jsx("img",{src:"/images/soterblue.png",alt:"Logo",className:"w-[130px] h-[130px] sm:w-[160px] sm:h-[160px] lg:w-[200px] lg:h-[200px] object-contain flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:()=>{if(window.location.pathname==="/"){const J=document.getElementById("hero-section");J&&J.scrollIntoView({behavior:"smooth"})}else k("/")}})}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-4 xl:space-x-6",children:[e.jsx("button",{onClick:()=>{if(window.location.pathname==="/"){const J=document.getElementById("hero-section");J&&J.scrollIntoView({behavior:"smooth"})}else k("/")},className:"text-gray-700 hover:text-blue-600 transition-colors font-medium text-sm xl:text-base whitespace-nowrap",children:"Home"}),e.jsx("button",{onClick:()=>k("/evacuation-center"),className:"text-gray-700 hover:text-blue-600 transition-colors font-medium text-sm xl:text-base whitespace-nowrap",children:"Evacuation Centers"}),e.jsx("button",{onClick:()=>k("/incident-report"),className:"text-gray-700 hover:text-blue-600 transition-colors font-medium text-sm xl:text-base whitespace-nowrap",children:"Report"}),e.jsx("button",{onClick:()=>{if(window.location.pathname==="/"){const J=document.getElementById("faq-section");J&&J.scrollIntoView({behavior:"smooth"})}else window.location.href="/#faq-section"},className:"text-gray-700 hover:text-blue-600 transition-colors font-medium text-sm xl:text-base whitespace-nowrap",children:"FAQs"})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-2 lg:space-x-4 min-w-0",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative notification-dropdown",children:[e.jsxs("button",{onClick:ee,className:"relative p-2 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 focus:outline-none",children:[e.jsx("i",{className:"ri-notification-line text-xl"}),re>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:re>9?"9+":re})]}),ne&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white border border-gray-200 rounded-lg shadow-xl z-50 cursor-pointer",onClick:()=>{ge(),k("/notifications")},children:[e.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),re>0&&e.jsx("button",{onClick:async J=>{J.stopPropagation(),await I()},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all as read"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:P.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-notification-off-line text-4xl text-gray-300"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"No notifications"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:P.map(J=>{const W=L.has(J.id)||J.is_read;return e.jsx("div",{onClick:async le=>{le.stopPropagation(),W||await Z(J.id),J.type==="safety_protocol"?(ge(),k("/safety-protocols")):J.type==="alert"?(ge(),A(J),S(!0)):J.type==="welfare"?(ge(),k("/welfare-check")):J.type==="system"&&(ge(),k("/history-report"))},className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${W?"":"bg-blue-50"}`,children:e.jsx("div",{className:"flex items-start space-x-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:J.title}),!W&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:J.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(J.created_at).toLocaleString()})]})})},J.id)})})})]})]}),e.jsxs("div",{className:"relative profile-dropdown",children:[e.jsxs("button",{onClick:ke,className:"flex items-center space-x-2 lg:space-x-3 px-2 lg:px-3 py-2 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 font-medium focus:outline-none group min-w-0",children:[e.jsx(ri,{name:d?.firstName&&d?.lastName?`${d.firstName} ${d.lastName}`:d?.first_name&&d?.last_name?`${d.first_name} ${d.last_name}`:void 0,email:d?.email,profilePicture:d?.profile_picture,size:"md",className:"flex-shrink-0"}),e.jsxs("div",{className:"hidden lg:block text-left min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-600 truncate max-w-32",children:(d?.firstName||d?.first_name)&&(d?.lastName||d?.last_name)?`${d.firstName||d.first_name} ${d.lastName||d.last_name}`:d?.email?.split("@")[0]||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate max-w-32",title:d?.email||"No email",children:d?.email||"No email"})]}),e.jsx("i",{className:`ri-arrow-down-s-line ml-1 transition-transform duration-200 ${i?"rotate-180":""} group-hover:text-blue-600 flex-shrink-0`})]}),i&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 sm:w-72 bg-white border border-gray-200 rounded-lg shadow-xl z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("div",{className:"px-4 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ri,{name:d?.firstName&&d?.lastName?`${d.firstName} ${d.lastName}`:d?.first_name&&d?.last_name?`${d.first_name} ${d.last_name}`:void 0,email:d?.email,profilePicture:d?.profile_picture,size:"lg",className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm sm:text-base truncate",children:(d?.firstName||d?.first_name)&&(d?.lastName||d?.last_name)?`${d.firstName||d.first_name} ${d.lastName||d.last_name}`:d?.email?.split("@")[0]||"User"}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm truncate",title:d?.email||"No email",children:d?.email||"No email provided"})]})]})}),e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:q,className:"flex items-center w-full text-left px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 group",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors",children:e.jsx("i",{className:"ri-user-settings-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Account Settings"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage your profile"})]})]}),e.jsxs("button",{onClick:()=>k("/history-report"),className:"flex items-center w-full text-left px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 group",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors",children:e.jsx("i",{className:"ri-file-list-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"History Report"}),e.jsx("p",{className:"text-xs text-gray-500",children:"View your incident reports"})]})]}),e.jsxs("button",{onClick:()=>k("/feedback"),className:"flex items-center w-full text-left px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 group",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors",children:e.jsx("i",{className:"ri-feedback-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Submit Feedback"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Share your thoughts"})]})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:T,className:"flex items-center w-full text-left px-4 py-3 text-gray-700 hover:bg-red-50 hover:text-red-600 transition-all duration-200 group",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-red-100 transition-colors",children:e.jsx("i",{className:"ri-logout-box-line text-gray-600 group-hover:text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Sign Out"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Logout from your account"})]})]})]})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-4",children:[e.jsx("button",{onClick:()=>k("/auth/login"),className:"text-gray-700 hover:text-blue-600 transition-colors font-medium text-sm lg:text-base whitespace-nowrap",children:"Sign In"}),e.jsxs("button",{onClick:()=>k("/auth/signup"),className:"bg-blue-600 text-white px-3 lg:px-6 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 font-medium text-sm lg:text-base whitespace-nowrap",children:[e.jsx("span",{className:"hidden lg:inline",children:"Get Started"}),e.jsx("span",{className:"lg:hidden",children:"Join"})]})]})}),e.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[o&&e.jsxs("div",{className:"relative notification-dropdown",children:[e.jsxs("button",{onClick:ee,className:"relative p-2 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 focus:outline-none",children:[e.jsx("i",{className:"ri-notification-line text-xl"}),re>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:re>9?"9+":re})]}),ne&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white border border-gray-200 rounded-lg shadow-xl z-50 cursor-pointer",onClick:()=>{ge(),k("/notifications")},children:[e.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),re>0&&e.jsx("button",{onClick:J=>{J.stopPropagation(),I()},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all as read"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:P.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-notification-off-line text-4xl text-gray-300"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"No notifications"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:P.map(J=>{const W=L.has(J.id)||J.is_read;return e.jsx("div",{onClick:async le=>{le.stopPropagation(),W||await Z(J.id),J.type==="safety_protocol"?(ge(),k("/safety-protocols")):J.type==="alert"?(ge(),A(J),S(!0)):J.type==="welfare"?(ge(),k("/welfare-check")):J.type==="system"&&(ge(),k("/history-report"))},className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${W?"":"bg-blue-50"}`,children:e.jsx("div",{className:"flex items-start space-x-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:J.title}),!W&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:J.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(J.created_at).toLocaleString()})]})})},J.id)})})})]})]}),e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none flex-shrink-0",onClick:G,"aria-label":"Toggle mobile menu",children:e.jsx("i",{className:`ri-${a?"close":"menu"}-line text-xl text-gray-700`})})]})]})})}),a&&e.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:fe}),e.jsx("div",{className:"fixed top-16 left-0 right-0 bg-white shadow-xl border-t border-gray-200 max-h-[calc(100vh-4rem)] overflow-y-auto",children:e.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-6 space-y-2",children:[e.jsxs("button",{onClick:()=>{if(window.location.pathname==="/"){const J=document.getElementById("hero-section");J&&J.scrollIntoView({behavior:"smooth"}),fe()}else k("/")},className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 font-medium",children:[e.jsx("i",{className:"ri-home-line text-lg mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Home"})]}),e.jsxs("button",{onClick:()=>k("/evacuation-center"),className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 font-medium",children:[e.jsx("i",{className:"ri-building-2-line text-lg mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Centers"})]}),e.jsxs("button",{onClick:()=>k("/incident-report"),className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 font-medium",children:[e.jsx("i",{className:"ri-error-warning-line text-lg mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Report"})]}),e.jsxs("button",{onClick:()=>{if(window.location.pathname==="/"){const J=document.getElementById("faq-section");J&&J.scrollIntoView({behavior:"smooth"})}else window.location.href="/#faq-section";fe()},className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 font-medium",children:[e.jsx("i",{className:"ri-question-line text-lg mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"FAQ"})]}),e.jsx("div",{className:"border-t border-gray-200 my-4"}),o?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"px-3 sm:px-4 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ri,{name:d?.firstName&&d?.lastName?`${d.firstName} ${d.lastName}`:d?.first_name&&d?.last_name?`${d.first_name} ${d.last_name}`:void 0,email:d?.email,profilePicture:d?.profile_picture,size:"lg",className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm sm:text-base truncate",children:d?.first_name&&d?.last_name?`${d.first_name} ${d.last_name}`:d?.email?.split("@")[0]||"User"}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm truncate",title:d?.email||"No email",children:d?.email||"No email provided"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1 flex-shrink-0"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Online"})]})]})]})}),e.jsxs("button",{onClick:()=>k("/profile"),className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors flex-shrink-0",children:e.jsx("i",{className:"ri-settings-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-sm sm:text-base",children:"Account Settings"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Manage your profile"})]})]}),e.jsxs("button",{onClick:()=>k("/history-report"),className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors flex-shrink-0",children:e.jsx("i",{className:"ri-file-list-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-sm sm:text-base",children:"History Report"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"View your incident reports"})]})]}),e.jsxs("button",{onClick:()=>k("/feedback"),className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors flex-shrink-0",children:e.jsx("i",{className:"ri-feedback-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-sm sm:text-base",children:"Submit Feedback"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Share your thoughts"})]})]}),e.jsxs("button",{onClick:T,className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-red-600 hover:bg-red-50 transition-all duration-200 group",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-red-100 transition-colors flex-shrink-0",children:e.jsx("i",{className:"ri-logout-box-line text-gray-600 group-hover:text-red-600"})}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-sm sm:text-base",children:"Sign Out"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Logout from your account"})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>k("/auth/login"),className:"flex items-center w-full px-3 sm:px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 font-medium",children:[e.jsx("i",{className:"ri-login-box-line text-lg mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Sign In"})]}),e.jsxs("button",{onClick:()=>k("/auth/signup"),className:"flex items-center justify-center w-full px-3 sm:px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg",children:[e.jsx("i",{className:"ri-user-add-line text-lg mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Get Started"})]})]})]})})]}),e.jsx(jl,{isOpen:x,onClose:F,onConfirm:B,isLoading:$}),e.jsx(fb,{isOpen:N,onClose:()=>S(!1),alert:_})]})},Vm=({items:t,itemsPerView:s=3,autoPlay:r=!0,autoPlayInterval:a=3e3,showDots:n=!0,showArrows:i=!0,className:l="",itemClassName:o="",renderItem:c})=>{const[d,u]=b.useState(0),[f,g]=b.useState(!1),x=Math.max(0,t.length-s);b.useEffect(()=>{if(r&&!f){const N=setInterval(()=>{u(S=>S>=x?0:S+1)},a);return()=>clearInterval(N)}},[r,a,f,x]);const y=()=>{u(N=>N<=0?x:N-1)},$=()=>{u(N=>N>=x?0:N+1)},j=N=>{u(Math.min(N,x))};return e.jsxs("div",{className:`relative ${l}`,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${d*(100/s)}%)`},children:t.map((N,S)=>e.jsx("div",{className:`flex-shrink-0 ${o}`,style:{width:`${100/s}%`},children:c(N,S)},S))})}),i&&t.length>s&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:y,className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 bg-white/90 hover:bg-white shadow-lg rounded-full p-2 transition-all duration-200 hover:scale-110 z-10","aria-label":"Previous slide",children:e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:$,className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 bg-white/90 hover:bg-white shadow-lg rounded-full p-2 transition-all duration-200 hover:scale-110 z-10","aria-label":"Next slide",children:e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),n&&t.length>s&&e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:x+1},(N,S)=>e.jsx("button",{onClick:()=>j(S),className:`w-2 h-2 rounded-full transition-all duration-200 ${S===d?"bg-blue-600 scale-125":"bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to slide ${S+1}`},S))})]})},gb=({value:t,duration:s=2e3,isVisible:r,suffix:a="",prefix:n="",className:i=""})=>{const[l,o]=b.useState(0),[c,d]=b.useState(!1);return b.useEffect(()=>{if(r&&!c){d(!0);const u=Date.now(),f=0,g=t,x=()=>{const y=Date.now()-u,$=Math.min(y/s,1),j=1-Math.pow(1-$,3),N=Math.floor(f+(g-f)*j);o(N),$<1?requestAnimationFrame(x):o(g)};requestAnimationFrame(x)}},[r,t,s,c]),b.useEffect(()=>{r&&d(!1)},[t,r]),e.jsxs("span",{className:i,children:[n,l.toLocaleString(),a]})};function tl({isOpen:t,onClose:s}){return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl mx-4 shadow-2xl max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-xl flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-shield-check-line text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Privacy Policy"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"MDRRMO Rosario, Batangas"})]})]}),e.jsx("button",{onClick:s,className:"text-white hover:text-blue-100 transition-colors p-2 hover:bg-white/20 rounded-lg",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-gray-600 text-lg leading-relaxed",children:["Last updated: ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"1. Information We Collect"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"We collect information you provide directly to us, such as when you:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Create an account or register for our services"}),e.jsx("li",{children:"Report incidents or emergencies"}),e.jsx("li",{children:"Submit welfare check information"}),e.jsx("li",{children:"Contact us for support or assistance"}),e.jsx("li",{children:"Participate in surveys or feedback forms"})]}),e.jsx("p",{children:"This may include your name, email address, phone number, location data, and emergency contact information."})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"2. How We Use Your Information"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"We use the information we collect to:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Provide emergency response services and assistance"}),e.jsx("li",{children:"Process and respond to incident reports"}),e.jsx("li",{children:"Send emergency alerts and safety notifications"}),e.jsx("li",{children:"Coordinate evacuation and welfare check procedures"}),e.jsx("li",{children:"Improve our services and emergency response capabilities"}),e.jsx("li",{children:"Comply with legal obligations and emergency protocols"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"3. Information Sharing"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"We may share your information with:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Emergency response agencies (PNP, BFP, Medical Services)"}),e.jsx("li",{children:"Local government units for disaster management"}),e.jsx("li",{children:"Healthcare providers during medical emergencies"}),e.jsx("li",{children:"Authorized personnel for evacuation coordination"})]}),e.jsx("p",{children:"We only share information when necessary for emergency response, public safety, or as required by law."})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"4. Data Security"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. This includes:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Encryption of sensitive data"}),e.jsx("li",{children:"Secure server infrastructure"}),e.jsx("li",{children:"Access controls and authentication"}),e.jsx("li",{children:"Regular security audits and updates"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"5. Your Rights"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"You have the right to:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Access your personal information"}),e.jsx("li",{children:"Correct inaccurate information"}),e.jsx("li",{children:"Request deletion of your data (subject to legal requirements)"}),e.jsx("li",{children:"Opt-out of non-emergency communications"}),e.jsx("li",{children:"File a complaint with relevant authorities"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"6. Data Retention"}),e.jsx("div",{className:"space-y-4 text-gray-700",children:e.jsx("p",{children:"We retain your information for as long as necessary to provide our services and comply with legal obligations. Emergency incident reports may be retained for historical and statistical purposes as required by disaster management protocols."})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"7. Contact Information"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"If you have questions about this Privacy Policy, please contact us:"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"MDRRMO Rosario, Batangas"})}),e.jsx("p",{children:"📍 Municipal Hall, Rosario, Batangas, Philippines"}),e.jsx("p",{children:"📞 (043) 311.2935"}),e.jsx("p",{children:"📧 mdrrmo@rosario.gov.ph"})]})})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"8. Changes to This Policy"}),e.jsx("div",{className:"space-y-4 text-gray-700",children:e.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.'})})]})]})})}),e.jsx("div",{className:"bg-gray-50 p-6 rounded-b-xl border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("i",{className:"ri-shield-check-line mr-2 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Your privacy is protected"})]}),e.jsx("button",{onClick:s,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-semibold shadow-md hover:shadow-lg",children:"Close"})]})})]})}):null}function sl({isOpen:t,onClose:s}){return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl mx-4 shadow-2xl max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white p-6 rounded-t-xl flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-file-text-line text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Terms of Service"}),e.jsx("p",{className:"text-green-100 text-sm",children:"MDRRMO Rosario, Batangas"})]})]}),e.jsx("button",{onClick:s,className:"text-white hover:text-green-100 transition-colors p-2 hover:bg-white/20 rounded-lg",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-gray-600 text-lg leading-relaxed",children:["Last updated: ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"1. Acceptance of Terms"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:'By accessing and using the MDRRMO Rosario Emergency Management System ("Service"), you accept and agree to be bound by the terms and provision of this agreement.'}),e.jsx("p",{children:"If you do not agree to abide by the above, please do not use this service."})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"2. Service Description"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"Our service provides:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Emergency incident reporting and tracking"}),e.jsx("li",{children:"Evacuation center information and routing"}),e.jsx("li",{children:"Safety protocols and emergency procedures"}),e.jsx("li",{children:"Welfare check and status reporting"}),e.jsx("li",{children:"Emergency alerts and notifications"}),e.jsx("li",{children:"Community safety resources and information"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"3. User Responsibilities"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"As a user of this service, you agree to:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Provide accurate and truthful information"}),e.jsx("li",{children:"Use the service only for legitimate emergency and safety purposes"}),e.jsx("li",{children:"Not submit false or misleading incident reports"}),e.jsx("li",{children:"Respect the privacy and safety of other users"}),e.jsx("li",{children:"Follow all applicable laws and regulations"}),e.jsx("li",{children:"Not interfere with or disrupt the service"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"4. Emergency Use"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Important:"})," This service is designed to complement, not replace, traditional emergency services."]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 text-xl mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-800 mb-2",children:"For Life-Threatening Emergencies:"}),e.jsx("p",{className:"text-red-700",children:"Call emergency hotlines directly:"}),e.jsxs("ul",{className:"list-disc pl-4 mt-2 text-red-700",children:[e.jsx("li",{children:"MDRRMO: (043) 311.2935"}),e.jsx("li",{children:"PNP: (043) 724.7026"}),e.jsx("li",{children:"BFP: (043) 312.1102"})]})]})]})})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"5. Account Registration"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"To access certain features, you may need to register for an account. You agree to:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Provide accurate registration information"}),e.jsx("li",{children:"Maintain the security of your account credentials"}),e.jsx("li",{children:"Notify us immediately of any unauthorized use"}),e.jsx("li",{children:"Accept responsibility for all activities under your account"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"6. Data and Privacy"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"Your privacy is important to us. Please review our Privacy Policy to understand how we collect, use, and protect your information."}),e.jsx("p",{children:"By using this service, you consent to the collection and use of your information as described in our Privacy Policy."})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"7. Service Availability"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"While we strive to maintain continuous service availability:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Service may be temporarily unavailable due to maintenance or technical issues"}),e.jsx("li",{children:"We do not guarantee uninterrupted access"}),e.jsx("li",{children:"Emergency services should not rely solely on this platform"}),e.jsx("li",{children:"We reserve the right to modify or discontinue features"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"8. Prohibited Uses"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"You may not use this service to:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Submit false emergency reports or information"}),e.jsx("li",{children:"Harass, threaten, or harm others"}),e.jsx("li",{children:"Violate any laws or regulations"}),e.jsx("li",{children:"Interfere with emergency response operations"}),e.jsx("li",{children:"Attempt to gain unauthorized access to systems"}),e.jsx("li",{children:"Distribute malware or harmful content"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"9. Limitation of Liability"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"MDRRMO Rosario and its affiliates shall not be liable for:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Service interruptions or technical failures"}),e.jsx("li",{children:"Delays in emergency response"}),e.jsx("li",{children:"Inaccurate information provided by third parties"}),e.jsx("li",{children:"Consequences of user actions based on service information"})]}),e.jsx("p",{children:'This service is provided "as is" without warranties of any kind.'})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"10. Termination"}),e.jsx("div",{className:"space-y-4 text-gray-700",children:e.jsx("p",{children:"We may terminate or suspend your access to the service immediately, without prior notice, for conduct that we believe violates these Terms of Service or is harmful to other users, us, or third parties."})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"11. Changes to Terms"}),e.jsx("div",{className:"space-y-4 text-gray-700",children:e.jsx("p",{children:"We reserve the right to modify these terms at any time. Changes will be effective immediately upon posting. Your continued use of the service constitutes acceptance of the modified terms."})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"12. Contact Information"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"For questions about these Terms of Service, contact us:"}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"MDRRMO Rosario, Batangas"})}),e.jsx("p",{children:"📍 Municipal Hall, Rosario, Batangas, Philippines"}),e.jsx("p",{children:"📞 (043) 311.2935"}),e.jsx("p",{children:"📧 mdrrmo@rosario.gov.ph"})]})})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"13. Governing Law"}),e.jsx("div",{className:"space-y-4 text-gray-700",children:e.jsx("p",{children:"These Terms of Service are governed by the laws of the Republic of the Philippines. Any disputes shall be resolved in the appropriate courts of Batangas Province."})})]})]})})}),e.jsx("div",{className:"bg-gray-50 p-6 rounded-b-xl border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("i",{className:"ri-file-text-line mr-2 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Terms effective immediately"})]}),e.jsx("button",{onClick:s,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-semibold shadow-md hover:shadow-lg",children:"Close"})]})})]})}):null}const pb=(t={})=>{const{threshold:s=.1,rootMargin:r="0px",triggerOnce:a=!0}=t,[n,i]=b.useState(!1),l=b.useRef(null);return b.useEffect(()=>{const o=l.current;if(!o)return;const c=new IntersectionObserver(([d])=>{d.isIntersecting?(i(!0),a&&c.unobserve(o)):a||i(!1)},{threshold:s,rootMargin:r});return c.observe(o),()=>{c.unobserve(o)}},[s,r,a]),{ref:l,isVisible:n}};function bb(){const t=gs(),[s,r]=b.useState(!1),[a,n]=b.useState(null),[i,l]=b.useState(!0),[o,c]=b.useState(!1),[d,u]=b.useState(!1),[f,g]=b.useState(!1),[x,y]=b.useState(0),[$,j]=b.useState({responders:0,evacuationCenters:0,residentsCovered:0,totalIncidents:0}),N={responders:25,evacuationCenters:8,residentsCovered:1500,totalIncidents:12},[S,_]=b.useState(!0),[A,P]=b.useState(null),[M,ne]=b.useState([]),[V,L]=b.useState(!0),[Q,w]=b.useState(null),[R,Z]=b.useState(3),[I,re]=b.useState(!1),{ref:ee}=pb({threshold:.2,rootMargin:"0px 0px -100px 0px",triggerOnce:!0});b.useEffect(()=>{const G=Lt();if(G.isAuthenticated){if(G.userType==="admin"){t("/admin");return}else if(G.userType==="staff"){t("/staff");return}}const fe=G.isAuthenticated&&G.userType==="user";r(fe),n(fe?G.userData:null),l(!1);const ke=()=>{const X=Lt();if(X.isAuthenticated){if(X.userType==="admin"){t("/admin");return}else if(X.userType==="staff"){t("/staff");return}}const k=X.isAuthenticated&&X.userType==="user";r(k),n(k?X.userData:null)};return window.addEventListener("storage",ke),window.addEventListener("authStateChanged",ke),()=>{window.removeEventListener("storage",ke),window.removeEventListener("authStateChanged",ke)}},[t]),b.useEffect(()=>{window.location.hash==="#faq-section"&&setTimeout(()=>{const G=document.getElementById("faq-section");G&&G.scrollIntoView({behavior:"smooth"})},100)},[]),b.useEffect(()=>{(async()=>{_(!0),P(null);try{const fe=await Hm.getHomeStats();if(fe.success){const ke=fe.stats;j({responders:ke?.staff?.total||0,evacuationCenters:ke?.evacuation_centers?.total||0,residentsCovered:ke?.users?.total||0,totalIncidents:ke?.incidents?.total||0})}else console.error("Stats API returned success: false",fe),P("Failed to load stats")}catch(fe){console.error("Error fetching stats:",fe),j(N),P("Using sample data - API unavailable")}finally{_(!1)}})()},[]),b.useEffect(()=>{(async()=>{L(!0),w(null);try{const fe=await Hm.getTestimonials(R);fe.success?ne(fe.testimonials):w("Failed to load testimonials")}catch{w("Failed to load testimonials")}finally{L(!1)}})()},[R]);const ge=[{name:"MDRRMO",description:"Municipal Disaster Risk Reduction & Management Office",number:"(043) 311.2935 | 703.2646 | 0917.133.9605",icon:"ri-shield-cross-line",logo:"/images/partners/MDRRMO.png",priority:"high"},{name:"PNP",description:"Municipal Police Station",number:"(043) 724.7026 | 0915.254.2577",icon:"ri-police-car-line",logo:"/images/partners/pnp.jpg",priority:"high"},{name:"BFP",description:"Municipal Fire Station",number:"(043) 312.1102 | 0915.602.4435",icon:"ri-fire-line",logo:"/images/partners/bfp.jpg",priority:"high"},{name:"RHU I",description:"Municipal Health Office",number:"(043) 740.1338 | 0908.280.1497",icon:"ri-hospital-line",logo:"/images/partners/mho.png",priority:"medium"},{name:"MSWDO",description:"Municipal Social Welfare & Development Office",number:"(043) 312.1367",icon:"ri-community-line",logo:"/images/partners/msdw.jpg",priority:"medium"},{name:"MVM Hospital",description:"Rosario District Hospital",number:"(043) 312.0411",icon:"ri-hospital-fill",logo:"/images/partners/mvm.jpg",priority:"medium"},{name:"BATELEC II - AREA II",description:"Batangas II Electric Cooperative Inc.",number:"0917.550.0754 | 0998.548.6153",icon:"ri-flashlight-line",logo:"/images/partners/batelec.jpg",priority:"medium"},{name:"PRC",description:"Philippine Red Cross Batangas Chapter - Lipa City Branch",number:"(043) 740.0768 | 0917.142.9378",icon:"ri-first-aid-kit-line",logo:"/images/partners/prc.png",priority:"medium"}];return i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl flex items-center justify-center mx-auto mb-6 animate-pulse",children:e.jsx("i",{className:"ri-shield-check-line text-3xl md:text-4xl text-blue-600"})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:"Loading..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your access"})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[e.jsx(Ts,{isAuthenticated:s,userData:a}),e.jsxs("div",{id:"hero-section",className:"relative overflow-hidden",children:[e.jsxs("div",{className:"relative h-[500px] md:h-[700px] lg:h-[800px] bg-gradient-to-r from-blue-900/90 to-blue-800/80",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/images/rosario-hero.png')"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/90 to-blue-800/85"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_40%,rgba(255,255,255,0.1),transparent_50%)]"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:e.jsx("div",{className:"max-w-5xl",children:s?e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-white/95 backdrop-blur-sm rounded-2xl mb-6 md:mb-8 shadow-2xl border border-white/20",children:e.jsx("i",{className:"ri-shield-check-line text-2xl md:text-3xl lg:text-4xl text-blue-600"})}),e.jsxs("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-bold text-white mb-4 md:mb-6 leading-tight text-balance",children:["Welcome back to",e.jsx("span",{className:"block text-yellow-300 bg-gradient-to-r from-yellow-300 to-yellow-400 bg-clip-text text-transparent",children:"SoteROS Emergency Hub"})]}),e.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-blue-100 max-w-3xl mb-8 md:mb-10 leading-relaxed text-pretty",children:"Your comprehensive emergency management dashboard is ready. Access real-time incident tracking, evacuation routing, and safety protocols."})]}):e.jsxs("div",{className:"text-left",children:[e.jsxs("h1",{className:"text-3xl md:text-5xl lg:text-7xl font-bold text-white mb-3 md:mb-4 leading-tight text-balance",children:["Municipal Disaster Risk Reduction",e.jsx("span",{className:"block text-yellow-300 bg-gradient-to-r from-yellow-300 to-yellow-400 bg-clip-text text-transparent",children:"& Management Office"})]}),e.jsx("h2",{className:"text-xl md:text-3xl lg:text-4xl font-semibold text-blue-200 mb-6 md:mb-8",children:"Rosario, Batangas"}),e.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-blue-100 max-w-4xl mb-8 md:mb-12 leading-relaxed text-pretty",children:"Committed to protecting and serving our community through comprehensive disaster preparedness, rapid emergency response, and proactive public safety management."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 md:gap-6",children:[e.jsx("a",{href:"#services",onClick:G=>{G.preventDefault();const fe=document.getElementById("services");fe&&fe.scrollIntoView({behavior:"smooth"})},className:"bg-gradient-to-r from-yellow-500 to-yellow-400 hover:from-yellow-400 hover:to-yellow-300 text-blue-900 px-8 py-4 md:px-10 md:py-5 rounded-xl font-bold text-lg md:text-xl transition-all duration-300 shadow-2xl hover:shadow-yellow-500/25 hover:-translate-y-1 text-center",children:"Emergency Services"}),e.jsx("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white px-8 py-4 md:px-10 md:py-5 rounded-xl font-bold text-lg md:text-xl transition-all duration-300 shadow-2xl hover:shadow-red-500/25 hover:-translate-y-1 text-center",children:"Emergency Hotline"})]})]})})})})]}),e.jsx("div",{id:"services",className:"bg-white py-20 md:py-28",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16 md:mb-20",children:[e.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-4 md:mb-6 text-balance",children:s?`Welcome back, ${a?.firstName||"User"}!`:"Emergency Services"}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 md:mb-16 max-w-4xl mx-auto text-pretty",children:s?"Access your emergency management tools":"Comprehensive disaster risk reduction and emergency response services for Rosario, Batangas"})]}),e.jsx("div",{className:"max-w-7xl mx-auto",children:s?e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 mb-16 md:mb-20",children:[a?.userType==="staff"&&e.jsxs(kt,{to:"/staff",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-purple-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-dashboard-3-line text-3xl md:text-4xl text-purple-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Staff Dashboard"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"Access your staff dashboard with emergency management tools"}),e.jsxs("div",{className:"flex items-center text-purple-600 group-hover:text-purple-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Go to Dashboard"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]}),e.jsxs(kt,{to:"/incident-report",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-red-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-red-100 to-red-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-error-warning-line text-3xl md:text-4xl text-red-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Report Incident"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"Submit emergency incidents and safety concerns with real-time tracking"}),e.jsxs("div",{className:"flex items-center text-red-600 group-hover:text-red-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Report Now"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]}),e.jsxs(kt,{to:"/evacuation-center",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-blue-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-building-2-line text-3xl md:text-4xl text-blue-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Evacuation Centers"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"Find nearby evacuation centers with real-time capacity and status updates"}),e.jsxs("div",{className:"flex items-center text-blue-600 group-hover:text-blue-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"View Centers"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]}),e.jsxs(kt,{to:"/safety-protocols",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-green-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-shield-check-line text-3xl md:text-4xl text-green-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Safety Protocols"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"Access comprehensive emergency procedures and safety guidelines"}),e.jsxs("div",{className:"flex items-center text-green-600 group-hover:text-green-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"View Protocols"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]}),e.jsxs(kt,{to:"/welfare-check",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-purple-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-heart-pulse-line text-3xl md:text-4xl text-purple-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Welfare Check"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"Report your status and location during emergencies for safety tracking"}),e.jsxs("div",{className:"flex items-center text-purple-600 group-hover:text-purple-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Check In"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 mb-16 md:mb-20",children:[e.jsxs(kt,{to:"/evacuation-center",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-blue-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-building-2-line text-3xl md:text-4xl text-blue-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Evacuation Centers"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"View available evacuation centers in Rosario, Batangas with capacity and contact information"}),e.jsxs("div",{className:"flex items-center text-blue-600 group-hover:text-blue-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"View Centers"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]}),e.jsxs(kt,{to:"/safety-protocols",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-green-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-shield-check-line text-3xl md:text-4xl text-green-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Safety Protocols"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"Access emergency procedures and safety guidelines for various disaster scenarios"}),e.jsxs("div",{className:"flex items-center text-green-600 group-hover:text-green-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"View Protocols"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]}),e.jsxs(kt,{to:"/incident-report",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-red-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-red-100 to-red-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-error-warning-line text-3xl md:text-4xl text-red-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Report Incident"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"Report emergencies and safety concerns to MDRRMO Rosario"}),e.jsxs("div",{className:"flex items-center text-red-600 group-hover:text-red-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Report Now"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]}),e.jsxs(kt,{to:"/welfare-check",className:"bg-white border-2 border-gray-100 rounded-2xl p-6 md:p-8 hover:shadow-2xl hover:border-purple-200 transition-all duration-300 cursor-pointer group hover:-translate-y-2 flex flex-col h-full",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300",children:e.jsx("i",{className:"ri-heart-pulse-line text-3xl md:text-4xl text-purple-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3 md:mb-4",children:"Welfare Check"}),e.jsx("p",{className:"text-gray-600 mb-6 md:mb-8 text-lg leading-relaxed flex-grow",children:"Report your status and location during emergencies for safety tracking"}),e.jsxs("div",{className:"flex items-center text-purple-600 group-hover:text-purple-700 mt-auto",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Check In"}),e.jsx("i",{className:"ri-arrow-right-line ml-3 group-hover:translate-x-2 transition-transform duration-300"})]})]})]}),e.jsxs("div",{className:"text-center bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-10 md:p-12 shadow-xl",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-user-add-line text-3xl text-blue-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4 md:mb-6",children:"Join Our Emergency Response Network"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8 md:mb-10 max-w-2xl mx-auto leading-relaxed",children:"Sign up to access advanced features, submit reports, and receive real-time emergency alerts for Rosario, Batangas"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 md:gap-6 justify-center",children:[e.jsx(kt,{to:"/auth/signup",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-4 md:px-10 rounded-xl transition-all duration-300 font-semibold shadow-xl hover:shadow-blue-500/25 hover:-translate-y-1 text-lg",children:"Create Account"}),e.jsx(kt,{to:"/auth/login",className:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 px-8 py-4 md:px-10 rounded-xl transition-all duration-300 font-semibold hover:-translate-y-1 text-lg",children:"Sign In"})]})]})]})})]})}),e.jsx("section",{className:"bg-gradient-to-b from-white to-slate-50 py-20 md:py-28",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8",children:[{icon:"ri-timer-flash-line",title:"Rapid Response",desc:"Coordinated, time-critical incident handling",color:"from-orange-100 to-orange-200",iconColor:"text-orange-600"},{icon:"ri-hotel-line",title:"Evacuation Centers",desc:"Nearby designated safe shelters with capacity info",color:"from-blue-100 to-blue-200",iconColor:"text-blue-600"},{icon:"ri-shield-star-line",title:"Safety Protocols",desc:"Up-to-date, practical safety guidance",color:"from-green-100 to-green-200",iconColor:"text-green-600"},{icon:"ri-bar-chart-2-line",title:"Live Insights",desc:"Data-driven decisions and monitoring",color:"from-purple-100 to-purple-200",iconColor:"text-purple-600"}].map((G,fe)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border-2 border-gray-100 rounded-2xl p-8 md:p-10 hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 group",children:[e.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-gradient-to-br ${G.color} ${G.iconColor} flex items-center justify-center mb-6 md:mb-8 group-hover:scale-110 transition-all duration-300`,children:e.jsx("i",{className:`${G.icon} text-2xl md:text-3xl`})}),e.jsx("h4",{className:"font-bold text-xl md:text-2xl text-gray-900 mb-3 md:mb-4",children:G.title}),e.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:G.desc})]},fe))})})}),e.jsx("section",{ref:ee,className:"bg-gradient-to-br from-slate-50 to-blue-50 py-20 md:py-28",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:S?e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8",children:[1,2,3,4].map(G=>e.jsx("div",{className:"bg-gray-50 rounded-xl p-6 md:p-8 animate-pulse",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded"})}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-20 mx-auto mb-2"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-24 mx-auto"})]})},G))}):A?e.jsxs("div",{className:"text-center bg-white rounded-3xl shadow-xl border-2 border-gray-100 p-12 md:p-16",children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-information-line text-3xl text-yellow-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Using Sample Data"}),e.jsx("p",{className:"text-gray-600 text-lg",children:A.includes("sample data")?"Displaying sample statistics while we connect to our database.":"We're experiencing technical difficulties. Please try again later."})]}):e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8",children:[{label:"Responders",value:`${$.responders}+`,icon:"ri-user-star-line",color:"text-blue-600",bgColor:"bg-blue-50",iconBg:"bg-blue-100"},{label:"Evacuation Centers",value:$.evacuationCenters.toString(),icon:"ri-building-2-line",color:"text-green-600",bgColor:"bg-green-50",iconBg:"bg-green-100"},{label:"Residents Covered",value:`${$.residentsCovered}+`,icon:"ri-shield-user-line",color:"text-purple-600",bgColor:"bg-purple-50",iconBg:"bg-purple-100"},{label:"Total Incidents",value:$.totalIncidents.toString(),icon:"ri-alert-line",color:"text-red-600",bgColor:"bg-red-50",iconBg:"bg-red-100"}].map((G,fe)=>e.jsx("div",{className:`${G.bgColor} rounded-xl p-6 md:p-8 hover:shadow-lg transition-all duration-300 group`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 ${G.iconBg} rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300`,children:e.jsx("i",{className:`${G.icon} text-2xl ${G.color}`})}),e.jsx("div",{className:`text-3xl md:text-4xl font-bold ${G.color} mb-2`,children:e.jsx(gb,{value:parseInt(G.value.replace(/[^\d]/g,"")),isVisible:!0,duration:2e3,suffix:G.value.includes("+")?"+":"",className:"inline-block"})}),e.jsx("div",{className:"text-gray-700 font-medium text-lg",children:G.label})]})},fe))})})}),e.jsx("section",{className:"bg-gradient-to-b from-blue-50 to-white py-20 md:py-28",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:[e.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[e.jsx("h3",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Community Voices"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Real feedback from residents and responders"})]}),V?e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[1,2,3].map(G=>e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-100 p-8 md:p-10 shadow-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded mb-4 animate-pulse"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4 animate-pulse"})]}),e.jsx("div",{className:"mt-6 h-5 bg-gray-200 rounded w-1/2 animate-pulse"})]},G))}):Q?e.jsxs("div",{className:"text-center bg-white rounded-2xl border-2 border-gray-100 p-12 shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-error-warning-line text-red-500 text-2xl"})}),e.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Unable to Load Testimonials"}),e.jsx("p",{className:"text-gray-600",children:"We're experiencing technical difficulties. Please try again later."})]}):M.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:M.map(G=>e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-100 p-8 md:p-10 shadow-lg hover:shadow-2xl hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("i",{className:"ri-double-quotes-l text-2xl md:text-3xl text-blue-600"}),e.jsx("div",{className:"ml-auto flex",children:[...Array(5)].map((fe,ke)=>e.jsx("i",{className:`ri-star-${ke<G.rating?"fill":"line"} text-yellow-400 text-lg`},ke))})]}),e.jsx("p",{className:"text-gray-700 text-lg mb-6 leading-relaxed italic",children:G.quote}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:G.name}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:G.type==="Staff"?G.department:G.type})]},G.id))}),M.length>0&&e.jsx("div",{className:"text-center mt-10",children:e.jsx("button",{onClick:()=>{Z(I?3:1e3),re(!I)},className:"inline-flex items-center text-blue-600 px-8 py-4 font-semibold text-lg hover:bg-blue-50 rounded-xl transition-all duration-300",children:I?e.jsxs(e.Fragment,{children:["Back to Less",e.jsx("i",{className:"ri-arrow-up-s-line ml-2"})]}):e.jsxs(e.Fragment,{children:["See More",e.jsx("i",{className:"ri-arrow-down-s-line ml-2"})]})})})]}):e.jsxs("div",{className:"text-center bg-white rounded-2xl border-2 border-gray-100 p-12 shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-chat-voice-line text-blue-500 text-2xl"})}),e.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No Testimonials Yet"}),e.jsx("p",{className:"text-gray-600",children:"Testimonials will appear here once community members share their feedback."})]})]})}),e.jsx("section",{className:"bg-white py-16 md:py-20",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:[e.jsx("div",{className:"text-center text-gray-600 mb-8 md:mb-12 font-semibold text-lg",children:"In partnership with"}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Vm,{items:[{name:"LGU",image:"/images/partners/lgu-pt.png",alt:"Local Government Unit"},{name:"MDRRMO",image:"/images/partners/MDRRMO.png",alt:"MDRRMO  "},{name:"BFP",image:"/images/partners/bfp.jpg",alt:"Bureau of Fire Protection"},{name:"PNP",image:"/images/partners/pnp.jpg",alt:"Philippine National Police"},{name:"SOTEROS",image:"/images/soterblue.png",alt:"Philippine National Police"},{name:"RedCross",image:"/images/partners/prc.png",alt:"Philippine Red Cross"},{name:"MHo",image:"/images/partners/mho.png",alt:"MHO"},{name:"MSWDO",image:"/images/partners/msdw.jpg",alt:"MSWDO"},{name:"MVM Hospital",image:"/images/partners/mvm.jpg",alt:"MVM Hospital"},{name:"BATELEC II - AREA II",image:"/images/partners/batelec.jpg",alt:"BATELEC II - AREA II"}],itemsPerView:6,autoPlay:!0,autoPlayInterval:3e3,showDots:!0,showArrows:!1,className:"opacity-90",itemClassName:"px-2",renderItem:(G,fe)=>e.jsxs("div",{className:"h-32 w-32 md:h-40 md:w-40 lg:h-44 lg:w-44 bg-gray-50 rounded-2xl flex items-center justify-center mx-auto overflow-hidden border-2 border-gray-200 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300",children:[e.jsx("img",{src:G.image||"/placeholder.svg",alt:G.alt,className:"h-full w-full object-contain p-4",onError:ke=>{const X=ke.currentTarget;X.style.display="none";const k=X.nextElementSibling;k&&(k.style.display="flex")}}),e.jsx("div",{className:"hidden items-center justify-center text-gray-500 font-semibold text-center",children:G.name})]},fe)})}),e.jsx("div",{className:"block sm:hidden",children:e.jsx(Vm,{items:[{name:"LGU",image:"/images/partners/lgu-pt.png",alt:"Local Government Unit"},{name:"MDRRMO",image:"/images/partners/MDRRMO.png",alt:"MDRRMO  "},{name:"BFP",image:"/images/partners/bfp.jpg",alt:"Bureau of Fire Protection"},{name:"PNP",image:"/images/partners/pnp.jpg",alt:"Philippine National Police"},{name:"RedCross",image:"/images/partners/prc.png",alt:"Philippine Red Cross"},{name:"MHo",image:"/images/partners/mho.png",alt:"MHO"},{name:"MSWDO",image:"/images/partners/msdw.jpg",alt:"MSWDO"},{name:"MVM Hospital",image:"/images/partners/mvm.jpg",alt:"MVM Hospital"},{name:"BATELEC II - AREA II",image:"/images/partners/batelec.jpg",alt:"BATELEC II - AREA II"}],itemsPerView:2,autoPlay:!0,autoPlayInterval:3e3,showDots:!0,showArrows:!1,className:"opacity-90",itemClassName:"px-2",renderItem:(G,fe)=>e.jsxs("div",{className:"h-32 w-32 bg-gray-50 rounded-2xl flex items-center justify-center mx-auto overflow-hidden border-2 border-gray-200 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300",children:[e.jsx("img",{src:G.image||"/placeholder.svg",alt:G.alt,className:"h-full w-full object-contain p-4",onError:ke=>{const X=ke.currentTarget;X.style.display="none";const k=X.nextElementSibling;k&&(k.style.display="flex")}}),e.jsx("div",{className:"hidden items-center justify-center text-gray-500 font-semibold text-center",children:G.name})]},fe)})})]})}),e.jsx("section",{id:"faq-section",className:"bg-gradient-to-br from-slate-50 via-white to-blue-50 py-20 md:py-28",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 md:gap-16 items-start",children:[e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -top-4 -left-4 w-24 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full opacity-50"}),e.jsx("div",{className:"absolute -bottom-4 -right-4 w-16 h-16 bg-gradient-to-br from-green-100 to-blue-100 rounded-full opacity-50"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-3xl p-8 md:p-10 shadow-xl border border-white/20",children:[e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full mb-6",children:[e.jsx("i",{className:"ri-customer-service-2-line text-blue-600 mr-2"}),e.jsx("span",{className:"text-blue-700 font-semibold text-sm",children:"Support"})]}),e.jsxs("h3",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Frequently Asked",e.jsx("span",{className:"block text-transparent bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text",children:"Questions"})]}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed mb-8",children:"Everything you need to know about emergency services and disaster preparedness. Get instant answers to common questions about our emergency management platform."})]})]})}),e.jsx("div",{className:"space-y-4",children:[{q:"How do I report an emergency?",a:"Click Report Incident, describe the situation, and submit your location. Our team will respond immediately to your emergency report.",icon:"ri-error-warning-line",color:"from-red-500 to-pink-500"},{q:"Where can I find evacuation centers?",a:"Go to Evacuation Centers to see locations, capacity, and contact info. All centers are updated in real-time with current availability.",icon:"ri-building-2-line",color:"from-blue-500 to-cyan-500"},{q:"Do I need an account?",a:"Browsing is open; creating an account enables alerts and faster reporting. You can access most features without registration.",icon:"ri-user-line",color:"from-green-500 to-emerald-500"},{q:"What should I do during a typhoon?",a:"Stay indoors, avoid flooded areas, monitor weather updates, and follow evacuation orders if issued. Keep emergency supplies ready.",icon:"ri-typhoon-line",color:"from-orange-500 to-red-500"},{q:"How can I check if my family is safe?",a:"Use the Welfare Check feature to report your status and location during emergencies. This helps us track community safety.",icon:"ri-heart-pulse-line",color:"from-purple-500 to-pink-500"},{q:"What emergency numbers should I call?",a:"MDRRMO: (043) 311.2935, PNP: (043) 724.7026, BFP: (043) 312.1102. Click Emergency Hotline for full list of contacts.",icon:"ri-phone-line",color:"from-indigo-500 to-blue-500"},{q:"How do I prepare for disasters?",a:"Create an emergency kit, know evacuation routes, stay informed through our alerts, and follow safety protocols provided on our platform.",icon:"ri-shield-star-line",color:"from-teal-500 to-green-500"},{q:"Is this service available 24/7?",a:"Yes, our emergency reporting system is available 24/7. Emergency hotlines are also monitored around the clock for immediate response.",icon:"ri-time-line",color:"from-amber-500 to-orange-500"}].map((G,fe)=>e.jsxs("div",{className:"group bg-white rounded-2xl border border-gray-100 hover:border-gray-200 hover:shadow-lg transition-all duration-300 overflow-hidden",children:[e.jsxs("button",{className:"w-full flex items-center justify-between p-6 text-left hover:bg-gray-50/50 transition-colors duration-200",onClick:()=>y(x===fe?null:fe),"aria-expanded":x===fe,children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${G.color} rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-200`,children:e.jsx("i",{className:`${G.icon} text-white text-lg`})}),e.jsx("span",{className:"font-semibold text-gray-900 text-lg pr-4 leading-tight",children:G.q})]}),e.jsx("div",{className:"w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-all duration-200 flex-shrink-0 group-hover:scale-110",children:e.jsx("i",{className:`ri-${x===fe?"subtract":"add"}-line text-gray-600 text-lg transition-transform duration-200`})})]}),x===fe&&e.jsx("div",{className:"px-6 pb-6",children:e.jsx("div",{className:"ml-16 border-l-2 border-gray-100 pl-6",children:e.jsx("p",{className:"text-gray-600 text-base leading-relaxed",children:G.a})})})]},fe))})]})})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md mx-4 shadow-2xl max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-4 rounded-t-xl flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center mr-3",children:e.jsx("img",{src:"/images/partners/MDRRMO.png",alt:"MDRRMO Logo",className:"w-8 h-8 object-contain rounded-full"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Emergency Hotlines"}),e.jsx("p",{className:"text-red-100 text-xs",children:"MDRRMO Rosario, Batangas"})]})]}),e.jsx("button",{onClick:()=>c(!1),className:"text-white hover:text-red-100 transition-colors p-2 hover:bg-white/20 rounded-lg",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-600 mr-2"}),"High Priority Contacts"]}),e.jsx("div",{className:"space-y-3",children:ge.filter(G=>G.priority==="high").map((G,fe)=>e.jsx("div",{className:"border border-red-200 bg-red-50 rounded-lg p-3 transition-all hover:shadow-md hover:border-red-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("img",{src:G.logo||"/placeholder.svg",alt:`${G.name} Logo`,className:"w-8 h-8 object-contain rounded-full"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h5",{className:"font-semibold text-gray-900 text-sm mb-1 truncate",children:G.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:G.description}),e.jsx("p",{className:"text-base font-bold text-red-600",children:G.number})]})]}),e.jsxs("a",{href:`tel:${G.number.replace(/\s/g,"")}`,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg font-semibold transition-all text-xs flex items-center ml-2 flex-shrink-0",children:[e.jsx("i",{className:"ri-phone-line mr-1"}),"Call"]})]})},fe))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center",children:[e.jsx("i",{className:"ri-information-line text-blue-600 mr-2"}),"Support Contacts"]}),e.jsx("div",{className:"space-y-3",children:ge.filter(G=>G.priority==="medium").map((G,fe)=>e.jsx("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-3 transition-all hover:shadow-md hover:border-blue-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("img",{src:G.logo||"/placeholder.svg",alt:`${G.name} Logo`,className:"w-8 h-8 object-contain rounded-full"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h5",{className:"font-semibold text-gray-900 text-sm mb-1 truncate",children:G.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:G.description}),e.jsx("p",{className:"text-base font-bold text-blue-600",children:G.number})]})]}),e.jsxs("a",{href:`tel:${G.number.replace(/\s/g,"")}`,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg font-semibold transition-all text-xs flex items-center ml-2 flex-shrink-0",children:[e.jsx("i",{className:"ri-phone-line mr-1"}),"Call"]})]})},fe))})]}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("i",{className:"ri-information-line text-yellow-600 text-sm"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 text-sm mb-2",children:"Emergency Guidelines"}),e.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"ri-check-line text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),"Stay calm and provide clear information"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"ri-check-line text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),"Give your exact location and landmarks"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"ri-check-line text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),"Follow emergency responder instructions"]})]})]})]})})]})}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-b-xl border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("i",{className:"ri-time-line mr-2 text-blue-500 text-sm"}),e.jsx("span",{className:"text-xs font-medium",children:"24/7 Available"})]}),e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors font-semibold text-sm shadow-md hover:shadow-lg",children:"Close"})]})})]})}),e.jsxs("footer",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white",children:[e.jsx("div",{className:"py-16 md:py-20",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-12",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-12 h-12  flex items-center justify-center mr-4",children:e.jsx("img",{src:"/images/partners/MDRRMO.png",alt:"Logo",className:"w-40 h-50 rounded-lg shadow-md object-contain"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"MDRRMO Rosario"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Batangas Province"})]})]}),e.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed max-w-md",children:"Municipal Disaster Risk Reduction & Management Office committed to protecting and serving our community through comprehensive disaster preparedness and emergency response."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://www.facebook.com/RosarioMDRRMO",className:"w-10 h-10 bg-gray-700 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors duration-300",children:e.jsx("i",{className:"ri-facebook-fill text-lg"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors duration-300",children:e.jsx("i",{className:"ri-twitter-fill text-lg"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors duration-300",children:e.jsx("i",{className:"ri-instagram-line text-lg"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-6",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx(kt,{to:"/",onClick:()=>{console.log("Home link clicked, navigating to /"),setTimeout(()=>{window.scrollTo(0,0)},100)},className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Home"})}),e.jsx("li",{children:e.jsx(kt,{to:"/evacuation-center",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Evacuation Centers"})}),e.jsx("li",{children:e.jsx(kt,{to:"/safety-protocols",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Safety Protocols"})}),e.jsx("li",{children:e.jsx(kt,{to:"/incident-report",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Report Incident"})}),e.jsx("li",{children:e.jsx(kt,{to:"/about",onClick:()=>{console.log("About link clicked, navigating to /about"),setTimeout(()=>{window.scrollTo(0,0)},100)},className:"text-gray-300 hover:text-white transition-colors duration-300",children:"About"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-6",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-map-pin-line text-blue-400 mt-1 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 text-sm",children:"Municipal Hall, Rosario"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Batangas, Philippines"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-phone-line text-blue-400 mr-3"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"(043) 311.2935"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-mail-line text-blue-400 mr-3"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"mdrrmo@rosario.gov.ph"})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>c(!0),className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors duration-300 text-sm",children:"Emergency Hotlines"})})]})]})]})})}),e.jsx("div",{className:"border-t border-gray-700 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx("div",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:"© 2024 MDRRMO Rosario, Batangas. All rights reserved."}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-sm",children:[e.jsx("button",{onClick:()=>u(!0),className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Privacy Policy"}),e.jsx("button",{onClick:()=>g(!0),className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Terms of Service"})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:["Made with ",e.jsx("span",{className:"text-red-500",children:"❤️"})," in the Philippines"]})})]})})]}),e.jsx(tl,{isOpen:d,onClose:()=>u(!1)}),e.jsx(sl,{isOpen:f,onClose:()=>g(!1)})]})}function qt({label:t,type:s="text",placeholder:r,value:a,onChange:n,onBlur:i,error:l,required:o=!1,disabled:c=!1,name:d,id:u,autoComplete:f,icon:g}){const[x,y]=b.useState(!1),[$,j]=b.useState(!1),N=s==="password"&&x?"text":s;return e.jsxs("div",{className:"w-full",children:[t&&e.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:[t," ",o&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[g&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("div",{className:"w-5 h-5 text-gray-400",children:g})}),e.jsx("input",{type:N,id:u,name:d,value:a,onChange:n,onFocus:()=>j(!0),onBlur:S=>{j(!1),i?.(S)},placeholder:r,required:o,disabled:c,autoComplete:f,className:`w-full px-3 py-2.5 text-sm border rounded-lg focus:ring-2 focus:outline-none transition-all duration-200 ${g?"pl-10":""} ${s==="password"?"pr-10":""} ${l?"border-red-300 focus:border-red-500 focus:ring-red-100":$?"border-blue-500 focus:ring-blue-100":"border-gray-300 hover:border-gray-400"} ${c?"bg-gray-50 cursor-not-allowed":"bg-white"}`}),s==="password"&&e.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",children:e.jsx("div",{className:"w-5 h-5 text-gray-400 hover:text-gray-600",children:x?e.jsx("i",{className:"ri-eye-off-line"}):e.jsx("i",{className:"ri-eye-line"})})})]}),l&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx("i",{className:"ri-error-warning-line"}),l]})]})}function Vx({label:t,checked:s,onChange:r,disabled:a=!1,name:n,id:i}){return e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:i,name:n,checked:s,onChange:l=>r(l.target.checked),disabled:a,className:"w-4 h-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer disabled:cursor-not-allowed"}),e.jsx("label",{htmlFor:i,className:`ml-2 text-sm cursor-pointer ${a?"text-gray-400 cursor-not-allowed":"text-gray-700"}`,children:t})]})}function Cn(t,s={}){const[r,a]=b.useState(()=>{const g={};return Object.keys(t).forEach(x=>{g[x]={value:t[x],error:"",touched:!1}}),g}),[n,i]=b.useState(!1),l=b.useCallback((g,x)=>{const y=s[g];return y?y.required&&(!x||typeof x=="string"&&x.trim()==="")?`${String(g)} is required`:y.minLength&&typeof x=="string"&&x.length<y.minLength?`${String(g)} must be at least ${y.minLength} characters`:y.maxLength&&typeof x=="string"&&x.length>y.maxLength?`${String(g)} must not exceed ${y.maxLength} characters`:y.pattern&&typeof x=="string"&&!y.pattern.test(x)?`${String(g)} format is invalid`:y.custom&&y.custom(x)||"":""},[s]),o=b.useCallback((g,x)=>{a(y=>({...y,[g]:{...y[g],value:x,error:l(g,x),touched:!0}}))},[l]),c=b.useCallback((g,x)=>{a(y=>({...y,[g]:{...y[g],error:x}}))},[]),d=b.useCallback(()=>{let g=!1;const x={...r};return Object.keys(r).forEach(y=>{const $=y,j=l($,r[$].value);x[$]={...x[$],error:j,touched:!0},j&&(g=!0)}),a(x),!g},[r,l]),u=b.useCallback(()=>{const g={};return Object.keys(r).forEach(x=>{g[x]=r[x].value}),g},[r]),f=b.useCallback(()=>{const g={};Object.keys(t).forEach(x=>{g[x]={value:t[x],error:"",touched:!1}}),a(g),i(!1)},[t]);return{fields:r,setValue:o,setError:c,validateAll:d,getValues:u,reset:f,isSubmitting:n,setIsSubmitting:i}}function yb(){const t=gs(),[s,r]=b.useState(!1),[a,n]=b.useState(!1),[i,l]=b.useState(""),{fields:o,setValue:c,validateAll:d,getValues:u,isSubmitting:f,setIsSubmitting:g}=Cn({email:localStorage.getItem("rememberedEmail")||"",password:"",rememberMe:!!localStorage.getItem("rememberedEmail")},{email:{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},password:{required:!0,minLength:6}}),x=async y=>{if(y.preventDefault(),!!d()){g(!0),n(!1),r(!1);try{const $=u();let j=null,N=null,S=null;if(console.log("Attempting general user login first..."),j=await Je("/auth/login/user",{method:"POST",body:JSON.stringify({email:$.email,password:$.password})}),j&&j.success){console.log("General user login successful:",j);const _="user",A="user";N={...j.user,role:_,userType:A,token:j.token},S=A}else console.log("General user login failed, trying staff login..."),j=await Je("/auth/login/staff",{method:"POST",body:JSON.stringify({email:$.email,password:$.password})}),j&&j.success?(console.log("Staff login successful:",j),N={...j.staff,role:"staff",userType:"staff",token:j.token},S="staff"):(console.log("Staff login also failed, trying admin login..."),j=await Je("/auth/login/admin",{method:"POST",body:JSON.stringify({email:$.email,password:$.password})}),j&&j.success?(console.log("Admin login successful:",j),N={...j.admin,role:"admin",userType:"admin",token:j.token},S="admin"):console.log("Admin login also failed:",j));if(N){r(!0),console.log(`Login successful for ${S} user:`,N),sessionStorage.setItem("userInfo",JSON.stringify(N)),$.rememberMe?localStorage.setItem("rememberedEmail",$.email):localStorage.removeItem("rememberedEmail"),window.dispatchEvent(new Event("authStateChanged")),setTimeout(()=>{S==="staff"?(console.log("Redirecting staff user to staff dashboard"),t("/staff")):S==="user"?(console.log("Redirecting general user to home page"),t("/")):N.role==="admin"?(console.log("Redirecting admin user to admin dashboard"),t("/admin/dashboard")):(console.log("Unknown user type, redirecting to home page"),t("/"))},1500);return}l("Email or password is incorrect. Please try again."),n(!0)}catch($){console.error("Login failed:",$),l("Login failed: "+($ instanceof Error?$.message:"Unknown error")),n(!0)}finally{g(!1),setTimeout(()=>n(!1),5e3)}}};return e.jsxs(e.Fragment,{children:[e.jsx(Ts,{}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center px-4 py-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100 rounded-full opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-100 rounded-full opacity-20 animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-purple-100 rounded-full opacity-10 animate-bounce delay-500"})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-3xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform duration-300",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-lock-line text-3xl text-white"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-ping"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full"})]})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Welcome back"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Please sign in to your account"}),e.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce delay-100"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce delay-200"})]})]}),s&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl shadow-sm animate-fadeIn",children:e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-circle-line text-green-600"})}),e.jsx("span",{className:"text-sm font-medium",children:"Login successful! Redirecting to dashboard..."}),e.jsx("div",{className:"ml-auto",children:e.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"})})]})}),a&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl shadow-sm animate-shake",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[e.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-error-warning-line text-red-600"})}),e.jsx("span",{className:"text-sm font-medium",children:i})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl p-8 border border-white/20",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl mb-3",children:e.jsx("i",{className:"ri-user-line text-blue-600 text-xl"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Sign In"})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsx(qt,{label:"Email address",type:"email",name:"email",id:"email",value:o.email.value,onChange:y=>c("email",y.target.value),error:o.email.touched?o.email.error:"",placeholder:"Enter your email",required:!0,autoComplete:"email",icon:e.jsx("i",{className:"ri-mail-line"})}),e.jsx(qt,{label:"Password",type:"password",name:"password",id:"password",value:o.password.value,onChange:y=>c("password",y.target.value),error:o.password.touched?o.password.error:"",placeholder:"Enter your password",required:!0,autoComplete:"current-password",icon:e.jsx("i",{className:"ri-lock-line"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Vx,{id:"rememberMe",name:"rememberMe",label:"Remember me",checked:o.rememberMe.value,onChange:y=>c("rememberMe",y)}),e.jsxs(kt,{to:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500 cursor-pointer flex items-center gap-1 hover:gap-2 transition-all duration-200",children:[e.jsx("span",{children:"Forgot password?"}),e.jsx("i",{className:"ri-arrow-right-line text-xs"})]})]}),e.jsx(vt,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Sign in"}),e.jsx("i",{className:"ri-arrow-right-line ml-2 group-hover:translate-x-1 transition-transform duration-200"})]})})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsxs("span",{className:"px-4 bg-white text-gray-500 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),e.jsx("span",{children:"or"}),e.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-user-add-line text-gray-400"}),e.jsx("span",{children:"Don't have an account?"}),e.jsxs(kt,{to:"/auth/signup",className:"font-medium text-blue-600 hover:text-blue-500 cursor-pointer flex items-center gap-1 hover:gap-2 transition-all duration-200",children:[e.jsx("span",{children:"Sign up"}),e.jsx("i",{className:"ri-arrow-right-line text-xs"})]})]})})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("div",{className:"flex justify-center items-center gap-4 text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-shield-check-line"}),e.jsx("span",{className:"text-xs",children:"Secure"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-lock-line"}),e.jsx("span",{className:"text-xs",children:"Encrypted"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-verified-badge-line"}),e.jsx("span",{className:"text-xs",children:"Trusted"})]})]})})]})]})]})}function vb(){const[t,s]=b.useState(!1),[r,a]=b.useState(!1),[n,i]=b.useState(""),[l,o]=b.useState(!1),[c,d]=b.useState(!1),u=gs(),{fields:f,setValue:g,validateAll:x,getValues:y,isSubmitting:$,setIsSubmitting:j,setError:N}=Cn({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",userType:"CITIZEN",department:null,college:null,agreeToTerms:!1},{firstName:{required:!0,minLength:2},lastName:{required:!0,minLength:2},email:{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},password:{required:!0,minLength:8,custom:_=>/(?=.*[a-z])/.test(_)?/(?=.*[A-Z])/.test(_)?/(?=.*\d)/.test(_)?null:"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter"},department:{required:!1},college:{required:!1},confirmPassword:{required:!0,custom:_=>_!==f.password.value?"Passwords do not match":null},agreeToTerms:{custom:_=>_?null:"You must agree to the terms and conditions"}}),S=async _=>{if(_.preventDefault(),!!x()){j(!0),a(!1),s(!1);try{const A=y();console.log("Signup data:",A);const P=await Je("/auth/register",{method:"POST",body:JSON.stringify({firstName:A.firstName,lastName:A.lastName,email:A.email,password:A.password,userType:A.userType,department:A.department,college:A.college})});if(P&&P.success){console.log("Registration successful:",P),s(!0),sessionStorage.setItem("lastRegisteredEmail",A.email),setTimeout(()=>{u("/auth/login")},1500);return}else{const M=P?.message||"Registration failed. Please try again.";M.toLowerCase().includes("email")&&M.toLowerCase().includes("exist")&&N("email","This email is already registered"),i(M),a(!0)}}catch(A){console.error("Registration failed:",A),i("Login failed: "+(A instanceof Error?A.message:"Unknown error")),a(!0)}finally{j(!1),setTimeout(()=>a(!1),5e3)}}};return e.jsxs(e.Fragment,{children:[e.jsx(Ts,{}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center px-4 py-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-green-200/30 to-emerald-300/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-tr from-emerald-200/20 to-green-300/30 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-green-300/10 rounded-full blur-2xl animate-bounce delay-500"}),e.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-24 h-24 bg-emerald-300/15 rounded-full blur-xl animate-bounce delay-700"}),e.jsx("div",{className:"absolute top-20 left-20 w-2 h-2 bg-green-400 rounded-full animate-ping delay-300"}),e.jsx("div",{className:"absolute top-40 right-32 w-1.5 h-1.5 bg-emerald-500 rounded-full animate-ping delay-700"}),e.jsx("div",{className:"absolute bottom-32 left-16 w-2.5 h-2.5 bg-green-300 rounded-full animate-ping delay-1000"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-1 h-1 bg-emerald-400 rounded-full animate-ping delay-500"})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded-3xl flex items-center justify-center shadow-2xl shadow-green-500/25 transform hover:scale-105 transition-all duration-300 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-emerald-500 rounded-3xl blur opacity-50 animate-pulse"}),e.jsx("i",{className:"ri-user-add-line text-3xl text-white relative z-10"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-star-fill text-xs text-yellow-800"})})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"Create your account"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Join our community and get started today"}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-shield-check-line text-green-500"}),e.jsx("span",{children:"Secure"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-lock-line text-green-500"}),e.jsx("span",{children:"Encrypted"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-verified-badge-line text-green-500"}),e.jsx("span",{children:"Trusted"})]})]})]}),t&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl shadow-lg backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-circle-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Account created successfully!"}),e.jsx("div",{className:"text-xs mt-1 text-green-700",children:"Redirecting to login page... You can now login with your credentials."})]})]})}),r&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl shadow-lg backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-error-warning-line text-red-600"})}),e.jsx("span",{className:"text-sm font-medium",children:n})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-green-100/50 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-emerald-100/50 to-transparent rounded-full translate-y-12 -translate-x-12"}),e.jsxs("form",{onSubmit:S,className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(qt,{label:"First Name",type:"text",name:"firstName",id:"firstName",value:f.firstName.value,onChange:_=>g("firstName",_.target.value),error:f.firstName.touched?f.firstName.error:"",placeholder:"John",required:!0,autoComplete:"given-name",icon:e.jsx("i",{className:"ri-user-line"})}),e.jsx(qt,{label:"Last Name",type:"text",name:"lastName",id:"lastName",value:f.lastName.value,onChange:_=>g("lastName",_.target.value),error:f.lastName.touched?f.lastName.error:"",placeholder:"Doe",required:!0,autoComplete:"family-name",icon:e.jsx("i",{className:"ri-user-line"})})]}),e.jsx(qt,{label:"Email address",type:"email",name:"email",id:"email",value:f.email.value,onChange:_=>g("email",_.target.value),error:f.email.touched?f.email.error:"",placeholder:"john@example.com",required:!0,autoComplete:"email",icon:e.jsx("i",{className:"ri-mail-line"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"hidden",id:"userType",name:"userType",value:"CITIZEN"})}),f.userType.value==="BARANGAY_STAFF"&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl shadow-sm",children:e.jsxs("p",{className:"text-sm text-blue-700 flex items-center gap-2",children:[e.jsx("i",{className:"ri-information-line text-blue-600"}),"Your account will need approval from an admin before you can access staff features."]})})]}),e.jsx(qt,{label:"Password",type:"password",name:"password",id:"password",value:f.password.value,onChange:_=>g("password",_.target.value),error:f.password.touched?f.password.error:"",placeholder:"Create a strong password",required:!0,autoComplete:"new-password",icon:e.jsx("i",{className:"ri-lock-line"})}),e.jsx(qt,{label:"Confirm Password",type:"password",name:"confirmPassword",id:"confirmPassword",value:f.confirmPassword.value,onChange:_=>g("confirmPassword",_.target.value),error:f.confirmPassword.touched?f.confirmPassword.error:"",placeholder:"Confirm your password",required:!0,autoComplete:"new-password",icon:e.jsx("i",{className:"ri-lock-line"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Vx,{id:"agreeToTerms",name:"agreeToTerms",label:e.jsxs("span",{children:["I agree to the"," ",e.jsx("button",{type:"button",onClick:()=>o(!0),className:"text-green-600 hover:text-green-500 underline bg-transparent border-none p-0 font-medium transition-colors duration-200",children:"Terms of Service"})," ","and"," ",e.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-green-600 hover:text-green-500 underline bg-transparent border-none p-0 font-medium transition-colors duration-200",children:"Privacy Policy"})]}),checked:f.agreeToTerms.value,onChange:_=>g("agreeToTerms",_)}),f.agreeToTerms.touched&&f.agreeToTerms.error&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-2 bg-red-50 p-2 rounded-lg",children:[e.jsx("i",{className:"ri-error-warning-line"}),f.agreeToTerms.error]})]}),e.jsx(vt,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:$,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl",children:$?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-user-add-line mr-2"}),"Create account"]})})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(kt,{to:"/auth/login",className:"font-semibold text-green-600 hover:text-green-500 cursor-pointer transition-colors duration-200 hover:underline",children:"Sign in"})]})})]})]}),e.jsx(sl,{isOpen:l,onClose:()=>o(!1)}),e.jsx(tl,{isOpen:c,onClose:()=>d(!1)})]})]})}function jb(){const t=gs(),[s,r]=b.useState(!1),[a,n]=b.useState(!1),{fields:i,setValue:l,validateAll:o,getValues:c,isSubmitting:d,setIsSubmitting:u}=Cn({email:""},{email:{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/}}),f=async x=>{if(x.preventDefault(),!!o()){u(!0);try{const y=c();console.log("Forgot password data:",y);const $=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y.email})}),j=await $.json();if($.ok&&j.success)n(!0),r(!0),setTimeout(()=>{t("/auth/verify-otp",{state:{email:y.email}})},2e3);else throw new Error(j.message||"Failed to send verification code")}catch(y){console.error("Reset password failed:",y),alert("Failed to send verification code. Please try again later.")}finally{u(!1)}}},g=async()=>{u(!0);try{const x=c(),y=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x.email})}),$=await y.json();if(y.ok&&$.success)r(!0),setTimeout(()=>r(!1),3e3);else throw new Error($.message||"Failed to resend verification code")}catch(x){console.error("Resend email failed:",x),alert("Failed to resend verification code. Please try again later.")}finally{u(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(Ts,{}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 flex items-center justify-center px-4 py-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-gradient-to-br from-purple-200/30 to-pink-200/30 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-200/30 to-purple-200/30 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-32 h-32 bg-gradient-to-br from-pink-300/20 to-purple-300/20 rounded-full blur-2xl animate-bounce delay-500"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-24 h-24 bg-gradient-to-br from-blue-300/20 to-pink-300/20 rounded-full blur-xl animate-bounce delay-700"}),e.jsx("div",{className:"absolute top-20 left-20 w-2 h-2 bg-purple-400/40 rounded-full animate-ping"}),e.jsx("div",{className:"absolute top-40 right-32 w-1 h-1 bg-pink-400/40 rounded-full animate-ping delay-300"}),e.jsx("div",{className:"absolute bottom-32 left-16 w-1.5 h-1.5 bg-blue-400/40 rounded-full animate-ping delay-700"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-2 h-2 bg-purple-400/40 rounded-full animate-ping delay-1000"})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/25 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl blur opacity-50 animate-pulse"}),e.jsx("i",{className:"ri-key-line text-2xl text-white relative z-10"})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:a?"Check your email":"Forgot your password?"}),e.jsx("p",{className:"text-gray-600",children:a?"We've sent a verification code to your email address":"Enter your email address and we'll send you a code to reset your password"})]}),s&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg backdrop-blur-sm shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx("i",{className:"ri-check-circle-line"}),e.jsx("span",{className:"text-sm font-medium",children:a?"Verification code sent again!":"Verification code sent to your email!"})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-8 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent rounded-2xl"}),a?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center space-y-6 relative z-10",children:[e.jsxs("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center shadow-lg shadow-green-500/10 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-200/50 to-emerald-200/50 rounded-full blur animate-pulse"}),e.jsx("i",{className:"ri-mail-check-line text-3xl text-green-600 relative z-10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"We sent a verification code to:"}),e.jsx("p",{className:"font-medium text-gray-900 bg-gray-50 px-3 py-2 rounded-lg inline-block",children:i.email.value})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Didn't receive the code? Check your spam folder or"}),e.jsx(vt,{variant:"outline",size:"md",fullWidth:!0,onClick:g,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Resending..."]}):"Resend code"}),e.jsx(kt,{to:"/auth/reset-password",children:e.jsx(vt,{variant:"primary",size:"md",fullWidth:!0,children:"Enter verification code"})})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full opacity-60"}),e.jsx("div",{className:"absolute -top-1 -right-3 w-2 h-2 bg-gradient-to-br from-blue-400 to-purple-400 rounded-full opacity-60"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-3 h-3 bg-gradient-to-br from-pink-400 to-purple-400 rounded-full opacity-60"}),e.jsxs("form",{onSubmit:f,className:"space-y-6 relative z-10",children:[e.jsx(qt,{label:"Email address",type:"email",name:"email",id:"email",value:i.email.value,onChange:x=>l("email",x.target.value),error:i.email.touched?i.email.error:"",placeholder:"Enter your email address",required:!0,autoComplete:"email",icon:e.jsx("i",{className:"ri-mail-line"})}),e.jsx(vt,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Sending verification code..."]}):"Send verification code"})]})]}),e.jsx("div",{className:"text-center mt-8 pt-6 border-t border-gray-100 relative z-10",children:e.jsxs(kt,{to:"/auth/login",className:"inline-flex items-center gap-2 text-sm text-purple-600 hover:text-purple-500 cursor-pointer font-medium transition-colors duration-200 hover:bg-purple-50 px-3 py-2 rounded-lg",children:[e.jsx("i",{className:"ri-arrow-left-line"}),"Back to sign in"]})})]}),e.jsxs("div",{className:"flex justify-center items-center gap-6 mt-6 opacity-60",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx("i",{className:"ri-shield-check-line text-green-500"}),e.jsx("span",{children:"Secure"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx("i",{className:"ri-lock-line text-blue-500"}),e.jsx("span",{children:"Encrypted"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx("i",{className:"ri-verified-badge-line text-purple-500"}),e.jsx("span",{children:"Trusted"})]})]})]})]})]})}function Nb(){const t=gs(),s=vl(),[r,a]=b.useState(!1),[n,i]=b.useState(""),l=s.state?.email||new URLSearchParams(s.search).get("email")||"",{fields:o,setValue:c,validateAll:d,getValues:u,isSubmitting:f,setIsSubmitting:g}=Cn({otp:""},{otp:{required:!0,pattern:/^\d{6}$/}}),x=async $=>{if($.preventDefault(),!d())return;const j=u();g(!0),a(!1);try{const N=await fetch("/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.toLowerCase(),otp:j.otp})}),S=await N.json();if(N.ok&&S.success)t("/auth/reset-password",{state:{email:l,otp:j.otp}});else throw new Error(S.message||"Invalid verification code")}catch(N){console.error("OTP verification failed:",N),i(N instanceof Error?N.message:"Invalid verification code"),a(!0)}finally{g(!1),setTimeout(()=>a(!1),5e3)}},y=async()=>{g(!0);try{const $=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})}),j=await $.json();if($.ok&&j.success)alert("Verification code sent again!");else throw new Error(j.message||"Failed to resend code")}catch($){console.error("Resend OTP failed:",$),alert("Failed to resend verification code. Please try again later.")}finally{g(!1)}};return l?e.jsxs(e.Fragment,{children:[e.jsx(Ts,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-600 rounded-2xl flex items-center justify-center",children:e.jsx("i",{className:"ri-shield-check-line text-2xl text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verify your email"}),e.jsx("p",{className:"text-gray-600",children:"Enter the 6-digit code sent to your email"})]}),r&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx("i",{className:"ri-error-warning-line"}),e.jsx("span",{className:"text-sm font-medium",children:n})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Code sent to:"}),e.jsx("p",{className:"font-medium text-gray-900",children:l})]}),e.jsx(qt,{label:"Verification Code",type:"text",name:"otp",id:"otp",value:o.otp.value,onChange:$=>c("otp",$.target.value),error:o.otp.touched?o.otp.error:"",placeholder:"Enter 6-digit code",required:!0,icon:e.jsx("i",{className:"ri-lock-password-line"})}),e.jsx(vt,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Verifying..."]}):"Verify code"})]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Didn't receive the code?"}),e.jsx(vt,{variant:"outline",size:"sm",onClick:y,disabled:f,children:"Resend code"})]}),e.jsx("div",{className:"text-center mt-8 pt-6 border-t border-gray-100",children:e.jsxs(kt,{to:"/auth/forgot-password",className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-500 cursor-pointer font-medium",children:[e.jsx("i",{className:"ri-arrow-left-line"}),"Change email address"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Having trouble? Check your spam folder or contact"," ",e.jsx("a",{href:"mailto:support@example.com",className:"text-blue-600 hover:text-blue-500 cursor-pointer",children:"support"})]})})]})})]}):(t("/auth/forgot-password"),null)}function wb(){const t=gs(),s=vl(),[r,a]=b.useState(!1),[n,i]=b.useState(!1),[l,o]=b.useState(""),c=s.state?.email||"",d=s.state?.otp||"",{fields:u,setValue:f,validateAll:g,getValues:x,isSubmitting:y,setIsSubmitting:$}=Cn({password:"",confirmPassword:""},{password:{required:!0,minLength:6},confirmPassword:{required:!0}});if(!c||!d)return t("/auth/forgot-password"),null;const j=async N=>{if(N.preventDefault(),!g())return;const S=x();if(S.password!==S.confirmPassword){o("Passwords do not match"),i(!0);return}$(!0),i(!1),a(!1);try{console.log("Reset password data:",{email:c,otp:d});const _=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.toLowerCase(),otp:d,newPassword:S.password})}),A=await _.json();if(_.ok&&A.success)a(!0),setTimeout(()=>{t("/auth/login")},2e3);else throw new Error(A.message||"Failed to reset password")}catch(_){console.error("Reset password failed:",_),o("Failed to reset password. Please try again."),i(!0)}finally{$(!1),setTimeout(()=>i(!1),5e3)}};return e.jsxs(e.Fragment,{children:[e.jsx(Ts,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-600 rounded-2xl flex items-center justify-center",children:e.jsx("i",{className:"ri-lock-password-line text-2xl text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reset your password"}),e.jsx("p",{className:"text-gray-600",children:"Enter your new password below"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Email: ",e.jsx("span",{className:"font-medium",children:c})]})]}),r&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx("i",{className:"ri-check-circle-line"}),e.jsx("span",{className:"text-sm font-medium",children:"Password reset successful! Redirecting to login..."})]})}),n&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx("i",{className:"ri-error-warning-line"}),e.jsx("span",{className:"text-sm font-medium",children:l})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsx(qt,{label:"New Password",type:"password",name:"password",id:"password",value:u.password.value,onChange:N=>f("password",N.target.value),error:u.password.touched?u.password.error:"",placeholder:"Enter your new password",required:!0,autoComplete:"new-password",icon:e.jsx("i",{className:"ri-lock-line"})}),e.jsx(qt,{label:"Confirm New Password",type:"password",name:"confirmPassword",id:"confirmPassword",value:u.confirmPassword.value,onChange:N=>f("confirmPassword",N.target.value),error:u.confirmPassword.touched?u.confirmPassword.error:"",placeholder:"Confirm your new password",required:!0,autoComplete:"new-password",icon:e.jsx("i",{className:"ri-lock-line"})}),e.jsx(vt,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Resetting password..."]}):"Reset password"})]}),e.jsx("div",{className:"text-center mt-8 pt-6 border-t border-gray-100",children:e.jsxs(kt,{to:"/auth/login",className:"inline-flex items-center gap-2 text-sm text-green-600 hover:text-green-500 cursor-pointer font-medium",children:[e.jsx("i",{className:"ri-arrow-left-line"}),"Back to sign in"]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Remember your password?"," ",e.jsx(kt,{to:"/auth/login",className:"text-green-600 hover:text-green-500 cursor-pointer",children:"Sign in"})]})})]})})]})}const Gx=(t={})=>{const[s,r]=b.useState({latitude:null,longitude:null,accuracy:null,error:null,loading:!1}),{enableHighAccuracy:a=!0,timeout:n=1e4,maximumAge:i=3e5}=t,l=()=>{if(!navigator.geolocation){r(d=>({...d,error:"Geolocation is not supported by this browser.",loading:!1}));return}r(d=>({...d,loading:!0,error:null})),navigator.geolocation.getCurrentPosition(d=>{r({latitude:d.coords.latitude,longitude:d.coords.longitude,accuracy:d.coords.accuracy,error:null,loading:!1})},d=>{let u="An unknown error occurred.";switch(d.code){case d.PERMISSION_DENIED:u="Location access denied by user.";break;case d.POSITION_UNAVAILABLE:u="Location information is unavailable.";break;case d.TIMEOUT:u="Location request timed out.";break}r(f=>({...f,error:u,loading:!1}))},{enableHighAccuracy:a,timeout:n,maximumAge:i})},o=()=>navigator.geolocation?(r(u=>({...u,loading:!0,error:null})),navigator.geolocation.watchPosition(u=>{r({latitude:u.coords.latitude,longitude:u.coords.longitude,accuracy:u.coords.accuracy,error:null,loading:!1})},u=>{let f="An unknown error occurred.";switch(u.code){case u.PERMISSION_DENIED:f="Location access denied by user.";break;case u.POSITION_UNAVAILABLE:f="Location information is unavailable.";break;case u.TIMEOUT:f="Location request timed out.";break}r(g=>({...g,error:f,loading:!1}))},{enableHighAccuracy:a,timeout:n,maximumAge:i})):(r(u=>({...u,error:"Geolocation is not supported by this browser.",loading:!1})),null),c=d=>{navigator.geolocation.clearWatch(d)};return b.useEffect(()=>{navigator.geolocation&&l()},[]),{...s,getCurrentLocation:l,watchLocation:o,clearWatch:c,isSupported:!!navigator.geolocation}},Jx=b.createContext(void 0);function Gs(){const t=b.useContext(Jx);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}function Sb({children:t}){const[s,r]=b.useState([]),a=b.useRef(1),n=b.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i=b.useCallback(o=>{const c=a.current++,d={id:c,type:o.type??"info",title:o.title,message:o.message,durationMs:o.durationMs??3e3};r(u=>[...u,d]),d.durationMs>0&&window.setTimeout(()=>n(c),d.durationMs)},[n]),l=b.useMemo(()=>({showToast:i}),[i]);return e.jsxs(Jx.Provider,{value:l,children:[t,e.jsx(kb,{toasts:s,onClose:n})]})}function Cb(t){switch(t){case"success":return"ri-checkbox-circle-fill";case"error":return"ri-error-warning-fill";case"warning":return"ri-alert-fill";case"info":default:return"ri-information-fill"}}function $b(t){switch(t){case"success":return{bg:"bg-gradient-to-r from-emerald-50 to-green-50",text:"text-emerald-700",icon:"text-emerald-600",border:"border-emerald-200",accent:"bg-emerald-500"};case"error":return{bg:"bg-gradient-to-r from-red-50 to-rose-50",text:"text-red-700",icon:"text-red-600",border:"border-red-200",accent:"bg-red-500"};case"warning":return{bg:"bg-gradient-to-r from-amber-50 to-yellow-50",text:"text-amber-700",icon:"text-amber-600",border:"border-amber-200",accent:"bg-amber-500"};case"info":default:return{bg:"bg-gradient-to-r from-blue-50 to-indigo-50",text:"text-blue-700",icon:"text-blue-600",border:"border-blue-200",accent:"bg-blue-500"}}}function kb({toasts:t,onClose:s}){return e.jsx("div",{className:"fixed top-6 right-6 z-[60] space-y-4",children:t.map((r,a)=>{const n=$b(r.type);return e.jsxs("div",{className:`
              relative flex items-start gap-4 p-5 rounded-xl shadow-xl backdrop-blur-sm
              ${n.bg} ${n.border} border-2
              min-w-[320px] max-w-md
              transform transition-all duration-300 ease-out
              animate-in slide-in-from-right-full fade-in
              hover:shadow-2xl hover:scale-[1.02]
            `,style:{animationDelay:`${a*100}ms`,animationFillMode:"both"},children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 rounded-l-xl ${n.accent}`}),e.jsx("div",{className:`flex-shrink-0 ${n.icon} mt-0.5`,children:e.jsx("i",{className:`${Cb(r.type)} text-2xl drop-shadow-sm`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[r.title&&e.jsx("div",{className:`font-semibold text-base ${n.text} mb-1 leading-tight`,children:r.title}),e.jsx("div",{className:`text-sm ${n.text} opacity-90 leading-relaxed`,children:r.message})]}),e.jsx("button",{className:`
                flex-shrink-0 p-1.5 rounded-lg transition-all duration-200
                ${n.text} opacity-60 hover:opacity-100 
                hover:bg-white/20 hover:scale-110
                focus:outline-none focus:ring-2 focus:ring-white/30
              `,onClick:()=>s(r.id),"aria-label":"Close notification",children:e.jsx("i",{className:"ri-close-line text-lg"})})]},r.id)})})}async function Gm(t,s){try{const r=`/api/public/geocode?lat=${t}&lon=${s}`,a=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Geocoding API error: ${a.status}`);const n=await a.json();if(!n.success||!n.display_name)return{success:!1,locationName:"Unknown Location",error:n.message||"No location data found"};const i=n.display_name,l=n.detailed_info?{barangay:n.detailed_info.barangay,municipality:n.detailed_info.municipality,province:n.detailed_info.province,region:n.detailed_info.region,coordinates:{latitude:n.detailed_info.coordinates.latitude,longitude:n.detailed_info.coordinates.longitude}}:void 0;return{success:!0,locationName:i,detailedInfo:l}}catch(r){return console.error("Reverse geocoding error:",r),{success:!1,locationName:"Location Unavailable",error:r instanceof Error?r.message:"Unknown error occurred"}}}var _b=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Wd.apply(this,arguments)}function Ab(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function fo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pb(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,Hd(t,s)}function Hd(t,s){return Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Hd(t,s)}var uc=(function(t){Pb(s,t);function s(){var a;return a=t.call(this)||this,a.handleExpired=a.handleExpired.bind(fo(a)),a.handleErrored=a.handleErrored.bind(fo(a)),a.handleChange=a.handleChange.bind(fo(a)),a.handleRecaptchaRef=a.handleRecaptchaRef.bind(fo(a)),a}var r=s.prototype;return r.getCaptchaFunction=function(n){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[n]:this.props.grecaptcha[n]:null},r.getValue=function(){var n=this.getCaptchaFunction("getResponse");return n&&this._widgetId!==void 0?n(this._widgetId):null},r.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},r.execute=function(){var n=this.getCaptchaFunction("execute");if(n&&this._widgetId!==void 0)return n(this._widgetId);this._executeRequested=!0},r.executeAsync=function(){var n=this;return new Promise(function(i,l){n.executionResolve=i,n.executionReject=l,n.execute()})},r.reset=function(){var n=this.getCaptchaFunction("reset");n&&this._widgetId!==void 0&&n(this._widgetId)},r.forceReset=function(){var n=this.getCaptchaFunction("reset");n&&n()},r.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},r.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},r.handleChange=function(n){this.props.onChange&&this.props.onChange(n),this.executionResolve&&(this.executionResolve(n),delete this.executionReject,delete this.executionResolve)},r.explicitRender=function(){var n=this.getCaptchaFunction("render");if(n&&this._widgetId===void 0){var i=document.createElement("div");this._widgetId=n(i,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(i)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},r.componentDidMount=function(){this.explicitRender()},r.componentDidUpdate=function(){this.explicitRender()},r.handleRecaptchaRef=function(n){this.captcha=n},r.render=function(){var n=this.props;n.sitekey,n.onChange,n.theme,n.type,n.tabindex,n.onExpired,n.onErrored,n.size,n.stoken,n.grecaptcha,n.badge,n.hl,n.isolated;var i=Ab(n,_b);return b.createElement("div",Wd({},i,{ref:this.handleRecaptchaRef}))},s})(b.Component);uc.displayName="ReCAPTCHA";uc.propTypes={sitekey:Ve.string.isRequired,onChange:Ve.func,grecaptcha:Ve.object,theme:Ve.oneOf(["dark","light"]),type:Ve.oneOf(["image","audio"]),tabindex:Ve.number,onExpired:Ve.func,onErrored:Ve.func,size:Ve.oneOf(["compact","normal","invisible"]),stoken:Ve.string,hl:Ve.string,badge:Ve.oneOf(["bottomright","bottomleft","inline"]),isolated:Ve.bool};uc.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var od={exports:{}},Ot={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function Lb(){if(Jm)return Ot;Jm=1;var t=typeof Symbol=="function"&&Symbol.for,s=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,n=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,y=t?Symbol.for("react.lazy"):60116,$=t?Symbol.for("react.block"):60121,j=t?Symbol.for("react.fundamental"):60117,N=t?Symbol.for("react.responder"):60118,S=t?Symbol.for("react.scope"):60119;function _(P){if(typeof P=="object"&&P!==null){var M=P.$$typeof;switch(M){case s:switch(P=P.type,P){case c:case d:case a:case i:case n:case f:return P;default:switch(P=P&&P.$$typeof,P){case o:case u:case y:case x:case l:return P;default:return M}}case r:return M}}}function A(P){return _(P)===d}return Ot.AsyncMode=c,Ot.ConcurrentMode=d,Ot.ContextConsumer=o,Ot.ContextProvider=l,Ot.Element=s,Ot.ForwardRef=u,Ot.Fragment=a,Ot.Lazy=y,Ot.Memo=x,Ot.Portal=r,Ot.Profiler=i,Ot.StrictMode=n,Ot.Suspense=f,Ot.isAsyncMode=function(P){return A(P)||_(P)===c},Ot.isConcurrentMode=A,Ot.isContextConsumer=function(P){return _(P)===o},Ot.isContextProvider=function(P){return _(P)===l},Ot.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===s},Ot.isForwardRef=function(P){return _(P)===u},Ot.isFragment=function(P){return _(P)===a},Ot.isLazy=function(P){return _(P)===y},Ot.isMemo=function(P){return _(P)===x},Ot.isPortal=function(P){return _(P)===r},Ot.isProfiler=function(P){return _(P)===i},Ot.isStrictMode=function(P){return _(P)===n},Ot.isSuspense=function(P){return _(P)===f},Ot.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===a||P===d||P===i||P===n||P===f||P===g||typeof P=="object"&&P!==null&&(P.$$typeof===y||P.$$typeof===x||P.$$typeof===l||P.$$typeof===o||P.$$typeof===u||P.$$typeof===j||P.$$typeof===N||P.$$typeof===S||P.$$typeof===$)},Ot.typeOf=_,Ot}var Km;function Eb(){return Km||(Km=1,od.exports=Lb()),od.exports}var cd,Ym;function Tb(){if(Ym)return cd;Ym=1;var t=Eb(),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[t.ForwardRef]=a,i[t.Memo]=n;function l(y){return t.isMemo(y)?n:i[y.$$typeof]||s}var o=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,g=Object.prototype;function x(y,$,j){if(typeof $!="string"){if(g){var N=f($);N&&N!==g&&x(y,N,j)}var S=c($);d&&(S=S.concat(d($)));for(var _=l(y),A=l($),P=0;P<S.length;++P){var M=S[P];if(!r[M]&&!(j&&j[M])&&!(A&&A[M])&&!(_&&_[M])){var ne=u($,M);try{o(y,M,ne)}catch{}}}}return y}return cd=x,cd}var Ib=Tb();const Rb=Ru(Ib);function Vd(){return Vd=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Vd.apply(this,arguments)}function Fb(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Ob(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s}var Lr={},Db=0;function Mb(t,s){return s=s||{},function(a){var n=a.displayName||a.name||"Component",i=(function(o){Ob(c,o);function c(u,f){var g;return g=o.call(this,u,f)||this,g.state={},g.__scriptURL="",g}var d=c.prototype;return d.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+Db++),this.__scriptLoaderID},d.setupScriptURL=function(){return this.__scriptURL=typeof t=="function"?t():t,this.__scriptURL},d.asyncScriptLoaderHandleLoad=function(f){var g=this;this.setState(f,function(){return g.props.asyncScriptOnLoad&&g.props.asyncScriptOnLoad(g.state)})},d.asyncScriptLoaderTriggerOnScriptLoaded=function(){var f=Lr[this.__scriptURL];if(!f||!f.loaded)throw new Error("Script is not loaded.");for(var g in f.observers)f.observers[g](f);delete window[s.callbackName]},d.componentDidMount=function(){var f=this,g=this.setupScriptURL(),x=this.asyncScriptLoaderGetScriptLoaderID(),y=s,$=y.globalName,j=y.callbackName,N=y.scriptId;if($&&typeof window[$]<"u"&&(Lr[g]={loaded:!0,observers:{}}),Lr[g]){var S=Lr[g];if(S&&(S.loaded||S.errored)){this.asyncScriptLoaderHandleLoad(S);return}S.observers[x]=function(ne){return f.asyncScriptLoaderHandleLoad(ne)};return}var _={};_[x]=function(ne){return f.asyncScriptLoaderHandleLoad(ne)},Lr[g]={loaded:!1,observers:_};var A=document.createElement("script");A.src=g,A.async=!0;for(var P in s.attributes)A.setAttribute(P,s.attributes[P]);N&&(A.id=N);var M=function(V){if(Lr[g]){var L=Lr[g],Q=L.observers;for(var w in Q)V(Q[w])&&delete Q[w]}};j&&typeof window<"u"&&(window[j]=function(){return f.asyncScriptLoaderTriggerOnScriptLoaded()}),A.onload=function(){var ne=Lr[g];ne&&(ne.loaded=!0,M(function(V){return j?!1:(V(ne),!0)}))},A.onerror=function(){var ne=Lr[g];ne&&(ne.errored=!0,M(function(V){return V(ne),!0}))},document.body.appendChild(A)},d.componentWillUnmount=function(){var f=this.__scriptURL;if(s.removeOnUnmount===!0)for(var g=document.getElementsByTagName("script"),x=0;x<g.length;x+=1)g[x].src.indexOf(f)>-1&&g[x].parentNode&&g[x].parentNode.removeChild(g[x]);var y=Lr[f];y&&(delete y.observers[this.asyncScriptLoaderGetScriptLoaderID()],s.removeOnUnmount===!0&&delete Lr[f])},d.render=function(){var f=s.globalName,g=this.props;g.asyncScriptOnLoad;var x=g.forwardedRef,y=Fb(g,["asyncScriptOnLoad","forwardedRef"]);return f&&typeof window<"u"&&(y[f]=typeof window[f]<"u"?window[f]:void 0),y.ref=x,b.createElement(a,y)},c})(b.Component),l=b.forwardRef(function(o,c){return b.createElement(i,Vd({},o,{forwardedRef:c}))});return l.displayName="AsyncScriptLoader("+n+")",l.propTypes={asyncScriptOnLoad:Ve.func},Rb(l,a)}}var Gd="onloadcallback",Bb="grecaptcha";function Jd(){return typeof window<"u"&&window.recaptchaOptions||{}}function Ub(){var t=Jd(),s=t.useRecaptchaNet?"recaptcha.net":"www.google.com";return t.enterprise?"https://"+s+"/recaptcha/enterprise.js?onload="+Gd+"&render=explicit":"https://"+s+"/recaptcha/api.js?onload="+Gd+"&render=explicit"}const qb=Mb(Ub,{callbackName:Gd,globalName:Bb,attributes:Jd().nonce?{nonce:Jd().nonce}:{}})(uc),Kx={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:48|5[0-3579]|[6-9])|7(?:20|32|8)|[89]","(?:31|4)6|51|6(?:485|5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:2(?:(?:[0-26-9]\\d|3[0-8]|5[0135-9])\\d|4(?:[02-9]\\d|10))|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90))|7(?:[013-57-9]\\d|2[0-8])\\d)\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|[34]\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","(?:[025-7]\\d|44)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[024-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:01\\d|[24-689])\\d{7}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["0"]]]],BL:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","[1-467]\\d{9,10}|55[0-46-9]\\d{8}|[34]\\d{7}|55\\d{7,8}|(?:5[0-46-9]|[89]\\d)\\d{7,9}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37|86)","300|4(?:0(?:0|20)|370|864)"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[178]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-6]|7[246]|8[2-4]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|[78]"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","[2-9]\\d{9}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|5[07]|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:2[125-9]|33|44|66|77|88)|6(?:22|33))[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["60|809"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9(?:10|[2-9])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-8]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:46|60\\d\\d)\\d{6}|(?:1\\d|[39])\\d{9}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["46"]],["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|9[14]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|3[13])"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,"0|180020",0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94\\d|7093)\\d{5}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0|180020","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","[2-69]\\d{8}|80\\d{5,7}|[1-79]\\d{7}|6\\d{6}",[7,8,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-589]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0|180020","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,11}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[03]"]]],0,0,0,0,0,0,[["0(?:669[0-79]\\d{1,6}|831\\d{2,8})|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[2356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0|180020","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[25-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]","3|4(?:2(?:0|9[02-69])|7(?:0[019]|1))|6[1-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[25-9]"],"0$1"]],"0",0,"(000[2569]\\d{4,6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33622|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["3"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-6]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[2457]\\d|33|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|78|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2679]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-8]|5[0-5]|8[0-7]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["4(?:[2-46]|5[3-5])|5|6(?:[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-5]|(?:60|86)[23]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|452|678|86","[12]|452|6788|86"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","(?:596\\d|7091)\\d{5}|(?:69|[89]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]|8(?:0[6-9]|[36])"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:20|9\\d)\\d{8}|[78]\\d{9,13}",[10,11,12,13,14],[["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:222|444|(?:55|8\\d)\\d|666|777|999)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[24-9]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|8\\d\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[136]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","709\\d{6}|(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["(?:69(?:2\\d\\d|3(?:[06][0-6]|1[0-3]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))|7092[0-3])\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-6]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,0,[["336(?:[013-9]\\d|2[013-9])\\d{5}|(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15-7]|6[0-35-79]|7[1-37-9]))\\d{7}",[10]],["9\\d{9}",[10]],["8(?:0[04]|108\\d{3})\\d{7}"],["80[39]\\d{7}",[10]],["808\\d{7}",[10]]],"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","(?:[15]\\d|800|92)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|7[67]|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|[6-8]\\d|90)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-9]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-359]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-4]|5[1-3]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[59]"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|30|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[236-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[0-68]))\\d{4}|(?:2742|305[3-9]|(?:472|983)[2-47-9]|505[2-57-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[0135-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-269])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[0378]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[0168]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-3589]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|2\\d{3,4}|(?:[49]\\d|80)\\d{5}",[4,5,6,7,8,9,10,11,12,13],[["(\\d{4,5})","$1",["21"]],["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-9]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72|8\\d{4})\\d{4}|[89]\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[47-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","7093\\d{5}|(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["(?:639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])|7093[5-7])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|[579]\\d|63)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[579]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[235-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"],0,0,0,0,0,0,["2\\d{8}",[9]]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};var dd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Zm;function zb(){return Zm||(Zm=1,(function(t){(function(){var s={}.hasOwnProperty;function r(){for(var i="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(i=n(i,a(o)))}return i}function a(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var l="";for(var o in i)s.call(i,o)&&i[o]&&(l=n(l,o));return l}function n(i,l){return l?i?i+" "+l:i+l:i}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(dd)),dd.exports}var Wb=zb();const Ko=Ru(Wb);function Hb(t,s,r){switch(r){case"Backspace":s>0&&(t=t.slice(0,s-1)+t.slice(s),s--);break;case"Delete":t=t.slice(0,s)+t.slice(s+1);break}return{value:t,caret:s}}function Vb(t,s,r){for(var a={},n="",i=0,l=0;l<t.length;){var o=r(t[l],n,a);o!==void 0&&(n+=o,s!==void 0&&(s===l?i=n.length-1:s>l&&(i=n.length))),l++}s===void 0&&(i=n.length);var c={value:n,caret:i};return c}function Gb(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=Jb(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jb(t,s){if(t){if(typeof t=="string")return Xm(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xm(t,s)}}function Xm(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function Kd(t,s){for(var r=0,a=Gb(s.split("")),n;!(n=a()).done;){var i=n.value;i===t&&r++}return r}function Kb(t,s){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"x",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",n=t.length,i=Kd("(",t),l=Kd(")",t),o=i-l;o>0&&n<s.length;)t+=s[n].replace(r,a),s[n]===")"&&o--,n++;return t}function Yb(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=Zb(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zb(t,s){if(t){if(typeof t=="string")return Qm(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qm(t,s)}}function Qm(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function Xb(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",r=arguments.length>2?arguments[2]:void 0;if(!t)return function(n){return{text:n}};var a=Kd(s,t);return function(n){if(!n)return{text:"",template:t};for(var i=0,l="",o=Yb(t.split("")),c;!(c=o()).done;){var d=c.value;if(d!==s){l+=d;continue}if(l+=n[i],i++,i===n.length&&n.length<a)break}return r&&(l=Kb(l,t)),{text:l,template:t}}}function Qb(t,s,r){typeof r=="string"&&(r=Xb(r));var a=r(t)||{},n=a.text,i=a.template;if(n===void 0&&(n=t),i)if(s===void 0)s=n.length;else{for(var l=0,o=!1,c=-1;l<n.length&&l<i.length;){if(n[l]!==i[l]){if(s===0){o=!0,s=l;break}c=l,s--}l++}o||(s=c+1)}return{text:n,caret:s}}function e2(t){return t.hasAttribute("readonly")}function t2(t){if(t.selectionStart!==t.selectionEnd)return{start:t.selectionStart,end:t.selectionEnd}}var e0={Backspace:8,Delete:46};function s2(t){switch(t.keyCode){case e0.Backspace:return"Backspace";case e0.Delete:return"Delete"}}function r2(t){return t.selectionStart}function Yx(t,s){s!==void 0&&(a2()?setTimeout(function(){return t.setSelectionRange(s,s)},0):t.setSelectionRange(s,s))}function a2(){if(typeof navigator<"u")return n2.test(navigator.userAgent)}var n2=/Android/i;function i2(t,s,r,a,n){Yd(s,r,a,void 0,n)}function l2(t,s,r,a,n){if(!e2(s)){var i=s2(t);switch(i){case"Delete":case"Backspace":t.preventDefault();var l=t2(s);return l?(o2(s,l),Yd(s,r,a,void 0,n)):Yd(s,r,a,i,n)}}}function o2(t,s){var r=t.value;r=r.slice(0,s.start)+r.slice(s.end),t.value=r,Yx(t,s.start)}function Yd(t,s,r,a,n){var i=Vb(t.value,r2(t),s),l=i.value,o=i.caret;if(a){var c=Hb(l,o,a);l=c.value,o=c.caret}var d=Qb(l,o,r),u=d.text;o=d.caret,t.value=u,Yx(t,o),n&&n(l)}var c2=["ref","parse","format","value","defaultValue","controlled","onChange","onKeyDown"];function t0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function qn(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?t0(Object(r),!0).forEach(function(a){d2(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function d2(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function u2(t,s){if(t==null)return{};var r=m2(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function m2(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function h2(t){var s=t.ref,r=t.parse,a=t.format,n=t.value,i=t.defaultValue,l=t.controlled,o=l===void 0?!0:l,c=t.onChange,d=t.onKeyDown,u=u2(t,c2),f=b.useRef(),g=b.useCallback(function(j){f.current=j,s&&(typeof s=="function"?s(j):s.current=j)},[s]),x=b.useCallback(function(j){return i2(j,f.current,r,a,c)},[f,r,a,c]),y=b.useCallback(function(j){if(d&&d(j),!j.defaultPrevented)return l2(j,f.current,r,a,c)},[f,r,a,c,d]),$=qn(qn({},u),{},{ref:g,onChange:x,onKeyDown:y});return o?qn(qn({},$),{},{value:a(s0(n)?"":n).text}):qn(qn({},$),{},{defaultValue:a(s0(i)?"":i).text})}function s0(t){return t==null}var x2=["inputComponent","parse","format","value","defaultValue","onChange","controlled","onKeyDown","type"];function r0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function f2(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?r0(Object(r),!0).forEach(function(a){g2(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function g2(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function p2(t,s){if(t==null)return{};var r=b2(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function b2(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Yo(t,s){var r=t.inputComponent,a=r===void 0?"input":r,n=t.parse,i=t.format,l=t.value,o=t.defaultValue,c=t.onChange,d=t.controlled,u=t.onKeyDown,f=t.type,g=f===void 0?"text":f,x=p2(t,x2),y=h2(f2({ref:s,parse:n,format:i,value:l,defaultValue:o,onChange:c,controlled:d,onKeyDown:u,type:g},x));return ht.createElement(a,y)}Yo=ht.forwardRef(Yo);Yo.propTypes={parse:Ve.func.isRequired,format:Ve.func.isRequired,inputComponent:Ve.elementType,type:Ve.string,value:Ve.string,defaultValue:Ve.string,onChange:Ve.func,controlled:Ve.bool,onKeyDown:Ve.func,onCut:Ve.func,onPaste:Ve.func};function a0(t,s){t=t.split("-"),s=s.split("-");for(var r=t[0].split("."),a=s[0].split("."),n=0;n<3;n++){var i=Number(r[n]),l=Number(a[n]);if(i>l)return 1;if(l>i)return-1;if(!isNaN(i)&&isNaN(l))return 1;if(isNaN(i)&&!isNaN(l))return-1}return t[1]&&s[1]?t[1]>s[1]?1:t[1]<s[1]?-1:0:!t[1]&&s[1]?1:t[1]&&!s[1]?-1:0}var y2={}.constructor;function bn(t){return t!=null&&t.constructor===y2}function di(t){"@babel/helpers - typeof";return di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},di(t)}function mc(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function v2(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,j2(a.key),a)}}function hc(t,s,r){return s&&v2(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function j2(t){var s=N2(t,"string");return di(s)=="symbol"?s:s+""}function N2(t,s){if(di(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(di(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var w2="1.2.0",S2="1.7.35",n0=" ext. ",C2=/^\d+$/,vs=(function(){function t(s){mc(this,t),Zx(s),this.metadata=s,Qx.call(this,s)}return hc(t,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(r){return r!=="001"})}},{key:"getCountryMetadata",value:function(r){return this.metadata.countries[r]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(r){return this.getCountryMetadata(r)!==void 0}},{key:"hasCallingCode",value:function(r){if(this.getCountryCodesForCallingCode(r))return!0;if(this.nonGeographic()){if(this.nonGeographic()[r])return!0}else{var a=this.countryCallingCodes()[r];if(a&&a.length===1&&a[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(r){return this.nonGeographic()?!!this.nonGeographic()[r]:!this.getCountryCodesForCallingCode(r)}},{key:"country",value:function(r){return this.selectNumberingPlan(r)}},{key:"selectNumberingPlan",value:function(r,a){if(r&&C2.test(r)&&(a=r,r=null),r&&r!=="001"){if(!this.hasCountry(r))throw new Error("Unknown country: ".concat(r));this.numberingPlan=new i0(this.getCountryMetadata(r),this)}else if(a){if(!this.hasCallingCode(a))throw new Error("Unknown calling code: ".concat(a));this.numberingPlan=new i0(this.getNumberingPlanMetadata(a),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(r){var a=this.countryCallingCodes()[r];if(a)return a.length===1&&a[0].length===3?void 0:a}},{key:"getCountryCodeForCallingCode",value:function(r){var a=this.getCountryCodesForCallingCode(r);if(a)return a[0]}},{key:"getNumberingPlanMetadata",value:function(r){var a=this.getCountryCodeForCallingCode(r);if(a)return this.getCountryMetadata(a);if(this.nonGeographic()){var n=this.nonGeographic()[r];if(n)return n}else{var i=this.countryCallingCodes()[r];if(i&&i.length===1&&i[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(r){return this.numberingPlan.type(r)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(r){return this.selectNumberingPlan(r)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}])})(),i0=(function(){function t(s,r){mc(this,t),this.globalMetadataObject=r,this.metadata=s,Qx.call(this,r.metadata)}return hc(t,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(r){return r[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var r=this,a=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return a.map(function(n){return new $2(n,r)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(r){return r[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(r){if(this.hasTypes()&&l0(this.types(),r))return new _2(l0(this.types(),r),this)}},{key:"ext",value:function(){return this.v1||this.v2?n0:this.metadata[13]||n0}}])})(),$2=(function(){function t(s,r){mc(this,t),this._format=s,this.metadata=r}return hc(t,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!k2.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}])})(),k2=/^\(?\$1\)?$/,_2=(function(){function t(s,r){mc(this,t),this.type=s,this.metadata=r}return hc(t,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}])})();function l0(t,s){switch(s){case"FIXED_LINE":return t[0];case"MOBILE":return t[1];case"TOLL_FREE":return t[2];case"PREMIUM_RATE":return t[3];case"PERSONAL_NUMBER":return t[4];case"VOICEMAIL":return t[5];case"UAN":return t[6];case"PAGER":return t[7];case"VOIP":return t[8];case"SHARED_COST":return t[9]}}function Zx(t){if(!t)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!bn(t)||!bn(t.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(bn(t)?"an object of shape: { "+Object.keys(t).join(", ")+" }":"a "+A2(t)+": "+t,"."))}var A2=function(s){return di(s)};function qa(t,s){if(s=new vs(s),s.hasCountry(t))return s.selectNumberingPlan(t).countryCallingCode();throw new Error("Unknown country: ".concat(t))}function Xx(t,s){return s.countries.hasOwnProperty(t)}function Qx(t){var s=t.version;typeof s=="number"?(this.v1=s===1,this.v2=s===2,this.v3=s===3,this.v4=s===4):s?a0(s,w2)===-1?this.v2=!0:a0(s,S2)===-1?this.v3=!0:this.v4=!0:this.v1=!0}function xc(t,s,r){return P2(t,s,void 0,r)}function P2(t,s,r,a){s&&(a=new vs(a.metadata),a.selectNumberingPlan(s));var n=a.type(r),i=n&&n.possibleLengths()||a.possibleLengths();if(!i)return"IS_POSSIBLE";var l=t.length,o=i[0];return o===l?"IS_POSSIBLE":o>l?"TOO_SHORT":i[i.length-1]<l?"TOO_LONG":i.indexOf(l,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function L2(t,s,r){if(s===void 0&&(s={}),r=new vs(r),s.v2){if(!t.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(t.countryCallingCode)}else{if(!t.phone)return!1;if(t.country){if(!r.hasCountry(t.country))throw new Error("Unknown country: ".concat(t.country));r.selectNumberingPlan(t.country)}else{if(!t.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(t.countryCallingCode)}}if(r.possibleLengths())return ef(t.phone||t.nationalNumber,t.country,r);if(t.countryCallingCode&&r.isNonGeographicCallingCode(t.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function ef(t,s,r){switch(xc(t,s,r)){case"IS_POSSIBLE":return!0;default:return!1}}function ga(t,s){return t=t||"",new RegExp("^(?:"+s+")$").test(t)}function E2(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=T2(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T2(t,s){if(t){if(typeof t=="string")return o0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o0(t,s):void 0}}function o0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}var I2=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function qu(t,s,r){if(s=s||{},!(!t.country&&!t.countryCallingCode)){r=new vs(r),r.selectNumberingPlan(t.country,t.countryCallingCode);var a=s.v2?t.nationalNumber:t.phone;if(ga(a,r.nationalNumberPattern())){if(ud(a,"FIXED_LINE",r))return r.type("MOBILE")&&r.type("MOBILE").pattern()===""||!r.type("MOBILE")||ud(a,"MOBILE",r)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var n=E2(I2),i;!(i=n()).done;){var l=i.value;if(ud(a,l,r))return l}}}}function ud(t,s,r){return s=r.type(s),!s||!s.pattern()||s.possibleLengths()&&s.possibleLengths().indexOf(t.length)<0?!1:ga(t,s.pattern())}function R2(t,s,r){if(s=s||{},r=new vs(r),r.selectNumberingPlan(t.country,t.countryCallingCode),r.hasTypes())return qu(t,s,r.metadata)!==void 0;var a=s.v2?t.nationalNumber:t.phone;return ga(a,r.nationalNumberPattern())}function F2(t,s,r){var a=new vs(r),n=a.getCountryCodesForCallingCode(t);return n?n.filter(function(i){return O2(s,i,r)}):[]}function O2(t,s,r){var a=new vs(r);return a.selectNumberingPlan(s),a.numberingPlan.possibleLengths().indexOf(t.length)>=0}var zu=2,D2=17,M2=3,Vs="0-9０-９٠-٩۰-۹",B2="-‐-―−ー－",U2="／/",q2="．.",z2="  ­​⁠　",W2="()（）［］\\[\\]",H2="~⁓∼～",Rr="".concat(B2).concat(U2).concat(q2).concat(z2).concat(W2).concat(H2),fc="+＋",V2=new RegExp("(["+Vs+"])");function tf(t,s,r,a){if(s){var n=new vs(a);n.selectNumberingPlan(s,r);var i=new RegExp(n.IDDPrefix());if(t.search(i)===0){t=t.slice(t.match(i)[0].length);var l=t.match(V2);if(!(l&&l[1]!=null&&l[1].length>0&&l[1]==="0"))return t}}}function Zd(t,s){if(t&&s.numberingPlan.nationalPrefixForParsing()){var r=new RegExp("^(?:"+s.numberingPlan.nationalPrefixForParsing()+")"),a=r.exec(t);if(a){var n,i,l=a.length-1,o=l>0&&a[l];if(s.nationalPrefixTransformRule()&&o)n=t.replace(r,s.nationalPrefixTransformRule()),l>1&&(i=a[1]);else{var c=a[0];n=t.slice(c.length),o&&(i=a[1])}var d;if(o){var u=t.indexOf(a[1]),f=t.slice(0,u);f===s.numberingPlan.nationalPrefix()&&(d=s.numberingPlan.nationalPrefix())}else d=a[0];return{nationalNumber:n,nationalPrefix:d,carrierCode:i}}}return{nationalNumber:t}}function G2(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=J2(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2(t,s){if(t){if(typeof t=="string")return c0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c0(t,s):void 0}}function c0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function sf(t,s){var r=s.countries,a=s.metadata;a=new vs(a);for(var n=G2(r),i;!(i=n()).done;){var l=i.value;if(a.selectNumberingPlan(l),a.leadingDigits()){if(t&&t.search(a.leadingDigits())===0)return l}else if(qu({phone:t,country:l},void 0,a.metadata))return l}}function Wu(t,s){var r=s.nationalNumber,a=s.metadata,n=a.getCountryCodesForCallingCode(t);if(n)return n.length===1?n[0]:sf(r,{countries:n,metadata:a.metadata})}function Xd(t,s,r){var a=Zd(t,r),n=a.carrierCode,i=a.nationalNumber;if(i!==t){if(!K2(t,i,r))return{nationalNumber:t};if(r.numberingPlan.possibleLengths()&&(s||(s=Wu(r.numberingPlan.callingCode(),{nationalNumber:i,metadata:r})),!Y2(i,s,r)))return{nationalNumber:t}}return{nationalNumber:i,carrierCode:n}}function K2(t,s,r){return!(ga(t,r.nationalNumberPattern())&&!ga(s,r.nationalNumberPattern()))}function Y2(t,s,r){switch(xc(t,s,r)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function rf(t,s,r,a,n){var i=s||r?qa(s||r,n):a;if(t.indexOf(i)===0){n=new vs(n),n.selectNumberingPlan(s||r,i);var l=t.slice(i.length),o=Xd(l,s,n),c=o.nationalNumber,d=Xd(t,s,n),u=d.nationalNumber;if(!ga(u,n.nationalNumberPattern())&&ga(c,n.nationalNumberPattern())||xc(u,s,n)==="TOO_LONG")return{countryCallingCode:i,number:l}}return{number:t}}function Hu(t,s,r,a,n){if(!t)return{};var i;if(t[0]!=="+"){var l=tf(t,s||r,a,n);if(l&&l!==t)i=!0,t="+"+l;else{if(s||r||a){var o=rf(t,s,r,a,n),c=o.countryCallingCode,d=o.number;if(c)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:c,number:d}}return{number:t}}}if(t[1]==="0")return{};n=new vs(n);for(var u=2;u-1<=M2&&u<=t.length;){var f=t.slice(1,u);if(n.hasCallingCode(f))return n.selectNumberingPlan(f),{countryCallingCodeSource:i?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:f,number:t.slice(u)};u++}return{}}function af(t){return t.replace(new RegExp("[".concat(Rr,"]+"),"g")," ").trim()}var nf=/(\$\d)/;function lf(t,s,r){var a=r.useInternationalFormat,n=r.withNationalPrefix;r.carrierCode,r.metadata;var i=t.replace(new RegExp(s.pattern()),a?s.internationalFormat():n&&s.nationalPrefixFormattingRule()?s.format().replace(nf,s.nationalPrefixFormattingRule()):s.format());return a?af(i):i}var Z2=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function X2(t,s,r){var a=new vs(r);if(a.selectNumberingPlan(t,s),a.defaultIDDPrefix())return a.defaultIDDPrefix();if(Z2.test(a.IDDPrefix()))return a.IDDPrefix()}var Q2=";ext=",zn=function(s){return"([".concat(Vs,"]{1,").concat(s,"})")};function of(t){var s="20",r="15",a="9",n="6",i="[  \\t,]*",l="[:\\.．]?[  \\t,-]*",o="#?",c="(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)",d="(?:[xｘ#＃~～]|int|ｉｎｔ)",u="[- ]+",f="[  \\t]*",g="(?:,{2}|;)",x=Q2+zn(s),y=i+c+l+zn(s)+o,$=i+d+l+zn(a)+o,j=u+zn(n)+"#",N=f+g+l+zn(r)+o,S=f+"(?:,)+"+l+zn(a)+o;return x+"|"+y+"|"+$+"|"+j+"|"+N+"|"+S}var e1="["+Vs+"]{"+zu+"}",t1="["+fc+"]{0,1}(?:["+Rr+"]*["+Vs+"]){3,}["+Rr+Vs+"]*",s1=new RegExp("^["+fc+"]{0,1}(?:["+Rr+"]*["+Vs+"]){1,2}$","i"),r1=t1+"(?:"+of()+")?",a1=new RegExp("^"+e1+"$|^"+r1+"$","i");function n1(t){return t.length>=zu&&a1.test(t)}function i1(t){return s1.test(t)}function l1(t){var s=t.number,r=t.ext;if(!s)return"";if(s[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(s).concat(r?";ext="+r:"")}function rl(t){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rl(t)}function o1(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=c1(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c1(t,s){if(t){if(typeof t=="string")return d0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d0(t,s):void 0}}function d0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function u0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function m0(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?u0(Object(r),!0).forEach(function(a){d1(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function d1(t,s,r){return(s=u1(s))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function u1(t){var s=m1(t,"string");return rl(s)=="symbol"?s:s+""}function m1(t,s){if(rl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(rl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var h0={formatExtension:function(s,r,a){return"".concat(s).concat(a.ext()).concat(r)}};function h1(t,s,r,a){if(r?r=m0(m0({},h0),r):r=h0,a=new vs(a),t.country&&t.country!=="001"){if(!a.hasCountry(t.country))throw new Error("Unknown country: ".concat(t.country));a.selectNumberingPlan(t.country)}else if(t.countryCallingCode)a.selectNumberingPlan(t.countryCallingCode);else return t.phone||"";var n=a.countryCallingCode(),i=r.v2?t.nationalNumber:t.phone,l;switch(s){case"NATIONAL":return i?(l=Zo(i,t.carrierCode,"NATIONAL",a,r),md(l,t.ext,a,r.formatExtension)):"";case"INTERNATIONAL":return i?(l=Zo(i,null,"INTERNATIONAL",a,r),l="+".concat(n," ").concat(l),md(l,t.ext,a,r.formatExtension)):"+".concat(n);case"E.164":return"+".concat(n).concat(i);case"RFC3966":return l1({number:"+".concat(n).concat(i),ext:t.ext});case"IDD":if(!r.fromCountry)return;var o=f1(i,t.carrierCode,n,r.fromCountry,a);return md(o,t.ext,a,r.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(s,'"'))}}function Zo(t,s,r,a,n){var i=x1(a.formats(),t);return i?lf(t,i,{useInternationalFormat:r==="INTERNATIONAL",withNationalPrefix:!(i.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&n&&n.nationalPrefix===!1),carrierCode:s,metadata:a}):t}function x1(t,s){for(var r=o1(t),a;!(a=r()).done;){var n=a.value;if(n.leadingDigitsPatterns().length>0){var i=n.leadingDigitsPatterns()[n.leadingDigitsPatterns().length-1];if(s.search(i)!==0)continue}if(ga(s,n.pattern()))return n}}function md(t,s,r,a){return s?a(t,s,r):t}function f1(t,s,r,a,n){var i=qa(a,n.metadata);if(i===r){var l=Zo(t,s,"NATIONAL",n);return r==="1"?r+" "+l:l}var o=X2(a,void 0,n.metadata);if(o)return"".concat(o," ").concat(r," ").concat(Zo(t,null,"INTERNATIONAL",n))}function al(t){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},al(t)}function x0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function f0(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?x0(Object(r),!0).forEach(function(a){g1(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function g1(t,s,r){return(s=cf(s))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function p1(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function b1(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,cf(a.key),a)}}function y1(t,s,r){return s&&b1(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function cf(t){var s=v1(t,"string");return al(s)=="symbol"?s:s+""}function v1(t,s){if(al(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(al(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var df=(function(){function t(s,r,a){if(p1(this,t),!s)throw new TypeError("First argument is required");if(typeof s!="string")throw new TypeError("First argument must be a string");if(s[0]==="+"&&!r)throw new TypeError("`metadata` argument not passed");if(bn(r)&&bn(r.countries)){a=r;var n=s;if(!w1.test(n))throw new Error('Invalid `number` argument passed: must consist of a "+" followed by digits');var i=Hu(n,void 0,void 0,void 0,a),l=i.countryCallingCode,o=i.number;if(r=o,s=l,!r)throw new Error("Invalid `number` argument passed: too short")}if(!r)throw new TypeError("`nationalNumber` argument is required");if(typeof r!="string")throw new TypeError("`nationalNumber` argument must be a string");Zx(a);var c=N1(s,a),d=c.country,u=c.countryCallingCode;this.country=d,this.countryCallingCode=u,this.nationalNumber=r,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return a}}return y1(t,[{key:"setExt",value:function(r){this.ext=r}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:F2(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return L2(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return R2(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var r=new vs(this.getMetadata());return r.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(r){return this.number===r.number&&this.ext===r.ext}},{key:"getType",value:function(){return qu(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(r,a){return h1(this,r,a?f0(f0({},a),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(r){return this.format("NATIONAL",r)}},{key:"formatInternational",value:function(r){return this.format("INTERNATIONAL",r)}},{key:"getURI",value:function(r){return this.format("RFC3966",r)}}])})(),j1=function(s){return/^[A-Z]{2}$/.test(s)};function N1(t,s){var r,a,n=new vs(s);return j1(t)?(r=t,n.selectNumberingPlan(r),a=n.countryCallingCode()):a=t,{country:r,countryCallingCode:a}}var w1=/^\+\d+$/;function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qd(t)}function S1(t,s,r){return Object.defineProperty(t,"prototype",{writable:!1}),t}function C1(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function $1(t,s,r){return s=il(s),k1(t,Vu()?Reflect.construct(s,r||[],il(t).constructor):s.apply(t,r))}function k1(t,s){if(s&&(Qd(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _1(t)}function _1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A1(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&nl(t,s)}function eu(t){var s=typeof Map=="function"?new Map:void 0;return eu=function(a){if(a===null||!L1(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(s!==void 0){if(s.has(a))return s.get(a);s.set(a,n)}function n(){return P1(a,arguments,il(this).constructor)}return n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),nl(n,a)},eu(t)}function P1(t,s,r){if(Vu())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,s);var n=new(t.bind.apply(t,a));return r&&nl(n,r.prototype),n}function Vu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vu=function(){return!!t})()}function L1(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function nl(t,s){return nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},nl(t,s)}function il(t){return il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},il(t)}var ha=(function(t){function s(r){var a;return C1(this,s),a=$1(this,s,[r]),Object.setPrototypeOf(a,s.prototype),a.name=a.constructor.name,a}return A1(s,t),S1(s)})(eu(Error)),g0=new RegExp("(?:"+of()+")$","i");function E1(t){var s=t.search(g0);if(s<0)return{};for(var r=t.slice(0,s),a=t.match(g0),n=1;n<a.length;){if(a[n])return{number:r,ext:a[n]};n++}}function T1(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=I1(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I1(t,s){if(t){if(typeof t=="string")return p0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p0(t,s):void 0}}function p0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}var R1={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};function uf(t){return R1[t]}function Xo(t){for(var s="",r=T1(t.split("")),a;!(a=r()).done;){var n=a.value,i=uf(n);i&&(s+=i)}return s}function F1(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=O1(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O1(t,s){if(t){if(typeof t=="string")return b0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b0(t,s):void 0}}function b0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function tu(t){for(var s="",r=F1(t.split("")),a;!(a=r()).done;){var n=a.value;s+=mf(n,s)||""}return s}function mf(t,s,r){if(t==="+"){if(s){typeof r=="function"&&r("end");return}return"+"}return uf(t)}var hf="+",D1="[\\-\\.\\(\\)]?",y0="(["+Vs+"]|"+D1+")",M1="^\\"+hf+y0+"*["+Vs+"]"+y0+"*$",B1=new RegExp(M1,"g"),su=Vs,U1="["+su+"]+((\\-)*["+su+"])*",q1="a-zA-Z",z1="["+q1+"]+((\\-)*["+su+"])*",W1="^("+U1+"\\.)*"+z1+"\\.?$",H1=new RegExp(W1,"g"),v0="tel:",ru=";phone-context=",V1=";isub=";function G1(t){var s=t.indexOf(ru);if(s<0)return null;var r=s+ru.length;if(r>=t.length)return"";var a=t.indexOf(";",r);return a>=0?t.substring(r,a):t.substring(r)}function J1(t){return t===null?!0:t.length===0?!1:B1.test(t)||H1.test(t)}function K1(t,s){var r=s.extractFormattedPhoneNumber,a=G1(t);if(!J1(a))throw new ha("NOT_A_NUMBER");var n;if(a===null)n=r(t)||"";else{n="",a.charAt(0)===hf&&(n+=a);var i=t.indexOf(v0),l;i>=0?l=i+v0.length:l=0;var o=t.indexOf(ru);n+=t.substring(l,o)}var c=n.indexOf(V1);if(c>0&&(n=n.substring(0,c)),n!=="")return n}var Y1=250,Z1=new RegExp("["+fc+Vs+"]"),X1=new RegExp("[^"+Vs+"#]+$");function Q1(t,s,r){if(s=s||{},r=new vs(r),s.defaultCountry&&!r.hasCountry(s.defaultCountry))throw s.v2?new ha("INVALID_COUNTRY"):new Error("Unknown country: ".concat(s.defaultCountry));var a=ty(t,s.v2,s.extract),n=a.number,i=a.ext,l=a.error;if(!n){if(s.v2)throw l==="TOO_SHORT"?new ha("TOO_SHORT"):new ha("NOT_A_NUMBER");return{}}var o=ry(n,s.defaultCountry,s.defaultCallingCode,r),c=o.country,d=o.nationalNumber,u=o.countryCallingCode,f=o.countryCallingCodeSource,g=o.carrierCode;if(!r.hasSelectedNumberingPlan()){if(s.v2)throw new ha("INVALID_COUNTRY");return{}}if(!d||d.length<zu){if(s.v2)throw new ha("TOO_SHORT");return{}}if(d.length>D2){if(s.v2)throw new ha("TOO_LONG");return{}}if(s.v2){var x=new df(u,d,r.metadata);return c&&(x.country=c),g&&(x.carrierCode=g),i&&(x.ext=i),x.__countryCallingCodeSource=f,x}var y=(s.extended?r.hasSelectedNumberingPlan():c)?ga(d,r.nationalNumberPattern()):!1;return s.extended?{country:c,countryCallingCode:u,carrierCode:g,valid:y,possible:y?!0:!!(s.extended===!0&&r.possibleLengths()&&ef(d,c,r)),phone:d,ext:i}:y?sy(c,d,i):{}}function ey(t,s,r){if(t){if(t.length>Y1){if(r)throw new ha("TOO_LONG");return}if(s===!1)return t;var a=t.search(Z1);if(!(a<0))return t.slice(a).replace(X1,"")}}function ty(t,s,r){var a=K1(t,{extractFormattedPhoneNumber:function(l){return ey(l,r,s)}});if(!a)return{};if(!n1(a))return i1(a)?{error:"TOO_SHORT"}:{};var n=E1(a);return n.ext?n:{number:a}}function sy(t,s,r){var a={country:t,phone:s};return r&&(a.ext=r),a}function ry(t,s,r,a){var n=Hu(tu(t),void 0,s,r,a.metadata),i=n.countryCallingCodeSource,l=n.countryCallingCode,o=n.number,c;if(l)a.selectNumberingPlan(l);else if(o&&(s||r))a.selectNumberingPlan(s,r),s&&(c=s),l=r||qa(s,a.metadata);else return{};if(!o)return{countryCallingCodeSource:i,countryCallingCode:l};var d=Xd(tu(o),c,a),u=d.nationalNumber,f=d.carrierCode,g=Wu(l,{nationalNumber:u,metadata:a});return g&&(c=g,g==="001"||a.selectNumberingPlan(c)),{country:c,countryCallingCode:l,countryCallingCodeSource:i,nationalNumber:u,carrierCode:f}}function ll(t){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ll(t)}function j0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function N0(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?j0(Object(r),!0).forEach(function(a){ay(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function ay(t,s,r){return(s=ny(s))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function ny(t){var s=iy(t,"string");return ll(s)=="symbol"?s:s+""}function iy(t,s){if(ll(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ll(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function ly(t,s,r){return Q1(t,N0(N0({},s),{},{v2:!0}),r)}function ol(t){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ol(t)}function w0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function oy(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?w0(Object(r),!0).forEach(function(a){cy(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function cy(t,s,r){return(s=dy(s))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function dy(t){var s=uy(t,"string");return ol(s)=="symbol"?s:s+""}function uy(t,s){if(ol(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ol(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function my(t,s){return gy(t)||fy(t,s)||xy(t,s)||hy()}function hy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xy(t,s){if(t){if(typeof t=="string")return S0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S0(t,s):void 0}}function S0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function fy(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw n}}return o}}function gy(t){if(Array.isArray(t))return t}function py(t){var s=Array.prototype.slice.call(t),r=my(s,4),a=r[0],n=r[1],i=r[2],l=r[3],o,c,d;if(typeof a=="string")o=a;else throw new TypeError("A text for parsing must be a string.");if(!n||typeof n=="string")l?(c=i,d=l):(c=void 0,d=i),n&&(c=oy({defaultCountry:n},c));else if(bn(n))i?(c=n,d=i):d=n;else throw new Error("Invalid second argument: ".concat(n));return{text:o,options:c,metadata:d}}function cl(t){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},cl(t)}function C0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function $0(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?C0(Object(r),!0).forEach(function(a){by(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function by(t,s,r){return(s=yy(s))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function yy(t){var s=vy(t,"string");return cl(s)=="symbol"?s:s+""}function vy(t,s){if(cl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(cl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function jy(t,s,r){s&&s.defaultCountry&&!Xx(s.defaultCountry,r)&&(s=$0($0({},s),{},{defaultCountry:void 0}));try{return ly(t,s,r)}catch(a){if(!(a instanceof ha))throw a}}function xf(){var t=py(arguments),s=t.text,r=t.options,a=t.metadata;return jy(s,r,a)}function dl(t){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},dl(t)}function Ny(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function wy(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Cy(a.key),a)}}function Sy(t,s,r){return s&&wy(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cy(t){var s=$y(t,"string");return dl(s)=="symbol"?s:s+""}function $y(t,s){if(dl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(dl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ky=(function(){function t(s){var r=s.onCountryChange,a=s.onCallingCodeChange;Ny(this,t),this.onCountryChange=r,this.onCallingCodeChange=a}return Sy(t,[{key:"reset",value:function(r){var a=r.country,n=r.callingCode;this.international=!1,this.missingPlus=!1,this.IDDPrefix=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(a,n)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberIsModified=!1,this.nationalPrefix=void 0,this.carrierCode=void 0,this.prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix=void 0}},{key:"update",value:function(r){for(var a=0,n=Object.keys(r);a<n.length;a++){var i=n[a];this[i]=r[i]}}},{key:"initCountryAndCallingCode",value:function(r,a){this.setCountry(r),this.setCallingCode(a)}},{key:"setCountry",value:function(r){this.country=r,this.onCountryChange(r)}},{key:"setCallingCode",value:function(r){this.callingCode=r,this.onCallingCodeChange(r,this.country)}},{key:"startInternationalNumber",value:function(r,a){this.international=!0,this.initCountryAndCallingCode(r,a)}},{key:"appendDigits",value:function(r){this.digits+=r}},{key:"appendNationalSignificantNumberDigits",value:function(r){this.nationalSignificantNumber+=r}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}])})();function _y(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=Ay(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ay(t,s){if(t){if(typeof t=="string")return k0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k0(t,s):void 0}}function k0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}var Ir="x",hd=new RegExp(Ir);function Oo(t,s){if(s<1)return"";for(var r="";s>1;)s&1&&(r+=t),s>>=1,t+=t;return r+t}function _0(t,s){return t[s]===")"&&s++,Py(t.slice(0,s))}function Py(t){for(var s=[],r=0;r<t.length;)t[r]==="("?s.push(r):t[r]===")"&&s.pop(),r++;var a=0,n="";s.push(t.length);for(var i=0,l=s;i<l.length;i++){var o=l[i];n+=t.slice(a,o),a=o+1}return n}function Ly(t,s,r){for(var a=_y(r.split("")),n;!(n=a()).done;){var i=n.value;if(t.slice(s+1).search(hd)<0)return;s=t.search(hd),t=t.replace(hd,i)}return[t,s]}function Ey(t,s,r){var a=r.metadata,n=r.shouldTryNationalPrefixFormattingRule,i=r.getSeparatorAfterNationalPrefix,l=new RegExp("^(?:".concat(s.pattern(),")$"));if(l.test(t.nationalSignificantNumber))return Iy(t,s,{metadata:a,shouldTryNationalPrefixFormattingRule:n,getSeparatorAfterNationalPrefix:i})}function Ty(t,s,r){return xc(t,s,r)==="IS_POSSIBLE"}function Iy(t,s,r){var a=r.metadata,n=r.shouldTryNationalPrefixFormattingRule,i=r.getSeparatorAfterNationalPrefix;if(t.nationalSignificantNumber,t.international,t.nationalPrefix,t.carrierCode,n(s)){var l=A0(t,s,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:i,metadata:a});if(l)return l}return A0(t,s,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:i,metadata:a})}function A0(t,s,r){var a=r.metadata,n=r.useNationalPrefixFormattingRule,i=r.getSeparatorAfterNationalPrefix,l=lf(t.nationalSignificantNumber,s,{carrierCode:t.carrierCode,useInternationalFormat:t.international,withNationalPrefix:n,metadata:a});if(n||(t.nationalPrefix?l=t.nationalPrefix+i(s)+l:t.prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix&&(l=t.prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix+" "+l)),Ry(l,t))return l}function Ry(t,s){return Xo(t)===s.getNationalDigits()}function ul(t){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ul(t)}function Fy(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Oy(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,My(a.key),a)}}function Dy(t,s,r){return s&&Oy(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function My(t){var s=By(t,"string");return ul(s)=="symbol"?s:s+""}function By(t,s){if(ul(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ul(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uy=(function(){function t(){Fy(this,t)}return Dy(t,[{key:"parse",value:function(r){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(r),this.context.length!==1)throw new Error("Non-finalized contexts left when pattern parse ended");var a=this.context[0],n=a.branches,i=a.instructions;if(n)return{op:"|",args:n.concat([xd(i)])};if(i.length===0)throw new Error("Pattern is required");return i.length===1?i[0]:i}},{key:"startContext",value:function(r){this.context.push(r)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(r){if(!r)throw new Error("Pattern is required");var a=r.match(Wy);if(!a){if(zy.test(r))throw new Error("Illegal characters found in a pattern: ".concat(r));this.getContext().instructions=this.getContext().instructions.concat(r.split(""));return}var n=a[1],i=r.slice(0,a.index),l=r.slice(a.index+n.length);switch(n){case"(?:":i&&this.parsePattern(i),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(i&&this.parsePattern(i),this.getContext().instructions.length===0)throw new Error('No instructions found after "|" operator in an "or" group');var o=this.getContext(),c=o.branches;c.push(xd(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:c});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(i&&this.parsePattern(i),!this.getContext().branches)if(this.context.length===1)this.getContext().branches=[];else throw new Error('"branches" not found in an "or" group context');this.getContext().branches.push(xd(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":i&&this.parsePattern(i),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:qy(i)});break;default:throw new Error("Unknown operator: ".concat(n))}l&&this.parsePattern(l)}}])})();function qy(t){for(var s=[],r=0;r<t.length;){if(t[r]==="-"){if(r===0||r===t.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(t));for(var a=t[r-1].charCodeAt(0)+1,n=t[r+1].charCodeAt(0)-1,i=a;i<=n;)s.push(String.fromCharCode(i)),i++}else s.push(t[r]);r++}return s}var zy=/[\(\)\[\]\?\:\|]/,Wy=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function xd(t){return t.length===1?t[0]:t}function P0(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=Hy(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hy(t,s){if(t){if(typeof t=="string")return L0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L0(t,s):void 0}}function L0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function ml(t){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ml(t)}function Vy(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Gy(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ky(a.key),a)}}function Jy(t,s,r){return s&&Gy(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ky(t){var s=Yy(t,"string");return ml(s)=="symbol"?s:s+""}function Yy(t,s){if(ml(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ml(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zy=(function(){function t(s){Vy(this,t),this.matchTree=new Uy().parse(s)}return Jy(t,[{key:"match",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=a.allowOverflow;if(!r)throw new Error("String is required");var i=au(r.split(""),this.matchTree,!0);if(i&&i.match&&delete i.matchedChars,!(i&&i.overflow&&!n))return i}}])})();function au(t,s,r){if(typeof s=="string"){var a=t.join("");return s.indexOf(a)===0?t.length===s.length?{match:!0,matchedChars:t}:{partialMatch:!0}:a.indexOf(s)===0?r&&t.length>s.length?{overflow:!0}:{match:!0,matchedChars:t.slice(0,s.length)}:void 0}if(Array.isArray(s)){for(var n=t.slice(),i=0;i<s.length;){var l=s[i],o=au(n,l,r&&i===s.length-1);if(o){if(o.overflow)return o;if(o.match){if(n=n.slice(o.matchedChars.length),n.length===0)return i===s.length-1?{match:!0,matchedChars:t}:{partialMatch:!0}}else{if(o.partialMatch)return{partialMatch:!0};throw new Error(`Unsupported match result:
`.concat(JSON.stringify(o,null,2)))}}else return;i++}return r?{overflow:!0}:{match:!0,matchedChars:t.slice(0,t.length-n.length)}}switch(s.op){case"|":for(var c,d=P0(s.args),u;!(u=d()).done;){var f=u.value,g=au(t,f,r);if(g){if(g.overflow)return g;if(g.match)return{match:!0,matchedChars:g.matchedChars};if(g.partialMatch)c=!0;else throw new Error(`Unsupported match result:
`.concat(JSON.stringify(g,null,2)))}}return c?{partialMatch:!0}:void 0;case"[]":for(var x=P0(s.args),y;!(y=x()).done;){var $=y.value;if(t[0]===$)return t.length===1?{match:!0,matchedChars:t}:r?{overflow:!0}:{match:!0,matchedChars:[$]}}return;default:throw new Error("Unsupported instruction tree: ".concat(s))}}function hl(t){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},hl(t)}function E0(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=Xy(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xy(t,s){if(t){if(typeof t=="string")return T0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T0(t,s):void 0}}function T0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function Qy(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ev(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,sv(a.key),a)}}function tv(t,s,r){return s&&ev(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function sv(t){var s=rv(t,"string");return hl(s)=="symbol"?s:s+""}function rv(t,s){if(hl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(hl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nu="9",av=15,nv=Oo(nu,av),iv=/[- ]/,lv=function(){return/\[([^\[\]])*\]/g},ov=function(){return/\d(?=[^,}][^,}])/g},cv=new RegExp("["+Rr+"]*\\$1["+Rr+"]*(\\$\\d["+Rr+"]*)*$"),I0=3,dv=(function(){function t(s){s.state;var r=s.metadata;Qy(this,t),this.metadata=r,this.resetFormat()}return tv(t,[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(r,a){this.resetFormat(),r?(this.isNANP=r.callingCode()==="1",this.matchingFormats=r.formats(),a.nationalSignificantNumber&&this.narrowDownMatchingFormats(a)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(r,a){var n=this;if(Ty(a.nationalSignificantNumber,a.country,this.metadata))for(var i=E0(this.matchingFormats),l;!(l=i()).done;){var o=l.value,c=Ey(a,o,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(u){return n.shouldTryNationalPrefixFormattingRule(u,{international:a.international,nationalPrefix:a.nationalPrefix})},getSeparatorAfterNationalPrefix:function(u){return n.getSeparatorAfterNationalPrefix(u)}});if(c)return this.resetFormat(),this.chosenFormat=o,this.setNationalNumberTemplate(c.replace(/\d/g,Ir),a),this.populatedNationalNumberTemplate=c,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(Ir),c}return this.formatNationalNumberWithNextDigits(r,a)}},{key:"formatNationalNumberWithNextDigits",value:function(r,a){var n=this.chosenFormat,i=this.chooseFormat(a);if(i)return i===n?this.formatNextNationalNumberDigits(r):this.formatNextNationalNumberDigits(a.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(r){var a=this,n=r.nationalSignificantNumber,i=r.nationalPrefix,l=r.international,o=n,c=o.length-I0;c<0&&(c=0),this.matchingFormats=this.matchingFormats.filter(function(d){return a.formatSuits(d,l,i)&&a.formatMatches(d,o,c)}),this.chosenFormat&&this.matchingFormats.indexOf(this.chosenFormat)===-1&&this.resetFormat()}},{key:"formatSuits",value:function(r,a,n){return!(n&&!r.usesNationalPrefix()&&!r.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!a&&!n&&r.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(r,a,n){var i=r.leadingDigitsPatterns().length;if(i===0)return!0;n=Math.min(n,i-1);var l=r.leadingDigitsPatterns()[n];if(a.length<I0)try{return new Zy(l).match(a,{allowOverflow:!0})!==void 0}catch(o){return console.error(o),!0}return new RegExp("^(".concat(l,")")).test(a)}},{key:"getFormatFormat",value:function(r,a){return a?r.internationalFormat():r.format()}},{key:"chooseFormat",value:function(r){for(var a=this,n=function(){var d=o.value;return a.chosenFormat===d?0:cv.test(a.getFormatFormat(d,r.international))?a.createTemplateForFormat(d,r)?(a.chosenFormat=d,0):(a.matchingFormats=a.matchingFormats.filter(function(u){return u!==d}),1):1},i,l=E0(this.matchingFormats.slice()),o;!(o=l()).done&&(i=n(),i!==0););return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(r,a){if(!(r.pattern().indexOf("|")>=0)){var n=this.getTemplateForFormat(r,a);if(n)return this.setNationalNumberTemplate(n,a),!0}}},{key:"getSeparatorAfterNationalPrefix",value:function(r){return this.isNANP||r&&r.nationalPrefixFormattingRule()&&iv.test(r.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(r,a){var n=r.IDDPrefix,i=r.missingPlus;return n?a&&a.spacing===!1?n:n+" ":i?"":"+"}},{key:"getTemplate",value:function(r){if(this.template){for(var a=-1,n=0,i=r.international?this.getInternationalPrefixBeforeCountryCallingCode(r,{spacing:!1}):"";n<i.length+r.getDigitsWithoutInternationalPrefix().length;)a=this.template.indexOf(Ir,a+1),n++;return _0(this.template,a+1)}}},{key:"setNationalNumberTemplate",value:function(r,a){this.nationalNumberTemplate=r,this.populatedNationalNumberTemplate=r,this.populatedNationalNumberTemplatePosition=-1,a.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(a).replace(/[\d\+]/g,Ir)+Oo(Ir,a.callingCode.length)+" "+r:this.template=r}},{key:"getTemplateForFormat",value:function(r,a){var n=a.nationalSignificantNumber,i=a.international,l=a.nationalPrefix,o=a.prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix,c=r.pattern();c=c.replace(lv(),"\\d").replace(ov(),"\\d");var d=nv.match(c)[0];if(!(n.length>d.length)){var u=new RegExp("^"+c+"$"),f=n.replace(/\d/g,nu);u.test(f)&&(d=f);var g=this.getFormatFormat(r,i),x;if(this.shouldTryNationalPrefixFormattingRule(r,{international:i,nationalPrefix:l})){var y=g.replace(nf,r.nationalPrefixFormattingRule());if(Xo(r.nationalPrefixFormattingRule())===(l||"")+Xo("$1")&&(g=y,x=!0,l))for(var $=l.length;$>0;)g=g.replace(/\d/,Ir),$--}var j=d.replace(new RegExp(c),g).replace(new RegExp(nu,"g"),Ir);return x||(o?j=Oo(Ir,o.length)+" "+j:l&&(j=Oo(Ir,l.length)+this.getSeparatorAfterNationalPrefix(r)+j)),i&&(j=af(j)),j}}},{key:"formatNextNationalNumberDigits",value:function(r){var a=Ly(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,r);if(!a){this.resetFormat();return}return this.populatedNationalNumberTemplate=a[0],this.populatedNationalNumberTemplatePosition=a[1],_0(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1)}},{key:"shouldTryNationalPrefixFormattingRule",value:function(r,a){var n=a.international,i=a.nationalPrefix;if(r.nationalPrefixFormattingRule()){var l=r.usesNationalPrefix();if(l&&i||!l&&!n)return!0}}}])})();function xl(t){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},xl(t)}function ff(t,s){return xv(t)||hv(t,s)||mv(t,s)||uv()}function uv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mv(t,s){if(t){if(typeof t=="string")return R0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R0(t,s):void 0}}function R0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function hv(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw n}}return o}}function xv(t){if(Array.isArray(t))return t}function fv(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function gv(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,bv(a.key),a)}}function pv(t,s,r){return s&&gv(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function bv(t){var s=yv(t,"string");return xl(s)=="symbol"?s:s+""}function yv(t,s){if(xl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(xl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vv="["+Rr+Vs+"]+",jv=new RegExp("^"+vv+"$","i"),Nv="(?:["+fc+"]["+Rr+Vs+"]*|["+Rr+Vs+"]+)",wv=new RegExp("[^"+Rr+Vs+"]+.*$"),Sv=/[^\d\[\]]/,Cv=(function(){function t(s){var r=s.defaultCountry,a=s.defaultCallingCode,n=s.metadata,i=s.onNationalSignificantNumberChange;fv(this,t),this.defaultCountry=r,this.defaultCallingCode=a,this.metadata=n,this.onNationalSignificantNumberChange=i}return pv(t,[{key:"input",value:function(r,a){var n=_v(r),i=ff(n,2),l=i[0],o=i[1],c=Xo(l),d;return o&&(a.digits||(a.startInternationalNumber(void 0,void 0),c||(d=!0))),c&&this.inputDigits(c,a),{digits:c,justLeadingPlus:d}}},{key:"inputDigits",value:function(r,a){var n=a.digits,i=n.length<3&&n.length+r.length>=3;if(a.appendDigits(r),i&&this.extractIddPrefix(a),this.isWaitingForCountryCallingCode(a)){if(!this.extractCountryCallingCode(a))return}else a.appendNationalSignificantNumberDigits(r);a.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(a.getNationalDigits(),function(l){return a.update(l)})}},{key:"isWaitingForCountryCallingCode",value:function(r){var a=r.international,n=r.callingCode;return a&&!n}},{key:"extractCountryCallingCode",value:function(r){var a=Hu("+"+r.getDigitsWithoutInternationalPrefix(),r.country,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),n=a.countryCallingCode,i=a.number;if(n)return r.setCallingCode(n),r.update({nationalSignificantNumber:i}),!0}},{key:"reset",value:function(r){if(r){this.hasSelectedNumberingPlan=!0;var a=r._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=a&&Sv.test(a)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(r,a){if(this.hasSelectedNumberingPlan){var n=Zd(r,this.metadata),i=n.nationalPrefix,l=n.nationalNumber,o=n.carrierCode;if(l!==r)return this.onExtractedNationalNumber(i,o,l,r,a),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(r,a,n){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(r,n);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var i=Zd(r,this.metadata),l=i.nationalPrefix,o=i.nationalNumber,c=i.carrierCode;if(o!==a)return this.onExtractedNationalNumber(l,c,o,r,n),!0}}},{key:"onExtractedNationalNumber",value:function(r,a,n,i,l){var o=!1,c,d=i.lastIndexOf(n);if(d<0||d!==i.length-n.length)o=!0;else{var u=i.slice(0,d);u&&u!==r&&(c=u)}l({nationalPrefix:r,carrierCode:a,nationalSignificantNumber:n,nationalSignificantNumberIsModified:o,prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix:c}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(r){if(this.extractAnotherNationalSignificantNumber(r.getNationalDigits(),r.nationalSignificantNumber,function(a){return r.update(a)}))return!0;if(this.extractIddPrefix(r))return this.extractCallingCodeAndNationalSignificantNumber(r),!0;if(this.fixMissingPlus(r))return this.extractCallingCodeAndNationalSignificantNumber(r),!0}},{key:"extractIddPrefix",value:function(r){var a=r.international,n=r.IDDPrefix,i=r.digits;if(r.nationalSignificantNumber,!(a||n)){var l=tf(i,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);if(l!==void 0&&l!==i)return r.update({IDDPrefix:i.slice(0,i.length-l.length)}),this.startInternationalNumber(r,{country:void 0,callingCode:void 0}),!0}}},{key:"fixMissingPlus",value:function(r){if(!r.international){var a=rf(r.digits,r.country,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),n=a.countryCallingCode;if(n)return r.update({missingPlus:!0}),this.startInternationalNumber(r,{country:r.country,callingCode:n}),!0}}},{key:"startInternationalNumber",value:function(r,a){var n=a.country,i=a.callingCode;r.startInternationalNumber(n,i),r.nationalSignificantNumber&&(r.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(r){this.extractCountryCallingCode(r)&&this.extractNationalSignificantNumber(r.getNationalDigits(),function(a){return r.update(a)})}}])})();function $v(t){var s=t.search(Nv);if(!(s<0)){t=t.slice(s);var r;return t[0]==="+"&&(r=!0,t=t.slice(1)),t=t.replace(wv,""),r&&(t="+"+t),t}}function kv(t){var s=$v(t)||"";return s[0]==="+"?[s.slice(1),!0]:[s]}function _v(t){var s=kv(t),r=ff(s,2),a=r[0],n=r[1];return jv.test(a)||(a=""),[a,n]}function fl(t){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},fl(t)}function Av(t,s){return Tv(t)||Ev(t,s)||Lv(t,s)||Pv()}function Pv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lv(t,s){if(t){if(typeof t=="string")return F0(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F0(t,s):void 0}}function F0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function Ev(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw n}}return o}}function Tv(t){if(Array.isArray(t))return t}function Iv(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Rv(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ov(a.key),a)}}function Fv(t,s,r){return s&&Rv(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ov(t){var s=Dv(t,"string");return fl(s)=="symbol"?s:s+""}function Dv(t,s){if(fl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(fl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mi=(function(){function t(s,r){Iv(this,t),this.metadata=new vs(r);var a=this.getCountryAndCallingCode(s),n=Av(a,2),i=n[0],l=n[1];this.defaultCountry=i,this.defaultCallingCode=l,this.reset()}return Fv(t,[{key:"getCountryAndCallingCode",value:function(r){var a,n;return r&&(bn(r)?(a=r.defaultCountry,n=r.defaultCallingCode):a=r),a&&!this.metadata.hasCountry(a)&&(a=void 0),[a,n]}},{key:"input",value:function(r){var a=this.parser.input(r,this.state),n=a.digits,i=a.justLeadingPlus;if(i)this.formattedOutput="+";else if(n){this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state);var l;if(this.metadata.hasSelectedNumberingPlan()&&(l=this.formatter.format(n,this.state)),l===void 0&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var o=this.state.getNationalDigits();o&&(l=this.formatter.format(o,this.state))}this.formattedOutput=l?this.getFullNumber(l):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var r=this;return this.state=new ky({onCountryChange:function(n){r.country=n},onCallingCodeChange:function(n,i){r.metadata.selectNumberingPlan(i,n),r.formatter.reset(r.metadata.numberingPlan,r.state),r.parser.reset(r.metadata.numberingPlan)}}),this.formatter=new dv({state:this.state,metadata:this.metadata}),this.parser=new Cv({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){r.determineTheCountryIfNeeded(),r.formatter.reset(r.metadata.numberingPlan,r.state)}}),this.state.reset({country:this.defaultCountry,callingCode:this.defaultCallingCode}),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){var r=this.state.digits;if(r)return this._getCountry()}},{key:"_getCountry",value:function(){var r=this.state.country;return r}},{key:"determineTheCountryIfNeeded",value:function(){(!this.state.country||this.isCountryCallingCodeAmbiguous())&&this.determineTheCountry()}},{key:"getFullNumber",value:function(r){var a=this;if(this.isInternational()){var n=function(o){return a.formatter.getInternationalPrefixBeforeCountryCallingCode(a.state,{spacing:!!o})+o},i=this.state.callingCode;return n(i?r?"".concat(i," ").concat(r):i:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return r}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var r=this.state,a=r.nationalSignificantNumber,n=r.prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix,i=r.nationalPrefix,l=a,o=n||i;return o&&(l=o+l),l}},{key:"getNonFormattedNumber",value:function(){var r=this.state.nationalSignificantNumberIsModified;return this.getFullNumber(r?this.state.getNationalDigits():this.getNonFormattedNationalNumberWithPrefix())}},{key:"getNonFormattedTemplate",value:function(){var r=this.getNonFormattedNumber();if(r)return r.replace(/[\+\d]/g,Ir)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var r=this.state.callingCode,a=this.metadata.getCountryCodesForCallingCode(r);return a&&a.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(Wu(this.isInternational()?this.state.callingCode:this.defaultCallingCode,{nationalNumber:this.state.nationalSignificantNumber,metadata:this.metadata}))}},{key:"getNumberValue",value:function(){var r=this.state,a=r.digits,n=r.callingCode,i=r.country,l=r.nationalSignificantNumber;if(a){if(this.isInternational())return n?"+"+n+l:"+"+a;if(i||n){var o=i?this.metadata.countryCallingCode():n;return"+"+o+l}}}},{key:"getNumber",value:function(){var r=this.state,a=r.nationalSignificantNumber,n=r.carrierCode,i=r.callingCode,l=this._getCountry();if(a&&!(!l&&!i)){if(l&&l===this.defaultCountry){var o=new vs(this.metadata.metadata);o.selectNumberingPlan(l);var c=o.numberingPlan.callingCode(),d=this.metadata.getCountryCodesForCallingCode(c);if(d.length>1){var u=sf(a,{countries:d,metadata:this.metadata.metadata});u&&(l=u)}}var f=new df(l||i,a,this.metadata.metadata);return n&&(f.carrierCode=n),f}}},{key:"isPossible",value:function(){var r=this.getNumber();return r?r.isPossible():!1}},{key:"isValid",value:function(){var r=this.getNumber();return r?r.isValid():!1}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}])})();function O0(t){return new vs(t).getCountries()}function Mv(t,s,r){return r||(r=s,s=void 0),new mi(s,r).input(t)}function gf(t){var s=t.inputFormat,r=t.country,a=t.metadata;return s==="NATIONAL_PART_OF_INTERNATIONAL"?"+".concat(qa(r,a)):""}function iu(t,s){return s&&(t=t.slice(s.length),t[0]===" "&&(t=t.slice(1))),t}function Bv(t,s,r){if(!(r&&r.ignoreRest)){var a=function(i){if(r)switch(i){case"end":r.ignoreRest=!0;break}};return mf(t,s,a)}}function pf(t){var s=t.onKeyDown,r=t.inputFormat;return b.useCallback(function(a){if(a.keyCode===qv&&r==="INTERNATIONAL"&&a.target instanceof HTMLInputElement&&Uv(a.target)===zv.length){a.preventDefault();return}s&&s(a)},[s,r])}function Uv(t){return t.selectionStart}var qv=8,zv="+",Wv=["onKeyDown","country","inputFormat","metadata","international","withCountryCallingCode"];function lu(){return lu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},lu.apply(this,arguments)}function Hv(t,s){if(t==null)return{};var r=Vv(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function Vv(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Gv(t){function s(r,a){var n=r.onKeyDown,i=r.country,l=r.inputFormat,o=r.metadata,c=o===void 0?t:o;r.international,r.withCountryCallingCode;var d=Hv(r,Wv),u=b.useCallback(function(g){var x=new mi(i,c),y=gf({inputFormat:l,country:i,metadata:c}),$=x.input(y+g),j=x.getTemplate();return y&&($=iu($,y),j&&(j=iu(j,y))),{text:$,template:j}},[i,c]),f=pf({onKeyDown:n,inputFormat:l});return ht.createElement(Yo,lu({},d,{ref:a,parse:Bv,format:u,onKeyDown:f}))}return s=ht.forwardRef(s),s.propTypes={value:Ve.string.isRequired,onChange:Ve.func.isRequired,onKeyDown:Ve.func,country:Ve.string,inputFormat:Ve.oneOf(["INTERNATIONAL","NATIONAL_PART_OF_INTERNATIONAL","NATIONAL","INTERNATIONAL_OR_NATIONAL"]).isRequired,metadata:Ve.object},s}const Jv=Gv();var Kv=["value","onChange","onKeyDown","country","inputFormat","metadata","inputComponent","international","withCountryCallingCode"];function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ou.apply(this,arguments)}function Yv(t,s){if(t==null)return{};var r=Zv(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function Zv(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Xv(t){function s(r,a){var n=r.value,i=r.onChange,l=r.onKeyDown,o=r.country,c=r.inputFormat,d=r.metadata,u=d===void 0?t:d,f=r.inputComponent,g=f===void 0?"input":f;r.international,r.withCountryCallingCode;var x=Yv(r,Kv),y=gf({inputFormat:c,country:o,metadata:u}),$=b.useCallback(function(N){var S=tu(N.target.value);if(S===n){var _=D0(y,S,o,u);_.indexOf(N.target.value)===0&&(S=S.slice(0,-1))}i(S)},[y,n,i,o,u]),j=pf({onKeyDown:l,inputFormat:c});return ht.createElement(g,ou({},x,{ref:a,value:D0(y,n,o,u),onChange:$,onKeyDown:j}))}return s=ht.forwardRef(s),s.propTypes={value:Ve.string.isRequired,onChange:Ve.func.isRequired,onKeyDown:Ve.func,country:Ve.string,inputFormat:Ve.oneOf(["INTERNATIONAL","NATIONAL_PART_OF_INTERNATIONAL","NATIONAL","INTERNATIONAL_OR_NATIONAL"]).isRequired,metadata:Ve.object,inputComponent:Ve.elementType},s}const Qv=Xv();function D0(t,s,r,a){return iu(Mv(t+s,r,a),t)}function e5(t){return M0(t[0])+M0(t[1])}function M0(t){return String.fromCodePoint(127397+t.toUpperCase().charCodeAt(0))}var t5=["value","onChange","options","disabled","readOnly"],s5=["value","options","className","iconComponent","getIconAspectRatio","arrowComponent","unicodeFlags"];function r5(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=a5(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a5(t,s){if(t){if(typeof t=="string")return B0(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B0(t,s)}}function B0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function Qo(){return Qo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Qo.apply(this,arguments)}function bf(t,s){if(t==null)return{};var r=n5(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function n5(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function yf(t){var s=t.value,r=t.onChange,a=t.options,n=t.disabled,i=t.readOnly,l=bf(t,t5),o=b.useCallback(function(c){var d=c.target.value;r(d==="ZZ"?void 0:d)},[r]);return b.useMemo(function(){return jf(a,s)},[a,s]),ht.createElement("select",Qo({},l,{disabled:n||i,readOnly:i,value:s||"ZZ",onChange:o}),a.map(function(c){var d=c.value,u=c.label,f=c.divider;return ht.createElement("option",{key:f?"|":d||"ZZ",value:f?"|":d||"ZZ",disabled:!!f,style:f?i5:void 0},u)}))}yf.propTypes={value:Ve.string,onChange:Ve.func.isRequired,options:Ve.arrayOf(Ve.shape({value:Ve.string,label:Ve.string,divider:Ve.bool})).isRequired,disabled:Ve.bool,readOnly:Ve.bool};var i5={fontSize:"1px",backgroundColor:"currentColor",color:"inherit"};function vf(t){var s=t.value,r=t.options,a=t.className,n=t.iconComponent;t.getIconAspectRatio;var i=t.arrowComponent,l=i===void 0?l5:i,o=t.unicodeFlags,c=bf(t,s5),d=b.useMemo(function(){return jf(r,s)},[r,s]);return ht.createElement("div",{className:"PhoneInputCountry"},ht.createElement(yf,Qo({},c,{value:s,options:r,className:Ko("PhoneInputCountrySelect",a)})),d&&(o&&s?ht.createElement("div",{className:"PhoneInputCountryIconUnicode"},e5(s)):ht.createElement(n,{"aria-hidden":!0,country:s,label:d.label,aspectRatio:o?1:void 0})),ht.createElement(l,null))}vf.propTypes={iconComponent:Ve.elementType,arrowComponent:Ve.elementType,unicodeFlags:Ve.bool};function l5(){return ht.createElement("div",{className:"PhoneInputCountrySelectArrow"})}function jf(t,s){for(var r=r5(t),a;!(a=r()).done;){var n=a.value;if(!n.divider&&o5(n.value,s))return n}}function o5(t,s){return t==null?s==null:t===s}var c5=["country","countryName","flags","flagUrl"];function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},cu.apply(this,arguments)}function d5(t,s){if(t==null)return{};var r=u5(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function u5(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Gu(t){var s=t.country,r=t.countryName,a=t.flags,n=t.flagUrl,i=d5(t,c5);return a&&a[s]?a[s]({title:r}):ht.createElement("img",cu({},i,{alt:r,role:r?void 0:"presentation",src:n.replace("{XX}",s).replace("{xx}",s.toLowerCase())}))}Gu.propTypes={country:Ve.string.isRequired,countryName:Ve.string.isRequired,flags:Ve.objectOf(Ve.elementType),flagUrl:Ve.string.isRequired};var m5=["aspectRatio"],h5=["title"],x5=["title"];function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ec.apply(this,arguments)}function Ju(t,s){if(t==null)return{};var r=f5(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function f5(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function gc(t){var s=t.aspectRatio,r=Ju(t,m5);return s===1?ht.createElement(wf,r):ht.createElement(Nf,r)}gc.propTypes={title:Ve.string.isRequired,aspectRatio:Ve.number};function Nf(t){var s=t.title,r=Ju(t,h5);return ht.createElement("svg",ec({},r,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 75 50"}),ht.createElement("title",null,s),ht.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"},ht.createElement("path",{strokeLinecap:"round",d:"M47.2,36.1C48.1,36,49,36,50,36c7.4,0,14,1.7,18.5,4.3"}),ht.createElement("path",{d:"M68.6,9.6C64.2,12.3,57.5,14,50,14c-7.4,0-14-1.7-18.5-4.3"}),ht.createElement("line",{x1:"26",y1:"25",x2:"74",y2:"25"}),ht.createElement("line",{x1:"50",y1:"1",x2:"50",y2:"49"}),ht.createElement("path",{strokeLinecap:"round",d:"M46.3,48.7c1.2,0.2,2.5,0.3,3.7,0.3c13.3,0,24-10.7,24-24S63.3,1,50,1S26,11.7,26,25c0,2,0.3,3.9,0.7,5.8"}),ht.createElement("path",{strokeLinecap:"round",d:"M46.8,48.2c1,0.6,2.1,0.8,3.2,0.8c6.6,0,12-10.7,12-24S56.6,1,50,1S38,11.7,38,25c0,1.4,0.1,2.7,0.2,4c0,0.1,0,0.2,0,0.2"})),ht.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"none",fill:"currentColor",d:"M12.4,17.9c2.9-2.9,5.4-4.8,0.3-11.2S4.1,5.2,1.3,8.1C-2,11.4,1.1,23.5,13.1,35.6s24.3,15.2,27.5,11.9c2.8-2.8,7.8-6.3,1.4-11.5s-8.3-2.6-11.2,0.3c-2,2-7.2-2.2-11.7-6.7S10.4,19.9,12.4,17.9z"}))}Nf.propTypes={title:Ve.string.isRequired};function wf(t){var s=t.title,r=Ju(t,x5);return ht.createElement("svg",ec({},r,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"}),ht.createElement("title",null,s),ht.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeLinecap:"round"},ht.createElement("path",{d:"M8.45,13A21.44,21.44,0,1,1,37.08,41.56"}),ht.createElement("path",{d:"M19.36,35.47a36.9,36.9,0,0,1-2.28-13.24C17.08,10.39,21.88.85,27.8.85s10.72,9.54,10.72,21.38c0,6.48-1.44,12.28-3.71,16.21"}),ht.createElement("path",{d:"M17.41,33.4A39,39,0,0,1,27.8,32.06c6.62,0,12.55,1.5,16.48,3.86"}),ht.createElement("path",{d:"M44.29,8.53c-3.93,2.37-9.86,3.88-16.49,3.88S15.25,10.9,11.31,8.54"}),ht.createElement("line",{x1:"27.8",y1:"0.85",x2:"27.8",y2:"34.61"}),ht.createElement("line",{x1:"15.2",y1:"22.23",x2:"49.15",y2:"22.23"})),ht.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"transparent",fill:"currentColor",d:"M9.42,26.64c2.22-2.22,4.15-3.59.22-8.49S3.08,17,.93,19.17c-2.49,2.48-.13,11.74,9,20.89s18.41,11.5,20.89,9c2.15-2.15,5.91-4.77,1-8.71s-6.27-2-8.49.22c-1.55,1.55-5.48-1.69-8.86-5.08S7.87,28.19,9.42,26.64Z"}))}wf.propTypes={title:Ve.string.isRequired};function g5(t){if(t.length<2||t[0]!=="+")return!1;for(var s=1;s<t.length;){var r=t.charCodeAt(s);if(!(r>=48&&r<=57))return!1;s++}return!0}function Sf(t){g5(t)||console.error("[react-phone-number-input] Expected the initial `value` to be a E.164 phone number. Got",t)}function p5(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=b5(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b5(t,s){if(t){if(typeof t=="string")return U0(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U0(t,s)}}function U0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function y5(t,s){if(!s)return t;for(var r=[],a=[],n=r,i=function(){var d=o.value;if(d==="|")n.push({divider:!0});else if(d==="..."||d==="…")n=a;else{var u;d==="🌐"?u=void 0:u=d;var f=t.indexOf(t.filter(function(x){return x.value===u})[0]),g=t[f];t.splice(f,1),n.push(g)}},l=p5(s),o;!(o=l()).done;)i();return r.concat(t).concat(a)}function v5(t,s){if(t&&(t=t.filter(function(r){switch(r){case"🌐":case"|":case"...":case"…":return!0;default:return pc(r,s)}}),t.length>0))return t}function pc(t,s){return Xx(t,s)?!0:(console.error("Country not found: ".concat(t)),!1)}function Cf(t,s){return t&&(t=t.filter(function(r){return pc(r,s)}),t.length===0&&(t=void 0)),t}var j5=["country","label","aspectRatio"];function du(){return du=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},du.apply(this,arguments)}function N5(t,s){if(t==null)return{};var r=w5(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function w5(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function $f(t){var s=t.flags,r=t.flagUrl,a=t.flagComponent,n=t.internationalIcon;function i(l){var o=l.country,c=l.label,d=l.aspectRatio,u=N5(l,j5),f=n===gc?d:void 0;return ht.createElement("div",du({},u,{className:Ko("PhoneInputCountryIcon",{"PhoneInputCountryIcon--square":f===1,"PhoneInputCountryIcon--border":o})}),o?ht.createElement(a,{country:o,countryName:c,flags:s,flagUrl:r,className:"PhoneInputCountryIconImg"}):ht.createElement(n,{title:c,aspectRatio:f,className:"PhoneInputCountryIconImg"}))}return i.propTypes={country:Ve.string,label:Ve.string.isRequired,aspectRatio:Ve.number},i}$f({flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",flagComponent:Gu,internationalIcon:gc});function S5(t,s){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=C5(t))||s){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C5(t,s){if(t){if(typeof t=="string")return q0(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q0(t,s)}}function q0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function $5(t,s){for(var r=S5(t),a;!(a=r()).done;){var n=a.value;n&&k5(n,s)}}function k5(t,s){typeof t=="function"?t(s):t.current=s}var kf=Ve.shape({country_calling_codes:Ve.object.isRequired,countries:Ve.object.isRequired}),_f=Ve.objectOf(Ve.string);function fa(t,s){var r="+"+qa(t,s);return r}function _5(t){var s=t.value,r=t.phoneNumber,a=t.defaultCountry,n=t.getAnyCountry,i=t.countries,l=t.required,o=t.metadata,c;return r&&r.country?c=r.country:a&&(!s||ai(s,a,o))&&(c=a),i&&i.indexOf(c)<0&&(c=void 0),!c&&l&&i&&i.length>0&&(c=n()),c}function A5(t){var s=t.countries,r=t.countryNames,a=t.addInternationalOption,n=t.compareStringsLocales,i=t.compareStrings;i||(i=F5);var l=s.map(function(o){return{value:o,label:r[o]||o}});return l.sort(function(o,c){return i(o.label,c.label,n)}),a&&l.unshift({label:r.ZZ}),l}function Af(t,s){return xf(t||"",s)}function P5(t){return t.formatNational().replace(/\D/g,"")}function L5(t,s){var r=s.prevCountry,a=s.newCountry,n=s.metadata,i=s.useNationalFormat;if(r===a)return t;if(!t)return i?"":a?fa(a,n):"";if(a){if(t[0]==="+"){if(i)return t.indexOf("+"+qa(a,n))===0?O5(t,a,n):"";if(r){var l=fa(a,n);return t.indexOf(l)===0?t:l}else{var o=fa(a,n);return t.indexOf(o)===0?t:o}}}else if(t[0]!=="+")return Qn(t,r,n)||"";return t}function Qn(t,s,r){if(t){if(t[0]==="+"){if(t==="+")return;var a=new mi(s,r);return a.input(t),a.getNumberValue()}if(s){var n=Lf(t,s,r);return"+".concat(qa(s,r)).concat(n||"")}}}function E5(t,s,r){var a=Lf(t,s,r);if(a){var n=a.length-T5(s,r);if(n>0)return t.slice(0,t.length-n)}return t}function T5(t,s){return s=new vs(s),s.selectNumberingPlan(t),s.numberingPlan.possibleLengths()[s.numberingPlan.possibleLengths().length-1]}function Pf(t,s){var r=s.country,a=s.countries,n=s.defaultCountry,i=s.latestCountrySelectedByUser,l=s.required,o=s.metadata;if(t==="+")return r;var c=R5(t,o);if(c)return!a||a.indexOf(c)>=0?c:void 0;if(r){if(ai(t,r,o)){if(i&&ai(t,i,o))return i;if(n&&ai(t,n,o))return n;if(!l)return}else if(!l)return}return r}function I5(t,s){var r=s.prevPhoneDigits,a=s.country,n=s.defaultCountry,i=s.latestCountrySelectedByUser,l=s.countryRequired,o=s.getAnyCountry,c=s.countries,d=s.international,u=s.limitMaxLength,f=s.countryCallingCodeEditable,g=s.metadata;if(d&&f===!1&&a){var x=fa(a,g);if(t.indexOf(x)!==0){var y,$=t&&t[0]!=="+";return $?(t=x+t,y=Qn(t,a,g)):t=x,{phoneDigits:t,value:y,country:a}}}d===!1&&a&&t&&t[0]==="+"&&(t=z0(t,a,g)),t&&a&&u&&(t=E5(t,a,g)),t&&t[0]!=="+"&&(!a||d)&&(t="+"+t),!t&&r&&r[0]==="+"&&(d?a=void 0:a=n),t==="+"&&r&&r[0]==="+"&&r.length>1&&(a=void 0);var j;return t&&(t[0]==="+"&&(t==="+"||a&&fa(a,g).indexOf(t)===0)?j=void 0:j=Qn(t,a,g)),j&&(a=Pf(j,{country:a,countries:c,defaultCountry:n,latestCountrySelectedByUser:i,required:!1,metadata:g}),d===!1&&a&&t&&t[0]==="+"&&(t=z0(t,a,g),j=Qn(t,a,g))),!a&&l&&(a=n||o()),{phoneDigits:t,country:a,value:j}}function z0(t,s,r){if(t.indexOf(fa(s,r))===0){var a=new mi(s,r);a.input(t);var n=a.getNumber();return n?n.formatNational().replace(/\D/g,""):""}else return t.replace(/\D/g,"")}function R5(t,s){var r=new mi(null,s);return r.input(t),r.getCountry()}function F5(t,s,r){return String.prototype.localeCompare?t.localeCompare(s,r):t<s?-1:t>s?1:0}function O5(t,s,r){if(s){var a="+"+qa(s,r);if(t.length<a.length){if(a.indexOf(t)===0)return""}else if(t.indexOf(a)===0)return t.slice(a.length)}for(var n=0,i=Object.keys(r.country_calling_codes);n<i.length;n++){var l=i[n];if(t.indexOf(l)===1)return t.slice(1+l.length)}return""}function Lf(t,s,r){var a=new mi(s,r);a.input(t);var n=a.getNumber();return n&&n.nationalNumber}function ai(t,s,r){for(var a=fa(s,r),n=0;n<t.length&&n<a.length;){if(t[n]!==a[n])return!1;n++}return!0}function Ef(t){var s=t.value,r=t.phoneNumber,a=t.defaultCountry,n=t.international,i=t.useNationalFormat,l=t.metadata;return(n===!1||i)&&r&&r.country?P5(r):!s&&n&&a?fa(a,l):s}function gl(t){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},gl(t)}function W0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function go(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?W0(Object(r),!0).forEach(function(a){D5(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function D5(t,s,r){return s=M5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function M5(t){var s=B5(t,"string");return gl(s)=="symbol"?s:s+""}function B5(t,s){if(gl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(gl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function U5(t,s,r){var a=t.metadata,n=t.countries,i=t.defaultCountry,l=t.value,o=t.reset,c=t.international,d=t.displayInitialValueAsLocalNumber,u=t.initialValueFormat,f=s.defaultCountry,g=s.value,x=s.reset;r.country;var y=r.value,$=r.hasUserSelectedACountry,j=r.latestCountrySelectedByUser,N=function(w){return Ef(go(go({},w),{},{international:c,useNationalFormat:d||u==="national",metadata:a}))};if(o!==x)return{phoneDigits:N({value:void 0,defaultCountry:i}),value:void 0,country:i,latestCountrySelectedByUser:void 0,hasUserSelectedACountry:void 0};if(i!==f){var S=!i||pc(i,a),_=!y||c&&y===N({value:void 0,defaultCountry:f}),A=!l&&_;if(!$&&S&&A)return{country:i,phoneDigits:N({value:void 0,defaultCountry:i}),value:void 0}}if(!H0(l,g)&&!H0(l,y)){var P,M;if(l){l&&Sf(l),P=Af(l,a);var ne=Cf(n,a);P&&P.country?(!ne||ne.indexOf(P.country)>=0)&&(M=P.country):(M=Pf(l,{country:void 0,countries:ne,metadata:a}),M||i&&l.indexOf(fa(i,a))===0&&(M=i))}var V;if(l){if(j){var L=M?j===M:ai(l,j,a);L?M||(M=j):V={latestCountrySelectedByUser:void 0}}}else V={latestCountrySelectedByUser:void 0,hasUserSelectedACountry:void 0};return go(go({},V),{},{phoneDigits:N({phoneNumber:P,value:l,defaultCountry:i}),value:l,country:l?M:i})}}function H0(t,s){return t===null&&(t=void 0),s===null&&(s=void 0),t===s}var q5=["name","disabled","readOnly","autoComplete","style","className","inputRef","inputComponent","numberInputProps","smartCaret","countrySelectComponent","countrySelectProps","containerComponent","containerComponentProps","defaultCountry","countries","countryOptionsOrder","labels","flags","flagComponent","flagUrl","addInternationalOption","internationalIcon","displayInitialValueAsLocalNumber","initialValueFormat","onCountryChange","limitMaxLength","countryCallingCodeEditable","focusInputOnCountrySelection","reset","metadata","international","locales"];function ui(t){"@babel/helpers - typeof";return ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ui(t)}function V0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Tf(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?V0(Object(r),!0).forEach(function(a){Tr(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function ni(){return ni=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ni.apply(this,arguments)}function z5(t,s){if(t==null)return{};var r=W5(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function W5(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function H5(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function G0(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Rf(a.key),a)}}function V5(t,s,r){return s&&G0(t.prototype,s),r&&G0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function G5(t,s,r){return s=tc(s),J5(t,If()?Reflect.construct(s,r||[],tc(t).constructor):s.apply(t,r))}function J5(t,s){if(s&&(ui(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K5(t)}function K5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function If(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(If=function(){return!!t})()}function tc(t){return tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tc(t)}function Y5(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&uu(t,s)}function uu(t,s){return uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},uu(t,s)}function Tr(t,s,r){return s=Rf(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Rf(t){var s=Z5(t,"string");return ui(s)=="symbol"?s:s+""}function Z5(t,s){if(ui(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ui(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var X5=(function(t){function s(r){var a;H5(this,s),a=G5(this,s,[r]),Tr(a,"setInputRef",function(j){$5([a.props.inputRef,a.inputRef],j)}),Tr(a,"isCountrySupportedWithError",function(j){var N=a.props.metadata;return pc(j,N)}),Tr(a,"onCountryChange",function(j){var N=a.props,S=N.international,_=N.metadata,A=N.onChange,P=N.focusInputOnCountrySelection,M=a.state,ne=M.phoneDigits,V=M.country,L=L5(ne,{prevCountry:V,newCountry:j,metadata:_,useNationalFormat:!S}),Q=Qn(L,j,_);P&&a.inputRef.current.focus(),a.setState({country:j,latestCountrySelectedByUser:j,hasUserSelectedACountry:!0,phoneDigits:L,value:Q},function(){A(Q)})}),Tr(a,"onChange",function(j){var N=a.props,S=N.defaultCountry,_=N.onChange,A=N.addInternationalOption,P=N.international,M=N.limitMaxLength,ne=N.countryCallingCodeEditable,V=N.metadata,L=a.state,Q=L.countries,w=L.phoneDigits,R=L.country,Z=L.latestCountrySelectedByUser,I=I5(j,{prevPhoneDigits:w,country:R,countryRequired:!A,defaultCountry:S,latestCountrySelectedByUser:Z,getAnyCountry:function(){return a.getFirstSupportedCountry({countries:Q})},countries:Q,international:P,limitMaxLength:M,countryCallingCodeEditable:ne,metadata:V}),re=I.phoneDigits,ee=I.country,ge=I.value,G={phoneDigits:re,value:ge,country:ee};Z&&ge&&!ai(ge,Z,V)&&(G.latestCountrySelectedByUser=void 0),ne===!1&&!ge&&re===a.state.phoneDigits&&(G.forceRerender={}),a.setState(G,function(){return _(ge)})}),Tr(a,"_onFocus",function(){return a.setState({isFocused:!0})}),Tr(a,"_onBlur",function(){return a.setState({isFocused:!1})}),Tr(a,"onFocus",function(j){a._onFocus();var N=a.props.onFocus;N&&N(j)}),Tr(a,"onBlur",function(j){var N=a.props.onBlur;a._onBlur(),N&&N(j)}),Tr(a,"onCountryFocus",function(j){a._onFocus();var N=a.props.countrySelectProps;if(N){var S=N.onFocus;S&&S(j)}}),Tr(a,"onCountryBlur",function(j){a._onBlur();var N=a.props.countrySelectProps;if(N){var S=N.onBlur;S&&S(j)}}),a.inputRef=ht.createRef();var n=a.props,i=n.value;n.labels;var l=n.international,o=n.addInternationalOption,c=n.displayInitialValueAsLocalNumber,d=n.initialValueFormat,u=n.metadata,f=a.props,g=f.defaultCountry,x=f.countries;g&&(a.isCountrySupportedWithError(g)||(g=void 0)),i&&Sf(i),x=Cf(x,u);var y=Af(i,u);a.CountryIcon=$f(a.props);var $=_5({value:i,phoneNumber:y,defaultCountry:g,required:!o,countries:x||O0(u),getAnyCountry:function(){return a.getFirstSupportedCountry({countries:x})},metadata:u});return a.state={props:a.props,country:$,countries:x,phoneDigits:Ef({value:i,phoneNumber:y,defaultCountry:g,international:l,useNationalFormat:c||d==="national",metadata:u}),value:i},a}return Y5(s,t),V5(s,[{key:"componentDidMount",value:function(){var a=this.props.onCountryChange,n=this.props.defaultCountry,i=this.state.country;a&&(n&&(this.isCountrySupportedWithError(n)||(n=void 0)),i!==n&&a(i))}},{key:"componentDidUpdate",value:function(a,n){var i=this.props.onCountryChange,l=this.state.country;i&&l!==n.country&&i(l)}},{key:"getCountrySelectOptions",value:function(a){var n=a.countries,i=this.props,l=i.international,o=i.countryCallingCodeEditable,c=i.countryOptionsOrder,d=i.addInternationalOption,u=i.labels,f=i.locales,g=i.metadata;return this.useMemoCountrySelectOptions(function(){return y5(A5({countries:n||O0(g),countryNames:u,addInternationalOption:l&&o===!1?!1:d,compareStringsLocales:f}),v5(c,g))},[n,c,d,u,g])}},{key:"useMemoCountrySelectOptions",value:function(a,n){return(!this.countrySelectOptionsMemoDependencies||!ej(n,this.countrySelectOptionsMemoDependencies))&&(this.countrySelectOptionsMemo=a(),this.countrySelectOptionsMemoDependencies=n),this.countrySelectOptionsMemo}},{key:"getFirstSupportedCountry",value:function(a){var n=a.countries,i=this.getCountrySelectOptions({countries:n});return i[0].value}},{key:"render",value:function(){var a=this.props,n=a.name,i=a.disabled,l=a.readOnly,o=a.autoComplete,c=a.style,d=a.className;a.inputRef;var u=a.inputComponent,f=a.numberInputProps,g=a.smartCaret,x=a.countrySelectComponent,y=a.countrySelectProps,$=a.containerComponent,j=a.containerComponentProps;a.defaultCountry,a.countries,a.countryOptionsOrder;var N=a.labels;a.flags,a.flagComponent,a.flagUrl,a.addInternationalOption,a.internationalIcon,a.displayInitialValueAsLocalNumber,a.initialValueFormat,a.onCountryChange,a.limitMaxLength,a.countryCallingCodeEditable,a.focusInputOnCountrySelection,a.reset;var S=a.metadata,_=a.international;a.locales;var A=z5(a,q5),P=this.state,M=P.country,ne=P.countries,V=P.phoneDigits,L=P.isFocused,Q=g?Jv:Qv,w=this.getCountrySelectOptions({countries:ne});return ht.createElement($,ni({style:c,className:Ko(d,"PhoneInput",{"PhoneInput--focus":L,"PhoneInput--disabled":i,"PhoneInput--readOnly":l})},j),ht.createElement(x,ni({name:n?"".concat(n,"Country"):void 0,"aria-label":N.country},y,{value:M,options:w,onChange:this.onCountryChange,onFocus:this.onCountryFocus,onBlur:this.onCountryBlur,disabled:i||y&&y.disabled,readOnly:l||y&&y.readOnly,iconComponent:this.CountryIcon})),ht.createElement(Q,ni({ref:this.setInputRef,type:"tel",autoComplete:o},f,A,{inputFormat:_===!0?"INTERNATIONAL":_===!1?"NATIONAL":"INTERNATIONAL_OR_NATIONAL",international:_?!0:void 0,withCountryCallingCode:_?!0:void 0,name:n,metadata:S,country:M,value:V||"",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,disabled:i,readOnly:l,inputComponent:u,className:Ko("PhoneInputInput",f&&f.className,A.className)})))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return Tf({props:a},U5(a,n.props,n))}}])})(ht.PureComponent),Ff=ht.forwardRef(function(t,s){return ht.createElement(X5,ni({},Q5(t),{inputRef:s}))});Ff.propTypes={value:Ve.string,onChange:Ve.func.isRequired,onFocus:Ve.func,onBlur:Ve.func,disabled:Ve.bool,readOnly:Ve.bool,autoComplete:Ve.string,initialValueFormat:Ve.oneOf(["national"]),displayInitialValueAsLocalNumber:Ve.bool,defaultCountry:Ve.string,countries:Ve.arrayOf(Ve.string),labels:_f,locales:Ve.oneOfType([Ve.string,Ve.arrayOf(Ve.string)]),flagUrl:Ve.string,flags:Ve.objectOf(Ve.elementType),flagComponent:Ve.elementType,addInternationalOption:Ve.bool,internationalIcon:Ve.elementType,countryOptionsOrder:Ve.arrayOf(Ve.string),style:Ve.object,className:Ve.string,countrySelectComponent:Ve.elementType,countrySelectProps:Ve.object,inputComponent:Ve.elementType,numberInputProps:Ve.object,containerComponent:Ve.elementType,containerComponentProps:Ve.object,smartCaret:Ve.bool,international:Ve.bool,limitMaxLength:Ve.bool,countryCallingCodeEditable:Ve.bool,metadata:kf,onCountryChange:Ve.func,focusInputOnCountrySelection:Ve.bool};var J0={autoComplete:"tel",countrySelectComponent:vf,flagComponent:Gu,flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",internationalIcon:gc,inputComponent:"input",containerComponent:"div",reset:Ve.any,smartCaret:!0,addInternationalOption:!0,countryCallingCodeEditable:!0,focusInputOnCountrySelection:!0};function Q5(t){t=Tf({},t);for(var s in J0)t[s]===void 0&&(t[s]=J0[s]);return t}function ej(t,s){if(t.length!==s.length)return!1;for(var r=0;r<t.length;){if(t[r]!==s[r])return!1;r++}return!0}function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},mu(t)}function tj(t,s,r){if(r||mu(s)==="object"&&(r=s,s="NATIONAL"),!t)return"";var a=xf(t,r);if(!a)return"";switch(s){case"National":s="NATIONAL";break;case"International":s="INTERNATIONAL";break}return a.format(s)}const sj={ext:"ext.",country:"Phone number country",phone:"Phone",AB:"Abkhazia",AC:"Ascension Island",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cote d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Federated States of Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin (French Part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",OS:"South Ossetia",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Swaziland",TA:"Tristan da Cunha",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe",ZZ:"International"};var rj=["metadata","labels"];function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},hu.apply(this,arguments)}function aj(t,s){if(t==null)return{};var r=nj(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function nj(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Of(t){var s=ht.forwardRef(function(r,a){var n=r.metadata,i=n===void 0?t:n,l=r.labels,o=l===void 0?sj:l,c=aj(r,rj);return ht.createElement(Ff,hu({},c,{ref:a,metadata:i,labels:o}))});return s.propTypes={metadata:kf,labels:_f},s}Of();function ij(t,s){var r=Array.prototype.slice.call(s);return r.push(Kx),t.apply(this,r)}const bc=Of(Kx);function xu(){return ij(tj,arguments)}function lj(){const t=gs(),{showToast:s}=Gs(),[r,a]=b.useState(!1),[n,i]=b.useState(null),[l,o]=b.useState("manual"),[c,d]=b.useState(!1),[u,f]=b.useState([]),[g,x]=b.useState(!1),[y,$]=b.useState(!1),[j]=b.useState(!1),N=b.useRef(null),[S,_]=b.useState(null),[A,P]=b.useState(!1),[M,ne]=b.useState(""),[V,L]=b.useState(""),[Q,w]=b.useState(!1),[R,Z]=b.useState(!1),[I,re]=b.useState([]),[ee,ge]=b.useState(""),{latitude:G,longitude:fe,error:ke,loading:X,getCurrentLocation:k}=Gx();b.useEffect(()=>{const H=Lt();a(H.isAuthenticated),i(H.userData);const ye=()=>{const pe=Lt();a(pe.isAuthenticated),i(pe.userData)};return window.addEventListener("storage",ye),window.addEventListener("authStateChanged",ye),()=>{window.removeEventListener("storage",ye),window.removeEventListener("authStateChanged",ye)}},[]);const q=H=>{_(H),H&&L("")},T=H=>{const ye=Array.from(H.target.files||[]),pe=5,Le=10*1024*1024,Re=["image/jpeg","image/png","image/gif","image/webp"];if(ye.length+I.length>pe){ge(`You can only upload up to ${pe} files.`);return}const We=[],Ye=[];ye.forEach(Ce=>{Re.includes(Ce.type)?Ce.size>Le?Ye.push(`${Ce.name}: File size exceeds 10MB limit.`):We.push(Ce):Ye.push(`${Ce.name}: Invalid file type. Only images are allowed.`)}),Ye.length>0?ge(Ye.join(" ")):(ge(""),re(Ce=>[...Ce,...We]),le("attachments",[...I,...We]))},B=H=>{const ye=I.filter((pe,Le)=>Le!==H);re(ye),le("attachments",ye),ge("")};b.useEffect(()=>{(async()=>{try{const ye=await Gm(13.8043,121.2855);ye.success?console.log("Location name:",ye.locationName):console.log("Using default location: Rosario, Batangas")}catch(ye){console.error("Failed to get location name:",ye),console.log("Using default location: Rosario, Batangas")}})()},[]);const F=H=>{if(!H)return!1;if(H.startsWith("+63")){const pe=H.replace(/\D/g,"");return/^639\d{9}$/.test(pe)}if(H.startsWith("09")){const pe=H.replace(/\D/g,"");return/^09\d{9}$/.test(pe)}const ye=H.replace(/\D/g,"");return ye.startsWith("639")&&ye.length===12?/^639\d{9}$/.test(ye):ye.startsWith("9")&&ye.length===10?/^9\d{9}$/.test(ye):!1},J=b.useMemo(()=>({incidentType:{required:!0},description:{},location:{required:!0},priorityLevel:{required:!0},safetyStatus:{required:!0},guestName:{required:!r},guestContact:{required:!r,custom:H=>!r&&!F(H)?"Please enter a valid Philippine mobile number (e.g., 09123456789 or +639123456789)":""}}),[r]),{fields:W,setValue:le,validateAll:he,getValues:se,isSubmitting:ve,setIsSubmitting:E}=Cn({incidentType:"",description:"",location:"",latitude:null,longitude:null,priorityLevel:"",safetyStatus:"",guestName:"",guestContact:"",attachments:[]},J),ce=[{name:"Alupay",lat:13.8404,lng:121.2922},{name:"Antipolo",lat:13.708,lng:121.3096},{name:"Bagong Pook",lat:13.8402,lng:121.2216},{name:"Balibago",lat:13.8512,lng:121.2855},{name:"Barangay A",lat:13.8457,lng:121.2104},{name:"Barangay B",lat:13.8461,lng:121.2065},{name:"Barangay C",lat:13.8467,lng:121.2032},{name:"Barangay D",lat:13.844,lng:121.2035},{name:"Barangay E",lat:13.8415,lng:121.2047},{name:"Bayawang",lat:13.7944,lng:121.2798},{name:"Baybayin",lat:13.8277,lng:121.2589},{name:"Bulihan",lat:13.7967,lng:121.2351},{name:"Cahigam",lat:13.8021,lng:121.2501},{name:"Calantas",lat:13.734,lng:121.3129},{name:"Colongan",lat:13.8114,lng:121.1762},{name:"Itlugan",lat:13.819,lng:121.2036},{name:"Leviste",lat:13.7694,lng:121.2868},{name:"Lumbangan",lat:13.8122,lng:121.2649},{name:"Maalas-as",lat:13.8112,lng:121.2122},{name:"Mabato",lat:13.8144,lng:121.2913},{name:"Mabunga",lat:13.781,lng:121.2924},{name:"Macalamcam A",lat:13.8551,lng:121.3046},{name:"Macalamcam B",lat:13.8606,lng:121.3265},{name:"Malaya",lat:13.8535,lng:121.172},{name:"Maligaya",lat:13.8182,lng:121.2742},{name:"Marilag",lat:13.8562,lng:121.1764},{name:"Masaya",lat:13.8383,lng:121.1852},{name:"Matamis",lat:13.7216,lng:121.3305},{name:"Mavalor",lat:13.8177,lng:121.2315},{name:"Mayuro",lat:13.7944,lng:121.2623},{name:"Namuco",lat:13.8382,lng:121.2036},{name:"Namunga",lat:13.8431,lng:121.1978},{name:"Nasi",lat:13.7699,lng:121.3127},{name:"Natu",lat:13.842,lng:121.2683},{name:"Palakpak",lat:13.7079,lng:121.332},{name:"Pinagsibaan",lat:13.8438,lng:121.3141},{name:"Putingkahoy",lat:13.8349,lng:121.3227},{name:"Quilib",lat:13.8603,lng:121.2002},{name:"Salao",lat:13.8578,lng:121.3455},{name:"San Carlos",lat:13.8478,lng:121.2475},{name:"San Ignacio",lat:13.8335,lng:121.1764},{name:"San Isidro",lat:13.8074,lng:121.3152},{name:"San Jose",lat:13.8419,lng:121.2329},{name:"San Roque",lat:13.8518,lng:121.2039},{name:"Santa Cruz",lat:13.8599,lng:121.1853},{name:"Timbugan",lat:13.8095,lng:121.1869},{name:"Tiquiwan",lat:13.8284,lng:121.2399},{name:"Tulos",lat:13.7231,lng:121.2971}],K=async H=>{if(H.length<2){f([]),x(!1);return}$(!0);const ye=[...ce.map(pe=>({display_name:`Barangay ${pe.name}, Rosario, Batangas`,lat:pe.lat.toString(),lon:pe.lng.toString(),address:{city:"Rosario",province:"Batangas"},category:"Barangay"}))];setTimeout(()=>{const pe=H.toLowerCase().split(" "),We=ye.filter(Ye=>{const Ce=Ye.display_name.toLowerCase();return pe.some(Fe=>Ce.includes(Fe)||Ye.category.toLowerCase().includes(Fe))}).sort((Ye,Ce)=>{const Fe=Ye.display_name.toLowerCase().includes(H.toLowerCase()),Xe=Ce.display_name.toLowerCase().includes(H.toLowerCase());return Fe&&!Xe?-1:!Fe&&Xe?1:0}).slice(0,6);f(We),x(We.length>0),$(!1)},200)},ze=H=>{le("location",H.display_name),le("latitude",parseFloat(H.lat)),le("longitude",parseFloat(H.lon)),x(!1),o("manual")};b.useEffect(()=>{G&&fe&&l==="auto"&&(le("latitude",G),le("longitude",fe),(async()=>{try{const ye=await Gm(G,fe);typeof ye=="object"&&"success"in ye&&ye.success?le("location",ye.locationName):le("location",`GPS: ${G.toFixed(6)}, ${fe.toFixed(6)}`)}catch(ye){console.error("Geocoding failed:",ye),le("location",`GPS: ${G.toFixed(6)}, ${fe.toFixed(6)}`)}})())},[G,fe,l,le]);const Ie=async()=>{o("auto"),d(!0);try{await k()}catch(H){console.error("Failed to get location:",H)}finally{d(!1)}};b.useEffect(()=>{const H=setTimeout(()=>{W.location.value&&l==="manual"&&K(W.location.value)},500);return()=>clearTimeout(H)},[W.location.value,l]);const Ne=async H=>{if(H.preventDefault(),!r&&(P(!0),!S)){L("Please complete the reCAPTCHA.");return}console.log("Form submission started..."),console.log("Current form values:",se()),console.log("Authentication status:",r);const ye=he();if(console.log("Form validation result:",ye),!ye){console.log("Form validation failed. Field errors:",W);const Le=Object.entries(W).filter(([Re,We])=>We.error).map(([Re,We])=>`${Re}: ${We.error}`).join("; ");s({type:"error",title:"Validation Error",message:Le||"Please fill in all required fields correctly.",durationMs:5e3});return}const pe=r?"/api/incidents/report":"/api/incidents/report-guest";E(!0);try{const Le=se(),Re=new FormData;Re.append("incidentType",(Le.incidentType||"").trim()),Re.append("description",(Le.description||"").trim()),Re.append("location",(Le.location||"").trim()),Re.append("latitude",String(typeof Le.latitude=="number"?Le.latitude:Le.latitude?parseFloat(String(Le.latitude)):null)),Re.append("longitude",String(typeof Le.longitude=="number"?Le.longitude:Le.longitude?parseFloat(String(Le.longitude)):null)),Re.append("priorityLevel",(Le.priorityLevel||"").trim()),Re.append("safetyStatus",(Le.safetyStatus||"").trim()),Re.append("recaptchaToken",S||""),r||(Re.append("guestName",(Le.guestName||"").trim()),Re.append("guestContact",(Le.guestContact||"").trim())),I.forEach(Ce=>{Re.append("attachments",Ce)}),!(Le.location||"").trim()&&Le.latitude&&Le.longitude&&Re.set("location",`GPS Location: ${Number(Le.latitude).toFixed(6)}, ${Number(Le.longitude).toFixed(6)} (Rosario, Batangas)`),console.log("=== FORM SUBMISSION DEBUG ==="),console.log("Raw form data:",Le),console.log("Selected files:",I.length),console.log("FormData contents:");for(const[Ce,Fe]of Re.entries())Fe instanceof File?console.log(`${Ce}: File(${Fe.name}, ${Fe.size} bytes, ${Fe.type})`):console.log(`${Ce}: ${Fe}`);const Ye=await fetch(`${pe}`,{method:"POST",...r&&n?.token?{headers:{Authorization:`Bearer ${n.token}`}}:{},body:Re});if(console.log("Response status:",Ye.status),console.log("Response headers:",Ye.headers),Ye.ok){const Ce=await Ye.json();console.log("SUCCESS: Incident report saved to database:",Ce),s({type:"success",title:"Report Submitted Successfully!",message:"Emergency responders have been notified and will respond as soon as possible.",durationMs:5e3}),setTimeout(()=>{t("/")},3e3)}else{const Ce=await Ye.json();console.error("ERROR: Database save failed"),console.error("Status:",Ye.status),console.error("Response data:",Ce);const Fe=Ce.message||(Ce.missingFields?.length?`Missing: ${Ce.missingFields.join(", ")}`:"Failed to submit incident report. Please try again.");s({type:"error",title:"Submission Failed",message:Fe,durationMs:5e3})}}catch(Le){console.error("Incident report submission failed:",Le),s({type:"error",title:"Network Error",message:"Network error. Please check your connection and try again.",durationMs:5e3})}finally{E(!1),N.current&&N.current.reset(),_(null)}},U=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-alert-line text-red-600"})}),"Incident Information"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Please provide details about the incident"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"incidentType",className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-error-warning-line mr-2 text-red-600"}),"Incident Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-alert-line text-gray-400"})}),e.jsxs("select",{id:"incidentType",name:"incidentType",value:W.incidentType.value,onChange:H=>le("incidentType",H.target.value),className:`w-full pl-10 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all appearance-none bg-white ${W.incidentType.error?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select incident type..."}),e.jsx("option",{value:"fire",children:"🔥 Fire Emergency"}),e.jsx("option",{value:"medical",children:"🚑 Medical Emergency"}),e.jsx("option",{value:"security",children:"🛡 Security Incident"}),e.jsx("option",{value:"accident",children:"💥 Transport Accident"}),e.jsx("option",{value:"natural",children:"🌧 Natural Disaster"}),e.jsx("option",{value:"other",children:"⚠ Other Emergency"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-arrow-down-s-line text-gray-400"})})]}),W.incidentType.touched&&W.incidentType.error&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:W.incidentType.error})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-map-pin-line text-blue-600"})}),"Location Information"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Specify where the incident occurred"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Location Method:"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{type:"button",onClick:()=>o("manual"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="manual"?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Manual Entry"]}),e.jsx("button",{type:"button",onClick:Ie,disabled:c||X,className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="auto"?"bg-green-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"} ${c||X?"opacity-50 cursor-not-allowed":""}`,children:c||X?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Getting Location..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-gps-line mr-2"}),"Auto-Detect"]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"mt-2 mb-4",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx("i",{className:"ri-map-pin-line mr-2 text-blue-600"}),"Select Barangay (Rosario, Batangas)"]}),e.jsxs("select",{className:"w-full px-3 py-3 border border-blue-200 rounded-lg text-sm text-blue-800 font-medium bg-blue-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all mb-1",value:ce.find(H=>`Barangay ${H.name}, Rosario, Batangas`===W.location.value)?W.location.value:"",onChange:H=>{const ye=ce.find(pe=>`Barangay ${pe.name}, Rosario, Batangas`===H.target.value);ye?(le("location",`Barangay ${ye.name}, Rosario, Batangas`),le("latitude",ye.lat),le("longitude",ye.lng),x(!1),o("manual")):(le("location",""),le("latitude",null),le("longitude",null))},children:[e.jsx("option",{value:"",children:"-- Select Barangay --"}),ce.map(H=>e.jsx("option",{value:`Barangay ${H.name}, Rosario, Batangas`,children:H.name},H.name))]}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Choose a barangay to quickly fill location and coordinates."})]}),e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-map-pin-line mr-2 text-blue-600"}),"Location Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-map-pin-line text-gray-400"})}),e.jsx("input",{type:"text",name:"location",id:"location",value:W.location.value,onChange:H=>{le("location",H.target.value),l==="auto"&&o("manual")},onFocus:()=>{u.length>0&&x(!0)},onBlur:()=>{setTimeout(()=>x(!1),200)},className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:l==="auto"?"Auto-detected location will appear here...":"Search for location",required:!0}),(y||j)&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-blue-600"})})]}),g&&u.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:u.map((H,ye)=>e.jsx("button",{type:"button",onClick:()=>ze(H),className:"w-full px-4 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none border-b border-gray-100 last:border-b-0 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("i",{className:"ri-map-pin-line text-blue-600 text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:H.display_name}),H.address&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[H.address.city||H.address.town||H.address.municipality,", ",H.address.province||H.address.state]})]})]})},ye))}),W.location.touched&&W.location.error&&e.jsxs("p",{className:"text-red-600 text-sm mt-2",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),W.location.error]}),ke&&e.jsxs("p",{className:"text-red-600 text-sm mt-2",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),ke]}),G&&fe&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-gps-line text-green-600 text-sm"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 font-medium text-sm",children:"GPS Location Detected"}),e.jsxs("p",{className:"text-green-600 text-xs",children:["Coordinates: ",G.toFixed(6),", ",fe.toFixed(6)]})]})]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-alarm-warning-line text-orange-600"})}),"Priority Level"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"How urgent is this incident?"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"priorityLevel",className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-alarm-warning-line mr-2 text-orange-600"}),"Priority Level ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-alarm-warning-line text-gray-400"})}),e.jsxs("select",{id:"priorityLevel",name:"priorityLevel",value:W.priorityLevel.value,onChange:H=>le("priorityLevel",H.target.value),className:`w-full pl-10 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all appearance-none bg-white ${W.priorityLevel.error?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select priority level..."}),e.jsx("option",{value:"low",children:"🟢 Low Priority - Non-urgent, can wait"}),e.jsx("option",{value:"medium",children:"🟡 Medium Priority - Moderate urgency"}),e.jsx("option",{value:"high",children:"🔴 High Priority - Urgent attention needed"}),e.jsx("option",{value:"critical",children:"🚫 Critical - Immediate response required"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-arrow-down-s-line text-gray-400"})})]}),W.priorityLevel.touched&&W.priorityLevel.error&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:W.priorityLevel.error})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-shield-check-line text-green-600"})}),"Your Safety Status"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Are you currently safe?"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"safetyStatus",className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-shield-check-line mr-2 text-green-600"}),"Your Safety Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-shield-check-line text-gray-400"})}),e.jsxs("select",{id:"safetyStatus",name:"safetyStatus",value:W.safetyStatus.value,onChange:H=>le("safetyStatus",H.target.value),className:`w-full pl-10 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all appearance-none bg-white ${W.safetyStatus.error?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select your safety status..."}),e.jsx("option",{value:"safe",children:"🟢 I am safe - Not in immediate danger"}),e.jsx("option",{value:"injured",children:"🟡 I am injured - Need medical attention"}),e.jsx("option",{value:"danger",children:"🔴 I am in danger - Need immediate help"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-arrow-down-s-line text-gray-400"})})]}),W.safetyStatus.touched&&W.safetyStatus.error&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:W.safetyStatus.error})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-file-text-line text-purple-600"})}),"Incident Description"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Provide detailed information about what happened"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-file-text-line mr-2 text-purple-600"}),"Detailed Description ",e.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),e.jsx("textarea",{value:W.description.value,onChange:H=>le("description",H.target.value),className:"w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all resize-none",rows:6,placeholder:`Please provide a detailed description of the incident including:
• What happened?
• When did it occur?
• Who was involved?
• Any injuries or damages?
• Current situation status...`,required:!0}),W.description.touched&&W.description.error&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:W.description.error})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-image-line text-green-600"})}),"Attachments"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Upload photos related to the incident (optional)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-image-line mr-2 text-green-600"}),"Upload Images"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-green-400 transition-colors",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-camera-line text-2xl text-green-600"})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Click to upload images"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"PNG, JPG, GIF, WebP up to 10MB each (max 5 files)"})]})]}),I.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Selected files:"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:I.map((H,ye)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-image-line text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:H.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(H.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>B(ye),className:"text-red-500 hover:text-red-700 p-1",children:e.jsx("i",{className:"ri-close-line text-lg"})})]},ye))})]}),ee&&e.jsxs("p",{className:"text-red-600 text-sm mt-2",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),ee]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Attachments help emergency responders better understand the situation. Only image files are accepted."})]})]})]}),xe=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-red-50 to-orange-100",children:[e.jsx(Ts,{isAuthenticated:r,userData:n||void 0}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/5 to-orange-600/5"}),e.jsx("div",{className:"absolute inset-0 opacity-40",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25px 25px, rgba(239, 68, 68, 0.05) 2px, transparent 0)",backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"relative container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs("div",{className:"relative inline-flex items-center justify-center mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl blur-lg opacity-30 scale-110"}),e.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-error-warning-line text-3xl text-white"})})]}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-gray-900 via-red-900 to-orange-900 bg-clip-text text-transparent mb-6 leading-tight",children:"Report an Incident"}),e.jsxs("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed",children:["Emergency Incident Reporting System",e.jsx("span",{className:"block text-lg text-gray-500 mt-2",children:"Submit incident reports as a guest or create an account for better tracking"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200/50 rounded-2xl p-6 max-w-3xl mx-auto shadow-lg backdrop-blur-sm mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center text-blue-800",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-information-line text-blue-600"})}),e.jsx("p",{className:"font-semibold text-lg",children:"Guest reporting available - No account required"})]}),e.jsx("p",{className:"text-blue-600 text-sm mt-2 opacity-80",children:"You can submit incident reports without creating an account. Creating an account helps us track your reports better."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsxs(kt,{to:"/auth/login",className:"px-8 py-4 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-xl hover:from-red-700 hover:to-orange-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx("i",{className:"ri-login-box-line mr-2"}),"Sign In"]}),e.jsxs(kt,{to:"/auth/signup",className:"px-8 py-4 border-2 border-red-600 text-red-600 rounded-xl hover:bg-red-50 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx("i",{className:"ri-user-add-line mr-2"}),"Create Account"]})]})]})})]}),e.jsx("div",{className:"container mx-auto px-4 pb-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:e.jsxs("form",{onSubmit:Ne,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-line text-blue-600"})}),"Your Information"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Please provide your contact details"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"guestName",className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-user-line mr-2 text-blue-600"}),"Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-user-line text-gray-400"})}),e.jsx("input",{type:"text",id:"guestName",name:"guestName",value:W.guestName.value,onChange:H=>le("guestName",H.target.value),className:`w-full pl-10 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all ${W.guestName.error?"border-red-300":"border-gray-300"}`,placeholder:"Enter your full name",required:!0})]}),W.guestName.touched&&W.guestName.error&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:W.guestName.error})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"guestContact",className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-phone-line mr-2 text-blue-600"}),"Contact Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-phone-line text-gray-400"})}),e.jsx(bc,{international:!0,defaultCountry:"PH",value:W.guestContact.value,onChange:H=>{le("guestContact",H||"")},className:`w-full pl-10 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all ${W.guestContact.error?"border-red-300":"border-gray-300"}`,placeholder:"Enter phone number"})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Enter a valid Philippine mobile number (e.g., +63 912 345 6789 or 0912 345 6789)"}),W.guestContact.touched&&W.guestContact.error&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:W.guestContact.error})]})]})]}),U(),e.jsxs("div",{className:"mt-6",children:[e.jsxs("p",{className:"text-gray-700 text-sm",children:["By submitting, you agree to our"," ",e.jsx("button",{type:"button",onClick:()=>w(!0),className:"text-red-600 underline hover:text-red-500 bg-transparent border-none p-0 font-medium transition-colors duration-200",children:"terms of service"})," ","and"," ",e.jsx("button",{type:"button",onClick:()=>Z(!0),className:"text-red-600 underline hover:text-red-500 bg-transparent border-none p-0 font-medium transition-colors duration-200",children:"privacy policy"}),e.jsx("span",{className:"text-red-600",children:"*"})]}),M&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:M})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(qb,{sitekey:"6LfVgHUqAAAAAJtQJXShsLo2QbyGby2jquueTZYV",onChange:q,ref:N}),V&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:V})]}),e.jsx("div",{className:"border-t border-gray-200 pt-8",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx(vt,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:ve,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300",children:ve?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Submitting Emergency Report..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-send-plane-line mr-2"}),"Submit Emergency Report"]})})})})]})})})}),e.jsx(sl,{isOpen:Q,onClose:()=>w(!1)}),e.jsx(tl,{isOpen:R,onClose:()=>Z(!1)})]});return r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-red-50 to-orange-100",children:[e.jsx(Ts,{isAuthenticated:r,userData:n||void 0}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/5 to-orange-600/5"}),e.jsx("div",{className:"absolute inset-0 opacity-40",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25px 25px, rgba(239, 68, 68, 0.05) 2px, transparent 0)",backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"relative container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs("div",{className:"relative inline-flex items-center justify-center mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl blur-lg opacity-30 scale-110"}),e.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-error-warning-line text-3xl text-white"})})]}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-gray-900 via-red-900 to-orange-900 bg-clip-text text-transparent mb-6 leading-tight",children:"Report an Incident"}),e.jsxs("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed",children:["Emergency Incident Reporting System",e.jsx("span",{className:"block text-lg text-gray-500 mt-2",children:"Please provide detailed information about the incident"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200/50 rounded-2xl p-6 max-w-3xl mx-auto shadow-lg backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-center text-red-800",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-information-line text-red-600"})}),e.jsx("p",{className:"font-semibold text-lg",children:"Your report helps us respond quickly to emergencies"})]}),e.jsx("p",{className:"text-red-600 text-sm mt-2 opacity-80",children:"All reports are treated with urgency and confidentiality"})]})]})})]}),e.jsx("div",{className:"container mx-auto px-4 pb-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:e.jsxs("form",{onSubmit:Ne,className:"space-y-8",children:[U(),e.jsx("div",{className:"border-t border-gray-200 pt-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(vt,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:ve,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300",children:ve?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Submitting Emergency Report..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-send-plane-line mr-2"}),"Submit Emergency Report"]})}),e.jsxs(kt,{to:"/",className:"px-8 py-4 border-2 border-gray-300 text-gray-700 rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-all duration-300 font-semibold text-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Cancel"]})]})})]})})})}),e.jsx(sl,{isOpen:Q,onClose:()=>w(!1)}),e.jsx(tl,{isOpen:R,onClose:()=>Z(!1)})]}):xe()}function Df({label:t,name:s,id:r,value:a,onChange:n,options:i,error:l,required:o=!1,disabled:c=!1,icon:d}){return e.jsxs("div",{className:"w-full",children:[t&&e.jsxs("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-2",children:[t," ",o&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[d&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:`${d} text-gray-400`})}),e.jsxs("select",{id:r,name:s,value:a,onChange:n,disabled:c,required:o,className:`w-full ${d?"pl-10 pr-4 py-4":"px-3 py-2.5"} text-sm border rounded-xl focus:ring-2 focus:outline-none transition-all duration-200 ${l?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-100"} ${c?"bg-gray-50 text-gray-700 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",disabled:!0,children:"Select an option"}),i.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]})]}),l&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx("i",{className:"ri-error-warning-line"}),l]})]})}function jn({isOpen:t,onClose:s,title:r,children:a,size:n="md",showCloseButton:i=!0}){const l={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return b.useEffect(()=>{const o=c=>{c.key==="Escape"&&t&&s()};return t&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow="unset"}},[t,s]),t?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300",onClick:s}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:`relative bg-white rounded-2xl shadow-2xl w-full ${l[n]} transform transition-all duration-300 scale-100`,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:r}),i&&e.jsx("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors duration-200",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsx("div",{className:"p-6",children:a})]})})]}):null}function pa({isOpen:t,onClose:s,onConfirm:r,title:a,message:n,confirmText:i="Confirm",cancelText:l="Cancel",confirmVariant:o="primary",icon:c="ri-question-line",iconColor:d="text-blue-600",isLoading:u=!1}){return e.jsx(jn,{isOpen:t,onClose:s,title:a,size:"sm",showCloseButton:!1,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:`${c} text-2xl ${d}`})}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:n}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(vt,{variant:"outline",size:"md",onClick:s,disabled:u,fullWidth:!0,children:l}),e.jsx(vt,{variant:o,size:"md",onClick:r,disabled:u,fullWidth:!0,children:u?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Processing..."]}):i})]})]})})}const oj=t=>{if(!t)return!1;if(t.startsWith("+63")){const r=t.replace(/\D/g,"");return/^639\d{9}$/.test(r)}if(t.startsWith("09")){const r=t.replace(/\D/g,"");return/^09\d{9}$/.test(r)}const s=t.replace(/\D/g,"");return s.startsWith("639")&&s.length===12?/^639\d{9}$/.test(s):s.startsWith("9")&&s.length===10?/^9\d{9}$/.test(s):!1},cj=[{name:"Alupay",lat:13.8404,lng:121.2922},{name:"Antipolo",lat:13.708,lng:121.3096},{name:"Bagong Pook",lat:13.8402,lng:121.2216},{name:"Balibago",lat:13.8512,lng:121.2855},{name:"Barangay A",lat:13.8457,lng:121.2104},{name:"Barangay B",lat:13.8461,lng:121.2065},{name:"Barangay C",lat:13.8467,lng:121.2032},{name:"Barangay D",lat:13.844,lng:121.2035},{name:"Barangay E",lat:13.8415,lng:121.2047},{name:"Bayawang",lat:13.7944,lng:121.2798},{name:"Baybayin",lat:13.8277,lng:121.2589},{name:"Bulihan",lat:13.7967,lng:121.2351},{name:"Cahigam",lat:13.8021,lng:121.2501},{name:"Calantas",lat:13.734,lng:121.3129},{name:"Colongan",lat:13.8114,lng:121.1762},{name:"Itlugan",lat:13.819,lng:121.2036},{name:"Leviste",lat:13.7694,lng:121.2868},{name:"Lumbangan",lat:13.8122,lng:121.2649},{name:"Maalas-as",lat:13.8112,lng:121.2122},{name:"Mabato",lat:13.8144,lng:121.2913},{name:"Mabunga",lat:13.781,lng:121.2924},{name:"Macalamcam A",lat:13.8551,lng:121.3046},{name:"Macalamcam B",lat:13.8606,lng:121.3265},{name:"Malaya",lat:13.8535,lng:121.172},{name:"Maligaya",lat:13.8182,lng:121.2742},{name:"Marilag",lat:13.8562,lng:121.1764},{name:"Masaya",lat:13.8383,lng:121.1852},{name:"Matamis",lat:13.7216,lng:121.3305},{name:"Mavalor",lat:13.8177,lng:121.2315},{name:"Mayuro",lat:13.7944,lng:121.2623},{name:"Namuco",lat:13.8382,lng:121.2036},{name:"Namunga",lat:13.8431,lng:121.1978},{name:"Nasi",lat:13.7699,lng:121.3127},{name:"Natu",lat:13.842,lng:121.2683},{name:"Palakpak",lat:13.7079,lng:121.332},{name:"Pinagsibaan",lat:13.8438,lng:121.3141},{name:"Putingkahoy",lat:13.8349,lng:121.3227},{name:"Quilib",lat:13.8603,lng:121.2002},{name:"Salao",lat:13.8578,lng:121.3455},{name:"San Carlos",lat:13.8478,lng:121.2475},{name:"San Ignacio",lat:13.8335,lng:121.1764},{name:"San Isidro",lat:13.8074,lng:121.3152},{name:"San Jose",lat:13.8419,lng:121.2329},{name:"San Roque",lat:13.8518,lng:121.2039},{name:"Santa Cruz",lat:13.8599,lng:121.1853},{name:"Timbugan",lat:13.8095,lng:121.1869},{name:"Tiquiwan",lat:13.8284,lng:121.2399},{name:"Tulos",lat:13.7231,lng:121.2971}];function dj(){const t=gs(),[s,r]=b.useState({}),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[d,u]=b.useState(""),[f,g]=b.useState(!1),[x,y]=b.useState(!1),[$,j]=b.useState(!1),[N,S]=b.useState(!0),[_,A]=b.useState(!1),[P,M]=b.useState(!1),[ne,V]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[L,Q]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[w,R]=b.useState(!1),[Z,I]=b.useState(!1),[re,ee]=b.useState(!1),[ge,G]=b.useState(null),[fe,ke]=b.useState(null);b.useEffect(()=>{const pe=Lt();if(!pe.isAuthenticated){t("/auth/login");return}if(pe.userType!=="user"){if(pe.userType==="admin"){t("/admin");return}else if(pe.userType==="staff"){t("/staff");return}}r(pe.userData||{}),g(!0),(async()=>{try{S(!0);const Ye=await Vi.getProfile();Ye.success&&Ye.user&&(r(Ce=>({...Ce,...Ye.user})),Xn({...pe.userData,...Ye.user}))}catch(Ye){console.error("Failed to fetch profile data:",Ye)}finally{S(!1)}})();const Re=()=>{const Ye=Lt();if(!Ye.isAuthenticated){t("/auth/login");return}g(Ye.isAuthenticated),r(Ye.userData||{})},We=Ye=>{_&&(Ye.preventDefault(),Ye.returnValue="")};return window.addEventListener("storage",Re),window.addEventListener("authStateChanged",Re),window.addEventListener("beforeunload",We),()=>{window.removeEventListener("storage",Re),window.removeEventListener("authStateChanged",Re),window.removeEventListener("beforeunload",We)}},[t]);const X=()=>{_&&!window.confirm("You have unsaved changes. Are you sure you want to sign out?")||y(!0)},k=async()=>{j(!0);try{await new Promise(pe=>setTimeout(pe,1e3)),Da(),t("/")}catch(pe){console.error("Logout error:",pe)}finally{j(!1),y(!1)}},q=()=>{y(!1)},T=(pe,Le)=>{V(Re=>({...Re,[pe]:Le})),L[pe]&&Q(Re=>({...Re,[pe]:""}))},B=()=>{const pe={currentPassword:"",newPassword:"",confirmPassword:""};return ne.currentPassword||(pe.currentPassword="Current password is required"),ne.newPassword?ne.newPassword.length<8?pe.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(ne.newPassword)||(pe.newPassword="Password must contain at least one uppercase letter, one lowercase letter, and one number"):pe.newPassword="New password is required",ne.confirmPassword?ne.newPassword!==ne.confirmPassword&&(pe.confirmPassword="Passwords do not match"):pe.confirmPassword="Please confirm your new password",ne.currentPassword&&ne.newPassword&&ne.currentPassword===ne.newPassword&&(pe.newPassword="New password must be different from current password"),Q(pe),!Object.values(pe).some(Le=>Le!=="")},F=async pe=>{if(pe.preventDefault(),!!B()){R(!0);try{const Le=await Vi.changePassword(ne.currentPassword,ne.newPassword);Le.success?(V({currentPassword:"",newPassword:"",confirmPassword:""}),M(!1),l(!0),setTimeout(()=>l(!1),5e3)):Q(Re=>({...Re,currentPassword:Le.message||"Failed to change password"}))}catch(Le){console.error("Password change failed:",Le),Q(Re=>({...Re,currentPassword:Le instanceof Error?Le.message:"Failed to change password. Please try again."}))}finally{R(!1)}}},J=()=>{w||(M(!1),V({currentPassword:"",newPassword:"",confirmPassword:""}),Q({currentPassword:"",newPassword:"",confirmPassword:""}))},W=()=>{ee(!0),G(null),ke(null)},le=()=>{Z||(ee(!1),G(null),ke(null))},he=pe=>{const Le=pe.target.files?.[0];if(Le){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(Le.type)){u("Please select a valid image file (JPEG, PNG, GIF, or WebP)"),c(!0),setTimeout(()=>c(!1),5e3);return}if(Le.size>5*1024*1024){u("File size must be less than 5MB"),c(!0),setTimeout(()=>c(!1),5e3);return}ke(Le);const We=new FileReader;We.onload=Ye=>{G(Ye.target?.result)},We.readAsDataURL(Le)}},se=async()=>{if(fe){I(!0),c(!1),l(!1);try{const pe=await Vi.uploadProfilePicture(fe);if(pe.success){const Le={...s,...pe.user};r(Le),Xn(Le),l(!0),setTimeout(()=>l(!1),5e3),le()}else u(pe.message||"Failed to upload profile picture"),c(!0),setTimeout(()=>c(!1),5e3)}catch(pe){console.error("Profile picture upload failed:",pe),u(pe instanceof Error?pe.message:"Failed to upload profile picture. Please try again."),c(!0),setTimeout(()=>c(!1),5e3)}finally{I(!1)}}},ve=async()=>{if(s.profile_picture&&window.confirm("Are you sure you want to delete your profile picture?")){I(!0),c(!1),l(!1);try{const pe=await Vi.deleteProfilePicture();if(pe.success){const Le={...s,...pe.user};r(Le),Xn(Le),l(!0),setTimeout(()=>l(!1),5e3)}else u(pe.message||"Failed to delete profile picture"),c(!0),setTimeout(()=>c(!1),5e3)}catch(pe){console.error("Profile picture deletion failed:",pe),u(pe instanceof Error?pe.message:"Failed to delete profile picture. Please try again."),c(!0),setTimeout(()=>c(!1),5e3)}finally{I(!1)}}},{fields:E,setValue:ce,validateAll:K,getValues:ze,isSubmitting:Ie,setIsSubmitting:Ne}=Cn({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:""},{firstName:{required:!0},lastName:{required:!0},email:{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},phone:{required:!1,custom:pe=>pe?oj(pe)?null:"Please enter a valid Philippine mobile number (e.g., 09123456789 or +639123456789)":null},address:{required:!1},city:{required:!1},state:{required:!1},zipCode:{required:!1,pattern:/^\d{4,10}$/}});b.useEffect(()=>{if(s&&Object.keys(s).length>0&&!a){const pe={firstName:s.firstName||s.first_name||"",lastName:s.lastName||s.last_name||"",email:s.email||"",phone:s.phone||"",address:s.address||"",city:s.city||"",state:s.state||"",zipCode:s.zipCode||""};Object.entries(pe).some(([Re,We])=>E[Re]?.value!==We)&&(Object.entries(pe).forEach(([Re,We])=>{ce(Re,We)}),A(!1))}},[s,a]);const U=(pe,Le)=>{ce(pe,Le||""),A(!0)},xe=()=>{n(!0),A(!1)},H=()=>{_&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||(n(!1),A(!1))},ye=async pe=>{if(pe.preventDefault(),!!K()){Ne(!0),c(!1),l(!1);try{const Le=ze();Le.state="Batangas",Le.city="Rosario",Le.zipCode="4225",console.log("Updating profile with data:",Le);const Re=await Vi.updateProfile(Le);if(Re.success){console.log("Profile updated successfully:",Re.user);const We={...s,...Re.user};r(We),Xn(We),l(!0),setTimeout(()=>l(!1),5e3),n(!1),A(!1)}else console.warn("Profile update returned unsuccessful response:",Re),u(Re.message||"Failed to update profile. Please try again."),c(!0),setTimeout(()=>c(!1),5e3)}catch(Le){console.error("Profile update failed:",Le),Le instanceof Error&&(Le.message.includes("Authentication")||Le.message.includes("token")||Le.message.includes("401")||Le.message.includes("403"))?(u("Your session has expired. Please log in again to save changes."),c(!0),setTimeout(()=>{Da(),t("/auth/login")},3e3)):(u(Le instanceof Error?Le.message:"Network error. Please try again."),c(!0)),setTimeout(()=>c(!1),5e3)}finally{Ne(!1)}}};return!f||N?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-16 bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"container mx-auto px-4 h-full flex items-center justify-between",children:[e.jsx("div",{className:"h-8 w-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-8 w-24 bg-gray-200 rounded"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded mx-auto mb-2"}),e.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded mx-auto mb-4"}),e.jsx("div",{className:"h-10 w-full bg-gray-200 rounded"})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl",children:[e.jsx("div",{className:"h-24 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-t-2xl"}),e.jsx("div",{className:"p-8 space-y-6",children:[...Array(6)].map((pe,Le)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-12 w-full bg-gray-200 rounded"})]},Le))})]})})]})})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[e.jsx(Ts,{isAuthenticated:f,userData:s}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[i&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-circle-line text-green-600"})}),e.jsx("span",{className:"font-medium",children:"Profile updated successfully!"})]})}),o&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-error-warning-line text-red-600"})}),e.jsx("span",{className:"font-medium",children:d})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sticky top-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(ri,{name:s?.firstName&&s?.lastName?`${s.firstName} ${s.lastName}`:void 0,email:s?.email,profilePicture:s?.profile_picture,size:"xl",className:"mx-auto",onClick:W})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:s?.firstName&&s?.lastName?`${s.firstName} ${s.lastName}`:"User Profile"}),e.jsx("p",{className:"text-gray-600 mb-4",children:s?.email||"No email provided"}),!a&&e.jsxs(vt,{variant:"primary",size:"md",onClick:xe,fullWidth:!0,children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Profile"]}),a&&_&&e.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsx("i",{className:"ri-information-line text-amber-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Unsaved changes"})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(Object.values({firstName:s?.firstName,lastName:s?.lastName,email:s?.email,phone:s?.phone,address:s?.address,city:s?.city,state:s?.state,zipCode:s?.zipCode}).filter(Boolean).length/8*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.round(Object.values({firstName:s?.firstName,lastName:s?.lastName,email:s?.email,phone:s?.phone,address:s?.address,city:s?.city,state:s?.state,zipCode:s?.zipCode}).filter(Boolean).length/8*100)}%`}})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs(vt,{variant:"outline",size:"md",onClick:X,fullWidth:!0,children:[e.jsx("i",{className:"ri-logout-box-line mr-2"}),"Sign Out"]})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 px-8 py-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Personal Information"}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Keep your information up to date"})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[e.jsx("i",{className:"ri-edit-line"}),e.jsx("span",{className:"text-sm font-medium",children:"Editing Mode"})]})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:ye,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(qt,{label:"First Name",type:"text",name:"firstName",id:"firstName",value:E.firstName.value,onChange:pe=>U("firstName",pe.target.value),error:E.firstName.touched?E.firstName.error:"",placeholder:"Enter your first name",required:!0,disabled:!a,icon:e.jsx("i",{className:"ri-user-line"})}),e.jsx(qt,{label:"Last Name",type:"text",name:"lastName",id:"lastName",value:E.lastName.value,onChange:pe=>U("lastName",pe.target.value),error:E.lastName.touched?E.lastName.error:"",placeholder:"Enter your last name",required:!0,disabled:!a,icon:e.jsx("i",{className:"ri-user-line"})})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-phone-line text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Information"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(qt,{label:"Email Address",type:"email",name:"email",id:"email",value:E.email.value,onChange:pe=>U("email",pe.target.value),error:E.email.touched?E.email.error:"",placeholder:"Enter your email",required:!0,disabled:!a,icon:e.jsx("i",{className:"ri-mail-line"})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-phone-line mr-2 text-green-600"}),"Phone Number"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-phone-line text-gray-400"})}),e.jsx(bc,{id:"phone",international:!0,defaultCountry:"PH",value:E.phone.value,onChange:pe=>U("phone",pe||""),className:`w-full pl-10 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all ${E.phone.error?"border-red-300":"border-gray-300"}`,placeholder:"Enter your phone number",disabled:!a})]}),E.phone.touched&&E.phone.error&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:E.phone.error})]})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-map-pin-line text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Address Information"})]}),a?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-map-line text-gray-400"})}),e.jsx("input",{type:"text",id:"province",name:"province",value:"Batangas",className:"w-full pl-10 pr-4 py-4 border border-gray-300 rounded-xl bg-gray-50 text-gray-700 cursor-not-allowed",disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City / Municipality *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-building-line text-gray-400"})}),e.jsx("input",{type:"text",id:"city",name:"city",value:"Rosario",className:"w-full pl-10 pr-4 py-4 border border-gray-300 rounded-xl bg-gray-50 text-gray-700 cursor-not-allowed",disabled:!0})]})]}),e.jsx(Df,{label:"Barangay *",name:"address",id:"address",value:E.address.value,onChange:pe=>U("address",pe.target.value),error:E.address.touched?E.address.error:"",required:!0,disabled:!a,icon:"ri-building-line",options:cj.map(pe=>({value:pe.name,label:pe.name}))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-mail-line text-gray-400"})}),e.jsx("input",{type:"text",id:"zipCode",name:"zipCode",value:"4225",className:"w-full pl-10 pr-4 py-4 border border-gray-300 rounded-xl bg-gray-50 text-gray-700 cursor-not-allowed",disabled:!0})]})]})]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("p",{className:"text-gray-900",children:[E.state.value,E.city.value,E.address.value,E.zipCode.value].filter(Boolean).join(", ")||"Not provided"})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-image-line text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Picture"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload a new profile picture or remove the current one"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(vt,{type:"button",variant:"outline",size:"md",onClick:W,className:"border-purple-200 text-purple-600 hover:bg-purple-50",children:[e.jsx("i",{className:"ri-upload-line mr-2"}),s?.profile_picture?"Change Picture":"Upload Picture"]}),s?.profile_picture&&e.jsxs(vt,{type:"button",variant:"outline",size:"md",onClick:ve,disabled:Z,className:"border-red-200 text-red-600 hover:bg-red-50",children:[e.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Remove"]})]})]})})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-lock-line text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your password to keep your account secure"})]}),e.jsxs(vt,{type:"button",variant:"outline",size:"md",onClick:()=>M(!0),className:"border-red-200 text-red-600 hover:bg-red-50",children:[e.jsx("i",{className:"ri-key-line mr-2"}),"Change Password"]})]})})]}),a&&e.jsx("div",{className:"border-t border-gray-100 pt-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(vt,{type:"submit",variant:"primary",size:"lg",disabled:Ie,children:Ie?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Saving Changes..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Save Changes"]})}),e.jsxs(vt,{type:"button",variant:"outline",size:"lg",onClick:H,disabled:Ie,children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Cancel"]})]})})]})})]})})]}),!a&&e.jsx("div",{className:"fixed bottom-6 right-6 lg:hidden",children:e.jsx(vt,{variant:"primary",size:"lg",onClick:xe,className:"rounded-full w-14 h-14 shadow-2xl hover:shadow-3xl",children:e.jsx("i",{className:"ri-edit-line text-xl"})})})]})}),e.jsx(jn,{isOpen:P,onClose:J,title:"Change Password",size:"md",children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsx("div",{children:e.jsx(qt,{label:"Current Password",type:"password",name:"currentPassword",id:"currentPassword",value:ne.currentPassword,onChange:pe=>T("currentPassword",pe.target.value),error:L.currentPassword,placeholder:"Enter your current password",required:!0,icon:e.jsx("i",{className:"ri-lock-line"})})}),e.jsxs("div",{children:[e.jsx(qt,{label:"New Password",type:"password",name:"newPassword",id:"newPassword",value:ne.newPassword,onChange:pe=>T("newPassword",pe.target.value),error:L.newPassword,placeholder:"Enter your new password",required:!0,icon:e.jsx("i",{className:"ri-key-line"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long and contain uppercase, lowercase, and number."})]}),e.jsx("div",{children:e.jsx(qt,{label:"Confirm New Password",type:"password",name:"confirmPassword",id:"confirmPassword",value:ne.confirmPassword,onChange:pe=>T("confirmPassword",pe.target.value),error:L.confirmPassword,placeholder:"Confirm your new password",required:!0,icon:e.jsx("i",{className:"ri-key-line"})})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(vt,{type:"button",variant:"outline",size:"md",onClick:J,disabled:w,children:"Cancel"}),e.jsx(vt,{type:"submit",variant:"primary",size:"md",disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Changing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-key-line mr-2"}),"Change Password"]})})]})]})}),e.jsx(jn,{isOpen:re,onClose:le,title:"Update Profile Picture",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Image"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:he,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",disabled:Z}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: JPEG, PNG, GIF, WebP. Max size: 5MB"})]}),ge&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:ge,alt:"Preview",className:"w-32 h-32 object-cover rounded-full border-4 border-gray-200"})})]}),s?.profile_picture&&!ge&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Picture"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:s.profile_picture.startsWith("http")?s.profile_picture:`http://localhost:5000${s.profile_picture}`,alt:"Current profile",className:"w-32 h-32 object-cover rounded-full border-4 border-gray-200",onError:pe=>{pe.currentTarget.style.display="none"}})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(vt,{type:"button",variant:"outline",size:"md",onClick:le,disabled:Z,children:"Cancel"}),e.jsx(vt,{type:"button",variant:"primary",size:"md",onClick:se,disabled:!fe||Z,children:Z?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-upload-line mr-2"}),"Upload Picture"]})})]})]})}),e.jsx(jl,{isOpen:x,onClose:q,onConfirm:k,isLoading:$})]})}function Mf(t,s){const r=b.useRef(s);b.useEffect(function(){s!==r.current&&t.attributionControl!=null&&(r.current!=null&&t.attributionControl.removeAttribution(r.current),s!=null&&t.attributionControl.addAttribution(s)),r.current=s},[t,s])}function uj(t,s,r){s.center!==r.center&&t.setLatLng(s.center),s.radius!=null&&s.radius!==r.radius&&t.setRadius(s.radius)}const mj=1;function hj(t){return Object.freeze({__version:mj,map:t})}function Ku(t,s){return Object.freeze({...t,...s})}const Bf=b.createContext(null),Uf=Bf.Provider;function Nl(){const t=b.useContext(Bf);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function qf(t){function s(r,a){const{instance:n,context:i}=t(r).current;return b.useImperativeHandle(a,()=>n),r.children==null?null:ht.createElement(Uf,{value:i},r.children)}return b.forwardRef(s)}function xj(t){function s(r,a){const[n,i]=b.useState(!1),{instance:l}=t(r,i).current;b.useImperativeHandle(a,()=>l),b.useEffect(function(){n&&l.update()},[l,n,r.children]);const o=l._contentNode;return o?Yp.createPortal(r.children,o):null}return b.forwardRef(s)}function zf(t){function s(r,a){const{instance:n}=t(r).current;return b.useImperativeHandle(a,()=>n),null}return b.forwardRef(s)}function fj(t){return function(r){const a=Nl(),n=t(r,a),{instance:i}=n.current,l=b.useRef(r.position),{position:o}=r;return b.useEffect(function(){return i.addTo(a.map),function(){i.remove()}},[a.map,i]),b.useEffect(function(){o!=null&&o!==l.current&&(i.setPosition(o),l.current=o)},[i,o]),n}}function Yu(t,s){const r=b.useRef();b.useEffect(function(){return s!=null&&t.instance.on(s),r.current=s,function(){r.current!=null&&t.instance.off(r.current),r.current=null}},[t,s])}function yc(t,s){const r=t.pane??s.pane;return r?{...t,pane:r}:t}function gj(t,s){return function(a,n){const i=Nl(),l=t(yc(a,i),i);return Mf(i.map,a.attribution),Yu(l.current,a.eventHandlers),s(l.current,i,a,n),l}}var za=eb();const Xt=Ru(za);function hi(t,s,r){return Object.freeze({instance:t,context:s,container:r})}function wl(t,s){return s==null?function(a,n){const i=b.useRef();return i.current||(i.current=t(a,n)),i}:function(a,n){const i=b.useRef();i.current||(i.current=t(a,n));const l=b.useRef(a),{instance:o}=i.current;return b.useEffect(function(){l.current!==a&&(s(o,a,l.current),l.current=a)},[o,a,n]),i}}function Wf(t,s){b.useEffect(function(){return(s.layerContainer??s.map).addLayer(t.instance),function(){s.layerContainer?.removeLayer(t.instance),s.map.removeLayer(t.instance)}},[s,t])}function Hf(t){return function(r){const a=Nl(),n=t(yc(r,a),a);return Mf(a.map,r.attribution),Yu(n.current,r.eventHandlers),Wf(n.current,a),n}}function pj(t,s){const r=b.useRef();b.useEffect(function(){if(s.pathOptions!==r.current){const n=s.pathOptions??{};t.instance.setStyle(n),r.current=n}},[t,s])}function bj(t){return function(r){const a=Nl(),n=t(yc(r,a),a);return Yu(n.current,r.eventHandlers),Wf(n.current,a),pj(n.current,r),n}}function yj(t){function s(n,i){return hi(t(n),i)}const r=wl(s),a=fj(r);return zf(a)}function vj(t,s){const r=wl(t,s),a=Hf(r);return qf(a)}function jj(t,s){const r=wl(t),a=gj(r,s);return xj(a)}function Vf(t,s){const r=wl(t,s),a=bj(r);return qf(a)}function Nj(t,s){const r=wl(t,s),a=Hf(r);return zf(a)}function wj(t,s,r){const{opacity:a,zIndex:n}=s;a!=null&&a!==r.opacity&&t.setOpacity(a),n!=null&&n!==r.zIndex&&t.setZIndex(n)}function Sl(){return Nl().map}function fu(t){const s=Sl();return b.useEffect(function(){return s.on(t),function(){s.off(t)}},[s,t]),s}const gu=Vf(function({center:s,children:r,...a},n){const i=new za.Circle(s,a);return hi(i,Ku(n,{overlayContainer:i}))},uj);function pu(){return pu=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},pu.apply(this,arguments)}function Sj({bounds:t,boundsOptions:s,center:r,children:a,className:n,id:i,placeholder:l,style:o,whenReady:c,zoom:d,...u},f){const[g]=b.useState({className:n,id:i,style:o}),[x,y]=b.useState(null);b.useImperativeHandle(f,()=>x?.map??null,[x]);const $=b.useCallback(N=>{if(N!==null&&x===null){const S=new za.Map(N,u);r!=null&&d!=null?S.setView(r,d):t!=null&&S.fitBounds(t,s),c!=null&&S.whenReady(c),y(hj(S))}},[]);b.useEffect(()=>()=>{x?.map.remove()},[x]);const j=x?ht.createElement(Uf,{value:x},a):l??null;return ht.createElement("div",pu({},g,{ref:$}),j)}const Ma=b.forwardRef(Sj),hr=vj(function({position:s,...r},a){const n=new za.Marker(s,r);return hi(n,Ku(a,{overlayContainer:n}))},function(s,r,a){r.position!==a.position&&s.setLatLng(r.position),r.icon!=null&&r.icon!==a.icon&&s.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==a.zIndexOffset&&s.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==a.opacity&&s.setOpacity(r.opacity),s.dragging!=null&&r.draggable!==a.draggable&&(r.draggable===!0?s.dragging.enable():s.dragging.disable())}),Cj=Vf(function({positions:s,...r},a){const n=new za.Polyline(s,r);return hi(n,Ku(a,{overlayContainer:n}))},function(s,r,a){r.positions!==a.positions&&s.setLatLngs(r.positions)}),Xr=jj(function(s,r){const a=new za.Popup(s,r.overlayContainer);return hi(a,r)},function(s,r,{position:a},n){b.useEffect(function(){const{instance:l}=s;function o(d){d.popup===l&&(l.update(),n(!0))}function c(d){d.popup===l&&n(!1)}return r.map.on({popupopen:o,popupclose:c}),r.overlayContainer==null?(a!=null&&l.setLatLng(a),l.openOn(r.map)):r.overlayContainer.bindPopup(l),function(){r.map.off({popupopen:o,popupclose:c}),r.overlayContainer?.unbindPopup(),r.map.removeLayer(l)}},[s,r,n,a])}),Ba=Nj(function({url:s,...r},a){const n=new za.TileLayer(s,yc(r,a));return hi(n,a)},function(s,r,a){wj(s,r,a);const{url:n}=r;n!=null&&n!==a.url&&s.setUrl(n)}),$j=yj(function(s){return new za.Control.Zoom(s)}),kj=()=>{if(!document.querySelector('link[href*="leaflet"]')){const s=document.createElement("link");s.rel="stylesheet",s.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",s.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",s.crossOrigin="",document.head.appendChild(s)}};delete Xt.Icon.Default.prototype._getIconUrl;Xt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const _j=t=>{const s=t==="open"?"#10b981":t==="full"?"#ef4444":"#6b7280";return Xt.divIcon({html:`
      <div style="
        background-color: ${s};
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
      ">
        <i class="ri-building-2-line" style="color: white; font-size: 12px;"></i>
      </div>
    `,className:"custom-evacuation-marker",iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]})},Aj=Xt.divIcon({html:`
    <div style="
      background-color: #3b82f6;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      animation: pulse 2s infinite;
    "></div>
    <style>
      @keyframes pulse {
        0% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.2); opacity: 0.7; }
        100% { transform: scale(1); opacity: 1; }
      }
    </style>
  `,className:"user-location-marker",iconSize:[16,16],iconAnchor:[8,8]}),Pj=({center:t,zoom:s})=>{const r=Sl();return b.useEffect(()=>{r.setView(t,s)},[r,t,s]),null},K0=(t,s,r,a)=>{const i=(r-t)*Math.PI/180,l=(a-s)*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},Lj=({evacuationCenters:t,userLocation:s,onCenterClick:r,height:a="24rem"})=>{console.log("EvacuationCenterMap props:",{centersCount:t.length});const[n,i]=b.useState([16.456789,120.5678901]),[l,o]=b.useState(13),[c,d]=b.useState(!0),[u,f]=b.useState(!1),[g,x]=b.useState(!0);b.useEffect(()=>{if(s)i([s.latitude,s.longitude]),o(14);else if(t.length>0){const S=t[0];i([S.latitude,S.longitude])}},[s,t]),b.useEffect(()=>{kj()},[]),b.useEffect(()=>{const S=setTimeout(()=>{c&&(console.log("Map loading timeout - setting error state"),f(!0),d(!1))},1e4);return()=>clearTimeout(S)},[c]);const y=s?t.filter(S=>K0(s.latitude,s.longitude,S.latitude,S.longitude)<=20):[],$=S=>new Date(S).toLocaleString(),j=S=>{const _=encodeURIComponent(`${S.name}, San Juan, Batangas`);window.open(`https://maps.google.com/?q=${_}`,"_blank")},N=S=>{window.open(`tel:${S}`,"_self")};return console.log("Rendering EvacuationCenterMap with:",{mapCenter:n,mapZoom:l,mapLoading:c,mapError:u,centersCount:t.length}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-10 space-y-3",children:[s&&e.jsx("button",{onClick:()=>{i([s.latitude,s.longitude]),o(15)},className:"group bg-white/90 backdrop-blur-sm hover:bg-white border border-white/20 rounded-xl p-3 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",title:"Center on my location",children:e.jsx("i",{className:"ri-focus-3-line text-blue-600 text-lg group-hover:text-blue-700"})}),e.jsx("button",{onClick:()=>{t.length>0&&Xt.latLngBounds(t.map(S=>[S.latitude,S.longitude]))},className:"group bg-white/90 backdrop-blur-sm hover:bg-white border border-white/20 rounded-xl p-3 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",title:"Show all centers",children:e.jsx("i",{className:"ri-fullscreen-line text-blue-600 text-lg group-hover:text-blue-700"})}),e.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl p-3 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:t.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Centers"})]})})]}),e.jsxs("div",{className:"w-full rounded-2xl overflow-hidden shadow-2xl border border-white/20 relative",style:{height:a,minHeight:"300px",position:"relative"},children:[c&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading map..."})]})}),u&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-error-warning-line text-4xl text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Failed to load interactive map"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Showing static map instead"}),e.jsx("button",{onClick:()=>{f(!1),d(!0),window.location.reload()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry Interactive Map"})]})}),u&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"ri-map-2-line text-6xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Evacuation Centers Map"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[t.length," centers available"]}),e.jsxs("div",{className:"space-y-2 text-left max-w-md mx-auto",children:[t.slice(0,5).map(S=>e.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:S.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Capacity: ",S.current_occupancy,"/",S.capacity]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="open"?"bg-green-100 text-green-800":S.status==="full"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:S.status})]})},S.center_id)),t.length>5&&e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["+",t.length-5," more centers"]})]})]})}),e.jsxs(Ma,{center:n,zoom:l,style:{height:"100%",width:"100%"},className:"z-0",zoomControl:!1,whenReady:()=>{console.log("Map is ready!"),d(!1)},children:[e.jsx(Pj,{center:n,zoom:l}),e.jsx($j,{position:"bottomright"}),e.jsx(Ba,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19,errorTileUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",eventHandlers:{loading:()=>console.log("Tiles loading..."),load:()=>console.log("Tiles loaded successfully"),tileerror:S=>{console.error("Tile loading error:",S),f(!0)}}}),s&&e.jsx(hr,{position:[s.latitude,s.longitude],icon:Aj,children:e.jsx(Xr,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("strong",{children:"Your Location"}),e.jsx("br",{}),e.jsxs("small",{className:"text-gray-600",children:["Lat: ",s.latitude.toFixed(6),e.jsx("br",{}),"Lng: ",s.longitude.toFixed(6)]})]})})}),t.map(S=>{const _=y.some(A=>A.center_id===S.center_id);return e.jsx(hr,{position:[S.latitude,S.longitude],icon:_j(S.status),eventHandlers:{click:()=>r?.(S)},children:e.jsx(Xr,{maxWidth:300,className:"evacuation-center-popup",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:S.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="open"?"bg-green-100 text-green-800":S.status==="full"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Capacity:"})," ",S.current_occupancy,"/",S.capacity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Contact:"})," ",S.contact_person]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",S.contact_number]}),_&&e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[e.jsx("i",{className:"ri-car-line mr-1"}),"Drive-in Nearby (",K0(s.latitude,s.longitude,S.latitude,S.longitude).toFixed(1)," km)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(S),className:"flex-1 bg-blue-600 text-white py-1 px-3 rounded text-sm hover:bg-blue-700 transition-colors",children:"Directions"}),e.jsx("button",{onClick:()=>N(S.contact_number),className:"flex-1 border border-blue-600 text-blue-600 py-1 px-3 rounded text-sm hover:bg-blue-50 transition-colors",children:"Call"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Updated: ",$(S.last_updated)]})]})})},S.center_id)})]})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 z-10",children:[e.jsx("button",{onClick:()=>x(!g),className:"mb-2 bg-white/90 backdrop-blur-sm hover:bg-white border border-white/20 rounded-xl p-3 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",title:g?"Hide Legend":"Show Legend",children:e.jsx("i",{className:`ri-${g?"arrow-down-s":"arrow-up-s"}-line text-blue-600 text-lg transition-transform duration-300`})}),e.jsxs("div",{className:`bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-4 transition-all duration-300 ${g?"opacity-100 translate-y-0 max-h-96":"opacity-0 -translate-y-4 max-h-0 overflow-hidden"}`,children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("i",{className:"ri-information-line mr-2 text-blue-600"}),"Legend"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full mr-3 shadow-sm"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Open Centers"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-red-500 to-rose-500 rounded-full mr-3 shadow-sm"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Full Centers"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-gray-500 to-slate-500 rounded-full mr-3 shadow-sm"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Closed Centers"})]}),s&&e.jsxs("div",{className:"flex items-center text-sm border-t border-gray-200 pt-2 mt-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full mr-3 shadow-sm animate-pulse"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Your Location"})]})]})]})]})]})};class Ej extends b.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,r){console.error("Map Error Boundary caught an error:",s,r)}render(){return this.state.hasError?e.jsx("div",{className:"h-full w-full bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-error-warning-line text-4xl text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Map failed to load"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please refresh the page to try again"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})}):this.props.children}}const Tj=t=>e.jsx(Ej,{children:e.jsx(Lj,{...t})}),Ij=()=>{const[t,s]=b.useState([]),[r,a]=b.useState({}),[n,i]=b.useState(!0),[l,o]=b.useState({}),[c,d]=b.useState(null),[u,f]=b.useState(!1),[g,x]=b.useState("list"),[y]=b.useState(3),[$,j]=b.useState(null),[N,S]=b.useState(""),[_,A]=b.useState("all"),[P,M]=b.useState(null),[ne,V]=b.useState(null),[L,Q]=b.useState(null),[w,R]=b.useState(null),[Z,I]=b.useState(!1),[re,ee]=b.useState([]),{latitude:ge,longitude:G,error:fe,loading:ke,getCurrentLocation:X}=Gx(),k=async E=>{console.log(`Starting to load resources for center ${E}`);try{o(K=>({...K,[E]:!0})),console.log(`Calling API for center ${E}...`);const ce=await Xs.getResources(E);console.log(`Resources data for center ${E}:`,ce),ce.success?(console.log(`Setting resources for center ${E}:`,ce.data),a(K=>{const ze={...K,[E]:ce.data||[]};return console.log("New resources state:",ze),ze})):console.log(`API returned success: false for center ${E}`)}catch(ce){console.error(`Failed to load resources for center ${E}:`,ce),a(K=>({...K,[E]:[]}))}finally{o(ce=>({...ce,[E]:!1}))}};b.useEffect(()=>{const E=Lt();if(E.isAuthenticated&&E.userType!=="user"){if(E.userType==="admin"){window.location.href="/admin";return}else if(E.userType==="staff"){window.location.href="/staff";return}}const ce=E.isAuthenticated&&E.userType==="user";f(ce),d(ce?E.userData:null);const K=()=>{const ze=Lt();if(ze.isAuthenticated&&ze.userType!=="user"){if(ze.userType==="admin"){window.location.href="/admin";return}else if(ze.userType==="staff"){window.location.href="/staff";return}}const Ie=ze.isAuthenticated&&ze.userType==="user";f(Ie),d(Ie?ze.userData:null)};return window.addEventListener("storage",K),window.addEventListener("authStateChanged",K),Xs.getCenters().then(ze=>{Array.isArray(ze)?(s(ze),ze.forEach(Ie=>{k(Ie.center_id)})):(console.error("Expected array but got:",ze),s([])),i(!1)}).catch(ze=>{console.error("Error fetching evacuation centers:",ze),s([]),i(!1)}),()=>{window.removeEventListener("storage",K),window.removeEventListener("authStateChanged",K)}},[]);const q=(E,ce,K,ze)=>{const Ne=(K-E)*Math.PI/180,U=(ze-ce)*Math.PI/180,xe=Math.sin(Ne/2)*Math.sin(Ne/2)+Math.cos(E*Math.PI/180)*Math.cos(K*Math.PI/180)*Math.sin(U/2)*Math.sin(U/2);return 6371*(2*Math.atan2(Math.sqrt(xe),Math.sqrt(1-xe)))},T=async(E,ce,K,ze)=>{try{const Ie=q(E,ce,K,ze);let Ne;Ie<5?Ne=Ie*1.2:Ie<15?Ne=Ie*1.4:Ne=Ie*1.6;let U;Ne<5?U=25:Ne<15?U=35:U=45;const xe=Ne/U*60;return{distance:Ne,duration:xe}}catch(Ie){console.error("Error calculating route distance:",Ie);const Ne=q(E,ce,K,ze);return{distance:Ne,duration:Ne/30*60}}};b.useEffect(()=>{ge&&G&&t.length>0?(async()=>{const ce=await Promise.all(t.map(async K=>{const ze=await T(ge,G,K.latitude,K.longitude);return{...K,distance:ze.distance,duration:ze.duration}}));ee(ce)})():ee([])},[ge,G,t]);const B=re.sort((E,ce)=>E.distance-ce.distance).slice(0,y),F=E=>{j(E)},J=E=>{const ce=r[E]||[];return console.log(`Getting resources for center ${E}:`,ce),ce},W=E=>{if(!E)return"";if(E.startsWith("http"))return E;let ce=E;ce.startsWith("/")&&(ce=ce.slice(1)),ce.startsWith("uploads/")&&(ce=ce.slice(8));const K=`/uploads/${ce}`;return console.log(`Image URL generated: ${K} (from: ${E})`),K},le=E=>{const ce={facility:[],feature:[],water:[],supply:[]};return E.forEach(K=>{ce[K.type]&&ce[K.type].push(K)}),ce},he=ge&&G?{latitude:ge,longitude:G}:null;b.useEffect(()=>{console.log("EvacuationResources state changed:",r)},[r]);const se=t.filter(E=>{const ce=N===""||E.name?.toLowerCase().includes(N.toLowerCase())||E.contact_person?.toLowerCase().includes(N.toLowerCase()),K=_==="all"||E.status===_;return ce&&K}),ve=Z?se:se.slice(0,8);return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-6",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-3xl blur-lg opacity-30 scale-110 animate-pulse"}),e.jsx("div",{className:"relative w-24 h-24 mx-auto bg-gradient-to-r from-blue-600 to-indigo-600 rounded-3xl flex items-center justify-center shadow-2xl",children:e.jsx("i",{className:"ri-building-2-line text-3xl text-white animate-bounce"})})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Loading Evacuation Centers"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Fetching real-time information..."}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),e.jsx("span",{children:"Connecting to emergency services..."})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),e.jsx("span",{children:"Retrieving center data..."})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),e.jsx("span",{children:"Preparing map view..."})]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[e.jsx(Ts,{isAuthenticated:u,userData:c||void 0}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 to-indigo-600/5"}),e.jsx("div",{className:"absolute inset-0 opacity-40",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25px 25px, rgba(156, 146, 172, 0.05) 2px, transparent 0)",backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"relative container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs("div",{className:"relative inline-flex items-center justify-center mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl blur-lg opacity-30 scale-110"}),e.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-building-2-line text-3xl text-white"})})]}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-indigo-900 bg-clip-text text-transparent mb-6 leading-tight",children:"Evacuation Centers"}),e.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed",children:["Rosario, Batangas",e.jsx("span",{className:"block text-base sm:text-lg text-gray-500 mt-2",children:"Emergency Evacuation Facilities"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-3 md:p-4 shadow-lg",children:[e.jsx("div",{className:"text-xl md:text-2xl font-bold text-blue-600",children:t.length}),e.jsx("div",{className:"text-xs md:text-sm text-gray-600",children:"Total Centers"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-3 md:p-4 shadow-lg",children:[e.jsx("div",{className:"text-xl md:text-2xl font-bold text-green-600",children:t.filter(E=>E.status==="open").length}),e.jsx("div",{className:"text-xs md:text-sm text-gray-600",children:"Available"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-3 md:p-4 shadow-lg",children:[e.jsx("div",{className:"text-xl md:text-2xl font-bold text-blue-600",children:B.length}),e.jsx("div",{className:"text-xs md:text-sm text-gray-600",children:"Closest"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-3 md:p-4 shadow-lg",children:[e.jsx("div",{className:"text-xl md:text-2xl font-bold text-yellow-600",children:t.filter(E=>E.status==="open").length}),e.jsx("div",{className:"text-xs md:text-sm text-gray-600",children:"Open Now"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200/50 rounded-2xl p-4 md:p-6 max-w-3xl mx-auto shadow-lg backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-center text-blue-800",children:[e.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-blue-100 rounded-full flex items-center justify-center mr-2 md:mr-3",children:e.jsx("i",{className:"ri-information-line text-blue-600 text-sm md:text-base"})}),e.jsx("p",{className:"font-semibold text-sm md:text-lg",children:"Real-time information for all evacuation centers"})]}),e.jsxs("p",{className:"text-blue-600 text-xs md:text-sm mt-2 opacity-80",children:["Updated every 5 minutes • Last update: ",new Date().toLocaleTimeString()]})]})]})})]}),e.jsxs("div",{className:"container mx-auto px-4 pb-8",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"relative bg-white/90 backdrop-blur-sm rounded-2xl p-1.5 shadow-xl border border-white/20",children:[e.jsx("div",{className:`absolute top-1.5 bottom-1.5 w-1/2 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg transition-transform duration-300 ease-out ${g==="map"?"translate-x-full":"translate-x-0"}`}),e.jsxs("div",{className:"relative flex",children:[e.jsxs("button",{onClick:()=>x("list"),className:`relative px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center space-x-2 min-w-[120px] justify-center ${g==="list"?"text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("i",{className:`ri-list-unordered text-lg transition-transform duration-300 ${g==="list"?"scale-110":""}`}),e.jsx("span",{children:"List"})]}),e.jsxs("button",{onClick:()=>x("map"),className:`relative px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center space-x-2 min-w-[120px] justify-center ${g==="map"?"text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("i",{className:`ri-map-2-line text-lg transition-transform duration-300 ${g==="map"?"scale-110":""}`}),e.jsx("span",{children:"Map"})]})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-4 md:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-search-line mr-2"}),"Search Centers"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by name or contact person...",value:N,onChange:E=>S(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),N&&e.jsx("button",{onClick:()=>S(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-filter-line mr-2"}),"Filter by Status"]}),e.jsxs("select",{value:_,onChange:E=>A(E.target.value),className:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"all",children:"All Centers"}),e.jsx("option",{value:"open",children:"Open Only"}),e.jsx("option",{value:"full",children:"Full Only"}),e.jsx("option",{value:"closed",children:"Closed Only"})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 text-sm",children:[e.jsxs("div",{className:"text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold text-blue-600",children:ve.length})," of"," ",e.jsx("span",{className:"font-semibold",children:t.length})," centers",N&&e.jsxs("span",{className:"block sm:inline sm:ml-2 text-blue-600 mt-1 sm:mt-0",children:['for "',N,'"']})]}),(N||_!=="all")&&e.jsxs("button",{onClick:()=>{S(""),A("all")},className:"text-blue-600 hover:text-blue-700 font-medium flex items-center justify-center sm:justify-start space-x-1 bg-blue-50 hover:bg-blue-100 px-3 py-2 rounded-lg transition-colors self-start sm:self-auto",children:[e.jsx("i",{className:"ri-refresh-line"}),e.jsx("span",{children:"Clear Filters"})]})]})]})}),g==="map"&&e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20 max-w-md w-full mx-4",children:ke?e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 font-medium",children:"Getting your location..."}),e.jsx("p",{className:"text-gray-500 text-sm",children:"This may take a few seconds"})]})]}):fe?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"ri-error-warning-line text-red-600 text-xl"})}),e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Location Access Denied"}),e.jsx("p",{className:"text-red-600 text-sm mb-3",children:fe}),e.jsxs("button",{onClick:X,className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700 transition-colors font-medium",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Try Again"]})]}):he?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-map-pin-line text-green-600 text-lg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-green-700 font-medium",children:"Location Found"}),e.jsxs("p",{className:"text-green-600 text-sm",children:[B.length," closest centers found"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:B.length}),e.jsx("div",{className:"text-xs text-green-500",children:"closest"})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-map-pin-line text-gray-500 text-lg"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 font-medium",children:"Location not available"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Enable location for nearby centers"})]})]})})})]}),t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-400 to-gray-500 rounded-3xl blur-lg opacity-20 scale-110"}),e.jsx("div",{className:"relative w-24 h-24 mx-auto bg-gradient-to-r from-gray-400 to-gray-500 rounded-3xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-building-2-line text-3xl text-white"})})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No Evacuation Centers Found"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"We couldn't find any evacuation centers in your area. Please check back later or contact emergency services."}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx("i",{className:"ri-refresh-line"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>window.open("tel:911","_self"),className:"border-2 border-red-600 text-red-600 px-6 py-3 rounded-xl font-semibold hover:bg-red-600 hover:text-white transition-colors flex items-center space-x-2",children:[e.jsx("i",{className:"ri-phone-line"}),e.jsx("span",{children:"Emergency Call"})]})]})]}):se.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-3xl blur-lg opacity-20 scale-110"}),e.jsx("div",{className:"relative w-24 h-24 mx-auto bg-gradient-to-r from-blue-400 to-indigo-400 rounded-3xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-search-line text-3xl text-white"})})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No Centers Found"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"No evacuation centers match your current search criteria. Try adjusting your filters or search terms."}),e.jsxs("button",{onClick:()=>{S(""),A("all")},className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors flex items-center space-x-2 mx-auto",children:[e.jsx("i",{className:"ri-refresh-line"}),e.jsx("span",{children:"Clear All Filters"})]})]}):e.jsx(e.Fragment,{children:g==="map"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-map-pin-line text-blue-600"})}),e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Closest Centers:"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[y," nearest by route"]}),he&&e.jsxs("button",{onClick:X,className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx("i",{className:"ri-refresh-line"}),e.jsx("span",{children:"Refresh Location"})]})]})})}),e.jsx(Tj,{evacuationCenters:se,userLocation:he,onCenterClick:F,height:"32rem"}),B.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/30 backdrop-blur-sm rounded-3xl shadow-2xl border border-blue-200/50 p-8 mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl blur-lg opacity-30 scale-110"}),e.jsx("div",{className:"relative w-12 h-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-map-pin-line text-white text-xl"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-blue-900 bg-clip-text text-transparent",children:"Closest Centers"}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[y," nearest evacuation centers by driving route"]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold shadow-md border border-blue-200",children:[e.jsx("i",{className:"ri-building-2-line mr-1"}),B.length," found"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:B.map((E,ce)=>e.jsxs("div",{className:"group relative bg-white/90 backdrop-blur-sm border border-blue-200/50 rounded-2xl p-4 hover:shadow-2xl hover:border-blue-400/60 transition-all duration-500 hover:-translate-y-2 hover:scale-105",style:{animationDelay:`${ce*150}ms`},children:[e.jsxs("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:["#",ce+1]}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-4 h-4 rounded-full shadow-md ${E.status==="open"?"bg-gradient-to-r from-green-400 to-green-600":E.status==="full"?"bg-gradient-to-r from-red-400 to-red-600":"bg-gradient-to-r from-gray-400 to-gray-600"}`}),e.jsx("h4",{className:"font-bold text-gray-900 text-base group-hover:text-blue-600 transition-colors truncate",children:E.name})]}),e.jsx("span",{className:`px-3 py-1.5 rounded-xl text-xs font-semibold shadow-sm border ${E.status==="open"?"bg-gradient-to-r from-green-50 to-green-100 text-green-800 border-green-200":E.status==="full"?"bg-gradient-to-r from-red-50 to-red-100 text-red-800 border-red-200":"bg-gradient-to-r from-gray-50 to-gray-100 text-gray-800 border-gray-200"}`,children:E.status.charAt(0).toUpperCase()+E.status.slice(1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-map-pin-2-line text-blue-500 text-sm"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[E.distance.toFixed(1)," km away"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-group-line text-gray-500 text-sm"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[E.current_occupancy,"/",E.capacity," capacity"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-phone-line text-gray-500 text-sm"}),e.jsx("span",{className:"text-sm text-gray-600",children:E.contact_number})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-tools-line text-purple-500 text-sm"}),e.jsx("span",{className:"text-sm text-gray-600",children:(()=>{const K=J(E.center_id);return K.length===0?e.jsx("button",{onClick:()=>k(E.center_id),className:"text-purple-600 hover:text-purple-700 text-xs",children:"Load Resources"}):`${K.length} resources available`})()})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex space-x-2",children:[e.jsxs("button",{onClick:()=>window.open(`https://maps.google.com/?q=${encodeURIComponent(E.name+" Rosario, Batangas")}`,"_blank"),className:"flex-1 bg-blue-600 text-white py-1.5 px-3 rounded-lg text-xs font-medium hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-direction-line mr-1"}),"Directions"]}),e.jsxs("button",{onClick:()=>window.open(`tel:${E.contact_number}`,"_self"),className:"flex-1 border border-blue-600 text-blue-600 py-1.5 px-3 rounded-lg text-xs font-medium hover:bg-blue-50 transition-colors",children:[e.jsx("i",{className:"ri-phone-line mr-1"}),"Call"]})]})]},E.center_id))})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 px-4 md:px-6 lg:px-8 max-w-6xl mx-auto",children:ve.map((E,ce)=>{const K=re.find(xe=>xe.center_id===E.center_id),ze=K?.distance||null,Ie=K?.duration||null,Ne=B.some(xe=>xe.center_id===E.center_id),U=E.current_occupancy/E.capacity*100;return e.jsxs("div",{className:`group relative bg-white/90 backdrop-blur-sm border rounded-xl shadow-lg px-3 py-4 md:px-1 md:py-3 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 ${Ne?"border-blue-300 ring-1 ring-blue-100 bg-gradient-to-br from-blue-50/50 to-white":"border-white/20 hover:border-blue-200"}`,style:{animationDelay:`${ce*100}ms`,animation:"fadeInUp 0.4s ease-out forwards"},children:[Ne&&ze&&e.jsxs("div",{className:"absolute -top-1 -right-1 bg-blue-600 text-white px-2 py-0.5 rounded-full text-xs font-medium shadow-md",children:[e.jsx("i",{className:"ri-route-line mr-0.5 text-xs"}),ze.toFixed(1),"km",Ie&&e.jsxs("span",{className:"ml-1",children:["• ",Math.round(Ie),"min"]})]}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-md ${E.status==="open"?"bg-gradient-to-r from-green-500 to-emerald-500":E.status==="full"?"bg-gradient-to-r from-red-500 to-rose-500":"bg-gradient-to-r from-gray-500 to-slate-500"}`,children:e.jsx("i",{className:"ri-building-2-line text-lg text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:E.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Emergency Facility"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${E.status==="open"?"bg-green-100 text-green-700":E.status==="full"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full mr-1.5 ${E.status==="open"?"bg-green-500":E.status==="full"?"bg-red-500":"bg-gray-500"}`}),E.status.charAt(0).toUpperCase()+E.status.slice(1)]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Capacity"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[E.current_occupancy,"/",E.capacity]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all duration-1000 ${U>=90?"bg-gradient-to-r from-red-500 to-red-600":U>=70?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-green-500 to-emerald-500"}`,style:{width:`${Math.min(U,100)}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[U.toFixed(0),"% occupied"]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium ${E.status==="open"?"bg-green-100 text-green-700":E.status==="full"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:E.status.charAt(0).toUpperCase()+E.status.slice(1)})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-blue-600 text-xs"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:E.contact_person}),e.jsx("p",{className:"text-xs text-gray-500",children:"Contact Person"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-phone-line text-green-600 text-xs"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:E.contact_number}),e.jsx("p",{className:"text-xs text-gray-500",children:"Phone Number"})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-tools-line text-purple-600 text-sm"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Resources"})]}),e.jsx("button",{onClick:()=>k(E.center_id),className:"text-xs text-purple-600 hover:text-purple-700 font-medium",children:l[E.center_id]?"Loading...":"Refresh"})]}),l[E.center_id]?e.jsxs("div",{className:"flex items-center justify-center py-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading..."})]}):e.jsx("div",{children:(()=>{const xe=J(E.center_id);if(!(xe.length>0))return e.jsxs("div",{className:"text-center py-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"No resources available"}),e.jsx("button",{onClick:()=>k(E.center_id),className:"text-xs text-purple-600 hover:text-purple-700 mt-1",children:"Load Resources"})]});const ye=xe.length,pe=xe.filter(Le=>Le.picture).length;return e.jsx("div",{onClick:()=>V({center:E,resources:xe}),className:"bg-purple-50 rounded-lg p-3 border border-purple-200 cursor-pointer hover:bg-purple-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-tools-line text-purple-600"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[ye," resources available"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[pe>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"ri-image-line mr-1"}),pe," with images"]}),e.jsx("i",{className:"ri-arrow-right-line"})]})]})})})()})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>window.open(`https://maps.google.com/?q=${encodeURIComponent(E.name+" Rosario, Batangas")}`,"_blank"),className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"ri-direction-line text-sm"}),e.jsx("span",{children:"Directions"})]}),e.jsxs("button",{onClick:()=>window.open(`tel:${E.contact_number}`,"_self"),className:"flex-1 border border-blue-600 text-blue-600 py-3 px-4 rounded-lg hover:bg-blue-600 hover:text-white transition-colors font-medium text-sm flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"ri-phone-line text-sm"}),e.jsx("span",{children:"Call"})]})]})]},E.center_id)})}),se.length>8&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("button",{onClick:()=>I(!Z),className:"px-6 py-3 rounded-xl font-semibold  transition-colors flex items-center space-x-2",children:[e.jsx("i",{className:`x-${Z?"up":"down"}-line`}),e.jsx("span",{children:Z?"Show Less":"Show More"})]})})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:()=>M(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-2xl font-bold z-10",children:"×"}),e.jsx("img",{src:P?.src,alt:P?.alt,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 text-white p-3 rounded-lg",children:e.jsx("p",{className:"text-center font-medium",children:P?.alt})})]})}),ne&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl max-w-7xl max-h-[95vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:ne.center.name}),e.jsxs("p",{className:"text-purple-100 mt-1",children:["All Available Resources (",ne.resources.length," items)"]})]}),e.jsx("button",{onClick:()=>V(null),className:"text-white hover:text-gray-200 text-3xl font-bold transition-colors",children:"×"})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-140px)]",children:[e.jsx("div",{className:"mb-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200/50",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const E=le(ne.resources),ce={facility:{bg:"bg-blue-100",text:"text-blue-700",icon:"ri-building-line"},feature:{bg:"bg-green-100",text:"text-green-700",icon:"ri-star-line"},water:{bg:"bg-cyan-100",text:"text-cyan-700",icon:"ri-water-flash-line"},supply:{bg:"bg-orange-100",text:"text-orange-700",icon:"ri-box-line"}};return Object.entries(E).map(([K,ze])=>{if(ze.length===0)return null;const Ie=ce[K];return e.jsxs("div",{className:`${Ie.bg} rounded-lg p-3 text-center`,children:[e.jsx("i",{className:`${Ie.icon} ${Ie.text} text-2xl mb-2`}),e.jsx("div",{className:`text-lg font-bold ${Ie.text}`,children:ze.length}),e.jsx("div",{className:"text-xs text-gray-600 capitalize",children:K})]},K)})})()})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ne.resources.map(E=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsxs("div",{className:"relative inline-block",children:[E.picture?e.jsx("img",{src:W(E.picture),alt:E.name,className:"w-48 h-48 object-cover rounded-lg shadow-md cursor-pointer hover:scale-105 transition-transform",onClick:()=>M({src:W(E.picture),alt:E.name})}):e.jsx("div",{className:"w-48 h-48 bg-gray-100 rounded-lg shadow-md flex items-center justify-center",children:e.jsx("i",{className:"ri-image-line text-gray-400 text-4xl"})}),E.picture&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 rounded-lg transition-all duration-200 flex items-center justify-center",children:e.jsx("i",{className:"ri-zoom-in-line text-white opacity-0 hover:opacity-100 transition-opacity text-2xl"})})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:E.name}),e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${E.type==="facility"?"bg-blue-100 text-blue-700":E.type==="feature"?"bg-green-100 text-green-700":E.type==="water"?"bg-cyan-100 text-cyan-700":"bg-orange-100 text-orange-700"}`,children:[e.jsx("i",{className:`mr-1 ${E.type==="facility"?"ri-building-line":E.type==="feature"?"ri-star-line":E.type==="water"?"ri-water-flash-line":"ri-box-line"}`}),E.type.charAt(0).toUpperCase()+E.type.slice(1)]})}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("div",{className:"flex items-center justify-center space-x-4",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"ri-number-line mr-1"}),"Quantity: ",E.quantity]})}),E.picture&&e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("i",{className:"ri-image-line mr-1 text-blue-500"}),e.jsx("span",{className:"text-blue-600",children:"Has image"})]})]})]})]},E.resource_id))})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{children:"Click on any image to view full size"}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[ne.resources.filter(E=>E.picture).length," resources with images"]})]}),e.jsxs("span",{children:[ne.resources.length," total resources"]})]})})]})}),"      ",L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl max-w-2xl w-full overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:L.name}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Contact Information"})]}),e.jsx("button",{onClick:()=>Q(null),className:"text-white hover:text-gray-200 text-3xl font-bold transition-colors",children:"×"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-200/50",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"ri-user-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Person"}),e.jsx("p",{className:"text-gray-600",children:"Primary contact for this center"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:L.contact_person}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Emergency Contact"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200/50",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"ri-phone-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Phone Number"}),e.jsx("p",{className:"text-gray-600",children:"Direct contact line"})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:L.contact_number}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Available 24/7"})]}),e.jsxs("button",{onClick:()=>window.open(`tel:${L.contact_number}`,"_self"),className:"bg-green-600 text-white px-6 py-3 rounded-xl hover:bg-green-700 transition-colors font-semibold flex items-center space-x-2",children:[e.jsx("i",{className:"ri-phone-line"}),e.jsx("span",{children:"Call Now"})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.open(`https://maps.google.com/?q=${encodeURIComponent(L.name+" Rosario, Batangas")}`,"_blank"),className:"bg-blue-600 text-white py-3 px-4 rounded-xl hover:bg-blue-700 transition-colors font-semibold flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"ri-direction-line"}),e.jsx("span",{children:"Get Directions"})]}),e.jsxs("button",{onClick:()=>window.open(`tel:${L.contact_number}`,"_self"),className:"bg-green-600 text-white py-3 px-4 rounded-xl hover:bg-green-700 transition-colors font-semibold flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"ri-phone-line"}),e.jsx("span",{children:"Emergency Call"})]})]})]})]})})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl max-w-4xl w-full overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:w.name}),e.jsx("p",{className:"text-green-100 mt-1",children:"Center Information & Status"})]}),e.jsx("button",{onClick:()=>R(null),className:"text-white hover:text-gray-200 text-3xl font-bold transition-colors",children:"×"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200/50",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"ri-group-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Capacity Details"}),e.jsx("p",{className:"text-gray-600",children:"Current occupancy status"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Capacity"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:w.capacity})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Occupancy"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:w.current_occupancy})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Available Space"}),e.jsx("span",{className:"text-lg font-bold text-purple-600",children:w.capacity-w.current_occupancy})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Occupancy Rate"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(w.current_occupancy/w.capacity*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-1000 ${w.current_occupancy/w.capacity>=.9?"bg-gradient-to-r from-red-500 to-red-600":w.current_occupancy/w.capacity>=.7?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-green-500 to-emerald-500"}`,style:{width:`${Math.min(w.current_occupancy/w.capacity*100,100)}%`}})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200/50",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"ri-information-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Center Status"}),e.jsx("p",{className:"text-gray-600",children:"Current operational status"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-xl text-sm font-semibold shadow-sm ${w.status==="open"?"bg-green-100 text-green-800 border border-green-200":w.status==="full"?"bg-red-100 text-red-800 border border-red-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${w.status==="open"?"bg-green-500":w.status==="full"?"bg-red-500":"bg-gray-500"}`}),w.status.charAt(0).toUpperCase()+w.status.slice(1)]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-time-line text-gray-500"}),e.jsxs("span",{children:["Last Updated: ",new Date(w.last_updated).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-map-pin-line text-gray-500"}),e.jsxs("span",{children:["Coordinates: ",w.latitude.toFixed(4),", ",w.longitude.toFixed(4)]})]})]})]})})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>window.open(`https://maps.google.com/?q=${encodeURIComponent(w.name+" Rosario, Batangas")}`,"_blank"),className:"bg-blue-600 text-white py-3 px-4 rounded-xl hover:bg-blue-700 transition-colors font-semibold flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"ri-direction-line"}),e.jsx("span",{children:"Get Directions"})]}),e.jsxs("button",{onClick:()=>window.open(`tel:${w.contact_number}`,"_self"),className:"bg-green-600 text-white py-3 px-4 rounded-xl hover:bg-green-700 transition-colors font-semibold flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"ri-phone-line"}),e.jsx("span",{children:"Call Center"})]}),e.jsxs("button",{onClick:()=>V({center:w,resources:J(w.center_id)}),className:"bg-purple-600 text-white py-3 px-4 rounded-xl hover:bg-purple-700 transition-colors font-semibold flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"ri-tools-line"}),e.jsx("span",{children:"View Resources"})]})]})]})]})]})}),"  "]})},Rj=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState("all"),[u,f]=b.useState(""),[g,x]=b.useState("grid"),[y,$]=b.useState(null),[j,N]=b.useState(!1);b.useEffect(()=>{const P=Lt();if(P.isAuthenticated&&P.userType!=="user"){if(P.userType==="admin"){window.location.href="/admin";return}else if(P.userType==="staff"){window.location.href="/staff";return}}const M=P.isAuthenticated&&P.userType==="user";o(M),i(M?P.userData:null);const ne=()=>{const V=Lt();if(V.isAuthenticated&&V.userType!=="user"){if(V.userType==="admin"){window.location.href="/admin";return}else if(V.userType==="staff"){window.location.href="/staff";return}}const L=V.isAuthenticated&&V.userType==="user";o(L),i(L?V.userData:null)};return window.addEventListener("storage",ne),window.addEventListener("authStateChanged",ne),Kn.getProtocols().then(V=>{Array.isArray(V)?s(V):(console.error("Expected array but got:",V),s([])),a(!1)}).catch(V=>{console.error("Error fetching safety protocols:",V),s([]),a(!1)}),()=>{window.removeEventListener("storage",ne),window.removeEventListener("authStateChanged",ne)}},[]);const S=t.filter(P=>{const M=c==="all"||P.type===c,ne=u===""||P.title.toLowerCase().includes(u.toLowerCase())||P.description.toLowerCase().includes(u.toLowerCase())||P.type.toLowerCase().includes(u.toLowerCase());return M&&ne}),_=["all","fire","earthquake","medical","intrusion","general"],A={total:t.length,fire:t.filter(P=>P.type==="fire").length,earthquake:t.filter(P=>P.type==="earthquake").length,medical:t.filter(P=>P.type==="medical").length,intrusion:t.filter(P=>P.type==="intrusion").length,general:t.filter(P=>P.type==="general").length};return r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-green-50 to-emerald-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-flex items-center justify-center mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl blur-lg opacity-30 scale-110"}),e.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-loader-4-line text-3xl text-white animate-spin"})})]}),e.jsx("p",{className:"text-xl text-gray-600 font-medium",children:"Loading safety protocols..."}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Please wait while we fetch the latest information"})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-green-50 to-emerald-100 relative",children:[e.jsx(Ts,{isAuthenticated:l,userData:n||void 0}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600/5 to-emerald-600/5"}),e.jsx("div",{className:"absolute inset-0 opacity-40",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25px 25px, rgba(34, 197, 94, 0.05) 2px, transparent 0)",backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"relative container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs("div",{className:"relative inline-flex items-center justify-center mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl blur-lg opacity-30 scale-110"}),e.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-shield-check-line text-3xl text-white"})})]}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-gray-900 via-green-900 to-emerald-900 bg-clip-text text-transparent mb-6 leading-tight",children:"Safety Protocols"}),e.jsxs("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed",children:["Rosario, Batangas",e.jsx("span",{className:"block text-lg text-gray-500 mt-2",children:"Emergency Procedures & Safety Guidelines"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-4 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Protocols"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-4 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:A.fire}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fire Safety"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-4 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:A.earthquake}),e.jsx("div",{className:"text-sm text-gray-600",children:"Earthquake"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-xl p-4 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.medical}),e.jsx("div",{className:"text-sm text-gray-600",children:"Medical"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200/50 rounded-2xl p-6 max-w-3xl mx-auto shadow-lg backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-center text-green-800",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-information-line text-green-600"})}),e.jsx("p",{className:"font-semibold text-lg",children:"Comprehensive safety protocols for all emergency situations"})]}),e.jsxs("p",{className:"text-green-600 text-sm mt-2 opacity-80",children:["Updated regularly • Last update: ",new Date().toLocaleTimeString()]})]})]})})]}),e.jsxs("div",{className:"container mx-auto px-4 pb-8",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"relative bg-white/90 backdrop-blur-sm rounded-2xl p-1.5 shadow-xl border border-white/20",children:[e.jsx("div",{className:`absolute top-1.5 bottom-1.5 w-1/2 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl shadow-lg transition-transform duration-300 ease-out ${g==="list"?"translate-x-full":"translate-x-0"}`}),e.jsxs("div",{className:"relative flex",children:[e.jsxs("button",{onClick:()=>x("grid"),className:`relative px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center space-x-2 min-w-[120px] justify-center ${g==="grid"?"text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("i",{className:`ri-grid-line text-lg transition-transform duration-300 ${g==="grid"?"scale-110":""}`}),e.jsx("span",{children:"Grid"})]}),e.jsxs("button",{onClick:()=>x("list"),className:`relative px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center space-x-2 min-w-[120px] justify-center ${g==="list"?"text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("i",{className:`ri-list-unordered text-lg transition-transform duration-300 ${g==="list"?"scale-110":""}`}),e.jsx("span",{children:"List"})]})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-search-line mr-2"}),"Search Protocols"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by title, description, or type...",value:u,onChange:P=>f(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"}),e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),u&&e.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-filter-line mr-2"}),"Filter by Type"]}),e.jsx("select",{value:c,onChange:P=>d(P.target.value),className:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",children:_.map(P=>e.jsxs("option",{value:P,children:[P.charAt(0).toUpperCase()+P.slice(1)," ",P==="all"?"Protocols":""]},P))})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold text-green-600",children:S.length})," of"," ",e.jsx("span",{className:"font-semibold",children:t.length})," protocols",u&&e.jsxs("span",{className:"ml-2 text-green-600",children:['for "',u,'"']})]}),(u||c!=="all")&&e.jsxs("button",{onClick:()=>{f(""),d("all")},className:"text-green-600 hover:text-green-700 font-medium flex items-center space-x-1",children:[e.jsx("i",{className:"ri-refresh-line"}),e.jsx("span",{children:"Clear Filters"})]})]})]})}),S.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gray-100 rounded-2xl flex items-center justify-center",children:e.jsx("i",{className:"ri-search-line text-3xl text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No protocols found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:u||c!=="all"?"Try adjusting your search or filter criteria":"No safety protocols are currently available"}),(u||c!=="all")&&e.jsxs("button",{onClick:()=>{f(""),d("all")},className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Clear Filters"]})]}):e.jsx("div",{className:`${g==="grid"?"grid md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"}`,children:S.map(P=>e.jsxs("div",{className:`bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 ${g==="grid"?"p-6":"p-6 flex items-center space-x-6"}`,children:[e.jsxs("div",{className:`${g==="list"?"flex-shrink-0":"flex items-center justify-between mb-4"}`,children:[e.jsx("div",{className:`relative ${g==="list"?"w-16 h-16":"w-14 h-14"} rounded-2xl flex items-center justify-center ${P.type==="fire"?"bg-gradient-to-r from-red-500 to-red-600":P.type==="earthquake"?"bg-gradient-to-r from-yellow-500 to-orange-600":P.type==="medical"?"bg-gradient-to-r from-blue-500 to-blue-600":P.type==="intrusion"?"bg-gradient-to-r from-purple-500 to-purple-600":"bg-gradient-to-r from-green-500 to-green-600"} shadow-lg`,children:e.jsx("i",{className:`${g==="list"?"text-2xl":"text-xl"} text-white ${P.type==="fire"?"ri-fire-line":P.type==="earthquake"?"ri-earthquake-line":P.type==="medical"?"ri-heart-pulse-line":P.type==="intrusion"?"ri-shield-keyhole-line":"ri-alert-line"}`})}),g==="grid"&&e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-semibold ${P.type==="fire"?"bg-red-100 text-red-800":P.type==="earthquake"?"bg-yellow-100 text-yellow-800":P.type==="medical"?"bg-blue-100 text-blue-800":P.type==="intrusion"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:P.type.charAt(0).toUpperCase()+P.type.slice(1)})]}),e.jsxs("div",{className:`${g==="list"?"flex-1":""}`,children:[e.jsxs("div",{className:`${g==="list"?"flex items-start justify-between":""}`,children:[e.jsxs("div",{className:`${g==="list"?"flex-1 pr-4":""}`,children:[e.jsx("h3",{className:`font-bold text-gray-900 mb-2 ${g==="list"?"text-xl":"text-lg"}`,children:P.title}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:`text-gray-600 mb-1 ${g==="list"?"text-base":"text-sm"} ${P.description.length>150?"line-clamp-3":""}`,children:P.description}),P.description.length>150&&e.jsxs("button",{onClick:M=>{M.preventDefault(),M.stopPropagation();const ne=M.currentTarget.previousElementSibling;ne.classList.contains("line-clamp-3")?(ne.classList.remove("line-clamp-3"),M.currentTarget.innerHTML='<i class="ri-arrow-up-s-line mr-1"></i>See Less'):(ne.classList.add("line-clamp-3"),M.currentTarget.innerHTML='<i class="ri-arrow-down-s-line mr-1"></i>See More')},className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center mb-4",children:[e.jsx("i",{className:"ri-arrow-down-s-line mr-1"}),"See More"]})]})]}),g==="list"&&e.jsx("div",{className:"flex-shrink-0 flex flex-col items-end space-y-2",children:e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-semibold ${P.type==="fire"?"bg-red-100 text-red-800":P.type==="earthquake"?"bg-yellow-100 text-yellow-800":P.type==="medical"?"bg-blue-100 text-blue-800":P.type==="intrusion"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:P.type.charAt(0).toUpperCase()+P.type.slice(1)})})]}),P.file_attachment&&e.jsx("div",{className:"mb-4",children:g==="grid"?e.jsxs("div",{className:"relative",children:[P.file_attachment.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?e.jsx("div",{className:"relative aspect-video rounded-xl overflow-hidden border border-gray-200",children:e.jsx("img",{src:`/uploads/${P.file_attachment}`,alt:P.title,className:"w-full h-full object-cover"})}):P.file_attachment.toLowerCase().endsWith(".pdf")?e.jsxs("div",{className:"relative aspect-[4/3] rounded-xl overflow-hidden bg-white border border-gray-200 shadow-sm group",children:[e.jsxs("div",{className:"absolute top-0 left-0 right-0 h-12 bg-gradient-to-r from-red-600 to-red-700 flex items-center px-4 z-10",children:[e.jsx("i",{className:"ri-file-pdf-line text-xl text-white mr-2"}),e.jsx("span",{className:"text-white font-medium truncate",children:P.file_attachment.split("/").pop()})]}),e.jsx("div",{className:"absolute inset-0 pt-12",children:e.jsx("iframe",{src:`/uploads/${P.file_attachment}#toolbar=0&view=FitH`,className:"w-full h-full",title:P.title})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx("div",{className:"transform translate-y-4 group-hover:translate-y-0 transition-transform",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-lg text-gray-900 font-medium flex items-center space-x-2",children:[e.jsx("i",{className:"ri-fullscreen-line"}),e.jsx("span",{children:"Open Full View"})]})})})]}):e.jsx("div",{className:"relative aspect-[4/3] rounded-xl overflow-hidden bg-gray-100 border border-gray-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-file-text-line text-4xl text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Document"})]})}),e.jsx("a",{href:`/uploads/${P.file_attachment}`,target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center rounded-xl group",children:e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-lg text-gray-900 font-medium flex items-center space-x-2 transform translate-y-2 group-hover:translate-y-0 transition-transform",children:[e.jsx("i",{className:"ri-eye-line"}),e.jsx("span",{children:"View File"})]})})]}):e.jsxs("a",{href:`/uploads/${P.file_attachment}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-green-600 hover:text-green-700 font-semibold transition-colors group",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-2 group-hover:bg-green-200 transition-colors",children:e.jsx("i",{className:"ri-file-text-line text-sm"})}),e.jsx("span",{className:"text-sm",children:"View Attachment"}),e.jsx("i",{className:"ri-external-link-line ml-1 text-xs"})]})}),e.jsxs("div",{className:`pt-4 mt-4 border-t border-gray-200 ${g==="list"?"flex items-center justify-between":""}`,children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("i",{className:"ri-time-line mr-1"}),"Updated: ",new Date(P.updated_at).toLocaleDateString()]}),e.jsxs("button",{onClick:M=>{M.preventDefault(),M.stopPropagation(),$(P),N(!0)},className:`text-green-600 hover:text-green-700 text-sm font-medium flex items-center space-x-1 transition-colors ${g==="grid"?"mt-2":""}`,children:[e.jsx("span",{children:"View Details"}),e.jsx("i",{className:"ri-arrow-right-line"})]})]})]})]},P.protocol_id))}),j&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${y.type==="fire"?"bg-gradient-to-r from-red-500 to-red-600":y.type==="earthquake"?"bg-gradient-to-r from-yellow-500 to-orange-600":y.type==="medical"?"bg-gradient-to-r from-blue-500 to-blue-600":y.type==="intrusion"?"bg-gradient-to-r from-purple-500 to-purple-600":"bg-gradient-to-r from-green-500 to-green-600"}`,children:e.jsx("i",{className:`text-2xl text-white ${y.type==="fire"?"ri-fire-line":y.type==="earthquake"?"ri-earthquake-line":y.type==="medical"?"ri-heart-pulse-line":y.type==="intrusion"?"ri-shield-keyhole-line":"ri-alert-line"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:y.title}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mt-1 ${y.type==="fire"?"bg-red-100 text-red-800":y.type==="earthquake"?"bg-yellow-100 text-yellow-800":y.type==="medical"?"bg-blue-100 text-blue-800":y.type==="intrusion"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:y.type.charAt(0).toUpperCase()+y.type.slice(1)})]})]}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[e.jsx("div",{className:"prose prose-green max-w-none",children:e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:y.description})}),y.file_attachment&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Attached Document"}),y.file_attachment.toLowerCase().endsWith(".pdf")?e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-file-pdf-line text-red-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:y.file_attachment.split("/").pop()})]}),e.jsxs("a",{href:`/uploads/${y.file_attachment}`,target:"_blank",rel:"noopener noreferrer",className:"bg-red-50 text-red-600 hover:bg-red-100 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1",children:[e.jsx("i",{className:"ri-download-line"}),e.jsx("span",{children:"Download PDF"})]})]}),e.jsx("div",{className:"h-[500px] bg-gray-50",children:e.jsx("iframe",{src:`/uploads/${y.file_attachment}#toolbar=0`,className:"w-full h-full",title:y.title})})]}):y.file_attachment.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-image-line text-blue-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:y.file_attachment.split("/").pop()})]}),e.jsxs("a",{href:`/uploads/${y.file_attachment}`,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-50 text-blue-600 hover:bg-blue-100 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1",children:[e.jsx("i",{className:"ri-download-line"}),e.jsx("span",{children:"Download Image"})]})]}),e.jsx("div",{className:"relative aspect-video",children:e.jsx("img",{src:`/uploads/${y.file_attachment}`,alt:y.title,className:"w-full h-full object-contain bg-gray-50"})})]}):e.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:e.jsxs("div",{className:"bg-gray-50 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-file-text-line text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:y.file_attachment.split("/").pop()})]}),e.jsxs("a",{href:`/uploads/${y.file_attachment}`,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-100 text-gray-600 hover:bg-gray-200 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1",children:[e.jsx("i",{className:"ri-download-line"}),e.jsx("span",{children:"Download File"})]})]})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Created"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(y.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(y.updated_at).toLocaleDateString()})]})]})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Close"})})})]})})]})]})};function fn({children:t,className:s="",padding:r="md",shadow:a="md",rounded:n="lg",border:i=!1,hover:l=!1}){const o={none:"",sm:"p-3",md:"p-6",lg:"p-8"},c={none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl"},d={none:"",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl"},u="bg-white",f=i?"border border-gray-200":"",g=l?"hover:shadow-lg transition-shadow duration-200":"";return e.jsx("div",{className:`${u} ${o[r]} ${c[a]} ${d[n]} ${f} ${g} ${s}`,children:t})}const Wn={CRITICAL:"critical",HIGH:"high",MODERATE:"moderate",MEDIUM:"medium",LOW:"low"},Ws={RESOLVED:"resolved",IN_PROGRESS:"in_progress",PENDING:"pending",CLOSED:"closed"},fd={SAFE:"safe",INJURED:"injured",UNKNOWN:"unknown"},Fj=(t,s)=>{const[r,a]=b.useState(t);return b.useEffect(()=>{const n=setTimeout(()=>{a(t)},s);return()=>{clearTimeout(n)}},[t,s]),r};function Oj(){const t=gs(),[s,r]=b.useState(null),[a,n]=b.useState(!1),[i,l]=b.useState([]),[o,c]=b.useState(!0),[d,u]=b.useState(null),[f,g]=b.useState("all"),[x,y]=b.useState(""),[$,j]=b.useState(new Set),[N,S]=b.useState({}),[_,A]=b.useState({}),[P,M]=b.useState({}),ne=Fj(x,300),V=b.useMemo(()=>i.filter(X=>{const k=f==="all"||X.status?.toLowerCase()===f.toLowerCase(),q=!ne||X.incident_type?.toLowerCase().includes(ne.toLowerCase())||X.description?.toLowerCase().includes(ne.toLowerCase())||X.location&&X.location.toLowerCase().includes(ne.toLowerCase());return k&&q}),[i,f,ne]);b.useMemo(()=>({total:V.length,resolved:V.filter(X=>X.status===Ws.RESOLVED).length,inProgress:V.filter(X=>X.status===Ws.IN_PROGRESS).length,critical:V.filter(X=>X.priority_level===Wn.CRITICAL).length}),[V]),b.useEffect(()=>{const X=Lt();if(console.log("Auth state in History Report:",X),!X.isAuthenticated){t("/auth/login");return}console.log("User data in History Report:",X.userData),r(X.userData),n(!0);const k=()=>{const q=Lt();if(!q.isAuthenticated){t("/auth/login");return}n(q.isAuthenticated),r(q.userData)};return window.addEventListener("storage",k),window.addEventListener("authStateChanged",k),()=>{window.removeEventListener("storage",k),window.removeEventListener("authStateChanged",k)}},[t]),b.useEffect(()=>{a&&L()},[a]),b.useEffect(()=>{const X=async()=>{const k=i.filter(q=>q.latitude&&q.longitude&&!q.location);for(const q of k){const T=`${q.latitude},${q.longitude}`;if(!N[T]&&!P[T])try{await new Promise(F=>setTimeout(F,1e3));const B=await G(q.latitude,q.longitude);S(F=>({...F,[T]:B}))}catch(B){console.error("Geocoding failed for",T,B)}}};i.length>0&&X()},[i,N,P]);const L=b.useCallback(async()=>{c(!0),u(null);try{const X=Lt(),k=X.userData;let q=k?.userId||k?.user_id||k?.id;if(console.log("🔍 Auth state:",X),console.log("🔍 User data for ID extraction:",k),console.log("🔍 Extracted userId:",q),!q){const he=["userInfo","user","admin","staff"];for(const se of he){const ve=localStorage.getItem(se)||sessionStorage.getItem(se);if(ve)try{const E=JSON.parse(ve);if(q=E.userId||E.user_id||E.id||E.admin_id||E.staff_id,q){console.log(`✅ Found userId ${q} in storage key: ${se}`);break}}catch(E){console.error(`Error parsing ${se} from storage:`,E)}}}if(!q)throw new Error("User ID not found. Please try logging in again.");console.log("✅ Final userId for API call:",q);const T=new AbortController,B=setTimeout(()=>T.abort(),5e3);try{console.log("🔍 Checking backend health...");const he=await fetch("/api/health",{signal:T.signal});if(clearTimeout(B),!he.ok)throw new Error(`Backend health check failed: ${he.status} ${he.statusText}`);console.log("✅ Backend health check passed")}catch(he){throw clearTimeout(B),console.error("❌ Backend health check failed:",he),new Error("Cannot connect to backend server. Please ensure the server is running.")}const F=new AbortController,J=setTimeout(()=>F.abort(),1e4);console.log(`🔍 Fetching incidents for user ID: ${q}`);const W=await fetch(`/api/incidents/user/${q}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},signal:F.signal});if(clearTimeout(J),console.log("📡 Response status:",W.status,W.statusText),!W.ok){let he;try{if(he=await W.text(),console.error("Response body (text):",he),he.trim().startsWith("{")||he.trim().startsWith("[")){const se=JSON.parse(he);throw new Error(se.message||`HTTP error! status: ${W.status}`)}else throw new Error(`HTTP error! status: ${W.status} - ${W.statusText}`)}catch(se){throw console.error("Error parsing response:",se),new Error(`HTTP error! status: ${W.status} - ${W.statusText}`)}}const le=await W.json();if(console.log("✅ API response data:",le),le.success&&le.incidents){const he=le.incidents.map(se=>({...se,timeline:Q(se)}));l(he),console.log(`✅ Successfully loaded ${he.length} incident reports`)}else throw new Error(le.message||"Failed to fetch incidents")}catch(X){console.error("❌ Error fetching incident reports:",X),X instanceof Error&&X.name==="AbortError"?u("Request timed out. Please check your connection and try again."):u(X instanceof Error?X.message:"Failed to fetch incident reports. Please try again later.")}finally{c(!1)}},[]),Q=b.useCallback(X=>{const k=[],q=X.date_reported,T=X.updated_at||X.date_reported;k.push({id:`${X.incident_id}-1`,stage:"Reported",status:"Submitted",timestamp:q,description:`Incident report submitted: ${X.incident_type}`,notes:"Initial report received and logged"}),X.validation_status&&X.validation_status!=="unvalidated"&&k.push({id:`${X.incident_id}-2`,stage:"Validation",status:X.validation_status==="validated"?"Validated":"Rejected",timestamp:T,description:`Report ${X.validation_status} by admin team`,assignedTo:X.validation_status==="validated"?"Valid by Admin Team":"Invalid by Admin Team",notes:X.validation_notes||"Priority level confirmed"}),(X.assigned_team_name||X.assigned_staff_name)&&k.push({id:`${X.incident_id}-3`,stage:"Assigned",status:"Assigned",timestamp:T,description:`Incident assigned to ${X.assigned_team_name||X.assigned_staff_name}`,assignedTo:X.assigned_team_name||X.assigned_staff_name,notes:"Response team notified and dispatched"}),X.status&&X.status!=="pending"&&([Ws.IN_PROGRESS,"investigation",Ws.RESOLVED,Ws.CLOSED].includes(X.status)&&k.push({id:`${X.incident_id}-4`,stage:"In Progress",status:"In Progress",timestamp:T,description:"Response team dispatched and investigation started",assignedTo:X.assigned_team_name||X.assigned_staff_name,notes:"Team arrived at scene and began assessment"}),X.status===Ws.RESOLVED&&k.push({id:`${X.incident_id}-6`,stage:"Resolution",status:"Resolved",timestamp:T,description:"Incident successfully resolved and contained",assignedTo:X.assigned_team_name||X.assigned_staff_name,notes:"All immediate threats addressed and situation stabilized"}),X.status===Ws.CLOSED&&k.push({id:`${X.incident_id}-7`,stage:"Closed",status:"Closed",timestamp:T,description:"Incident officially closed and case completed",assignedTo:X.assigned_team_name||X.assigned_staff_name,notes:"All documentation completed and follow-up scheduled"}));const B=re(X.status),F=k[k.length-1];return F&&F.stage!==B&&k.push({id:`${X.incident_id}-current`,stage:B,status:X.status?.replace("_"," ").charAt(0).toUpperCase()+X.status?.replace("_"," ").slice(1)||"Current",timestamp:T,description:`Currently at ${B} stage`,assignedTo:X.assigned_team_name||X.assigned_staff_name,notes:"Latest status update"}),k},[]),w=b.useCallback(X=>{switch(X?.toLowerCase()){case Wn.CRITICAL:return"bg-red-50 text-red-700 border-red-200 ring-1 ring-red-200";case Wn.HIGH:return"bg-orange-50 text-orange-700 border-orange-200 ring-1 ring-orange-200";case Wn.MODERATE:case Wn.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200 ring-1 ring-yellow-200";case Wn.LOW:return"bg-green-50 text-green-700 border-green-200 ring-1 ring-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200 ring-1 ring-gray-200"}},[]),R=b.useCallback(X=>{switch(X?.toLowerCase()){case Ws.RESOLVED:return"bg-green-50 text-green-700 border-green-200 ring-1 ring-green-200";case Ws.IN_PROGRESS:case"in progress":return"bg-blue-50 text-blue-700 border-blue-200 ring-1 ring-blue-200";case Ws.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200 ring-1 ring-yellow-200";case Ws.CLOSED:return"bg-gray-50 text-gray-700 border-gray-200 ring-1 ring-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200 ring-1 ring-gray-200"}},[]),Z=b.useCallback(X=>{switch(X?.toLowerCase()){case fd.SAFE:return"bg-green-50 text-green-700 border-green-200 ring-1 ring-green-200";case fd.INJURED:return"bg-red-50 text-red-700 border-red-200 ring-1 ring-red-200";case fd.UNKNOWN:return"bg-yellow-50 text-yellow-700 border-yellow-200 ring-1 ring-yellow-200";default:return"bg-gray-50 text-gray-700 border-gray-200 ring-1 ring-gray-200"}},[]),I=b.useCallback(X=>{switch(X.toLowerCase()){case"reported":return"bg-blue-500";case"validation":return"bg-yellow-500";case"assigned":return"bg-purple-500";case"in progress":return"bg-orange-500";case"resolution":case"resolved":return"bg-green-500";case"closed":return"bg-indigo-500";case"follow-up":case"monitoring":return"bg-teal-500";default:return"bg-gray-500"}},[]),re=b.useCallback(X=>{switch(X?.toLowerCase()){case Ws.PENDING:return"Reported";case Ws.IN_PROGRESS:case"in progress":return"In Progress";case Ws.RESOLVED:return"Resolution";case Ws.CLOSED:return"Closed";default:return"Reported"}},[]),ee=b.useCallback(X=>{if(!X)return"N/A";try{const k=new Date(X);return isNaN(k.getTime())?"Invalid Date":k.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(k){return console.error("Date formatting error:",k),"Invalid Date"}},[]),ge=b.useCallback(X=>{j(k=>{const q=new Set(k);return q.has(X)?q.delete(X):q.add(X),q})},[]),G=b.useCallback(async(X,k)=>{const q=Number(X),T=Number(k),B=`${q},${T}`;if(_[B])return _[B];M(F=>({...F,[B]:!0}));try{const F=await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${q}&longitude=${T}&localityLanguage=en`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(F.ok){const he=await F.json(),se=[];if(he.road?se.push(he.road):he.locality&&!he.locality.includes("Barangay")&&se.push(he.locality),he.locality&&he.locality.includes("Barangay")?se.push(he.locality):he.suburb&&he.suburb.toLowerCase().includes("barangay")&&se.push(he.suburb),he.county&&he.county!==he.locality&&he.county!==he.suburb&&se.push(he.county),he.city&&he.city!==he.county&&he.city!==he.locality&&he.city!==he.suburb&&se.push(he.city),se.length>0){const ve=se.join(", ");return A(E=>({...E,[B]:ve})),ve}}try{const he=await fetch(`/api/geocode?lat=${q}&lon=${T}`,{signal:AbortSignal.timeout(1e4)});if(he.ok){const se=await he.json();if(se.display_name){const E=se.display_name.split(", ").slice(0,3).join(", ");return A(ce=>({...ce,[B]:E})),E}}}catch{console.log("Backend proxy geocoding failed, using coordinate format")}const J=q>=0?"N":"S",W=T>=0?"E":"W",le=`${Math.abs(q).toFixed(4)}°${J}, ${Math.abs(T).toFixed(4)}°${W}`;return A(he=>({...he,[B]:le})),le}catch(F){console.error("Geocoding error:",F);const J=`${q.toFixed(4)}, ${T.toFixed(4)}`;return A(W=>({...W,[B]:J})),J}finally{M(F=>({...F,[B]:!1}))}},[_]),fe=b.useCallback(()=>{t("/incident-report")},[t]),ke=b.useCallback(()=>{y(""),g("all")},[]);return a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsx(Ts,{isAuthenticated:a,userData:s}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-700 p-8 text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative z-10",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx("i",{className:"ri-file-list-3-line text-2xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",children:"History Report"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Track and manage your incident reports"})]})]}),e.jsx("p",{className:"text-blue-100 text-base max-w-2xl",children:"View detailed timelines, track progress, and monitor the status of all your reported incidents with comprehensive analytics."})]})})}),e.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-32 h-32 bg-white/5 rounded-full"})]})}),e.jsx(fn,{className:"mb-8 shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-search-line mr-2 text-blue-500"}),"Search Reports"]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-search-line text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"text",placeholder:"Search by incident type, description, or location...",value:x,onChange:X=>y(X.target.value),className:"w-full pl-12 pr-12 py-4 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 focus:bg-white text-base transition-all duration-200 placeholder-gray-400"}),ne!==x&&e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent"})}),x&&e.jsx("button",{onClick:()=>y(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"ri-close-line text-lg"})})]})]}),e.jsxs("div",{className:"lg:w-80",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-filter-line mr-2 text-blue-500"}),"Filter by Status"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:f,onChange:X=>g(X.target.value),className:"w-full px-4 py-4 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 focus:bg-white text-base transition-all duration-200 appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"resolved",children:"✅ Resolved"}),e.jsx("option",{value:"in_progress",children:"🔄 In Progress"}),e.jsx("option",{value:"pending",children:"⏳ Pending"}),e.jsx("option",{value:"closed",children:"🔒 Closed"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-arrow-down-s-line text-gray-400"})})]})]}),(x||f!=="all")&&e.jsx("div",{className:"flex items-end",children:e.jsxs(vt,{onClick:ke,className:"px-6 py-4 text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 border-2 border-gray-200 rounded-xl font-medium transition-all duration-200 hover:scale-105",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Clear Filters"]})})]}),(x||f!=="all")&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Active filters:"}),x&&e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:[e.jsx("i",{className:"ri-search-line"}),'"',x,'"',e.jsx("button",{onClick:()=>y(""),className:"ml-1 hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xs"})})]}),f!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:[e.jsx("i",{className:"ri-filter-line"}),f.replace("_"," ").charAt(0).toUpperCase()+f.replace("_"," ").slice(1),e.jsx("button",{onClick:()=>g("all"),className:"ml-1 hover:bg-green-200 rounded-full p-0.5 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xs"})})]})]})})]})}),o?e.jsx(fn,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:e.jsx("div",{className:"p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-blue-600 rounded-full animate-spin"})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Reports"}),e.jsx("p",{className:"text-gray-600 text-center max-w-md",children:"Fetching your incident reports and preparing the timeline view..."}),e.jsxs("div",{className:"mt-6 flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Connecting to backend server"})]})]})})}):d?e.jsx(fn,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:e.jsx("div",{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-error-warning-line text-3xl text-red-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Unable to Load Reports"}),e.jsx("p",{className:"text-red-600 mb-6 text-lg font-medium max-w-lg mx-auto",children:d}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6 mb-8 max-w-2xl mx-auto",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("i",{className:"ri-bug-line mr-2 text-blue-500"}),"Debug Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"API Endpoint:"}),e.jsxs("p",{className:"font-mono text-gray-800 break-all",children:["/api/incidents/user/",s?.userId||s?.user_id||s?.id||"unknown"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"User ID:"}),e.jsx("p",{className:"font-mono text-gray-800",children:s?.userId||s?.user_id||s?.id||"No ID found"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"User Type:"}),e.jsx("p",{className:"font-mono text-gray-800",children:s?.userType||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Status:"}),e.jsx("p",{className:"font-mono text-gray-800",children:"Authentication Required"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(vt,{onClick:L,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-medium transition-all duration-200 hover:scale-105 shadow-lg",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Try Again"]}),e.jsxs(vt,{onClick:()=>window.location.reload(),className:"bg-gray-600 hover:bg-gray-700 text-white px-8 py-4 rounded-xl font-medium transition-all duration-200 hover:scale-105 shadow-lg",children:[e.jsx("i",{className:"ri-restart-line mr-2"}),"Refresh Page"]})]})]})})}):V.length===0?e.jsx(fn,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:e.jsx("div",{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-file-list-line text-3xl text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:x||f!=="all"?"No Matching Reports":"No Reports Found"}),e.jsx("p",{className:"text-gray-600 mb-8 text-lg max-w-md mx-auto",children:x||f!=="all"?"No incident reports match your current search and filter criteria. Try adjusting your filters or search terms.":"You haven't created any incident reports yet. Start by reporting your first incident to track its progress."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:x||f!=="all"?e.jsxs(vt,{onClick:ke,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-medium transition-all duration-200 hover:scale-105 shadow-lg",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Clear Filters"]}):e.jsxs(vt,{onClick:fe,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-medium transition-all duration-200 hover:scale-105 shadow-lg",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Create First Report"]})})]})})}):e.jsx("div",{className:"space-y-6",children:V.map(X=>e.jsx(fn,{className:"hover:shadow-xl transition-all duration-300 border-0 bg-white/90 backdrop-blur-sm overflow-hidden group",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`h-1 w-full ${w(X.priority_level).split(" ")[0]} opacity-60`}),e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between mb-6",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl lg:text-2xl font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:X.incident_type}),e.jsx("p",{className:"text-gray-700 text-base leading-relaxed line-clamp-2",children:X.description})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:[e.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-semibold shadow-sm ${w(X.priority_level)}`,children:[e.jsx("i",{className:"ri-flag-line mr-1"}),e.jsxs("span",{className:"hidden sm:inline",children:[X.priority_level?.charAt(0).toUpperCase()+X.priority_level?.slice(1)," Priority"]}),e.jsx("span",{className:"sm:hidden",children:X.priority_level?.charAt(0).toUpperCase()+X.priority_level?.slice(1)})]}),e.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-semibold shadow-sm ${R(X.status)}`,children:[e.jsx("i",{className:"ri-checkbox-circle-line mr-1"}),X.status?.replace("_"," ").charAt(0).toUpperCase()+X.status?.replace("_"," ").slice(1)]}),e.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-semibold shadow-sm ${Z(X.reporter_safe_status)}`,children:[e.jsx("i",{className:"ri-shield-check-line mr-1"}),X.reporter_safe_status?.charAt(0).toUpperCase()+X.reporter_safe_status?.slice(1)]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"ri-map-pin-line text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-700 text-base",children:X.location&&X.location.trim()!==""?X.location:X.latitude&&X.longitude?P[`${X.latitude},${X.longitude}`]?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent mr-2"}),e.jsx("span",{className:"text-gray-500",children:"Loading location..."})]}):_[`${X.latitude},${X.longitude}`]||`${Number(X.latitude).toFixed(6)}, ${Number(X.longitude).toFixed(6)}`:"Location not specified"}),X.latitude&&X.longitude&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2 font-mono bg-white px-2 py-1 rounded border",children:["Lat: ",Number(X.latitude).toFixed(6),", Lng: ",Number(X.longitude).toFixed(6)]})]})]}),X.latitude&&X.longitude&&e.jsxs("button",{onClick:()=>{const k=Number(X.latitude),q=Number(X.longitude),T=`https://www.google.com/maps?q=${k},${q}`;window.open(T,"_blank")},className:"flex items-center px-4 py-2 text-sm text-blue-600 hover:text-blue-700 font-medium transition-all duration-200 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 hover:scale-105",children:[e.jsx("i",{className:"ri-map-line mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"View on Map"}),e.jsx("span",{className:"sm:hidden",children:"Map"})]})]})}),(X.assigned_team_name||X.assigned_staff_name)&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("i",{className:"ri-user-line mr-3 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Assigned to:"}),e.jsx("span",{className:"ml-2 font-semibold text-green-700",children:X.assigned_team_name||X.assigned_staff_name})]})]})}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-time-line mr-2 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Reported:"}),e.jsx("span",{className:"ml-2",children:ee(X.date_reported)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-refresh-line mr-2 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Updated:"}),e.jsx("span",{className:"ml-2",children:ee(X.updated_at)})]})]}),X.validation_notes&&e.jsxs("div",{className:"flex items-start bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsx("i",{className:"ri-chat-1-line mr-2 mt-0.5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 block mb-1",children:"Admin Notes:"}),e.jsxs("span",{className:"text-sm text-blue-800 italic",children:['"',X.validation_notes,'"']})]})]})]})}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>ge(X.incident_id),className:"flex items-center justify-center w-full px-6 py-3 text-blue-600 hover:text-blue-700 font-semibold transition-all duration-200 hover:bg-blue-50 rounded-xl border-2 border-blue-200 hover:border-blue-300 group",children:[e.jsx("i",{className:`ri-arrow-down-s-line mr-2 transition-transform duration-200 ${$.has(X.incident_id)?"rotate-180":""}`}),$.has(X.incident_id)?"Hide Timeline":"View Detailed Timeline",e.jsx("i",{className:"ri-time-line ml-2"})]})}),$.has(X.incident_id)&&X.timeline&&e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200 bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h4",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:e.jsx("i",{className:"ri-time-line text-blue-600 text-xl"})}),"Incident Timeline"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Stages"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:X.timeline?.length||0})]})]}),e.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl text-white shadow-lg",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx("i",{className:"ri-pulse-line text-2xl"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xl font-bold mb-1",children:"Current Stage"}),e.jsxs("p",{className:"text-blue-100 text-lg",children:[re(X.status)," -"," ",X.status?.replace("_"," ").charAt(0).toUpperCase()+X.status?.replace("_"," ").slice(1)]})]})]}),e.jsxs("div",{className:"text-left lg:text-right",children:[e.jsx("div",{className:"text-blue-200 text-sm mb-1",children:"Last Updated"}),e.jsx("div",{className:"text-white text-lg font-semibold",children:ee(X.updated_at)})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-1 bg-gradient-to-b from-blue-200 via-indigo-200 to-blue-300 rounded-full"}),e.jsx("div",{className:"space-y-6",children:X.timeline?.map((k,q)=>{const T=k.id.includes("current"),B=q===(X.timeline?.length||0)-1;return e.jsxs("div",{className:"relative flex items-start group",children:[e.jsxs("div",{className:"relative z-10 flex-shrink-0",children:[e.jsx("div",{className:`w-6 h-6 rounded-full ${I(k.stage)} border-4 border-white shadow-lg flex items-center justify-center ${T?"ring-4 ring-blue-300 ring-offset-2 animate-pulse":""}`,children:T?e.jsx("i",{className:"ri-pulse-line text-white text-xs"}):e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),!B&&e.jsx("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 w-0.5 h-6 bg-gradient-to-b from-blue-300 to-blue-400"})]}),e.jsx("div",{className:"ml-6 flex-1 min-w-0",children:e.jsxs("div",{className:`rounded-2xl p-6 border-2 transition-all duration-300 group-hover:shadow-lg ${T?"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-300 shadow-lg":"bg-white border-gray-200 hover:border-blue-200 hover:bg-blue-50/30"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-bold text-white shadow-sm ${I(k.stage)} ${T?"ring-2 ring-blue-300":""}`,children:[k.stage,T&&e.jsx("span",{className:"ml-2 animate-pulse",children:"●"})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border-2 ${T?"bg-blue-100 text-blue-700 border-blue-300":"bg-gray-100 text-gray-700 border-gray-300"}`,children:k.status})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Timestamp"}),e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:ee(k.timestamp)})]})]}),e.jsx("p",{className:"text-gray-700 text-base leading-relaxed mb-4 font-medium",children:k.description}),k.assignedTo&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("i",{className:"ri-user-line mr-2 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Assigned to:"}),e.jsx("span",{className:"ml-2 font-semibold text-green-700",children:k.assignedTo})]}),k.notes&&e.jsx("div",{className:`p-4 rounded-xl border-l-4 ${T?"text-blue-800 bg-blue-50 border-blue-400":"text-gray-700 bg-gray-50 border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-chat-1-line mr-2 mt-0.5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:"Notes:"}),e.jsx("div",{className:"text-sm italic",children:k.notes})]})]})}),T&&e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-100 to-blue-200 border border-blue-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center text-blue-700 font-semibold",children:[e.jsx("i",{className:"ri-information-line mr-2"}),e.jsx("span",{children:"This is the current stage of your incident"})]})})]})})]},k.id)})})]})]})]})]})},X.incident_id))})]})]}):null}function Dj(){const t=gs(),[s,r]=b.useState(!1),[a,n]=b.useState(null),[i,l]=b.useState(""),[o,c]=b.useState(null),[d,u]=b.useState(!1),[f,g]=b.useState(!1),[x,y]=b.useState(!1),[$,j]=b.useState(""),[N,S]=b.useState(null);b.useEffect(()=>{const M=Lt();if(!M.isAuthenticated){t("/auth/login");return}if(M.userType!=="user"){if(M.userType==="admin"){t("/admin");return}else if(M.userType==="staff"){t("/staff");return}}r(!0),n(M.userData)},[t]);const _=async M=>{if(M.preventDefault(),!i.trim()){j("Please enter your feedback"),y(!0),setTimeout(()=>y(!1),5e3);return}if(i.trim().length<10){j("Please provide at least 10 characters of feedback"),y(!0),setTimeout(()=>y(!1),5e3);return}if(i.trim().length>1e3){j("Feedback must be less than 1000 characters"),y(!0),setTimeout(()=>y(!1),5e3);return}u(!0),y(!1);try{await Uu.submitFeedback({message:i.trim(),rating:o}),g(!0),l(""),c(null),setTimeout(()=>g(!1),5e3)}catch(ne){j(ne.message||"Failed to submit feedback. Please try again."),y(!0),setTimeout(()=>y(!1),5e3)}finally{u(!1)}},A=M=>{c(M===o?null:M)},P=M=>["Poor","Fair","Good","Very Good","Excellent"][M-1];return s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[e.jsx(Ts,{isAuthenticated:s,userData:a}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"ri-feedback-line text-2xl text-white"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-3",children:"Submit Feedback"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Help us improve by sharing your thoughts and suggestions"})]}),f&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-circle-line text-green-600"})}),e.jsx("span",{className:"font-medium",children:"Thank you for your feedback! We appreciate your input."})]})}),x&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-red-100 to-rose-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-error-warning-line text-red-600"})}),e.jsx("span",{className:"font-medium",children:$})]})}),e.jsx(fn,{className:"p-8 shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:e.jsxs("form",{onSubmit:_,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-4",children:"How would you rate your experience?"}),e.jsx("div",{className:"flex gap-2 mb-3",children:[1,2,3,4,5].map(M=>e.jsxs("button",{type:"button",onClick:()=>A(M),onMouseEnter:()=>S(M),onMouseLeave:()=>S(null),className:`group relative w-14 h-14 rounded-full border-2 transition-all duration-200 flex items-center justify-center transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-yellow-200 ${(N?M<=N:o&&M<=o)?"bg-gradient-to-r from-yellow-400 to-amber-400 border-yellow-400 text-white shadow-lg":"bg-gray-50 border-gray-300 text-gray-400 hover:bg-yellow-50 hover:border-yellow-300 hover:text-yellow-500"}`,"aria-label":`Rate ${M} star${M>1?"s":""} - ${P(M)}`,children:[e.jsx("i",{className:"ri-star-fill text-xl"}),e.jsx("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:P(M)})]},M))}),o&&e.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:["You rated: ",o," star",o>1?"s":""," - ",P(o)]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"feedback",className:"block text-sm font-semibold text-gray-700 mb-3",children:"Your Feedback"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{id:"feedback",value:i,onChange:M=>l(M.target.value),placeholder:"Tell us what you think about the application, suggest improvements, or report any issues...",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 resize-vertical min-h-[140px] text-gray-700 placeholder-gray-400",rows:6,maxLength:1e3}),e.jsxs("div",{className:"absolute bottom-3 right-3 text-xs text-gray-400 bg-white px-2 py-1 rounded",children:[i.length,"/1000"]})]}),i.length>0&&i.length<10&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Please provide at least 10 characters"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(vt,{type:"submit",variant:"primary",size:"lg",disabled:d||i.trim().length<10,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transform hover:scale-[1.02] transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-send-plane-line mr-2"}),"Submit Feedback"]})}),e.jsxs(vt,{type:"button",variant:"outline",size:"lg",onClick:()=>t(-1),disabled:d,className:"border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transform hover:scale-[1.02] transition-all duration-200",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back"]})]})]})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-gray-500 bg-white/60 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx("i",{className:"ri-heart-line text-red-400"}),e.jsx("p",{children:"Your feedback helps us make ProteQ better for everyone in Rosario, Batangas."})]})})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"ri-loader-4-line text-2xl text-white animate-spin"})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Checking authentication..."})]})})}function Mj(){const t=gs(),[s,r]=b.useState(!1),[a,n]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[d,u]=b.useState(null),[f,g]=b.useState(null),[x,y]=b.useState(!0),[$,j]=b.useState(null),[N,S]=b.useState(!1),[_,A]=b.useState(!1),[P,M]=b.useState({status:"safe",additional_info:""});b.useEffect(()=>{const re=Lt();if(!re.isAuthenticated||re.userType!=="user"){t("/auth/login");return}r(!0),n(re.userData),ne(),V()},[t]);const ne=async()=>{try{console.log("Fetching welfare status...");const re=await Je("/welfare/status");console.log("Welfare status response:",re),re.success?g(re):u("Failed to load welfare check system status")}catch(re){console.error("Error fetching welfare status:",re),u("Failed to load welfare check system status")}},V=async()=>{try{console.log("Fetching latest welfare report...");const re=await Je("/welfare/latest");console.log("Latest welfare report response:",re),re.success&&re.report&&(j(re.report),M({status:re.report.status,additional_info:re.report.additional_info||""}))}catch(re){console.error("Error fetching latest welfare report:",re)}finally{y(!1)}},L=re=>{const{name:ee,value:ge}=re.target;M(G=>({...G,[ee]:ge}))},Q=async re=>{re.preventDefault(),$&&N?await R():await w()},w=async()=>{l(!0),u(null);try{console.log("Creating welfare check:",P);const re=await Je("/welfare/submit",{method:"POST",body:JSON.stringify(P)});console.log("Welfare submit response:",re),re.success?(c(!0),await V(),setTimeout(()=>{c(!1)},3e3)):u(re.message||"Failed to submit welfare check")}catch(re){console.error("Error submitting welfare check:",re),u(re.message||"Failed to submit welfare check. Please try again.")}finally{l(!1)}},R=async()=>{if($){A(!0),u(null);try{console.log("Updating welfare check:",P);const re=await Je(`/welfare/update/${$.report_id}`,{method:"PUT",body:JSON.stringify(P)});console.log("Welfare update response:",re),re.success?(c(!0),S(!1),await V(),setTimeout(()=>{c(!1)},3e3)):u(re.message||"Failed to update welfare check")}catch(re){console.error("Error updating welfare check:",re),u(re.message||"Failed to update welfare check. Please try again.")}finally{A(!1)}}},Z=()=>{S(!0),u(null)},I=()=>{S(!1),$&&M({status:$.status,additional_info:$.additional_info||""})};return s?x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading welfare check system..."})]})}):f&&!f.isActive?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[e.jsx(Ts,{isAuthenticated:s,userData:a}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsx("div",{className:"max-w-2xl mx-auto text-center",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:[e.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-pause-circle-line text-orange-600 text-4xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:f.title}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:f.description}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-center text-orange-800 mb-2",children:[e.jsx("i",{className:"ri-information-line text-orange-600 mr-2"}),e.jsx("span",{className:"font-semibold",children:"System Currently Disabled"})]}),e.jsx("p",{className:"text-orange-700",children:f.messageWhenDisabled})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{onClick:()=>t("/"),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors",children:[e.jsx("i",{className:"ri-home-line mr-2"}),"Return to Home"]})})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[e.jsx(Ts,{isAuthenticated:s,userData:a}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 to-indigo-600/5"}),e.jsx("div",{className:"absolute inset-0 opacity-40",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25px 25px, rgba(59, 130, 246, 0.05) 2px, transparent 0)",backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"relative container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs("div",{className:"relative inline-flex items-center justify-center mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl blur-lg opacity-30 scale-110"}),e.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-heart-pulse-line text-3xl text-white"})})]}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-indigo-900 bg-clip-text text-transparent mb-6 leading-tight",children:f?.title||"Welfare Check"}),e.jsxs("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed",children:["Emergency Welfare Status Reporting",e.jsx("span",{className:"block text-lg text-gray-500 mt-2",children:f?.description||"Let us know your current status so we can ensure your safety during emergencies"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200/50 rounded-2xl p-6 max-w-3xl mx-auto shadow-lg backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-center text-blue-800",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-information-line text-blue-600"})}),e.jsx("p",{className:"font-semibold text-lg",children:"Your safety status helps us respond quickly to emergencies"})]}),e.jsx("p",{className:"text-blue-600 text-sm mt-2 opacity-80",children:"All welfare reports are treated with urgency and confidentiality"})]})]})})]}),e.jsx("div",{className:"container mx-auto px-4 pb-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[o&&e.jsx("div",{className:"mb-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200/50 rounded-2xl shadow-lg backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-circle-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg",children:$&&N?"Welfare check updated successfully!":"Welfare check submitted successfully!"}),e.jsx("p",{className:"text-green-600 text-sm mt-1",children:"Emergency responders have been notified"})]})]})}),d&&e.jsx("div",{className:"mb-6 p-6 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200/50 rounded-2xl shadow-lg backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-error-warning-line text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg",children:$&&N?"Failed to update welfare check":"Failed to submit welfare check"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:d})]})]})}),$&&!N&&e.jsxs("div",{className:"mb-6 bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-heart-pulse-line text-blue-600"})}),"Current Status"]}),e.jsxs("button",{onClick:Z,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center",children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Status"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center mr-4 ${$.status==="safe"?"bg-green-50":"bg-red-50"}`,children:e.jsx("i",{className:`text-2xl ${$.status==="safe"?"ri-checkbox-circle-line text-green-600":"ri-error-warning-line text-red-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:$.status==="safe"?"I am safe":"I need help"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted: ",new Date($.submitted_at).toLocaleString()]})]})]}),$.additional_info&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Additional Information:"}),e.jsx("p",{className:"text-gray-600 bg-gray-50 rounded-lg p-3",children:$.additional_info})]})]})]}),(!$||N)&&e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:e.jsxs("form",{onSubmit:Q,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-heart-pulse-line text-blue-600"})}),N?"Update Status":"Current Status"]}),N&&e.jsxs("button",{type:"button",onClick:I,className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("i",{className:"ri-close-line mr-1"}),"Cancel"]})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:N?"Update your welfare status below":"Please select your current welfare status"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-4",children:[e.jsx("i",{className:"ri-heart-pulse-line mr-2 text-blue-600"}),"Current Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{value:"safe",label:"I am safe",icon:"ri-checkbox-circle-line",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},{value:"needs_help",label:"I need help",icon:"ri-error-warning-line",color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}].map(re=>e.jsxs("label",{className:"relative cursor-pointer rounded-xl p-6 border-2 transition-all duration-200 "+(P.status===re.value?re.bgColor+" "+re.borderColor+" border-2":"bg-gray-50 border-gray-200 hover:bg-gray-100"),children:[e.jsx("input",{type:"radio",name:"status",value:re.value,checked:P.status===re.value,onChange:L,className:"sr-only"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 "+re.bgColor+" rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:re.icon+" text-2xl "+re.color})}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-gray-900",children:re.label})})]}),P.status===re.value&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("i",{className:"ri-check-line text-green-600 text-xl"})})]},re.value))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-file-text-line text-orange-600"})}),"Additional Information"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Provide any additional details about your situation"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"additional_info",className:"block text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("i",{className:"ri-file-text-line mr-2 text-orange-600"}),"Additional Information ",e.jsx("span",{className:"text-gray-500",children:"(optional)"})]}),e.jsx("textarea",{id:"additional_info",name:"additional_info",value:P.additional_info,onChange:L,rows:4,placeholder:"Any additional information about your situation, needs, or concerns",className:"w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all resize-none"})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-8",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("button",{type:"submit",disabled:i||_,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 disabled:cursor-not-allowed disabled:transform-none",children:i?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Submitting Welfare Check..."]}):_?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Updating Welfare Check..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`${N?"ri-save-line":"ri-send-plane-line"} mr-2`}),N?"Update Welfare Check":"Submit Welfare Check"]})})})})]})})]})})]}):null}function Bj(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(0),[l,o]=b.useState("all"),[c,d]=b.useState(1),[u,f]=b.useState(1),[g,x]=b.useState(0),y=20;b.useEffect(()=>{$()},[c,l]);const $=async()=>{try{a(!0);const M=(c-1)*y,ne=await si.getNotifications(y,M);if(ne.success){let V=ne.notifications;l==="unread"?V=V.filter(L=>!L.is_read):l!=="all"&&(V=V.filter(L=>L.type===l)),s(V),i(ne.unreadCount),f(Math.ceil(ne.total/y)),x(ne.total)}}catch(M){console.error("Error loading notifications:",M)}finally{a(!1)}},j=async M=>{try{await si.markAsRead(M),s(ne=>ne.map(V=>V.id===M?{...V,is_read:!0}:V)),i(ne=>Math.max(0,ne-1))}catch(ne){console.error("Error marking notification as read:",ne)}},N=async()=>{try{await si.markAllAsRead(),s(M=>M.map(ne=>({...ne,is_read:!0}))),i(0)}catch(M){console.error("Error marking all notifications as read:",M)}},S=(M,ne)=>{switch(M){case"alert":return ne==="emergency"?"ri-error-warning-fill":"ri-alarm-warning-line";case"safety_protocol":return"ri-shield-check-line";case"welfare":return"ri-heart-pulse-line";case"system":return"ri-settings-line";default:return"ri-notification-line"}},_=M=>{switch(M){case"emergency":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-orange-600 bg-orange-50 border-orange-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},A=M=>{switch(M){case"alert":return"Alert";case"safety_protocol":return"Safety Protocol";case"welfare":return"Welfare Check";case"system":return"System";default:return"Notification"}},P=M=>{switch(M){case"emergency":return"Emergency";case"warning":return"Warning";case"info":return"Info";default:return"General"}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Stay updated with alerts, safety protocols, and welfare checks"})]}),n>0&&e.jsx("button",{onClick:N,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Mark all as read"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-notification-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:g})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-error-warning-line text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unread"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:n})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-alarm-warning-line text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Alerts"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(M=>M.type==="alert").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-shield-check-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Safety"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(M=>M.type==="safety_protocol").length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"All",count:g},{key:"unread",label:"Unread",count:n},{key:"alert",label:"Alerts",count:t.filter(M=>M.type==="alert").length},{key:"safety_protocol",label:"Safety",count:t.filter(M=>M.type==="safety_protocol").length},{key:"welfare",label:"Welfare",count:t.filter(M=>M.type==="welfare").length},{key:"system",label:"System",count:t.filter(M=>M.type==="system").length}].map(M=>e.jsxs("button",{onClick:()=>o(M.key),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${l===M.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[M.label," (",M.count,")"]},M.key))})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-notification-off-line text-6xl text-gray-300"}),e.jsx("p",{className:"text-gray-500 mt-4 text-lg",children:"No notifications found"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"You're all caught up!"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(M=>e.jsx("div",{onClick:()=>j(M.id),className:`p-6 hover:bg-gray-50 cursor-pointer transition-colors ${M.is_read?"":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 border ${_(M.severity)}`,children:e.jsx("i",{className:`${S(M.type,M.severity)} text-lg`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:M.title}),!M.is_read&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"New"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${_(M.severity)}`,children:P(M.severity)}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:A(M.type)})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:M.message}),e.jsx("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),new Date(M.created_at).toLocaleString()]})})]})]})},M.id))})}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(c-1)*y+1," to"," ",Math.min(c*y,g)," of ",g," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>d(M=>Math.max(1,M-1)),disabled:c===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsx("button",{onClick:()=>d(M=>Math.min(u,M+1)),disabled:c===u,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})})}function Uj(){const t=gs(),[s,r]=b.useState(!1),[a,n]=b.useState(null),[i,l]=b.useState(""),[o,c]=b.useState(null),[d,u]=b.useState(null),[f,g]=b.useState(!1),[x,y]=b.useState(!1),[$,j]=b.useState(!1),[N,S]=b.useState(""),[_,A]=b.useState(0),P=1e3;b.useEffect(()=>{const Q=Lt();if(!Q.isAuthenticated){t("/auth/login");return}r(!0),n(Q.userData)},[t]);const M=async Q=>{if(Q.preventDefault(),!i.trim()){S("Please enter your feedback"),j(!0),setTimeout(()=>j(!1),5e3);return}if(i.trim().length<10){S("Please provide more detailed feedback (at least 10 characters)"),j(!0),setTimeout(()=>j(!1),5e3);return}g(!0),j(!1);try{await Uu.submitFeedback({message:i.trim(),rating:o}),y(!0),l(""),c(null),A(0),setTimeout(()=>y(!1),5e3)}catch(w){S(w.message||"Failed to submit feedback. Please try again."),j(!0),setTimeout(()=>j(!1),5e3)}finally{g(!1)}},ne=Q=>{c(Q===o?null:Q)},V=Q=>{const w=Q.target.value;w.length<=P&&(l(w),A(w.length))},L=Q=>({1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"})[Q];return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-3xl flex items-center justify-center shadow-xl",children:e.jsx("i",{className:"ri-feedback-line text-3xl text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Share Your Feedback"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Your insights help us create a better experience for everyone in our ProteQ community"}),a&&e.jsxs("div",{className:"mt-6 inline-flex items-center gap-3 px-6 py-3 bg-white border border-blue-100 rounded-2xl shadow-sm",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:a.name||`${a.first_name} ${a.last_name}`}),e.jsx("div",{className:"text-sm text-gray-600",children:a.position&&a.department?`${a.position} • ${a.department}`:a.position||a.department||"Team Member"})]})]})]}),x&&e.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-circle-line text-2xl text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900 text-lg",children:"Thank you for your feedback!"}),e.jsx("p",{className:"text-green-700 mt-1",children:"Your input has been successfully submitted and will help us improve."})]})]})}),$&&e.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-2xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-error-warning-line text-2xl text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 text-lg",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-red-700 mt-1",children:N})]})]})}),e.jsx(fn,{className:"p-8 shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:e.jsxs("form",{onSubmit:M,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-2",children:"How would you rate your experience?"})}),e.jsx("div",{className:"flex items-center gap-3",children:[1,2,3,4,5].map(Q=>e.jsxs("button",{type:"button",onClick:()=>ne(Q),onMouseEnter:()=>u(Q),onMouseLeave:()=>u(null),className:`group relative w-14 h-14 rounded-full border-2 transition-all duration-200 flex items-center justify-center transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-200 ${(d?Q<=d:Q<=(o||0))?"bg-gradient-to-br from-yellow-400 to-orange-400 border-yellow-400 text-white shadow-lg":"bg-white border-gray-300 text-gray-400 hover:bg-yellow-50 hover:border-yellow-300 shadow-sm"}`,"aria-label":`Rate ${Q} star${Q>1?"s":""} - ${L(Q)}`,children:[e.jsx("i",{className:"ri-star-fill text-xl"}),e.jsx("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 px-3 py-1 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:L(Q)})]},Q))}),(o||d)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(Q=>e.jsx("i",{className:`ri-star-fill ${Q<=(d||o||0)?"text-yellow-400":"text-gray-300"}`},Q))}),e.jsxs("span",{className:"text-gray-700 font-medium",children:[L(d||o),o&&!d&&` (${o}/5)`]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{htmlFor:"feedback",className:"block text-lg font-semibold text-gray-900",children:["Your Feedback ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{id:"feedback",value:i,onChange:V,placeholder:"Share your thoughts, suggestions, or report any issues you've encountered. The more specific you are, the better we can help improve the experience...",className:"w-full px-6 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-200 focus:border-blue-500 transition-all duration-200 resize-none min-h-[140px] text-gray-900 placeholder-gray-500 bg-white/50",rows:6,maxLength:P,required:!0,"aria-describedby":"char-count feedback-help"}),e.jsxs("div",{className:"absolute bottom-4 right-4 text-sm text-gray-500",id:"char-count",children:[_,"/",P]})]}),e.jsx("p",{id:"feedback-help",className:"text-sm text-gray-600",children:"Please provide at least 10 characters to help us understand your feedback better."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[e.jsx(vt,{type:"submit",variant:"primary",size:"lg",disabled:f||!i.trim()||i.trim().length<10,className:"flex-1 h-14 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-3 text-xl"}),"Submitting Feedback..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-send-plane-line mr-3 text-xl"}),"Submit Feedback"]})}),e.jsxs(vt,{type:"button",variant:"outline",size:"lg",onClick:()=>t(-1),disabled:f,className:"sm:w-auto h-14 text-lg font-semibold border-2 hover:bg-gray-50 transition-all duration-200",children:[e.jsx("i",{className:"ri-arrow-left-line mr-3 text-xl"}),"Back"]})]})]})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-white/60 backdrop-blur-sm rounded-full border border-gray-200",children:[e.jsx("i",{className:"ri-shield-check-line text-blue-600"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Your feedback helps us make ProteQ better for everyone in Rosario, Batangas"})]})})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"ri-loader-4-line text-2xl text-white animate-spin"})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Checking authentication..."})]})})}delete Xt.Icon.Default.prototype._getIconUrl;Xt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const po=[{name:"Alupay",lat:13.8404,lng:121.2922,type:"residential"},{name:"Antipolo",lat:13.708,lng:121.3096,type:"mountainous"},{name:"Bagong Pook",lat:13.8402,lng:121.2216,type:"residential"},{name:"Balibago",lat:13.8512,lng:121.2855,type:"residential"},{name:"Barangay A",lat:13.8457,lng:121.2104,type:"urban"},{name:"Barangay B",lat:13.8461,lng:121.2065,type:"urban"},{name:"Barangay C",lat:13.8467,lng:121.2032,type:"urban"},{name:"Barangay D",lat:13.844,lng:121.2035,type:"urban"},{name:"Barangay E",lat:13.8415,lng:121.2047,type:"urban"},{name:"Bayawang",lat:13.7944,lng:121.2798,type:"agricultural"},{name:"Baybayin",lat:13.8277,lng:121.2589,type:"coastal"},{name:"Bulihan",lat:13.7967,lng:121.2351,type:"agricultural"},{name:"Cahigam",lat:13.8021,lng:121.2501,type:"agricultural"},{name:"Calantas",lat:13.734,lng:121.3129,type:"mountainous"},{name:"Colongan",lat:13.8114,lng:121.1762,type:"agricultural"},{name:"Itlugan",lat:13.819,lng:121.2036,type:"residential"},{name:"Leviste",lat:13.7694,lng:121.2868,type:"agricultural"},{name:"Lumbangan",lat:13.8122,lng:121.2649,type:"agricultural"},{name:"Maalas-as",lat:13.8112,lng:121.2122,type:"residential"},{name:"Mabato",lat:13.8144,lng:121.2913,type:"coastal"},{name:"Mabunga",lat:13.781,lng:121.2924,type:"agricultural"},{name:"Macalamcam A",lat:13.8551,lng:121.3046,type:"coastal"},{name:"Macalamcam B",lat:13.8606,lng:121.3265,type:"coastal"},{name:"Malaya",lat:13.8535,lng:121.172,type:"mountainous"},{name:"Maligaya",lat:13.8182,lng:121.2742,type:"agricultural"},{name:"Marilag",lat:13.8562,lng:121.1764,type:"mountainous"},{name:"Masaya",lat:13.8383,lng:121.1852,type:"residential"},{name:"Matamis",lat:13.7216,lng:121.3305,type:"mountainous"},{name:"Mavalor",lat:13.8177,lng:121.2315,type:"residential"},{name:"Mayuro",lat:13.7944,lng:121.2623,type:"agricultural"},{name:"Namuco",lat:13.8382,lng:121.2036,type:"commercial"},{name:"Namunga",lat:13.8431,lng:121.1978,type:"residential"},{name:"Nasi",lat:13.7699,lng:121.3127,type:"mountainous"},{name:"Natu",lat:13.842,lng:121.2683,type:"agricultural"},{name:"Palakpak",lat:13.7079,lng:121.332,type:"mountainous"},{name:"Pinagsibaan",lat:13.8438,lng:121.3141,type:"coastal"},{name:"Putingkahoy",lat:13.8349,lng:121.3227,type:"coastal"},{name:"Quilib",lat:13.8603,lng:121.2002,type:"mountainous"},{name:"Salao",lat:13.8578,lng:121.3455,type:"coastal"},{name:"San Carlos",lat:13.8478,lng:121.2475,type:"commercial"},{name:"San Ignacio",lat:13.8335,lng:121.1764,type:"mountainous"},{name:"San Isidro",lat:13.8074,lng:121.3152,type:"coastal"},{name:"San Jose",lat:13.8419,lng:121.2329,type:"commercial"},{name:"San Roque",lat:13.8518,lng:121.2039,type:"residential"},{name:"Santa Cruz",lat:13.8599,lng:121.1853,type:"mountainous"},{name:"Timbugan",lat:13.8095,lng:121.1869,type:"agricultural"},{name:"Tiquiwan",lat:13.8284,lng:121.2399,type:"residential"},{name:"Tulos",lat:13.7231,lng:121.2971,type:"mountainous"}],Y0=[{name:"Municipal Hall",lat:13.8454,lng:121.2089,type:"government",description:"Rosario Municipal Government Center"},{name:"Rosario Central School",lat:13.8442,lng:121.2095,type:"education",description:"Primary Educational Institution"},{name:"Public Market",lat:13.8448,lng:121.2078,type:"commercial",description:"Main Commercial Center"},{name:"Health Center",lat:13.846,lng:121.2085,type:"healthcare",description:"Municipal Health Facility"},{name:"Catholic Church",lat:13.8445,lng:121.2092,type:"religious",description:"St. Isidore Parish Church"}],qj=t=>({urban:"#3B82F6",residential:"#10B981",commercial:"#F59E0B",agricultural:"#8B5CF6",coastal:"#06B6D4",mountainous:"#84CC16"})[t]||"#6B7280",zj=t=>({government:"#DC2626",education:"#7C3AED",commercial:"#F59E0B",healthcare:"#059669",religious:"#BE185D"})[t]||"#6B7280",Z0=(t,s=!1)=>{const r=s?35:25;return Xt.divIcon({className:"custom-marker",html:`<div style="
      background-color: ${t};
      width: ${r}px;
      height: ${r}px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: ${s?"16px":"12px"};
    ">${s?"★":"●"}</div>`,iconSize:[r,r],iconAnchor:[r/2,r/2]})},bo={north:13.87,south:13.7,east:121.35,west:121.16},X0=[13.8454,121.2089],Wj=({activeFilter:t,onFilterChange:s,showLandmarks:r,onToggleLandmarks:a})=>{const[n,i]=b.useState(!1),l=[{value:"all",label:"All Barangays",color:"#6B7280"},{value:"urban",label:"Urban",color:"#3B82F6"},{value:"residential",label:"Residential",color:"#10B981"},{value:"commercial",label:"Commercial",color:"#F59E0B"},{value:"agricultural",label:"Agricultural",color:"#8B5CF6"},{value:"coastal",label:"Coastal",color:"#06B6D4"},{value:"mountainous",label:"Mountainous",color:"#84CC16"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden md:block absolute top-4 right-4 z-[1000] bg-white rounded-lg shadow-lg p-4 max-w-xs",children:[e.jsx("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Map Controls"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2 text-gray-700",children:"Filter by Type:"}),e.jsx("div",{className:"space-y-1",children:l.map(o=>e.jsxs("button",{onClick:()=>s(o.value),className:`w-full text-left px-3 py-2 rounded text-sm flex items-center gap-2 transition-colors ${t===o.value?"bg-blue-100 text-blue-800 border border-blue-300":"hover:bg-gray-100 text-gray-700"}`,children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.color}}),o.label]},o.value))})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:o=>a(o.target.checked),className:"rounded"}),"Show Key Landmarks"]})}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2 text-gray-700",children:"Legend:"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"● Barangay"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-600 flex items-center justify-center text-white text-xs",children:"★"}),e.jsx("span",{children:"★ Landmark"})]})]})]})]}),e.jsxs("div",{className:"md:hidden",children:[e.jsxs("button",{onClick:()=>i(!n),className:"absolute top-4 right-4 z-[1000] bg-white rounded-lg shadow-lg p-3 flex items-center gap-2",children:[e.jsx("i",{className:"ri-settings-3-line text-lg text-gray-700"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Controls"}),e.jsx("i",{className:`ri-arrow-${n?"up":"down"}-s-line text-gray-700 transition-transform`})]}),n&&e.jsxs("div",{className:"absolute top-16 left-4 right-4 z-[1000] bg-white rounded-lg shadow-xl p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"Map Controls"}),e.jsx("button",{onClick:()=>i(!1),className:"p-1 rounded-full hover:bg-gray-100",children:e.jsx("i",{className:"ri-close-line text-gray-500"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-gray-700",children:"Filter by Type:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(o=>e.jsxs("button",{onClick:()=>{s(o.value)},className:`px-3 py-2 rounded-lg text-sm flex items-center gap-2 transition-colors ${t===o.value?"bg-blue-100 text-blue-800 border border-blue-300":"hover:bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:o.color}}),e.jsx("span",{className:"truncate",children:o.label})]},o.value))})]}),e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:o=>a(o.target.checked),className:"rounded w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Show Key Landmarks"})]})}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-gray-700",children:"Legend:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500 flex-shrink-0"}),e.jsx("span",{children:"Barangay"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-600 flex items-center justify-center text-white text-xs",children:"★"}),e.jsx("span",{children:"Landmark"})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>{s("all"),a(!0)},className:"px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Show All"}),e.jsx("button",{onClick:()=>i(!1),className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors",children:"Close"})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 z-[999]",onClick:()=>i(!1)})]})]})},Hj=()=>{const[t,s]=b.useState("all"),[r,a]=b.useState(!0),n=t==="all"?po:po.filter(i=>i.type===t);return b.useEffect(()=>{if(!document.querySelector('link[href*="leaflet"]')){const l=document.createElement("link");l.rel="stylesheet",l.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",l.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",l.crossOrigin="",document.head.appendChild(l)}},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Ts,{}),e.jsx("div",{className:"bg-green-600 text-white p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center justify-center w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 transition-colors duration-200 group","aria-label":"Go back",children:e.jsx("i",{className:"ri-arrow-left-line text-xl text-white group-hover:text-green-100"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Interactive Map of Rosario, Batangas"}),e.jsxs("p",{className:"text-green-100",children:["Explore all ",po.length," barangays and key landmarks in our municipality"]})]})]})})}),e.jsxs("div",{className:"relative h-[calc(100vh-200px)]",children:[e.jsxs(Ma,{center:X0,zoom:13,style:{height:"100%",width:"100%"},className:"z-0",maxBounds:[[bo.south-.01,bo.west-.01],[bo.north+.01,bo.east+.01]],minZoom:11,maxZoom:18,children:[e.jsx(Ba,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(gu,{center:X0,radius:8e3,fillColor:"green",fillOpacity:.1,color:"green",weight:2,opacity:.6}),n.map(i=>e.jsx(hr,{position:[i.lat,i.lng],icon:Z0(qj(i.type)),children:e.jsx(Xr,{children:e.jsxs("div",{className:"p-2",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800",children:["Barangay ",i.name]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Type:"})," ",i.type.charAt(0).toUpperCase()+i.type.slice(1)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Coordinates:"})," ",i.lat.toFixed(4),", ",i.lng.toFixed(4)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Municipality:"})," Rosario, Batangas"]})]}),e.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:e.jsx("button",{onClick:()=>window.open(`https://maps.google.com/?q=${i.lat},${i.lng}`,"_blank"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View in Google Maps →"})})]})})},i.name)),r&&Y0.map(i=>e.jsx(hr,{position:[i.lat,i.lng],icon:Z0(zj(i.type),!0),children:e.jsx(Xr,{children:e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:i.name}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Type:"})," ",i.type.charAt(0).toUpperCase()+i.type.slice(1)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",i.description]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Coordinates:"})," ",i.lat.toFixed(4),", ",i.lng.toFixed(4)]})]}),e.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:e.jsx("button",{onClick:()=>window.open(`https://maps.google.com/?q=${i.lat},${i.lng}`,"_blank"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View in Google Maps →"})})]})})},i.name))]}),e.jsx(Wj,{activeFilter:t,onFilterChange:s,showLandmarks:r,onToggleLandmarks:a})]}),e.jsx("div",{className:"bg-white border-t border-gray-200 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:po.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Barangays"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Y0.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Key Landmarks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"~50 km²"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Area"})]})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:e.jsx("p",{children:"© 2024 MDRRMO Rosario, Batangas. Interactive map for disaster risk reduction and emergency response."})})]})})]})},Vj=()=>{const[t,s]=b.useState(null),[r,a]=b.useState(!1),[n,i]=b.useState(!1),[l,o]=b.useState(!1);return b.useEffect(()=>{window.scrollTo(0,0);const c=Lt();if(c.isAuthenticated){if(c.userType==="admin"){window.location.href="/admin";return}else if(c.userType==="staff"){window.location.href="/staff";return}}const d=c.isAuthenticated&&c.userType==="user";a(d),s(d?c.userData:null);const u=()=>{const f=Lt();if(f.isAuthenticated){if(f.userType==="admin"){window.location.href="/admin";return}else if(f.userType==="staff"){window.location.href="/staff";return}}const g=f.isAuthenticated&&f.userType==="user";a(g),s(g?f.userData:null)};return window.addEventListener("storage",u),window.addEventListener("authStateChanged",u),()=>{window.removeEventListener("storage",u),window.removeEventListener("authStateChanged",u)}},[]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[e.jsx(Ts,{isAuthenticated:r,userData:t}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsxs("div",{className:"relative h-[400px] md:h-[500px] lg:h-[600px] bg-gradient-to-r from-blue-900/90 to-blue-800/80",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/images/rosario-hero.png')"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/90 to-blue-800/85"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_40%,rgba(255,255,255,0.1),transparent_50%)]"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:e.jsx("div",{className:"max-w-5xl",children:e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-white/95 backdrop-blur-sm rounded-2xl mb-6 md:mb-8 shadow-2xl border border-white/20",children:e.jsx("i",{className:"ri-information-line text-2xl md:text-3xl lg:text-4xl text-blue-600"})}),e.jsxs("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-bold text-white mb-4 md:mb-6 leading-tight text-balance",children:["About",e.jsx("span",{className:"block text-yellow-300 bg-gradient-to-r from-yellow-300 to-yellow-400 bg-clip-text text-transparent",children:"MDRRMO Rosario"})]}),e.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-blue-100 max-w-3xl mb-8 md:mb-10 leading-relaxed text-pretty",children:"Learn about our mission, vision, and commitment to building a disaster-resilient community in Rosario, Batangas."})]})})})})]}),e.jsx("section",{className:"py-20 md:py-28",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:[e.jsxs("div",{className:"text-center mb-16 md:mb-20",children:[e.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 text-balance",children:"About MDRRMO Rosario"}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-4xl mx-auto text-pretty",children:"Committed to building a resilient and disaster-ready community in Rosario, Batangas"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 md:gap-16 items-center",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-8 md:p-10 shadow-xl border-2 border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-eye-line text-2xl text-blue-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Our Vision"})]}),e.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:"A disaster-resilient and safe community where every resident is prepared, protected, and empowered to face any emergency with confidence and unity."})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 md:p-10 shadow-xl border-2 border-green-100",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-target-line text-2xl text-green-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Our Mission"})]}),e.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:"To provide comprehensive disaster risk reduction and management services through proactive planning, rapid response, and community engagement, ensuring the safety and well-being of all residents in Rosario, Batangas."})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-8 md:p-10 shadow-xl border-2 border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-information-line text-2xl text-purple-600"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Key Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-map-pin-line text-blue-500 mt-1 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Location"}),e.jsx("p",{className:"text-gray-600",children:"Municipal Hall, Rosario, Batangas, Philippines"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-team-line text-blue-500 mt-1 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Coverage"}),e.jsx("p",{className:"text-gray-600",children:"All 48 barangays of Rosario, Batangas"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-time-line text-blue-500 mt-1 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Service Hours"}),e.jsx("p",{className:"text-gray-600",children:"24/7 Emergency Response"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl p-8 md:p-10 text-white",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-shield-star-line text-2xl text-white"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold",children:"Our Commitment"})]}),e.jsx("p",{className:"text-blue-100 text-lg leading-relaxed mb-6",children:"We are dedicated to ensuring the safety and security of every resident through continuous improvement of our emergency response capabilities, community education, and disaster preparedness programs."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("span",{className:"bg-white/20 px-4 py-2 rounded-full text-sm font-medium",children:"Disaster Preparedness"}),e.jsx("span",{className:"bg-white/20 px-4 py-2 rounded-full text-sm font-medium",children:"Emergency Response"}),e.jsx("span",{className:"bg-white/20 px-4 py-2 rounded-full text-sm font-medium",children:"Community Safety"})]})]})]})]}),e.jsxs("div",{className:"mt-16 md:mt-20",children:[e.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-12",children:"Our Core Functions"}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8",children:[{icon:"ri-shield-check-line",title:"Disaster Prevention & Mitigation",description:"Proactive measures to reduce disaster risks and vulnerabilities",color:"from-red-100 to-red-200",iconColor:"text-red-600"},{icon:"ri-alarm-warning-line",title:"Disaster Preparedness",description:"Community education and capacity building for emergency readiness",color:"from-orange-100 to-orange-200",iconColor:"text-orange-600"},{icon:"ri-flashlight-line",title:"Disaster Response",description:"Rapid and coordinated emergency response during disasters",color:"from-yellow-100 to-yellow-200",iconColor:"text-yellow-600"},{icon:"ri-refresh-line",title:"Disaster Recovery",description:"Rehabilitation and reconstruction efforts post-disaster",color:"from-green-100 to-green-200",iconColor:"text-green-600"}].map((c,d)=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 md:p-8 shadow-lg hover:shadow-xl hover:-translate-y-2 transition-all duration-300 border-2 border-gray-100",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${c.color} rounded-2xl flex items-center justify-center mb-6`,children:e.jsx("i",{className:`${c.icon} text-2xl ${c.iconColor}`})}),e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:c.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:c.description})]},d))})]}),e.jsx("div",{className:"mt-16 md:mt-20",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 md:p-12 shadow-xl border-2 border-gray-100",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Get in Touch"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"We're here to serve you. Reach out to us for any emergency or non-emergency concerns."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-phone-line text-blue-600 text-2xl"})}),e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"Emergency Hotline"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"(043) 311.2935"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Available 24/7"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-mail-line text-green-600 text-2xl"})}),e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"mdrrmo@rosario.gov.ph"}),e.jsx("p",{className:"text-sm text-gray-500",children:"General inquiries"})]}),e.jsxs("div",{className:"text-center md:col-span-2 lg:col-span-1",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-map-pin-line text-purple-600 text-2xl"})}),e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"Office Location"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Municipal Hall, Rosario"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Batangas, Philippines"})]})]})]})})]})}),e.jsx("section",{className:"py-20 md:py-28 bg-gradient-to-br from-indigo-50 to-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:[e.jsxs("div",{className:"text-center mb-16 md:mb-20",children:[e.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 text-balance",children:"Development Team"}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-4xl mx-auto text-pretty",children:"The talented developers behind this emergency management platform"})]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10",children:[{name:"Sharmaine Abrenica",role:"Project Manager",image:"/images/dev/alex.jpg"},{name:"Clark Alisuag",role:"UI/UX Designer",image:"/images/dev/sarah.jpg"},{name:"Keith Andrei Ciruelas",role:"Full-Stack Developer",image:"/images/dev/KIT.jpg"}].map((c,d)=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 md:p-8 shadow-lg hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 border-2 border-gray-100 group",children:[e.jsx("div",{className:"relative mb-6",children:e.jsxs("div",{className:"w-24 h-24 md:w-28 md:h-28 mx-auto bg-gradient-to-br from-indigo-100 to-purple-200 rounded-full flex items-center justify-center overflow-hidden border-4 border-white shadow-lg group-hover:scale-105 transition-transform duration-300",children:[e.jsx("img",{src:c.image||"/images/dev/placeholder.jpg",alt:c.name,className:"w-full h-full object-cover",onError:u=>{const f=u.currentTarget;f.style.display="none";const g=f.nextElementSibling;g&&(g.style.display="flex")}}),e.jsx("div",{className:"hidden w-full h-full bg-gradient-to-br from-indigo-100 to-purple-200 items-center justify-center text-indigo-600 font-bold text-2xl",children:c.name.split(" ").map(u=>u[0]).join("")})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:c.name}),e.jsx("p",{className:"text-indigo-600 font-semibold text-lg mb-1",children:c.role})]})]},d))})]})}),e.jsx("section",{className:"bg-gradient-to-br from-blue-600 to-blue-700 py-16 md:py-20",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 max-w-4xl text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6",children:"Ready to Get Involved?"}),e.jsx("p",{className:"text-xl text-blue-100 mb-8 max-w-2xl mx-auto",children:"Join our community of prepared citizens and help us build a safer, more resilient Rosario."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(kt,{to:"/incident-report",className:"bg-yellow-500 hover:bg-yellow-400 text-blue-900 px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-2xl hover:shadow-yellow-500/25 hover:-translate-y-1",children:"Report an Incident"}),e.jsx(kt,{to:"/evacuation-center",className:"bg-white/20 hover:bg-white/30 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 border-2 border-white/30 hover:border-white/50",children:"Find Evacuation Centers"})]})]})}),e.jsxs("footer",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white",children:[e.jsx("div",{className:"py-16 md:py-20",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-12",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center mr-4",children:e.jsx("img",{src:"/images/partners/MDRRMO.png",alt:"Logo",className:"w-40 h-50 rounded-lg shadow-md object-contain"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"MDRRMO Rosario"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Batangas Province"})]})]}),e.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed max-w-md",children:"Municipal Disaster Risk Reduction & Management Office committed to protecting and serving our community through comprehensive disaster preparedness and emergency response."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://www.facebook.com/RosarioMDRRMO",className:"w-10 h-10 bg-gray-700 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors duration-300",children:e.jsx("i",{className:"ri-facebook-fill text-lg"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors duration-300",children:e.jsx("i",{className:"ri-twitter-fill text-lg"})}),e.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-blue-600 rounded-lg flex items-center justify-center transition-colors duration-300",children:e.jsx("i",{className:"ri-instagram-line text-lg"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-6",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx(kt,{to:"/",onClick:()=>{console.log("Home link clicked, navigating to /"),setTimeout(()=>{window.scrollTo(0,0)},100)},className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Home"})}),e.jsx("li",{children:e.jsx(kt,{to:"/evacuation-center",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Evacuation Centers"})}),e.jsx("li",{children:e.jsx(kt,{to:"/safety-protocols",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Safety Protocols"})}),e.jsx("li",{children:e.jsx(kt,{to:"/incident-report",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Report Incident"})}),e.jsx("li",{children:e.jsx(kt,{to:"/about",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"About"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-6",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-map-pin-line text-blue-400 mt-1 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 text-sm",children:"Municipal Hall, Rosario"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Batangas, Philippines"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-phone-line text-blue-400 mr-3"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"(043) 311.2935"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-mail-line text-blue-400 mr-3"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"mdrrmo@rosario.gov.ph"})]})]})]})]})})}),e.jsx("div",{className:"border-t border-gray-700 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx("div",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:"© 2024 MDRRMO Rosario, Batangas. All rights reserved."}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-sm",children:[e.jsx("button",{onClick:()=>i(!0),className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Privacy Policy"}),e.jsx("button",{onClick:()=>o(!0),className:"text-gray-400 hover:text-white transition-colors duration-300",children:"Terms of Service"})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:["Made with ",e.jsx("span",{className:"text-red-500",children:"❤️"})," in the Philippines"]})})]})})]}),e.jsx(tl,{isOpen:n,onClose:()=>i(!1)}),e.jsx(sl,{isOpen:l,onClose:()=>o(!1)})]})},Q0=({collapsed:t=!1})=>{const s=vl(),[r,a]=b.useState(["dashboard"]),n=t,i=[{id:"dashboard",label:"Dashboard",icon:"ri-dashboard-3-line",path:"/admin/dashboard"},{id:"alerts",label:"Alerts",icon:"ri-notification-3-line",path:"/admin/alerts"},{id:"evacuation",label:"Evacuation Management",icon:"ri-map-pin-line",path:"/admin/evacuation",children:[{id:"evacuation-centers",label:"Evacuation Centers",icon:"ri-building-2-line",path:"/admin/evacuation/centers"},{id:"evacuation-resources",label:"Evacuation Resources",icon:"ri-tools-line",path:"/admin/evacuation/resources"}]},{id:"incidents",label:"Incident Management",icon:"ri-error-warning-line",path:"/admin/incidents",children:[{id:"incident-map",label:"Incident Map",icon:"ri-map-pin-2-line",path:"/admin/incidents/map"},{id:"view-incidents",label:"View Incidents",icon:"ri-eye-line",path:"/admin/incidents/view"}]},{id:"users",label:"User Management",icon:"ri-user-line",path:"/admin/users"},{id:"staff",label:"Staff Management",icon:"ri-team-line",path:"/admin/staff"},{id:"teams",label:"Teams Management",icon:"ri-group-line",path:"/admin/teams"},{id:"safety-protocols",label:"Safety Protocols",icon:"ri-shield-check-line",path:"/admin/safety-protocols"},{id:"welfare",label:"Welfare Check",icon:"ri-heart-pulse-line",path:"/admin/welfare"},{id:"feedback",label:"User Feedback",icon:"ri-chat-1-line",path:"/admin/feedback"},{id:"activity-logs",label:"Activity Logs",icon:"ri-history-line",path:"/admin/activity-logs"}],l=d=>{a(u=>u.includes(d)?u.filter(f=>f!==d):[...u,d])},o=d=>d==="/admin/dashboard"&&(s.pathname==="/admin"||s.pathname==="/admin/")?!0:s.pathname===d||s.pathname.startsWith(d+"/"),c=(d,u=0)=>{const f=d.children&&d.children.length>0,g=r.includes(d.id),x=o(d.path)||(f?d.children.some(y=>o(y.path)):!1);return e.jsxs("div",{className:"mb-1 group relative",children:[e.jsx("div",{className:"relative",children:f?e.jsxs("button",{onClick:()=>l(d.id),className:`w-full flex items-center ${n?"justify-center px-0":"justify-between px-4"} py-3 text-left rounded-lg transition-all duration-200 ${x?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"} ${u>0&&!n?"ml-4":""}`,children:[e.jsxs("div",{className:`flex items-center ${n?"justify-center":""}`,children:[e.jsx("i",{className:`${d.icon} text-lg ${n?"":"mr-3"}`}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:d.label}),d.badge&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-red-500 text-white rounded-full",children:d.badge})]})]}),!n&&e.jsx("i",{className:`ri-arrow-${g?"up":"down"}-s-line text-lg transition-transform`})]}):e.jsxs(kt,{to:d.path,className:`flex items-center ${n?"justify-center px-0":"px-4"} py-3 rounded-lg transition-all duration-200 ${x?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"} ${u>0&&!n?"ml-4":""}`,children:[e.jsx("i",{className:`${d.icon} text-lg ${n?"":"mr-3"}`}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:d.label}),d.badge&&e.jsx("span",{className:"ml-auto px-2 py-1 text-xs bg-red-500 text-white rounded-full",children:d.badge})]})]})}),!n&&f&&g&&e.jsx("div",{className:"mt-1 space-y-1",children:d.children.map(y=>c(y,u+1))}),n&&f&&e.jsx("div",{className:"absolute left-full top-0 ml-2 hidden group-hover:block bg-white border border-gray-200 rounded-md shadow-lg py-2 z-50 min-w-[200px]",children:d.children.map(y=>{const $=o(y.path);return e.jsxs(kt,{to:y.path,className:`flex items-center px-3 py-2 text-sm ${$?"text-blue-600 font-medium bg-blue-50":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("i",{className:`${y.icon} text-base mr-2`}),e.jsx("span",{children:y.label})]},y.id)})}),n&&!f&&e.jsx("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-2 py-1 text-xs bg-gray-800 text-white rounded shadow hidden group-hover:block whitespace-nowrap z-50",children:d.label})]},d.id)};return e.jsxs("div",{className:`${n?"w-20":"w-64"} bg-white shadow-xl border-r border-gray-200 h-full flex flex-col transition-all duration-200`,children:[e.jsx("div",{className:`${n?"p-4":"p-6"} border-b border-gray-200`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`bg-blue-600 rounded-lg flex items-center justify-center ${n?"w-10 h-10":"w-10 h-10 mr-3"}`,children:e.jsx("i",{className:"ri-admin-line text-white text-xl"})}),!n&&e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Admin Panel"}),e.jsx("p",{className:"text-sm text-gray-500",children:"SoteROS Emergency"})]})]})}),e.jsx("div",{className:`flex-1 ${n?"p-2":"p-4"} overflow-y-auto relative thin-scrollbar`,children:e.jsx("nav",{className:"space-y-2",children:i.map(d=>c(d))})}),e.jsx("div",{className:`${n?"p-2":"p-4"} border-t border-gray-200`,children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("i",{className:`${n?"ri-information-line":"ri-shield-check-line"} ${n?"":"mr-2"}`}),!n&&e.jsx("span",{children:"Emergency Management System"})]})})]})},Gj=({children:t})=>{const[s,r]=b.useState(!0),[a,n]=b.useState(!1),[i,l]=b.useState(!1),o=vl();b.useEffect(()=>{c();const d=()=>{c()};return window.addEventListener("authStateChanged",d),()=>{window.removeEventListener("authStateChanged",d)}},[]);const c=()=>{const d=Lt();n(d.isAuthenticated),l(d.userType==="admin"),r(!1)};return s?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]})}):!a||!i?e.jsx(Zp,{to:"/admin/login",state:{from:o},replace:!0}):e.jsx(e.Fragment,{children:t})};class Jj{ws=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectInterval=3e3;isConnecting=!1;messageHandlers=new Map;connectionState="disconnected";constructor(){this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),this.send=this.send.bind(this),this.on=this.on.bind(this),this.off=this.off.bind(this)}connect(s){return new Promise((r,a)=>{if(this.isConnecting||this.connectionState==="connected"){r();return}this.isConnecting=!0,this.connectionState="connecting";try{const n=window.location.protocol==="https:"?"wss:":"ws:",i=window.location.hostname,o=`${n}//${i}:5000?token=${encodeURIComponent(s)}`;console.log("Connecting to WebSocket:",o),this.ws=new WebSocket(o),this.ws.onopen=()=>{console.log("WebSocket connected successfully"),this.connectionState="connected",this.reconnectAttempts=0,this.isConnecting=!1,r()},this.ws.onmessage=c=>{try{const d=JSON.parse(c.data);console.log("WebSocket message received:",d),this.handleMessage(d)}catch(d){console.error("Error parsing WebSocket message:",d)}},this.ws.onclose=c=>{console.log("WebSocket connection closed:",c.code,c.reason),this.connectionState="disconnected",this.isConnecting=!1,c.code!==1e3&&this.attemptReconnect(s)},this.ws.onerror=c=>{console.error("WebSocket error:",c),this.connectionState="disconnected",this.isConnecting=!1,a(c)},setTimeout(()=>{this.connectionState!=="connected"&&(this.isConnecting=!1,a(new Error("WebSocket connection timeout")))},1e4)}catch(n){this.isConnecting=!1,a(n)}})}attemptReconnect(s){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnection attempts reached");return}this.reconnectAttempts++,console.log(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),setTimeout(()=>{this.connect(s).catch(()=>{})},this.reconnectInterval*this.reconnectAttempts)}handleMessage(s){(this.messageHandlers.get(s.type)||[]).forEach(a=>{try{a(s.data)}catch(n){console.error("Error in message handler:",n)}})}send(s,r){if(this.ws&&this.ws.readyState===WebSocket.OPEN){const a={type:s,data:r,timestamp:new Date().toISOString()};this.ws.send(JSON.stringify(a))}else console.warn("WebSocket is not connected. Cannot send message.")}on(s,r){this.messageHandlers.has(s)||this.messageHandlers.set(s,[]),this.messageHandlers.get(s).push(r)}off(s,r){const a=this.messageHandlers.get(s);if(a){const n=a.indexOf(r);n>-1&&a.splice(n,1)}}disconnect(){this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),this.connectionState="disconnected",this.messageHandlers.clear()}getConnectionState(){return this.connectionState}isConnected(){return this.connectionState==="connected"&&this.ws?.readyState===WebSocket.OPEN}}const Vr=new Jj,Kj=({children:t})=>{const s=gs(),[r,a]=b.useState(!1),[n,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState([]),[u,f]=b.useState([]),[g,x]=b.useState(!1),[y,$]=b.useState(!1),[j,N]=b.useState(!1),[S,_]=b.useState(()=>{const T=localStorage.getItem("readNotifications");return T?new Set(JSON.parse(T)):new Set}),[A,P]=b.useState("disconnected"),M=b.useRef(!1),[ne,V]=b.useState(0);b.useEffect(()=>{const T=Lt();T.isAuthenticated&&T.userType==="admin"&&o(T.userData);const B=()=>{const F=Lt();F.isAuthenticated&&F.userType==="admin"?o(F.userData):o(null)};return window.addEventListener("authStateChanged",B),()=>window.removeEventListener("authStateChanged",B)},[]),b.useEffect(()=>((async()=>{const B=Lt();if(B.isAuthenticated&&B.userType==="admin"&&B.token&&!M.current){M.current=!0,Notification.permission==="default"&&await Notification.requestPermission();try{P("connecting"),await Vr.connect(B.token),P("connected"),Vr.on("new_incident",Q),Vr.on("new_welfare_report",w),Vr.on("incident_updated",R),Vr.on("welfare_updated",Z),console.log("WebSocket connected for real-time notifications")}catch(F){console.error("Failed to connect WebSocket:",F),P("disconnected")}}})(),I(),()=>{Vr.off("new_incident",Q),Vr.off("new_welfare_report",w),Vr.off("incident_updated",R),Vr.off("welfare_updated",Z)}),[]),b.useEffect(()=>{localStorage.setItem("readNotifications",JSON.stringify([...S]))},[S]);const L=async()=>{try{await ti.logout()}catch(T){console.error("Logout API error:",T)}finally{Da(),Vr.disconnect(),s("/admin/login")}},Q=T=>{console.log("New incident received via WebSocket:",T),V(B=>B+1),d(B=>{const F={...T,id:T.id||T.incident_id,date_reported:T.date_reported||new Date().toISOString()};return B.some(W=>W.id===F.id||W.incident_id===F.id)?B:[F,...B].slice(0,10)}),Notification.permission==="granted"&&new Notification("New Incident Report",{body:`${T.incident_type||"Incident"} reported at ${T.location||"Unknown location"}`,icon:"/images/Slogo.png",tag:`incident-${T.id}`})},w=T=>{console.log("New welfare report received via WebSocket:",T),V(B=>B+1),f(B=>{const F={...T,type:"welfare",id:`welfare_${T.report_id||T.id}`,title:"Welfare Check - Needs Help",description:T.additional_info||T.description||"User needs assistance",date_reported:T.submitted_at||T.date_reported||new Date().toISOString(),priority_level:"high",user_name:`${T.first_name||""} ${T.last_name||""}`.trim()||T.user_name||"Unknown User"};return B.some(W=>W.id===F.id||W.report_id===T.report_id)?B:[F,...B].slice(0,5)}),Notification.permission==="granted"&&new Notification("Welfare Check - Needs Help",{body:`${T.user_name||"User"} needs assistance`,icon:"/images/Slogo.png",tag:`welfare-${T.report_id||T.id}`})},R=T=>{console.log("Incident updated via WebSocket:",T),d(B=>B.map(F=>F.id===T.id||F.incident_id===T.id?{...F,...T}:F))},Z=T=>{console.log("Welfare report updated via WebSocket:",T),f(B=>B.map(F=>F.id===`welfare_${T.report_id}`||F.report_id===T.report_id?{...F,...T}:F))},I=async()=>{$(!0);try{const[T,B]=await Promise.allSettled([Hs.getIncidents(),Je("/admin/welfare/reports?status=needs_help&limit=5")]);let F=[];T.status==="fulfilled"&&T.value.success&&Array.isArray(T.value.incidents)&&(F=T.value.incidents.slice(0,10),d(F));let J=[];B.status==="fulfilled"&&B.value.success&&Array.isArray(B.value.reports)&&(J=B.value.reports.map(he=>({...he,type:"welfare",id:`welfare_${he.report_id}`,title:"Welfare Check - Needs Help",description:he.additional_info||"User needs assistance",date_reported:he.submitted_at,priority_level:"high",user_name:`${he.first_name||""} ${he.last_name||""}`.trim()||he.user_name||"Unknown User"})),f(J));const W=[...F,...J],le=new Set(W.map(he=>String(he.id||he.incident_id)));_(he=>new Set([...he].filter(ve=>le.has(ve))))}catch(T){console.error("Failed to fetch notifications:",T)}finally{$(!1)}},re=()=>{g||(I(),V(0)),x(!g)},ee=T=>{const B=String(T);_(F=>new Set([...F,B]))},ge=()=>{const T=[...c,...u].map(B=>String(B.id||B.incident_id));_(new Set(T))},G=[...c,...u].sort((T,B)=>new Date(B.date_reported||B.submitted_at).getTime()-new Date(T.date_reported||T.submitted_at).getTime()),fe=j?G:G.slice(0,10),ke=G.filter(T=>!S.has(String(T.id||T.incident_id))).length,X=G.filter(T=>T.priority_level==="high"||T.priority_level==="critical"||T.type==="welfare").length;b.useEffect(()=>{const T=B=>{const F=B.target;g&&!F.closest(".notification-dropdown")&&!F.closest(".notification-button")&&x(!1)};return g&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[g]);const k=()=>a(!r),q=()=>i(!n);return e.jsx(Gj,{children:e.jsxs("div",{className:"h-screen bg-gray-50 flex",children:[e.jsx("div",{className:`hidden lg:flex transition-all duration-300 ${r?"w-20":"w-64"}`,children:e.jsx(Q0,{collapsed:r,onToggleCollapse:k})}),n&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:q}),e.jsx("div",{className:"fixed left-0 top-0 h-full w-64 bg-white shadow-xl overflow-y-auto thin-scrollbar",children:e.jsx(Q0,{})})]}),e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-3 sticky top-0 z-30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:q,className:"lg:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100 mr-3",children:e.jsx("i",{className:"ri-menu-line text-xl"})}),e.jsx("button",{onClick:k,className:"hidden lg:block p-2 rounded-lg text-gray-600 hover:bg-gray-100 mr-3",children:e.jsx("i",{className:`ri-${r?"menu-unfold":"menu-fold"}-line text-xl`})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Admin Dashboard"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:re,className:"notification-button p-3 rounded-xl text-gray-600 hover:bg-blue-50 hover:text-blue-600 relative transition-all duration-200 group",children:[e.jsx("i",{className:"ri-notification-3-line text-xl group-hover:scale-110 transition-transform"}),ke>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-lg animate-pulse",children:ke>99?"99+":ke}),ne>0&&e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white animate-bounce",children:e.jsx("div",{className:"w-full h-full bg-green-400 rounded-full animate-ping"})}),X>0&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-orange-500 rounded-full border-2 border-white"})]}),g&&e.jsxs("div",{className:"notification-dropdown absolute right-0 mt-2 w-[520px] h-[520px] max-w-[100vw] max-h-[80vh] overflow-hidden bg-white rounded-xl shadow-2xl border border-gray-200 z-50 backdrop-blur-sm",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h3",{className:"font-bold text-gray-900 text-lg flex items-center",children:[e.jsx("i",{className:"ri-notification-3-line mr-2 text-blue-600"}),"Incident Alerts"]}),e.jsxs("div",{className:"ml-3 flex items-center",children:[A==="connected"&&e.jsxs("div",{className:"flex items-center text-green-600 text-xs",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse mr-1"}),e.jsx("span",{className:"font-medium",children:"Live"})]}),A==="connecting"&&e.jsxs("div",{className:"flex items-center text-yellow-600 text-xs",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse mr-1"}),e.jsx("span",{className:"font-medium",children:"Connecting..."})]}),A==="disconnected"&&e.jsxs("div",{className:"flex items-center text-red-600 text-xs",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-1"}),e.jsx("span",{className:"font-medium",children:"Offline"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:I,disabled:y,className:"p-1 hover:bg-gray-200 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:e.jsx("i",{className:`ri-refresh-line text-gray-500 ${y?"animate-spin":""}`})}),e.jsx("button",{onClick:()=>x(!1),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:e.jsx("i",{className:"ri-close-line text-gray-500"})})]})]}),ke>0&&e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsxs("button",{onClick:ge,className:"px-3 py-1 bg-blue-600 text-white text-xs rounded-full hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx("i",{className:"ri-check-double-line mr-1"}),"Mark All Read"]})})]}),e.jsx("div",{className:"h-[380px] max-h-[60vh] overflow-y-auto",children:y?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium",children:"Loading notifications..."}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Fetching latest incidents and welfare reports"})]}):G.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("i",{className:"ri-notification-off-line text-4xl mb-3 block text-gray-300"}),e.jsx("p",{className:"text-sm font-medium",children:"No notifications"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"New incidents and welfare reports will appear here"})]}):fe.map(T=>{const B=T.id||T.incident_id,F=String(B),J=S.has(F),W=T.priority_level==="high"||T.priority_level==="critical"||T.type==="welfare",le=T.type==="welfare",he=se=>{if(le)return"bg-red-100 text-red-800 border-red-200";switch(se){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:`px-4 py-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-all duration-200 relative group ${J?"":"bg-blue-50/50 border-l-4 border-l-blue-500"} ${W?"ring-1 ring-red-200 bg-red-50/30":""}`,onClick:()=>{J||ee(F),s(le?"/admin/welfare":"/admin/incidents/view"),x(!1)},children:[!J&&e.jsx("div",{className:"absolute left-3 top-4 w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),W&&e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx("i",{className:`${le?"ri-heart-pulse-line":"ri-fire-line"} text-red-500 text-sm animate-pulse`})}),e.jsxs("div",{className:`${J?"":"ml-4"} ${W?"pr-6":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("p",{className:`text-sm font-semibold ${J?"text-gray-700":"text-gray-900"}`,children:le?"Welfare Check - Needs Help":T.incident_type}),e.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${he(T.priority_level)}`,children:le?"WELFARE":T.priority_level?.toUpperCase()}),W&&e.jsxs("span",{className:"text-xs text-red-600 font-bold flex items-center",children:[e.jsx("i",{className:`${le?"ri-heart-pulse-line":"ri-alarm-warning-line"} mr-1`}),le?"NEEDS HELP":"URGENT"]})]}),e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:new Date(T.date_reported||T.submitted_at).toLocaleDateString()})]}),e.jsx("p",{className:`text-xs leading-relaxed mb-2 ${J?"text-gray-500":"text-gray-600"}`,children:le?e.jsxs("span",{children:[e.jsx("strong",{children:T.user_name})," needs assistance",T.description&&` - ${T.description.length>80?T.description.substring(0,80)+"...":T.description}`]}):T.description?.length>100?`${T.description.substring(0,100)}...`:T.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-xs text-gray-400 flex items-center",children:[e.jsx("i",{className:"ri-time-line mr-1"}),new Date(T.date_reported||T.submitted_at).toLocaleTimeString()]}),le?e.jsxs("span",{className:"text-xs text-gray-400 flex items-center",children:[e.jsx("i",{className:"ri-user-line mr-1"}),T.user_name]}):T.location&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center",children:[e.jsx("i",{className:"ri-map-pin-line mr-1"}),T.location.length>20?`${T.location.substring(0,20)}...`:T.location]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 group-hover:text-blue-600 transition-colors",children:[e.jsx("span",{className:"mr-1",children:le?"View Welfare":"View"}),e.jsx("i",{className:"ri-arrow-right-s-line group-hover:translate-x-1 transition-transform"})]})]})]})]},B)})}),G.length>10&&!j&&e.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:e.jsxs("button",{onClick:()=>N(!0),className:"w-full py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center font-medium",children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"See More (",G.length-10," more)"]})}),j&&G.length>10&&e.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:e.jsxs("button",{onClick:()=>N(!1),className:"w-full py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center font-medium",children:[e.jsx("i",{className:"ri-eye-off-line mr-2"}),"Show Less"]})})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-white text-sm"})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l?.name||l?.first_name||l?.firstName||"Admin"}),e.jsx("p",{className:"text-xs text-gray-500",children:l?.email||"admin@example.com"})]}),e.jsx("i",{className:"ri-arrow-down-s-line text-gray-400"})]}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:T=>{T.preventDefault(),T.stopPropagation(),s("/admin/profile")},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx("i",{className:"ri-user-line mr-3"}),"Profile Settings"]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:L,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx("i",{className:"ri-logout-box-line mr-3"}),"Logout"]})]})})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:t||e.jsx(Bx,{})})]})]})})},Yj=()=>{const[t,s]=b.useState({email:"",password:""}),[r,a]=b.useState(!1),[n,i]=b.useState(null),l=gs(),o=d=>{const{name:u,value:f}=d.target;s(g=>({...g,[u]:f})),n&&i(null)},c=async d=>{if(d.preventDefault(),!t.email||!t.password){i("Please fill in all fields");return}a(!0),i(null);try{const u=await ti.login(t.email,t.password);if(u.success){const f={...u.admin,token:u.token,userType:"admin"};localStorage.setItem("userInfo",JSON.stringify(f)),localStorage.setItem("adminToken",u.token),window.dispatchEvent(new Event("authStateChanged")),l("/admin/dashboard")}else i(u.message||"Login failed")}catch(u){console.error("Login error:",u),i(u instanceof Error?u.message:"Login failed. Please try again.")}finally{a(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-indigo-400/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -right-40 w-96 h-96 bg-gradient-to-br from-indigo-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-32 h-32 bg-gradient-to-br from-blue-300/30 to-indigo-300/30 rounded-full blur-2xl animate-bounce delay-500"}),e.jsx("div",{className:"absolute top-20 left-20 w-2 h-2 bg-blue-400 rounded-full animate-ping delay-300"}),e.jsx("div",{className:"absolute top-40 right-32 w-1 h-1 bg-indigo-400 rounded-full animate-ping delay-700"}),e.jsx("div",{className:"absolute bottom-32 left-1/3 w-1.5 h-1.5 bg-purple-400 rounded-full animate-ping delay-1000"}),e.jsx("div",{className:"absolute top-1/3 left-10 w-8 h-8 border border-blue-300/40 rotate-45 animate-spin-slow"}),e.jsx("div",{className:"absolute bottom-1/3 right-16 w-6 h-6 border border-indigo-300/40 rounded-full animate-pulse delay-500"})]}),e.jsxs("div",{className:"max-w-md w-full relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-full flex items-center justify-center mb-4 shadow-2xl relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full blur-lg opacity-50 animate-pulse"}),e.jsx("i",{className:"ri-shield-user-line text-3xl text-white relative z-10"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-green-400 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-line text-xs text-white"})})]}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-700 bg-clip-text text-transparent mb-2",children:"Admin Portal"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"ProteQ Emergency Management System"}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx("i",{className:"ri-shield-check-line text-green-500"}),e.jsx("span",{children:"Secure"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx("i",{className:"ri-lock-line text-blue-500"}),e.jsx("span",{children:"Encrypted"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx("i",{className:"ri-verified-badge-line text-indigo-500"}),e.jsx("span",{children:"Verified"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-transparent rounded-br-full"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-gradient-to-tl from-indigo-400/20 to-transparent rounded-tl-full"}),e.jsxs("form",{onSubmit:c,className:"space-y-6 relative z-10",children:[n&&e.jsx("div",{className:"bg-red-50/80 backdrop-blur-sm border border-red-200/50 rounded-xl p-4 animate-shake",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700 text-sm font-medium",children:n})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-mail-line text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:o,className:"block w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200 bg-white/50 backdrop-blur-sm hover:bg-white/70",placeholder:"admin@example.com",required:!0}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/0 via-blue-500/0 to-blue-500/0 group-focus-within:from-blue-500/10 group-focus-within:via-transparent group-focus-within:to-indigo-500/10 transition-all duration-300 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-lock-line text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:o,className:"block w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200 bg-white/50 backdrop-blur-sm hover:bg-white/70",placeholder:"Enter your password",required:!0}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/0 via-blue-500/0 to-blue-500/0 group-focus-within:from-blue-500/10 group-focus-within:via-transparent group-focus-within:to-indigo-500/10 transition-all duration-300 pointer-events-none"})]})]}),e.jsxs("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] hover:translate-x-[100%] transition-transform duration-700"}),r?e.jsxs("div",{className:"flex items-center justify-center relative z-10",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing In..."]}):e.jsxs("div",{className:"flex items-center justify-center relative z-10",children:[e.jsx("i",{className:"ri-login-box-line mr-2"}),"Sign In to Admin Portal"]})]})]}),e.jsx("div",{className:"mt-8 text-center relative z-10",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Need help? Contact your system administrator"})})]}),e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-6 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-shield-check-line text-green-500"}),e.jsx("span",{children:"SSL Secured"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-time-line text-blue-500"}),e.jsx("span",{children:"24/7 Monitoring"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-user-settings-line text-indigo-500"}),e.jsx("span",{children:"Admin Access"})]})]})]})]})},Zj=()=>{const[t,s]=b.useState({name:"",email:"",password:"",confirmPassword:""}),[r,a]=b.useState(!1),[n,i]=b.useState(null),l=gs(),o=d=>{const{name:u,value:f}=d.target;s(g=>({...g,[u]:f})),n&&i(null)},c=async d=>{if(d.preventDefault(),!t.name||!t.email||!t.password||!t.confirmPassword){i("Please fill in all fields");return}if(t.password!==t.confirmPassword){i("Passwords do not match");return}if(t.password.length<6){i("Password must be at least 6 characters long");return}a(!0),i(null);try{const u=await ti.register(t.name,t.email,t.password);u.success?l("/admin/login"):i(u.message||"Registration failed")}catch(u){console.error("Registration error:",u),i(u instanceof Error?u.message:"Registration failed. Please try again.")}finally{a(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-indigo-600/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-purple-400/20 to-blue-600/20 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-32 h-32 bg-gradient-to-br from-indigo-400/30 to-blue-600/30 rounded-full blur-2xl animate-bounce delay-500"}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-24 h-24 bg-gradient-to-br from-blue-400/30 to-purple-600/30 rounded-full blur-2xl animate-bounce delay-700"}),e.jsx("div",{className:"absolute top-20 left-20 w-2 h-2 bg-blue-400 rounded-full animate-ping"}),e.jsx("div",{className:"absolute top-40 right-32 w-1 h-1 bg-indigo-500 rounded-full animate-ping delay-300"}),e.jsx("div",{className:"absolute bottom-32 left-1/3 w-1.5 h-1.5 bg-purple-400 rounded-full animate-ping delay-700"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-2 h-2 bg-blue-500 rounded-full animate-ping delay-1000"})]}),e.jsxs("div",{className:"max-w-md w-full relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-full flex items-center justify-center mb-4 shadow-2xl relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-full blur-lg opacity-50 animate-pulse"}),e.jsx("i",{className:"ri-shield-user-line text-3xl text-white relative z-10"})]}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-blue-800 bg-clip-text text-transparent mb-2",children:"Create Admin Account"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"ProteQ Emergency Management System"}),e.jsxs("div",{className:"flex justify-center items-center space-x-4 mt-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-shield-check-line text-green-500 mr-1"}),e.jsx("span",{children:"Secure"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-lock-line text-blue-500 mr-1"}),e.jsx("span",{children:"Encrypted"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-verified-badge-line text-purple-500 mr-1"}),e.jsx("span",{children:"Verified"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-transparent rounded-tl-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 bg-gradient-to-tl from-indigo-400/20 to-transparent rounded-br-3xl"}),e.jsxs("form",{onSubmit:c,className:"space-y-6 relative z-10",children:[n&&e.jsx("div",{className:"bg-red-50/80 backdrop-blur-sm border border-red-200 rounded-xl p-4 animate-shake",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700 text-sm font-medium",children:n})]})}),e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2 group-focus-within:text-blue-600 transition-colors",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-user-line text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:o,className:"block w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/50 backdrop-blur-sm hover:bg-white/70",placeholder:"Enter your full name",required:!0})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2 group-focus-within:text-blue-600 transition-colors",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-mail-line text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:o,className:"block w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/50 backdrop-blur-sm hover:bg-white/70",placeholder:"admin@example.com",required:!0})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2 group-focus-within:text-blue-600 transition-colors",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-lock-line text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:o,className:"block w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/50 backdrop-blur-sm hover:bg-white/70",placeholder:"Create a strong password",required:!0})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-2 group-focus-within:text-blue-600 transition-colors",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-lock-line text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:o,className:"block w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/50 backdrop-blur-sm hover:bg-white/70",placeholder:"Confirm your password",required:!0})]})]}),e.jsxs("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-800 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),r?e.jsxs("div",{className:"flex items-center justify-center relative z-10",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):e.jsxs("div",{className:"flex items-center justify-center relative z-10",children:[e.jsx("i",{className:"ri-user-add-line mr-2"}),"Create Account"]})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("div",{className:"flex justify-center items-center space-x-6 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-shield-check-line text-green-500 mr-1"}),e.jsx("span",{children:"256-bit SSL"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-time-line text-blue-500 mr-1"}),e.jsx("span",{children:"24/7 Support"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-global-line text-purple-500 mr-1"}),e.jsx("span",{children:"Global Access"})]})]})})]})]})},Xj=({active:t,payload:s,label:r})=>{if(t&&s&&s.length){const a=s[0]?.payload;return e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:a?.timeLabel||r}),s.map((n,i)=>e.jsx("p",{className:"text-sm",style:{color:n.color},children:`${n.dataKey}: ${n.value.toLocaleString()}`},i)),a?.formattedTime&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Time: ",a.formattedTime]}),a?.sampleDateTime&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Latest: ",a.sampleDateTime]}),a?.dateRange&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Consecutive Dates: ",a.dateRange]}),a?.timeRange&&e.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:["Time Range: ",a.timeRange]})]})}return null},Do=ht.memo(({data:t,title:s,dataKey:r="count",color:a="#3b82f6",height:n=300,stacked:i=!1,stackKeys:l=[]})=>{if(!t||t.length===0)return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s}),e.jsx("div",{className:"flex items-center justify-center",style:{height:n},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Data will appear here when available"})]})})]});const o=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#f97316","#84cc16"];return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-50 px-2 py-1 rounded-full",children:[t.length," ",t.length===1?"item":"items"]})]}),e.jsx("div",{style:{height:n},children:e.jsx(oc,{width:"100%",height:"100%",children:e.jsxs(qx,{data:t,margin:{top:10,right:30,left:20,bottom:5},children:[e.jsx(Fu,{strokeDasharray:"3 3",className:"opacity-20",stroke:"#e5e7eb"}),e.jsx(Ou,{dataKey:"name",fontSize:12,tick:{fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),e.jsx(Du,{fontSize:12,tick:{fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},tickFormatter:c=>c.toLocaleString()}),e.jsx(cc,{content:e.jsx(Xj,{})}),i&&l.length>0&&e.jsx(dc,{}),i&&l.length>0?l.map((c,d)=>e.jsx(zd,{dataKey:c,stackId:"stack",fill:o[d%o.length],radius:d===l.length-1?[4,4,0,0]:[0,0,0,0]},c)):e.jsx(zd,{dataKey:r,fill:a,radius:[4,4,0,0],className:"hover:opacity-80 transition-opacity duration-200"})]})})})]})});Do.displayName="BarChart";const eh=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#f97316","#6366f1","#84cc16"],Qj=ht.memo(({data:t,title:s,dataKey:r="count",nameKey:a="name",height:n=300,colors:i})=>{const l=t?.reduce((u,f)=>u+f[r],0)||0,o=t?.reduce((u,f)=>Math.max(u,f[r]),0)||0,c=t?.find(u=>u[r]===o);if(!t||t.length===0)return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s}),e.jsxs("div",{className:"flex flex-col items-center justify-center",style:{height:n},children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No data available"})]})]});const d=({active:u,payload:f})=>{if(u&&f&&f.length){const g=f[0],x=(g.value/l*100).toFixed(1);return e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-900",children:g.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Value: ",e.jsx("span",{className:"font-medium text-gray-900",children:g.value.toLocaleString()})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Percentage: ",e.jsxs("span",{className:"font-medium text-gray-900",children:[x,"%"]})]})]})}return null};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Total: ",e.jsx("span",{className:"font-medium text-gray-900",children:l.toLocaleString()})]}),c&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Largest: ",c[a]," (",o.toLocaleString(),")"]})]})]}),e.jsx("div",{style:{height:n},children:e.jsx(oc,{width:"100%",height:"100%",children:e.jsxs(tb,{children:[e.jsx(sb,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:u,percent:f})=>f>.05?`${u}: ${(f*100).toFixed(0)}%`:"",outerRadius:Math.min(n*.35,100),fill:"#8884d8",dataKey:r,nameKey:a,animationBegin:0,animationDuration:800,children:t.map((u,f)=>e.jsx(rb,{fill:i?.[u.name]||eh[f%eh.length],className:"hover:opacity-80 transition-opacity duration-200 cursor-pointer"},`cell-${f}`))}),e.jsx(cc,{content:e.jsx(d,{})}),e.jsx(dc,{wrapperStyle:{paddingTop:"20px",fontSize:"14px"},iconType:"circle"})]})})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Categories: ",e.jsx("span",{className:"font-medium text-gray-900",children:t.length})]}),e.jsxs("span",{children:["Average: ",e.jsx("span",{className:"font-medium text-gray-900",children:(l/t.length).toLocaleString()})]})]})})]})}),eN=({active:t,payload:s,label:r})=>{if(t&&s&&s.length){const a=s.reduce((n,i)=>n+(i.value||0),0);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-[200px]",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-2 text-sm",children:r}),e.jsxs("div",{className:"space-y-1",children:[s.map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:n.color}}),e.jsx("span",{className:"text-gray-700 capitalize",children:n.dataKey})]}),e.jsx("span",{className:"font-medium text-gray-900",children:n.value})]},i)),e.jsx("div",{className:"border-t border-gray-100 pt-1 mt-2",children:e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold",children:[e.jsx("span",{className:"text-gray-700",children:"Total"}),e.jsx("span",{className:"text-gray-900",children:a})]})})]})]})}return null},tN=({payload:t})=>e.jsx("div",{className:"flex flex-wrap gap-4 justify-center mt-4",children:t?.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm shadow-sm",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-gray-700 capitalize font-medium",children:s.value})]},r))}),sN=ht.memo(({data:t,title:s,stackKeys:r,colors:a=["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899"],height:n=300})=>{if(!t||t.length===0)return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:s}),e.jsx("div",{className:"flex items-center justify-center",style:{height:n},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4 mx-auto",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No data available"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Chart data will appear here when available"})]})})]});const i=t.length,l=Math.max(...t.map(o=>r.reduce((c,d)=>c+(Number(o[d])||0),0)));return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[i," categories • Max: ",l]})})]}),e.jsx("div",{style:{height:n},children:e.jsx(oc,{width:"100%",height:"100%",children:e.jsxs(qx,{data:t,margin:{top:10,right:30,left:20,bottom:5},children:[e.jsx(Fu,{strokeDasharray:"2 4",className:"opacity-20",stroke:"#e5e7eb"}),e.jsx(Ou,{dataKey:"name",fontSize:12,tick:{fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),e.jsx(Du,{fontSize:12,tick:{fill:"#6b7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"}}),e.jsx(cc,{content:e.jsx(eN,{})}),e.jsx(dc,{content:e.jsx(tN,{})}),r.map((o,c)=>e.jsx(zd,{dataKey:o,stackId:"a",fill:a[c%a.length],radius:c===r.length-1?[6,6,0,0]:[0,0,0,0],className:"hover:opacity-80 transition-opacity duration-200",stroke:"rgba(255,255,255,0.1)",strokeWidth:.5},o))]})})})]})}),rN=ht.memo(({data:t,title:s,color:r="#3b82f6",height:a=300})=>{const n=u=>{if(!u||typeof u!="string")return"Invalid Date";if(u.includes("-")&&u.split("-").length===2){const[g,x]=u.split("-");return new Date(Number.parseInt(g),Number.parseInt(x)-1,1).toLocaleDateString("en-US",{year:"numeric",month:"short"})}if(/^\d{6}$/.test(u)){const g=Number.parseInt(u.substring(0,4)),x=Number.parseInt(u.substring(4,6)),y=new Date(g,0,1),$=(x-1)*7,j=new Date(y.getTime()+$*24*60*60*1e3),N=j.getDay(),S=N===0?-6:1-N,_=new Date(j.getTime()+S*24*60*60*1e3);return`Week ${x} (${_.toLocaleDateString("en-US",{month:"short",day:"numeric"})})`}return u.includes("-")&&u.split("-").length===3?new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"})},i=t?.reduce((u,f)=>u+f.count,0)||0,l=t?.length?Math.round(i/t.length):0,o=t?.reduce((u,f)=>Math.max(u,f.count),0)||0,c=t?.length>=2?t[t.length-1].count>t[0].count?"up":t[t.length-1].count<t[0].count?"down":"stable":"stable",d=({active:u,payload:f,label:g})=>{if(u&&f&&f.length){const x=f[0].value,y=n(g);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-[160px]",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:y}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r}}),e.jsx("span",{className:"text-sm text-gray-600",children:"Count:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:x.toLocaleString()})]}),l>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x>l?`+${x-l} above avg`:x<l?`${l-x} below avg`:"At average"})]})}return null};return!t||t.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s}),e.jsx("div",{className:"flex items-center justify-center",style:{height:a},children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Data trends will appear here when available"})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Total: ",e.jsx("span",{className:"font-medium text-gray-900",children:i.toLocaleString()})]}),e.jsxs("span",{children:["Avg: ",e.jsx("span",{className:"font-medium text-gray-900",children:l.toLocaleString()})]}),e.jsxs("span",{children:["Peak: ",e.jsx("span",{className:"font-medium text-gray-900",children:o.toLocaleString()})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[c==="up"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),e.jsx("span",{className:"text-green-600 font-medium",children:"Trending up"})]}),c==="down"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),e.jsx("span",{className:"text-red-600 font-medium",children:"Trending down"})]}),c==="stable"&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"})}),e.jsx("span",{className:"text-gray-600 font-medium",children:"Stable"})]})]})]}),e.jsx("div",{style:{height:a},children:e.jsx(oc,{width:"100%",height:"100%",children:e.jsxs(ab,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Fu,{strokeDasharray:"3 3",className:"opacity-20",stroke:"#e5e7eb"}),e.jsx(Ou,{dataKey:"date",tickFormatter:n,fontSize:12,stroke:"#6b7280",tickLine:{stroke:"#d1d5db"}}),e.jsx(Du,{fontSize:12,stroke:"#6b7280",tickLine:{stroke:"#d1d5db"},tickFormatter:u=>u.toLocaleString()}),e.jsx(cc,{content:e.jsx(d,{})}),e.jsx(dc,{}),e.jsx(nb,{type:"monotone",dataKey:"count",stroke:r,strokeWidth:3,dot:{fill:r,strokeWidth:2,r:4,className:"drop-shadow-sm"},activeDot:{r:7,fill:r,stroke:"#ffffff",strokeWidth:2,className:"drop-shadow-md"},className:"drop-shadow-sm"})]})})})]})}),aN="modulepreload",nN=function(t){return"/"+t},th={},Mo=function(s,r,a){let n=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=l?.nonce||l?.getAttribute("nonce");n=c(r.map(d=>{if(d=nN(d),d in th)return;th[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":aN,u||(g.as="script"),g.crossOrigin="",g.href=d,o&&g.setAttribute("nonce",o),document.head.appendChild(g),u)return new Promise((x,y)=>{g.addEventListener("load",x),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})};function Ut(t){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ut(t)}var Fr=Uint8Array,mr=Uint16Array,Zu=Int32Array,Xu=new Fr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qu=new Fr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sh=new Fr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gf=function(t,s){for(var r=new mr(31),a=0;a<31;++a)r[a]=s+=1<<t[a-1];for(var n=new Zu(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)n[i]=i-r[a]<<5|a;return{b:r,r:n}},Jf=Gf(Xu,2),iN=Jf.b,bu=Jf.r;iN[28]=258,bu[258]=28;var lN=Gf(Qu,0),rh=lN.r,yu=new mr(32768);for(var Zt=0;Zt<32768;++Zt){var Ra=(Zt&43690)>>1|(Zt&21845)<<1;Ra=(Ra&52428)>>2|(Ra&13107)<<2,Ra=(Ra&61680)>>4|(Ra&3855)<<4,yu[Zt]=((Ra&65280)>>8|(Ra&255)<<8)>>1}var Qi=(function(t,s,r){for(var a=t.length,n=0,i=new mr(s);n<a;++n)t[n]&&++i[t[n]-1];var l=new mr(s);for(n=1;n<s;++n)l[n]=l[n-1]+i[n-1]<<1;var o;if(r){o=new mr(1<<s);var c=15-s;for(n=0;n<a;++n)if(t[n])for(var d=n<<4|t[n],u=s-t[n],f=l[t[n]-1]++<<u,g=f|(1<<u)-1;f<=g;++f)o[yu[f]>>c]=d}else for(o=new mr(a),n=0;n<a;++n)t[n]&&(o[n]=yu[l[t[n]-1]++]>>15-t[n]);return o}),Nn=new Fr(288);for(var Zt=0;Zt<144;++Zt)Nn[Zt]=8;for(var Zt=144;Zt<256;++Zt)Nn[Zt]=9;for(var Zt=256;Zt<280;++Zt)Nn[Zt]=7;for(var Zt=280;Zt<288;++Zt)Nn[Zt]=8;var sc=new Fr(32);for(var Zt=0;Zt<32;++Zt)sc[Zt]=5;var oN=Qi(Nn,9,0),cN=Qi(sc,5,0),Kf=function(t){return(t+7)/8|0},dN=function(t,s,r){return(r==null||r>t.length)&&(r=t.length),new Fr(t.subarray(s,r))},ua=function(t,s,r){r<<=s&7;var a=s/8|0;t[a]|=r,t[a+1]|=r>>8},Gi=function(t,s,r){r<<=s&7;var a=s/8|0;t[a]|=r,t[a+1]|=r>>8,t[a+2]|=r>>16},gd=function(t,s){for(var r=[],a=0;a<t.length;++a)t[a]&&r.push({s:a,f:t[a]});var n=r.length,i=r.slice();if(!n)return{t:Zf,l:0};if(n==1){var l=new Fr(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(P,M){return P.f-M.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],d=0,u=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};u!=n-1;)o=r[r[d].f<r[f].f?d++:f++],c=r[d!=u&&r[d].f<r[f].f?d++:f++],r[u++]={s:-1,f:o.f+c.f,l:o,r:c};for(var g=i[0].s,a=1;a<n;++a)i[a].s>g&&(g=i[a].s);var x=new mr(g+1),y=vu(r[u-1],x,0);if(y>s){var a=0,$=0,j=y-s,N=1<<j;for(i.sort(function(M,ne){return x[ne.s]-x[M.s]||M.f-ne.f});a<n;++a){var S=i[a].s;if(x[S]>s)$+=N-(1<<y-x[S]),x[S]=s;else break}for($>>=j;$>0;){var _=i[a].s;x[_]<s?$-=1<<s-x[_]++-1:++a}for(;a>=0&&$;--a){var A=i[a].s;x[A]==s&&(--x[A],++$)}y=s}return{t:new Fr(x),l:y}},vu=function(t,s,r){return t.s==-1?Math.max(vu(t.l,s,r+1),vu(t.r,s,r+1)):s[t.s]=r},ah=function(t){for(var s=t.length;s&&!t[--s];);for(var r=new mr(++s),a=0,n=t[0],i=1,l=function(c){r[a++]=c},o=1;o<=s;++o)if(t[o]==n&&o!=s)++i;else{if(!n&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(n),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(n);i=1,n=t[o]}return{c:r.subarray(0,a),n:s}},Ji=function(t,s){for(var r=0,a=0;a<s.length;++a)r+=t[a]*s[a];return r},Yf=function(t,s,r){var a=r.length,n=Kf(s+2);t[n]=a&255,t[n+1]=a>>8,t[n+2]=t[n]^255,t[n+3]=t[n+1]^255;for(var i=0;i<a;++i)t[n+i+4]=r[i];return(n+4+a)*8},nh=function(t,s,r,a,n,i,l,o,c,d,u){ua(s,u++,r),++n[256];for(var f=gd(n,15),g=f.t,x=f.l,y=gd(i,15),$=y.t,j=y.l,N=ah(g),S=N.c,_=N.n,A=ah($),P=A.c,M=A.n,ne=new mr(19),V=0;V<S.length;++V)++ne[S[V]&31];for(var V=0;V<P.length;++V)++ne[P[V]&31];for(var L=gd(ne,7),Q=L.t,w=L.l,R=19;R>4&&!Q[sh[R-1]];--R);var Z=d+5<<3,I=Ji(n,Nn)+Ji(i,sc)+l,re=Ji(n,g)+Ji(i,$)+l+14+3*R+Ji(ne,Q)+2*ne[16]+3*ne[17]+7*ne[18];if(c>=0&&Z<=I&&Z<=re)return Yf(s,u,t.subarray(c,c+d));var ee,ge,G,fe;if(ua(s,u,1+(re<I)),u+=2,re<I){ee=Qi(g,x,0),ge=g,G=Qi($,j,0),fe=$;var ke=Qi(Q,w,0);ua(s,u,_-257),ua(s,u+5,M-1),ua(s,u+10,R-4),u+=14;for(var V=0;V<R;++V)ua(s,u+3*V,Q[sh[V]]);u+=3*R;for(var X=[S,P],k=0;k<2;++k)for(var q=X[k],V=0;V<q.length;++V){var T=q[V]&31;ua(s,u,ke[T]),u+=Q[T],T>15&&(ua(s,u,q[V]>>5&127),u+=q[V]>>12)}}else ee=oN,ge=Nn,G=cN,fe=sc;for(var V=0;V<o;++V){var B=a[V];if(B>255){var T=B>>18&31;Gi(s,u,ee[T+257]),u+=ge[T+257],T>7&&(ua(s,u,B>>23&31),u+=Xu[T]);var F=B&31;Gi(s,u,G[F]),u+=fe[F],F>3&&(Gi(s,u,B>>5&8191),u+=Qu[F])}else Gi(s,u,ee[B]),u+=ge[B]}return Gi(s,u,ee[256]),u+ge[256]},uN=new Zu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Zf=new Fr(0),mN=function(t,s,r,a,n,i){var l=i.z||t.length,o=new Fr(a+l+5*(1+Math.ceil(l/7e3))+n),c=o.subarray(a,o.length-n),d=i.l,u=(i.r||0)&7;if(s){u&&(c[0]=i.r>>3);for(var f=uN[s-1],g=f>>13,x=f&8191,y=(1<<r)-1,$=i.p||new mr(32768),j=i.h||new mr(y+1),N=Math.ceil(r/3),S=2*N,_=function(ce){return(t[ce]^t[ce+1]<<N^t[ce+2]<<S)&y},A=new Zu(25e3),P=new mr(288),M=new mr(32),ne=0,V=0,L=i.i||0,Q=0,w=i.w||0,R=0;L+2<l;++L){var Z=_(L),I=L&32767,re=j[Z];if($[I]=re,j[Z]=I,w<=L){var ee=l-L;if((ne>7e3||Q>24576)&&(ee>423||!d)){u=nh(t,c,0,A,P,M,V,Q,R,L-R,u),Q=ne=V=0,R=L;for(var ge=0;ge<286;++ge)P[ge]=0;for(var ge=0;ge<30;++ge)M[ge]=0}var G=2,fe=0,ke=x,X=I-re&32767;if(ee>2&&Z==_(L-X))for(var k=Math.min(g,ee)-1,q=Math.min(32767,L),T=Math.min(258,ee);X<=q&&--ke&&I!=re;){if(t[L+G]==t[L+G-X]){for(var B=0;B<T&&t[L+B]==t[L+B-X];++B);if(B>G){if(G=B,fe=X,B>k)break;for(var F=Math.min(X,B-2),J=0,ge=0;ge<F;++ge){var W=L-X+ge&32767,le=$[W],he=W-le&32767;he>J&&(J=he,re=W)}}}I=re,re=$[I],X+=I-re&32767}if(fe){A[Q++]=268435456|bu[G]<<18|rh[fe];var se=bu[G]&31,ve=rh[fe]&31;V+=Xu[se]+Qu[ve],++P[257+se],++M[ve],w=L+G,++ne}else A[Q++]=t[L],++P[t[L]]}}for(L=Math.max(L,w);L<l;++L)A[Q++]=t[L],++P[t[L]];u=nh(t,c,d,A,P,M,V,Q,R,L-R,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=j,i.p=$,i.i=L,i.w=w)}else{for(var L=i.w||0;L<l+d;L+=65535){var E=L+65535;E>=l&&(c[u/8|0]=d,E=l),u=Yf(c,u+1,t.subarray(L,E))}i.i=l}return dN(o,0,a+Kf(u)+n)},Xf=function(){var t=1,s=0;return{p:function(r){for(var a=t,n=s,i=r.length|0,l=0;l!=i;){for(var o=Math.min(l+2655,i);l<o;++l)n+=a+=r[l];a=(a&65535)+15*(a>>16),n=(n&65535)+15*(n>>16)}t=a,s=n},d:function(){return t%=65521,s%=65521,(t&255)<<24|(t&65280)<<8|(s&255)<<8|s>>8}}},hN=function(t,s,r,a,n){if(!n&&(n={l:1},s.dictionary)){var i=s.dictionary.subarray(-32768),l=new Fr(i.length+t.length);l.set(i),l.set(t,i.length),t=l,n.w=i.length}return mN(t,s.level==null?6:s.level,s.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+s.mem,r,a,n)},Qf=function(t,s,r){for(;r;++s)t[s]=r,r>>>=8},xN=function(t,s){var r=s.level,a=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=a<<6|(s.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,s.dictionary){var n=Xf();n.p(s.dictionary),Qf(t,2,n.d())}};function ju(t,s){s||(s={});var r=Xf();r.p(t);var a=hN(t,s,s.dictionary?6:2,4);return xN(a,s),Qf(a,a.length-4,r.d()),a}var fN=typeof TextDecoder<"u"&&new TextDecoder,gN=0;try{fN.decode(Zf,{stream:!0}),gN=1}catch{}function pN(t){if(Array.isArray(t))return t}function bN(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw n}}return o}}function ih(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=Array(s);r<s;r++)a[r]=t[r];return a}function yN(t,s){if(t){if(typeof t=="string")return ih(t,s);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ih(t,s):void 0}}function vN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lh(t,s){return pN(t)||bN(t,s)||yN(t,s)||vN()}function oh(t,s="utf8"){return new TextDecoder(s).decode(t)}const jN=new TextEncoder;function NN(t){return jN.encode(t)}const wN=1024*8,SN=(()=>{const t=new Uint8Array(4),s=new Uint32Array(t.buffer);return!((s[0]=1)&t[0])})(),pd={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class em{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(s=wN,r={}){let a=!1;typeof s=="number"?s=new ArrayBuffer(s):(a=!0,this.lastWrittenByte=s.byteLength);const n=r.offset?r.offset>>>0:0,i=s.byteLength-n;let l=n;(ArrayBuffer.isView(s)||s instanceof em)&&(s.byteLength!==s.buffer.byteLength&&(l=s.byteOffset+n),s=s.buffer),a?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=s,this.length=i,this.byteLength=i,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,i),this._mark=0,this._marks=[]}available(s=1){return this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(s=1){return this.offset+=s,this}back(s=1){return this.offset-=s,this}seek(s){return this.offset=s,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const s=this._marks.pop();if(s===void 0)throw new Error("Mark stack empty");return this.seek(s),this}rewind(){return this.offset=0,this}ensureAvailable(s=1){if(!this.available(s)){const a=(this.offset+s)*2,n=new Uint8Array(a);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s=1){return this.readArray(s,"uint8")}readArray(s,r){const a=pd[r].BYTES_PER_ELEMENT*s,n=this.byteOffset+this.offset,i=this.buffer.slice(n,n+a);if(this.littleEndian===SN&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(n,n+a));o.reverse();const c=new pd[r](o.buffer);return this.offset+=a,c.reverse(),c}const l=new pd[r](i);return this.offset+=a,l}readInt16(){const s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){const s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){const s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){const s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){const s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){const s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readBigInt64(){const s=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,s}readBigUint64(){const s=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s=1){let r="";for(let a=0;a<s;a++)r+=this.readChar();return r}readUtf8(s=1){return oh(this.readBytes(s))}decodeText(s=1,r="utf8"){return oh(this.readBytes(s),r)}writeBoolean(s){return this.writeUint8(s?255:0),this}writeInt8(s){return this.ensureAvailable(1),this._data.setInt8(this.offset++,s),this._updateLastWrittenByte(),this}writeUint8(s){return this.ensureAvailable(1),this._data.setUint8(this.offset++,s),this._updateLastWrittenByte(),this}writeByte(s){return this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(let r=0;r<s.length;r++)this._data.setUint8(this.offset++,s[r]);return this._updateLastWrittenByte(),this}writeInt16(s){return this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(s){return this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(s){return this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(s){return this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(s){return this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(s){return this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(s){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(s){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(s){return this.writeUint8(s.charCodeAt(0))}writeChars(s){for(let r=0;r<s.length;r++)this.writeUint8(s.charCodeAt(r));return this}writeUtf8(s){return this.writeBytes(NN(s))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function xi(t){let s=t.length;for(;--s>=0;)t[s]=0}const CN=3,$N=258,eg=29,kN=256,_N=kN+1+eg,tg=30,AN=512,PN=new Array((_N+2)*2);xi(PN);const LN=new Array(tg*2);xi(LN);const EN=new Array(AN);xi(EN);const TN=new Array($N-CN+1);xi(TN);const IN=new Array(eg);xi(IN);const RN=new Array(tg);xi(RN);const FN=(t,s,r,a)=>{let n=t&65535|0,i=t>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do n=n+s[a++]|0,i=i+n|0;while(--l);n%=65521,i%=65521}return n|i<<16|0};var Nu=FN;const ON=()=>{let t,s=[];for(var r=0;r<256;r++){t=r;for(var a=0;a<8;a++)t=t&1?3988292384^t>>>1:t>>>1;s[r]=t}return s},DN=new Uint32Array(ON()),MN=(t,s,r,a)=>{const n=DN,i=a+r;t^=-1;for(let l=a;l<i;l++)t=t>>>8^n[(t^s[l])&255];return t^-1};var Gr=MN,wu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},sg={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const BN=(t,s)=>Object.prototype.hasOwnProperty.call(t,s);var UN=function(t){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const r=s.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const a in r)BN(r,a)&&(t[a]=r[a])}}return t},qN=t=>{let s=0;for(let a=0,n=t.length;a<n;a++)s+=t[a].length;const r=new Uint8Array(s);for(let a=0,n=0,i=t.length;a<i;a++){let l=t[a];r.set(l,n),n+=l.length}return r},rg={assign:UN,flattenChunks:qN};let ag=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ag=!1}const pl=new Uint8Array(256);for(let t=0;t<256;t++)pl[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;pl[254]=pl[254]=1;var zN=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let s,r,a,n,i,l=t.length,o=0;for(n=0;n<l;n++)r=t.charCodeAt(n),(r&64512)===55296&&n+1<l&&(a=t.charCodeAt(n+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),n++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(s=new Uint8Array(o),i=0,n=0;i<o;n++)r=t.charCodeAt(n),(r&64512)===55296&&n+1<l&&(a=t.charCodeAt(n+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),n++)),r<128?s[i++]=r:r<2048?(s[i++]=192|r>>>6,s[i++]=128|r&63):r<65536?(s[i++]=224|r>>>12,s[i++]=128|r>>>6&63,s[i++]=128|r&63):(s[i++]=240|r>>>18,s[i++]=128|r>>>12&63,s[i++]=128|r>>>6&63,s[i++]=128|r&63);return s};const WN=(t,s)=>{if(s<65534&&t.subarray&&ag)return String.fromCharCode.apply(null,t.length===s?t:t.subarray(0,s));let r="";for(let a=0;a<s;a++)r+=String.fromCharCode(t[a]);return r};var HN=(t,s)=>{const r=s||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,s));let a,n;const i=new Array(r*2);for(n=0,a=0;a<r;){let l=t[a++];if(l<128){i[n++]=l;continue}let o=pl[l];if(o>4){i[n++]=65533,a+=o-1;continue}for(l&=o===2?31:o===3?15:7;o>1&&a<r;)l=l<<6|t[a++]&63,o--;if(o>1){i[n++]=65533;continue}l<65536?i[n++]=l:(l-=65536,i[n++]=55296|l>>10&1023,i[n++]=56320|l&1023)}return WN(i,n)},VN=(t,s)=>{s=s||t.length,s>t.length&&(s=t.length);let r=s-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?s:r+pl[t[r]]>s?r:s},Su={string2buf:zN,buf2string:HN,utf8border:VN};function GN(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var JN=GN;const yo=16209,KN=16191;var YN=function(s,r){let a,n,i,l,o,c,d,u,f,g,x,y,$,j,N,S,_,A,P,M,ne,V,L,Q;const w=s.state;a=s.next_in,L=s.input,n=a+(s.avail_in-5),i=s.next_out,Q=s.output,l=i-(r-s.avail_out),o=i+(s.avail_out-257),c=w.dmax,d=w.wsize,u=w.whave,f=w.wnext,g=w.window,x=w.hold,y=w.bits,$=w.lencode,j=w.distcode,N=(1<<w.lenbits)-1,S=(1<<w.distbits)-1;e:do{y<15&&(x+=L[a++]<<y,y+=8,x+=L[a++]<<y,y+=8),_=$[x&N];t:for(;;){if(A=_>>>24,x>>>=A,y-=A,A=_>>>16&255,A===0)Q[i++]=_&65535;else if(A&16){P=_&65535,A&=15,A&&(y<A&&(x+=L[a++]<<y,y+=8),P+=x&(1<<A)-1,x>>>=A,y-=A),y<15&&(x+=L[a++]<<y,y+=8,x+=L[a++]<<y,y+=8),_=j[x&S];s:for(;;){if(A=_>>>24,x>>>=A,y-=A,A=_>>>16&255,A&16){if(M=_&65535,A&=15,y<A&&(x+=L[a++]<<y,y+=8,y<A&&(x+=L[a++]<<y,y+=8)),M+=x&(1<<A)-1,M>c){s.msg="invalid distance too far back",w.mode=yo;break e}if(x>>>=A,y-=A,A=i-l,M>A){if(A=M-A,A>u&&w.sane){s.msg="invalid distance too far back",w.mode=yo;break e}if(ne=0,V=g,f===0){if(ne+=d-A,A<P){P-=A;do Q[i++]=g[ne++];while(--A);ne=i-M,V=Q}}else if(f<A){if(ne+=d+f-A,A-=f,A<P){P-=A;do Q[i++]=g[ne++];while(--A);if(ne=0,f<P){A=f,P-=A;do Q[i++]=g[ne++];while(--A);ne=i-M,V=Q}}}else if(ne+=f-A,A<P){P-=A;do Q[i++]=g[ne++];while(--A);ne=i-M,V=Q}for(;P>2;)Q[i++]=V[ne++],Q[i++]=V[ne++],Q[i++]=V[ne++],P-=3;P&&(Q[i++]=V[ne++],P>1&&(Q[i++]=V[ne++]))}else{ne=i-M;do Q[i++]=Q[ne++],Q[i++]=Q[ne++],Q[i++]=Q[ne++],P-=3;while(P>2);P&&(Q[i++]=Q[ne++],P>1&&(Q[i++]=Q[ne++]))}}else if((A&64)===0){_=j[(_&65535)+(x&(1<<A)-1)];continue s}else{s.msg="invalid distance code",w.mode=yo;break e}break}}else if((A&64)===0){_=$[(_&65535)+(x&(1<<A)-1)];continue t}else if(A&32){w.mode=KN;break e}else{s.msg="invalid literal/length code",w.mode=yo;break e}break}}while(a<n&&i<o);P=y>>3,a-=P,y-=P<<3,x&=(1<<y)-1,s.next_in=a,s.next_out=i,s.avail_in=a<n?5+(n-a):5-(a-n),s.avail_out=i<o?257+(o-i):257-(i-o),w.hold=x,w.bits=y};const Hn=15,ch=852,dh=592,uh=0,bd=1,mh=2,ZN=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),XN=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),QN=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ew=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),tw=(t,s,r,a,n,i,l,o)=>{const c=o.bits;let d=0,u=0,f=0,g=0,x=0,y=0,$=0,j=0,N=0,S=0,_,A,P,M,ne,V=null,L;const Q=new Uint16Array(Hn+1),w=new Uint16Array(Hn+1);let R=null,Z,I,re;for(d=0;d<=Hn;d++)Q[d]=0;for(u=0;u<a;u++)Q[s[r+u]]++;for(x=c,g=Hn;g>=1&&Q[g]===0;g--);if(x>g&&(x=g),g===0)return n[i++]=1<<24|64<<16|0,n[i++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<g&&Q[f]===0;f++);for(x<f&&(x=f),j=1,d=1;d<=Hn;d++)if(j<<=1,j-=Q[d],j<0)return-1;if(j>0&&(t===uh||g!==1))return-1;for(w[1]=0,d=1;d<Hn;d++)w[d+1]=w[d]+Q[d];for(u=0;u<a;u++)s[r+u]!==0&&(l[w[s[r+u]]++]=u);if(t===uh?(V=R=l,L=20):t===bd?(V=ZN,R=XN,L=257):(V=QN,R=ew,L=0),S=0,u=0,d=f,ne=i,y=x,$=0,P=-1,N=1<<x,M=N-1,t===bd&&N>ch||t===mh&&N>dh)return 1;for(;;){Z=d-$,l[u]+1<L?(I=0,re=l[u]):l[u]>=L?(I=R[l[u]-L],re=V[l[u]-L]):(I=96,re=0),_=1<<d-$,A=1<<y,f=A;do A-=_,n[ne+(S>>$)+A]=Z<<24|I<<16|re|0;while(A!==0);for(_=1<<d-1;S&_;)_>>=1;if(_!==0?(S&=_-1,S+=_):S=0,u++,--Q[d]===0){if(d===g)break;d=s[r+l[u]]}if(d>x&&(S&M)!==P){for($===0&&($=x),ne+=f,y=d-$,j=1<<y;y+$<g&&(j-=Q[y+$],!(j<=0));)y++,j<<=1;if(N+=1<<y,t===bd&&N>ch||t===mh&&N>dh)return 1;P=S&M,n[P]=x<<24|y<<16|ne-i|0}}return S!==0&&(n[ne+S]=d-$<<24|64<<16|0),o.bits=x,0};var el=tw;const sw=0,ng=1,ig=2,{Z_FINISH:hh,Z_BLOCK:rw,Z_TREES:vo,Z_OK:wn,Z_STREAM_END:aw,Z_NEED_DICT:nw,Z_STREAM_ERROR:wr,Z_DATA_ERROR:lg,Z_MEM_ERROR:og,Z_BUF_ERROR:iw,Z_DEFLATED:xh}=sg,vc=16180,fh=16181,gh=16182,ph=16183,bh=16184,yh=16185,vh=16186,jh=16187,Nh=16188,wh=16189,rc=16190,ma=16191,yd=16192,Sh=16193,vd=16194,Ch=16195,$h=16196,kh=16197,_h=16198,jo=16199,No=16200,Ah=16201,Ph=16202,Lh=16203,Eh=16204,Th=16205,jd=16206,Ih=16207,Rh=16208,es=16209,cg=16210,dg=16211,lw=852,ow=592,cw=15,dw=cw,Fh=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function uw(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const $n=t=>{if(!t)return 1;const s=t.state;return!s||s.strm!==t||s.mode<vc||s.mode>dg?1:0},ug=t=>{if($n(t))return wr;const s=t.state;return t.total_in=t.total_out=s.total=0,t.msg="",s.wrap&&(t.adler=s.wrap&1),s.mode=vc,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(lw),s.distcode=s.distdyn=new Int32Array(ow),s.sane=1,s.back=-1,wn},mg=t=>{if($n(t))return wr;const s=t.state;return s.wsize=0,s.whave=0,s.wnext=0,ug(t)},hg=(t,s)=>{let r;if($n(t))return wr;const a=t.state;return s<0?(r=0,s=-s):(r=(s>>4)+5,s<48&&(s&=15)),s&&(s<8||s>15)?wr:(a.window!==null&&a.wbits!==s&&(a.window=null),a.wrap=r,a.wbits=s,mg(t))},xg=(t,s)=>{if(!t)return wr;const r=new uw;t.state=r,r.strm=t,r.window=null,r.mode=vc;const a=hg(t,s);return a!==wn&&(t.state=null),a},mw=t=>xg(t,dw);let Oh=!0,Nd,wd;const hw=t=>{if(Oh){Nd=new Int32Array(512),wd=new Int32Array(32);let s=0;for(;s<144;)t.lens[s++]=8;for(;s<256;)t.lens[s++]=9;for(;s<280;)t.lens[s++]=7;for(;s<288;)t.lens[s++]=8;for(el(ng,t.lens,0,288,Nd,0,t.work,{bits:9}),s=0;s<32;)t.lens[s++]=5;el(ig,t.lens,0,32,wd,0,t.work,{bits:5}),Oh=!1}t.lencode=Nd,t.lenbits=9,t.distcode=wd,t.distbits=5},fg=(t,s,r,a)=>{let n;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(s.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(n=i.wsize-i.wnext,n>a&&(n=a),i.window.set(s.subarray(r-a,r-a+n),i.wnext),a-=n,a?(i.window.set(s.subarray(r-a,r),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0},xw=(t,s)=>{let r,a,n,i,l,o,c,d,u,f,g,x,y,$,j=0,N,S,_,A,P,M,ne,V;const L=new Uint8Array(4);let Q,w;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($n(t)||!t.output||!t.input&&t.avail_in!==0)return wr;r=t.state,r.mode===ma&&(r.mode=yd),l=t.next_out,n=t.output,c=t.avail_out,i=t.next_in,a=t.input,o=t.avail_in,d=r.hold,u=r.bits,f=o,g=c,V=wn;e:for(;;)switch(r.mode){case vc:if(r.wrap===0){r.mode=yd;break}for(;u<16;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,L[0]=d&255,L[1]=d>>>8&255,r.check=Gr(r.check,L,2,0),d=0,u=0,r.mode=fh;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){t.msg="incorrect header check",r.mode=es;break}if((d&15)!==xh){t.msg="unknown compression method",r.mode=es;break}if(d>>>=4,u-=4,ne=(d&15)+8,r.wbits===0&&(r.wbits=ne),ne>15||ne>r.wbits){t.msg="invalid window size",r.mode=es;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=d&512?wh:ma,d=0,u=0;break;case fh:for(;u<16;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if(r.flags=d,(r.flags&255)!==xh){t.msg="unknown compression method",r.mode=es;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=es;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(L[0]=d&255,L[1]=d>>>8&255,r.check=Gr(r.check,L,2,0)),d=0,u=0,r.mode=gh;case gh:for(;u<32;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(L[0]=d&255,L[1]=d>>>8&255,L[2]=d>>>16&255,L[3]=d>>>24&255,r.check=Gr(r.check,L,4,0)),d=0,u=0,r.mode=ph;case ph:for(;u<16;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(L[0]=d&255,L[1]=d>>>8&255,r.check=Gr(r.check,L,2,0)),d=0,u=0,r.mode=bh;case bh:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(L[0]=d&255,L[1]=d>>>8&255,r.check=Gr(r.check,L,2,0)),d=0,u=0}else r.head&&(r.head.extra=null);r.mode=yh;case yh:if(r.flags&1024&&(x=r.length,x>o&&(x=o),x&&(r.head&&(ne=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(a.subarray(i,i+x),ne)),r.flags&512&&r.wrap&4&&(r.check=Gr(r.check,a,x,i)),o-=x,i+=x,r.length-=x),r.length))break e;r.length=0,r.mode=vh;case vh:if(r.flags&2048){if(o===0)break e;x=0;do ne=a[i+x++],r.head&&ne&&r.length<65536&&(r.head.name+=String.fromCharCode(ne));while(ne&&x<o);if(r.flags&512&&r.wrap&4&&(r.check=Gr(r.check,a,x,i)),o-=x,i+=x,ne)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=jh;case jh:if(r.flags&4096){if(o===0)break e;x=0;do ne=a[i+x++],r.head&&ne&&r.length<65536&&(r.head.comment+=String.fromCharCode(ne));while(ne&&x<o);if(r.flags&512&&r.wrap&4&&(r.check=Gr(r.check,a,x,i)),o-=x,i+=x,ne)break e}else r.head&&(r.head.comment=null);r.mode=Nh;case Nh:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if(r.wrap&4&&d!==(r.check&65535)){t.msg="header crc mismatch",r.mode=es;break}d=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=ma;break;case wh:for(;u<32;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}t.adler=r.check=Fh(d),d=0,u=0,r.mode=rc;case rc:if(r.havedict===0)return t.next_out=l,t.avail_out=c,t.next_in=i,t.avail_in=o,r.hold=d,r.bits=u,nw;t.adler=r.check=1,r.mode=ma;case ma:if(s===rw||s===vo)break e;case yd:if(r.last){d>>>=u&7,u-=u&7,r.mode=jd;break}for(;u<3;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}switch(r.last=d&1,d>>>=1,u-=1,d&3){case 0:r.mode=Sh;break;case 1:if(hw(r),r.mode=jo,s===vo){d>>>=2,u-=2;break e}break;case 2:r.mode=$h;break;case 3:t.msg="invalid block type",r.mode=es}d>>>=2,u-=2;break;case Sh:for(d>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){t.msg="invalid stored block lengths",r.mode=es;break}if(r.length=d&65535,d=0,u=0,r.mode=vd,s===vo)break e;case vd:r.mode=Ch;case Ch:if(x=r.length,x){if(x>o&&(x=o),x>c&&(x=c),x===0)break e;n.set(a.subarray(i,i+x),l),o-=x,i+=x,c-=x,l+=x,r.length-=x;break}r.mode=ma;break;case $h:for(;u<14;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if(r.nlen=(d&31)+257,d>>>=5,u-=5,r.ndist=(d&31)+1,d>>>=5,u-=5,r.ncode=(d&15)+4,d>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=es;break}r.have=0,r.mode=kh;case kh:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}r.lens[R[r.have++]]=d&7,d>>>=3,u-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Q={bits:r.lenbits},V=el(sw,r.lens,0,19,r.lencode,0,r.work,Q),r.lenbits=Q.bits,V){t.msg="invalid code lengths set",r.mode=es;break}r.have=0,r.mode=_h;case _h:for(;r.have<r.nlen+r.ndist;){for(;j=r.lencode[d&(1<<r.lenbits)-1],N=j>>>24,S=j>>>16&255,_=j&65535,!(N<=u);){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if(_<16)d>>>=N,u-=N,r.lens[r.have++]=_;else{if(_===16){for(w=N+2;u<w;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if(d>>>=N,u-=N,r.have===0){t.msg="invalid bit length repeat",r.mode=es;break}ne=r.lens[r.have-1],x=3+(d&3),d>>>=2,u-=2}else if(_===17){for(w=N+3;u<w;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}d>>>=N,u-=N,ne=0,x=3+(d&7),d>>>=3,u-=3}else{for(w=N+7;u<w;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}d>>>=N,u-=N,ne=0,x=11+(d&127),d>>>=7,u-=7}if(r.have+x>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=es;break}for(;x--;)r.lens[r.have++]=ne}}if(r.mode===es)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=es;break}if(r.lenbits=9,Q={bits:r.lenbits},V=el(ng,r.lens,0,r.nlen,r.lencode,0,r.work,Q),r.lenbits=Q.bits,V){t.msg="invalid literal/lengths set",r.mode=es;break}if(r.distbits=6,r.distcode=r.distdyn,Q={bits:r.distbits},V=el(ig,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Q),r.distbits=Q.bits,V){t.msg="invalid distances set",r.mode=es;break}if(r.mode=jo,s===vo)break e;case jo:r.mode=No;case No:if(o>=6&&c>=258){t.next_out=l,t.avail_out=c,t.next_in=i,t.avail_in=o,r.hold=d,r.bits=u,YN(t,g),l=t.next_out,n=t.output,c=t.avail_out,i=t.next_in,a=t.input,o=t.avail_in,d=r.hold,u=r.bits,r.mode===ma&&(r.back=-1);break}for(r.back=0;j=r.lencode[d&(1<<r.lenbits)-1],N=j>>>24,S=j>>>16&255,_=j&65535,!(N<=u);){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if(S&&(S&240)===0){for(A=N,P=S,M=_;j=r.lencode[M+((d&(1<<A+P)-1)>>A)],N=j>>>24,S=j>>>16&255,_=j&65535,!(A+N<=u);){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}d>>>=A,u-=A,r.back+=A}if(d>>>=N,u-=N,r.back+=N,r.length=_,S===0){r.mode=Th;break}if(S&32){r.back=-1,r.mode=ma;break}if(S&64){t.msg="invalid literal/length code",r.mode=es;break}r.extra=S&15,r.mode=Ah;case Ah:if(r.extra){for(w=r.extra;u<w;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Ph;case Ph:for(;j=r.distcode[d&(1<<r.distbits)-1],N=j>>>24,S=j>>>16&255,_=j&65535,!(N<=u);){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if((S&240)===0){for(A=N,P=S,M=_;j=r.distcode[M+((d&(1<<A+P)-1)>>A)],N=j>>>24,S=j>>>16&255,_=j&65535,!(A+N<=u);){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}d>>>=A,u-=A,r.back+=A}if(d>>>=N,u-=N,r.back+=N,S&64){t.msg="invalid distance code",r.mode=es;break}r.offset=_,r.extra=S&15,r.mode=Lh;case Lh:if(r.extra){for(w=r.extra;u<w;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=es;break}r.mode=Eh;case Eh:if(c===0)break e;if(x=g-c,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=es;break}x>r.wnext?(x-=r.wnext,y=r.wsize-x):y=r.wnext-x,x>r.length&&(x=r.length),$=r.window}else $=n,y=l-r.offset,x=r.length;x>c&&(x=c),c-=x,r.length-=x;do n[l++]=$[y++];while(--x);r.length===0&&(r.mode=No);break;case Th:if(c===0)break e;n[l++]=r.length,c--,r.mode=No;break;case jd:if(r.wrap){for(;u<32;){if(o===0)break e;o--,d|=a[i++]<<u,u+=8}if(g-=c,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Gr(r.check,n,g,l-g):Nu(r.check,n,g,l-g)),g=c,r.wrap&4&&(r.flags?d:Fh(d))!==r.check){t.msg="incorrect data check",r.mode=es;break}d=0,u=0}r.mode=Ih;case Ih:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,d+=a[i++]<<u,u+=8}if(r.wrap&4&&d!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=es;break}d=0,u=0}r.mode=Rh;case Rh:V=aw;break e;case es:V=lg;break e;case cg:return og;case dg:default:return wr}return t.next_out=l,t.avail_out=c,t.next_in=i,t.avail_in=o,r.hold=d,r.bits=u,(r.wsize||g!==t.avail_out&&r.mode<es&&(r.mode<jd||s!==hh))&&fg(t,t.output,t.next_out,g-t.avail_out),f-=t.avail_in,g-=t.avail_out,t.total_in+=f,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Gr(r.check,n,g,t.next_out-g):Nu(r.check,n,g,t.next_out-g)),t.data_type=r.bits+(r.last?64:0)+(r.mode===ma?128:0)+(r.mode===jo||r.mode===vd?256:0),(f===0&&g===0||s===hh)&&V===wn&&(V=iw),V},fw=t=>{if($n(t))return wr;let s=t.state;return s.window&&(s.window=null),t.state=null,wn},gw=(t,s)=>{if($n(t))return wr;const r=t.state;return(r.wrap&2)===0?wr:(r.head=s,s.done=!1,wn)},pw=(t,s)=>{const r=s.length;let a,n,i;return $n(t)||(a=t.state,a.wrap!==0&&a.mode!==rc)?wr:a.mode===rc&&(n=1,n=Nu(n,s,r,0),n!==a.check)?lg:(i=fg(t,s,r,r),i?(a.mode=cg,og):(a.havedict=1,wn))};var bw=mg,yw=hg,vw=ug,jw=mw,Nw=xg,ww=xw,Sw=fw,Cw=gw,$w=pw,kw="pako inflate (from Nodeca project)",xa={inflateReset:bw,inflateReset2:yw,inflateResetKeep:vw,inflateInit:jw,inflateInit2:Nw,inflate:ww,inflateEnd:Sw,inflateGetHeader:Cw,inflateSetDictionary:$w,inflateInfo:kw};function _w(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Aw=_w;const gg=Object.prototype.toString,{Z_NO_FLUSH:Pw,Z_FINISH:Lw,Z_OK:bl,Z_STREAM_END:Sd,Z_NEED_DICT:Cd,Z_STREAM_ERROR:Ew,Z_DATA_ERROR:Dh,Z_MEM_ERROR:Tw}=sg;function Cl(t){this.options=rg.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(t&&t.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15)===0&&(s.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new JN,this.strm.avail_out=0;let r=xa.inflateInit2(this.strm,s.windowBits);if(r!==bl)throw new Error(wu[r]);if(this.header=new Aw,xa.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=Su.string2buf(s.dictionary):gg.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(r=xa.inflateSetDictionary(this.strm,s.dictionary),r!==bl)))throw new Error(wu[r])}Cl.prototype.push=function(t,s){const r=this.strm,a=this.options.chunkSize,n=this.options.dictionary;let i,l,o;if(this.ended)return!1;for(s===~~s?l=s:l=s===!0?Lw:Pw,gg.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),i=xa.inflate(r,l),i===Cd&&n&&(i=xa.inflateSetDictionary(r,n),i===bl?i=xa.inflate(r,l):i===Dh&&(i=Cd));r.avail_in>0&&i===Sd&&r.state.wrap>0&&t[r.next_in]!==0;)xa.inflateReset(r),i=xa.inflate(r,l);switch(i){case Ew:case Dh:case Cd:case Tw:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===Sd))if(this.options.to==="string"){let c=Su.utf8border(r.output,r.next_out),d=r.next_out-c,u=Su.buf2string(r.output,c);r.next_out=d,r.avail_out=a-d,d&&r.output.set(r.output.subarray(c,c+d),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===bl&&o===0)){if(i===Sd)return i=xa.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Cl.prototype.onData=function(t){this.chunks.push(t)};Cl.prototype.onEnd=function(t){t===bl&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rg.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Iw(t,s){const r=new Cl(s);if(r.push(t),r.err)throw r.msg||wu[r.err];return r.result}var Rw=Cl,Fw=Iw,Ow={Inflate:Rw,inflate:Fw};const{Inflate:Dw,inflate:Mw}=Ow;var Mh=Dw,Bw=Mw;const pg=[];for(let t=0;t<256;t++){let s=t;for(let r=0;r<8;r++)s&1?s=3988292384^s>>>1:s=s>>>1;pg[t]=s}const Bh=4294967295;function Uw(t,s,r){let a=t;for(let n=0;n<r;n++)a=pg[(a^s[n])&255]^a>>>8;return a}function qw(t,s){return(Uw(Bh,t,s)^Bh)>>>0}function Uh(t,s,r){const a=t.readUint32(),n=qw(new Uint8Array(t.buffer,t.byteOffset+t.offset-s-4,s),s);if(n!==a)throw new Error(`CRC mismatch for chunk ${r}. Expected ${a}, found ${n}`)}function bg(t,s,r){for(let a=0;a<r;a++)s[a]=t[a]}function yg(t,s,r,a){let n=0;for(;n<a;n++)s[n]=t[n];for(;n<r;n++)s[n]=t[n]+s[n-a]&255}function vg(t,s,r,a){let n=0;if(r.length===0)for(;n<a;n++)s[n]=t[n];else for(;n<a;n++)s[n]=t[n]+r[n]&255}function jg(t,s,r,a,n){let i=0;if(r.length===0){for(;i<n;i++)s[i]=t[i];for(;i<a;i++)s[i]=t[i]+(s[i-n]>>1)&255}else{for(;i<n;i++)s[i]=t[i]+(r[i]>>1)&255;for(;i<a;i++)s[i]=t[i]+(s[i-n]+r[i]>>1)&255}}function Ng(t,s,r,a,n){let i=0;if(r.length===0){for(;i<n;i++)s[i]=t[i];for(;i<a;i++)s[i]=t[i]+s[i-n]&255}else{for(;i<n;i++)s[i]=t[i]+r[i]&255;for(;i<a;i++)s[i]=t[i]+zw(s[i-n],r[i],r[i-n])&255}}function zw(t,s,r){const a=t+s-r,n=Math.abs(a-t),i=Math.abs(a-s),l=Math.abs(a-r);return n<=i&&n<=l?t:i<=l?s:r}function Ww(t,s,r,a,n,i){switch(t){case 0:bg(s,r,n);break;case 1:yg(s,r,n,i);break;case 2:vg(s,r,a,n);break;case 3:jg(s,r,a,n,i);break;case 4:Ng(s,r,a,n,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Hw=new Uint16Array([255]),Vw=new Uint8Array(Hw.buffer),Gw=Vw[0]===255;function Jw(t){const{data:s,width:r,height:a,channels:n,depth:i}=t,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*n,c=new Uint8Array(a*r*o);let d=0;for(let u=0;u<7;u++){const f=l[u],g=Math.ceil((r-f.x)/f.xStep),x=Math.ceil((a-f.y)/f.yStep);if(g<=0||x<=0)continue;const y=g*o,$=new Uint8Array(y);for(let j=0;j<x;j++){const N=s[d++],S=s.subarray(d,d+y);d+=y;const _=new Uint8Array(y);Ww(N,S,_,$,y,o),$.set(_);for(let A=0;A<g;A++){const P=f.x+A*f.xStep,M=f.y+j*f.yStep;if(!(P>=r||M>=a))for(let ne=0;ne<o;ne++)c[(M*r+P)*o+ne]=_[A*o+ne]}}}if(i===16){const u=new Uint16Array(c.buffer);if(Gw)for(let f=0;f<u.length;f++)u[f]=Kw(u[f]);return u}else return c}function Kw(t){return(t&255)<<8|t>>8&255}const Yw=new Uint16Array([255]),Zw=new Uint8Array(Yw.buffer),Xw=Zw[0]===255,Qw=new Uint8Array(0);function qh(t){const{data:s,width:r,height:a,channels:n,depth:i}=t,l=Math.ceil(i/8)*n,o=Math.ceil(i/8*n*r),c=new Uint8Array(a*o);let d=Qw,u=0,f,g;for(let x=0;x<a;x++){switch(f=s.subarray(u+1,u+1+o),g=c.subarray(x*o,(x+1)*o),s[u]){case 0:bg(f,g,o);break;case 1:yg(f,g,o,l);break;case 2:vg(f,g,d,o);break;case 3:jg(f,g,d,o,l);break;case 4:Ng(f,g,d,o,l);break;default:throw new Error(`Unsupported filter: ${s[u]}`)}d=g,u+=o+1}if(i===16){const x=new Uint16Array(c.buffer);if(Xw)for(let y=0;y<x.length;y++)x[y]=e3(x[y]);return x}else return c}function e3(t){return(t&255)<<8|t>>8&255}const Bo=Uint8Array.of(137,80,78,71,13,10,26,10);function zh(t){if(!t3(t.readBytes(Bo.length)))throw new Error("wrong PNG signature")}function t3(t){if(t.length<Bo.length)return!1;for(let s=0;s<Bo.length;s++)if(t[s]!==Bo[s])return!1;return!0}const s3="tEXt",r3=0,wg=new TextDecoder("latin1");function a3(t){if(i3(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const n3=/^[\u0000-\u00FF]*$/;function i3(t){if(!n3.test(t))throw new Error("invalid latin1 text")}function l3(t,s,r){const a=Sg(s);t[a]=o3(s,r-a.length-1)}function Sg(t){for(t.mark();t.readByte()!==r3;);const s=t.offset;t.reset();const r=wg.decode(t.readBytes(s-t.offset-1));return t.skip(1),a3(r),r}function o3(t,s){return wg.decode(t.readBytes(s))}const ur={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},$d={UNKNOWN:-1,DEFLATE:0},Wh={UNKNOWN:-1,ADAPTIVE:0},kd={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},wo={NONE:0,BACKGROUND:1,PREVIOUS:2},_d={SOURCE:0,OVER:1};class c3 extends em{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(s,r={}){super(s);const{checkCrc:a=!1}=r;this._checkCrc=a,this._inflator=new Mh,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=$d.UNKNOWN,this._filterMethod=Wh.UNKNOWN,this._interlaceMethod=kd.UNKNOWN,this._colorType=ur.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(zh(this);!this._end;){const s=this.readUint32(),r=this.readChars(4);this.decodeChunk(s,r)}return this.decodeImage(),this._png}decodeApng(){for(zh(this);!this._end;){const s=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(s,r)}return this.decodeApngImage(),this._apng}decodeChunk(s,r){const a=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(s);break;case"IDAT":this.decodeIDAT(s);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(s);break;case"iCCP":this.decodeiCCP(s);break;case s3:l3(this._png.text,this,s);break;case"pHYs":this.decodepHYs();break;default:this.skip(s);break}if(this.offset-a!==s)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Uh(this,s+4,r):this.skip(4)}decodeApngChunk(s,r){const a=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(s);break;default:this.decodeChunk(s,r),this.offset=a+s;break}if(this.offset-a!==s)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Uh(this,s+4,r):this.skip(4)}decodeIHDR(){const s=this._png;s.width=this.readUint32(),s.height=this.readUint32(),s.depth=d3(this.readUint8());const r=this.readUint8();this._colorType=r;let a;switch(r){case ur.GREYSCALE:a=1;break;case ur.TRUECOLOUR:a=3;break;case ur.INDEXED_COLOUR:a=1;break;case ur.GREYSCALE_ALPHA:a=2;break;case ur.TRUECOLOUR_ALPHA:a=4;break;case ur.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==$d.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const s={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(s)}decodePLTE(s){if(s%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${s}`);const r=s/3;this._hasPalette=!0;const a=[];this._palette=a;for(let n=0;n<r;n++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(s){this._writingDataChunks=!0;const r=s,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodeFDAT(s){this._writingDataChunks=!0;let r=s,a=this.offset+this.byteOffset;if(a+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,a,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodetRNS(s){switch(this._colorType){case ur.GREYSCALE:case ur.TRUECOLOUR:{if(s%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${s}`);if(s/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${s/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(s/2);for(let r=0;r<s/2;r++)this._transparency[r]=this.readUint16();break}case ur.INDEXED_COLOUR:{if(s>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${s} vs ${this._palette.length})`);let r=0;for(;r<s;r++){const a=this.readByte();this._palette[r].push(a)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case ur.UNKNOWN:case ur.GREYSCALE_ALPHA:case ur.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(s){const r=Sg(this),a=this.readUint8();if(a!==$d.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const n=this.readBytes(s-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Bw(n)}}decodepHYs(){const s=this.readUint32(),r=this.readUint32(),a=this.readByte();this._png.resolution={x:s,y:r,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let s=0;s<this._numberOfFrames;s++){const r={sequenceNumber:this._frames[s].sequenceNumber,delayNumber:this._frames[s].delayNumber,delayDenominator:this._frames[s].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(s);if(a){if(a.data=qh({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),s===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)r.data=a.data;else{const n=this._apng.frames.at(s-1);this.disposeFrame(a,n,r),this.addFrameDataToCanvas(r,a)}this._apng.frames.push(r)}}return this._apng}disposeFrame(s,r,a){switch(s.disposeOp){case wo.NONE:break;case wo.BACKGROUND:for(let n=0;n<this._png.height;n++)for(let i=0;i<this._png.width;i++){const l=(n*s.width+i)*this._png.channels;for(let o=0;o<this._png.channels;o++)a.data[l+o]=0}break;case wo.PREVIOUS:a.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(s,r){const a=1<<this._png.depth,n=(i,l)=>{const o=((i+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,c=(i*r.width+l)*this._png.channels;return{index:o,frameIndex:c}};switch(r.blendOp){case _d.SOURCE:for(let i=0;i<r.height;i++)for(let l=0;l<r.width;l++){const{index:o,frameIndex:c}=n(i,l);for(let d=0;d<this._png.channels;d++)s.data[o+d]=r.data[c+d]}break;case _d.OVER:for(let i=0;i<r.height;i++)for(let l=0;l<r.width;l++){const{index:o,frameIndex:c}=n(i,l);for(let d=0;d<this._png.channels;d++){const u=r.data[c+this._png.channels-1]/a,f=d%(this._png.channels-1)===0?1:r.data[c+d],g=Math.floor(u*f+(1-u)*s.data[o+d]);s.data[o+d]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const s=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Wh.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===kd.NO_INTERLACE)this._png.data=qh({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===kd.ADAM7)this._png.data=Jw({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const s=this._inflator.result,r=this._frames.at(-1);r?r.data=s:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:wo.NONE,blendOp:_d.SOURCE,data:s}),this._inflator=new Mh,this._writingDataChunks=!1}}function d3(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var Hh;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(Hh||(Hh={}));function u3(t,s){return new c3(t,s).decode()}var pt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Ad(){pt.console&&typeof pt.console.log=="function"&&pt.console.log.apply(pt.console,arguments)}var Ht={log:Ad,warn:function(t){pt.console&&(typeof pt.console.warn=="function"?pt.console.warn.apply(pt.console,arguments):Ad.call(null,arguments))},error:function(t){pt.console&&(typeof pt.console.error=="function"?pt.console.error.apply(pt.console,arguments):Ad(t))}};function Pd(t,s,r){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){xn(a.response,s,r)},a.onerror=function(){Ht.error("could not download file")},a.send()}function Vh(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function So(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var xn=pt.saveAs||((typeof window>"u"?"undefined":Ut(window))!=="object"||window!==pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,s,r){var a=pt.URL||pt.webkitURL,n=document.createElement("a");s=s||t.name||"download",n.download=s,n.rel="noopener",typeof t=="string"?(n.href=t,n.origin!==location.origin?Vh(n.href)?Pd(t,s,r):So(n,n.target="_blank"):So(n)):(n.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){So(n)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,r){if(s=s||t.name||"download",typeof t=="string")if(Vh(t))Pd(t,s,r);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){So(a)})}else navigator.msSaveOrOpenBlob((function(n,i){return i===void 0?i={autoBom:!1}:Ut(i)!=="object"&&(Ht.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n})(t,r),s)}:function(t,s,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof t=="string")return Pd(t,s,r);var n=t.type==="application/octet-stream",i=/constructor/i.test(pt.HTMLElement)||pt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||n&&i)&&(typeof FileReader>"u"?"undefined":Ut(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=l?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},o.readAsDataURL(t)}else{var c=pt.URL||pt.webkitURL,d=c.createObjectURL(t);a?a.location=d:location.href=d,a=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Cg(t){var s;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],a=0;a<r.length;a++){var n=r[a].re,i=r[a].process,l=n.exec(t);l&&(s=i(l),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}var Uo=pt.atob.bind(pt),Gh=pt.btoa.bind(pt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ld(t,s){var r=t[0],a=t[1],n=t[2],i=t[3];r=Fs(r,a,n,i,s[0],7,-680876936),i=Fs(i,r,a,n,s[1],12,-389564586),n=Fs(n,i,r,a,s[2],17,606105819),a=Fs(a,n,i,r,s[3],22,-1044525330),r=Fs(r,a,n,i,s[4],7,-176418897),i=Fs(i,r,a,n,s[5],12,1200080426),n=Fs(n,i,r,a,s[6],17,-1473231341),a=Fs(a,n,i,r,s[7],22,-45705983),r=Fs(r,a,n,i,s[8],7,1770035416),i=Fs(i,r,a,n,s[9],12,-1958414417),n=Fs(n,i,r,a,s[10],17,-42063),a=Fs(a,n,i,r,s[11],22,-1990404162),r=Fs(r,a,n,i,s[12],7,1804603682),i=Fs(i,r,a,n,s[13],12,-40341101),n=Fs(n,i,r,a,s[14],17,-1502002290),r=Os(r,a=Fs(a,n,i,r,s[15],22,1236535329),n,i,s[1],5,-165796510),i=Os(i,r,a,n,s[6],9,-1069501632),n=Os(n,i,r,a,s[11],14,643717713),a=Os(a,n,i,r,s[0],20,-373897302),r=Os(r,a,n,i,s[5],5,-701558691),i=Os(i,r,a,n,s[10],9,38016083),n=Os(n,i,r,a,s[15],14,-660478335),a=Os(a,n,i,r,s[4],20,-405537848),r=Os(r,a,n,i,s[9],5,568446438),i=Os(i,r,a,n,s[14],9,-1019803690),n=Os(n,i,r,a,s[3],14,-187363961),a=Os(a,n,i,r,s[8],20,1163531501),r=Os(r,a,n,i,s[13],5,-1444681467),i=Os(i,r,a,n,s[2],9,-51403784),n=Os(n,i,r,a,s[7],14,1735328473),r=Ds(r,a=Os(a,n,i,r,s[12],20,-1926607734),n,i,s[5],4,-378558),i=Ds(i,r,a,n,s[8],11,-2022574463),n=Ds(n,i,r,a,s[11],16,1839030562),a=Ds(a,n,i,r,s[14],23,-35309556),r=Ds(r,a,n,i,s[1],4,-1530992060),i=Ds(i,r,a,n,s[4],11,1272893353),n=Ds(n,i,r,a,s[7],16,-155497632),a=Ds(a,n,i,r,s[10],23,-1094730640),r=Ds(r,a,n,i,s[13],4,681279174),i=Ds(i,r,a,n,s[0],11,-358537222),n=Ds(n,i,r,a,s[3],16,-722521979),a=Ds(a,n,i,r,s[6],23,76029189),r=Ds(r,a,n,i,s[9],4,-640364487),i=Ds(i,r,a,n,s[12],11,-421815835),n=Ds(n,i,r,a,s[15],16,530742520),r=Ms(r,a=Ds(a,n,i,r,s[2],23,-995338651),n,i,s[0],6,-198630844),i=Ms(i,r,a,n,s[7],10,1126891415),n=Ms(n,i,r,a,s[14],15,-1416354905),a=Ms(a,n,i,r,s[5],21,-57434055),r=Ms(r,a,n,i,s[12],6,1700485571),i=Ms(i,r,a,n,s[3],10,-1894986606),n=Ms(n,i,r,a,s[10],15,-1051523),a=Ms(a,n,i,r,s[1],21,-2054922799),r=Ms(r,a,n,i,s[8],6,1873313359),i=Ms(i,r,a,n,s[15],10,-30611744),n=Ms(n,i,r,a,s[6],15,-1560198380),a=Ms(a,n,i,r,s[13],21,1309151649),r=Ms(r,a,n,i,s[4],6,-145523070),i=Ms(i,r,a,n,s[11],10,-1120210379),n=Ms(n,i,r,a,s[2],15,718787259),a=Ms(a,n,i,r,s[9],21,-343485551),t[0]=Oa(r,t[0]),t[1]=Oa(a,t[1]),t[2]=Oa(n,t[2]),t[3]=Oa(i,t[3])}function jc(t,s,r,a,n,i){return s=Oa(Oa(s,t),Oa(a,i)),Oa(s<<n|s>>>32-n,r)}function Fs(t,s,r,a,n,i,l){return jc(s&r|~s&a,t,s,n,i,l)}function Os(t,s,r,a,n,i,l){return jc(s&a|r&~a,t,s,n,i,l)}function Ds(t,s,r,a,n,i,l){return jc(s^r^a,t,s,n,i,l)}function Ms(t,s,r,a,n,i,l){return jc(r^(s|~a),t,s,n,i,l)}function $g(t){var s,r=t.length,a=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=t.length;s+=64)Ld(a,m3(t.substring(s-64,s)));t=t.substring(s-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)n[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),s>55)for(Ld(a,n),s=0;s<16;s++)n[s]=0;return n[14]=8*r,Ld(a,n),a}function m3(t){var s,r=[];for(s=0;s<64;s+=4)r[s>>2]=t.charCodeAt(s)+(t.charCodeAt(s+1)<<8)+(t.charCodeAt(s+2)<<16)+(t.charCodeAt(s+3)<<24);return r}var Jh="0123456789abcdef".split("");function h3(t){for(var s="",r=0;r<4;r++)s+=Jh[t>>8*r+4&15]+Jh[t>>8*r&15];return s}function x3(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Cu(t){return $g(t).map(x3).join("")}var f3=(function(t){for(var s=0;s<t.length;s++)t[s]=h3(t[s]);return t.join("")})($g("hello"))!="5d41402abc4b2a76b9719d911017c592";function Oa(t,s){if(f3){var r=(65535&t)+(65535&s);return(t>>16)+(s>>16)+(r>>16)<<16|65535&r}return t+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $u(t,s){var r,a,n,i;if(t!==r){for(var l=(n=t,i=1+(256/t.length|0),new Array(i+1).join(n)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var u=o[c];d=(d+u+l.charCodeAt(c))%256,o[c]=o[d],o[d]=u}r=t,a=o}else o=a;var f=s.length,g=0,x=0,y="";for(c=0;c<f;c++)x=(x+(u=o[g=(g+1)%256]))%256,o[g]=o[x],o[x]=u,l=o[(o[g]+o[x])%256],y+=String.fromCharCode(s.charCodeAt(c)^l);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Kh={print:4,modify:8,copy:16,"annot-forms":32};function Yn(t,s,r,a){this.v=1,this.r=2;var n=192;t.forEach(function(o){if(Kh.perm!==void 0)throw new Error("Invalid permission: "+o);n+=Kh[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(s+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^n)),this.encryptionKey=Cu(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=$u(this.encryptionKey,this.padding)}function Zn(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var s="",r=t.length,a=0;a<r;a++){var n=t.charCodeAt(a);s+=n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?"#"+("0"+n.toString(16)).slice(-2):t[a]}return s}function Yh(t){if(Ut(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(r,a,n){if(n=n||!1,typeof r!="string"||typeof a!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(r)||(s[r]={});var i=Math.random().toString(35);return s[r][i]=[a,!!n],i},this.unsubscribe=function(r){for(var a in s)if(s[a][r])return delete s[a][r],Object.keys(s[a]).length===0&&delete s[a],!0;return!1},this.publish=function(r){if(s.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var i in s[r]){var l=s[r][i];try{l[0].apply(t,a)}catch(o){pt.console&&Ht.error("jsPDF PubSub Error",o.message,o)}l[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function ac(t){if(!(this instanceof ac))return new ac(t);var s="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&s.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function kg(t,s){this.gState=t,this.matrix=s,this.id="",this.objectNumber=-1}function gn(t,s,r,a,n){if(!(this instanceof gn))return new gn(t,s,r,a,n);this.type=t==="axial"?2:3,this.coords=s,this.colors=r,kg.call(this,a,n)}function ei(t,s,r,a,n){if(!(this instanceof ei))return new ei(t,s,r,a,n);this.boundingBox=t,this.xStep=s,this.yStep=r,this.stream="",this.cloneIndex=0,kg.call(this,a,n)}function ut(t){var s,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],n=arguments[2],i=arguments[3],l=[],o=1,c=16,d="S",u=null;Ut(t=t||{})==="object"&&(r=t.orientation,a=t.unit||a,n=t.format||n,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(s=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),d=t.defaultPathOperation||"S"),l=t.filters||(i===!0?["FlateEncode"]:l),a=a||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,g={},x={internal:{},__private__:{}};x.__private__.PubSub=Yh;var y="1.3",$=x.__private__.getPdfVersion=function(){return y};x.__private__.setPdfVersion=function(p){y=p};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return j};var N=x.__private__.getPageFormat=function(p){return j[p]};n=n||"a4";var S="compat",_="advanced",A=S;function P(){this.saveGraphicsState(),K(new tt(Xe,0,0,-Xe,0,tn()*Xe).toString()+" cm"),this.setFontSize(this.getFontSize()/Xe),d="n",A=_}function M(){this.restoreGraphicsState(),d="S",A=S}var ne=x.__private__.combineFontStyleAndFontWeight=function(p,O){if(p=="bold"&&O=="normal"||p=="bold"&&O==400||p=="normal"&&O=="italic"||p=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(p=O==400||O==="normal"?p==="italic"?"italic":"normal":O!=700&&O!=="bold"||p!=="normal"?(O==700?"bold":O)+""+p:"bold"),p};x.advancedAPI=function(p){var O=A===S;return O&&P.call(this),typeof p!="function"||(p(this),O&&M.call(this)),this},x.compatAPI=function(p){var O=A===_;return O&&M.call(this),typeof p!="function"||(p(this),O&&P.call(this)),this},x.isAdvancedAPI=function(){return A===_};var V,L=function(p){if(A!==_)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=x.roundToPrecision=x.__private__.roundToPrecision=function(p,O){var me=s||O;if(isNaN(p)||isNaN(me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(me).replace(/0+$/,"")};V=x.hpf=x.__private__.hpf=typeof c=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(p,c)}:c==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(p,16)};var w=x.f2=x.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return Q(p,2)},R=x.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return Q(p,3)},Z=x.scale=x.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return A===S?p*Xe:A===_?p:void 0},I=function(p){return Z((function(O){return A===S?tn()-O:A===_?O:void 0})(p))};x.__private__.setPrecision=x.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(s=parseInt(p,10))};var re,ee="00000000000000000000000000000000",ge=x.__private__.getFileId=function(){return ee},G=x.__private__.setFileId=function(p){return ee=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(os=new Yn(u.userPermissions,u.userPassword,u.ownerPassword,ee)),ee};x.setFileId=function(p){return G(p),this},x.getFileId=function(){return ge()};var fe=x.__private__.convertDateToPDFDate=function(p){var O=p.getTimezoneOffset(),me=O<0?"+":"-",we=Math.floor(Math.abs(O/60)),_e=Math.abs(O%60),Ue=[me,T(we),"'",T(_e),"'"].join("");return["D:",p.getFullYear(),T(p.getMonth()+1),T(p.getDate()),T(p.getHours()),T(p.getMinutes()),T(p.getSeconds()),Ue].join("")},ke=x.__private__.convertPDFDateToDate=function(p){var O=parseInt(p.substr(2,4),10),me=parseInt(p.substr(6,2),10)-1,we=parseInt(p.substr(8,2),10),_e=parseInt(p.substr(10,2),10),Ue=parseInt(p.substr(12,2),10),Ge=parseInt(p.substr(14,2),10);return new Date(O,me,we,_e,Ue,Ge,0)},X=x.__private__.setCreationDate=function(p){var O;if(p===void 0&&(p=new Date),p instanceof Date)O=fe(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=p}return re=O},k=x.__private__.getCreationDate=function(p){var O=re;return p==="jsDate"&&(O=ke(re)),O};x.setCreationDate=function(p){return X(p),this},x.getCreationDate=function(p){return k(p)};var q,T=x.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},B=x.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},F=0,J=[],W=[],le=0,he=[],se=[],ve=!1,E=W;x.__private__.setCustomOutputDestination=function(p){ve=!0,E=p};var ce=function(p){ve||(E=p)};x.__private__.resetCustomOutputDestination=function(){ve=!1,E=W};var K=x.__private__.out=function(p){return p=p.toString(),le+=p.length+1,E.push(p),E},ze=x.__private__.write=function(p){return K(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},Ie=x.__private__.getArrayBuffer=function(p){for(var O=p.length,me=new ArrayBuffer(O),we=new Uint8Array(me);O--;)we[O]=p.charCodeAt(O);return me},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Ne};var U=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(p){return U=A===_?p/Xe:p,this};var xe,H=x.__private__.getFontSize=x.getFontSize=function(){return A===S?U:U*Xe},ye=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(p){return ye=p,this},x.__private__.getR2L=x.getR2L=function(){return ye};var pe,Le=x.__private__.setZoomMode=function(p){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))xe=p;else if(isNaN(p)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');xe=p}else xe=parseInt(p,10)};x.__private__.getZoomMode=function(){return xe};var Re,We=x.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');pe=p};x.__private__.getPageMode=function(){return pe};var Ye=x.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');Re=p};x.__private__.getLayoutMode=function(){return Re},x.__private__.setDisplayMode=x.setDisplayMode=function(p,O,me){return Le(p),Ye(O),We(me),this};var Ce={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(p){if(Object.keys(Ce).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ce[p]},x.__private__.getDocumentProperties=function(){return Ce},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(p){for(var O in Ce)Ce.hasOwnProperty(O)&&p[O]&&(Ce[O]=p[O]);return this},x.__private__.setDocumentProperty=function(p,O){if(Object.keys(Ce).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ce[p]=O};var Fe,Xe,ae,Oe,oe,je={},Me={},et=[],Ze={},mt={},xt={},Dt={},Kt=null,Et=0,gt=[],be=new Yh(x),st=t.hotfixes||[],nt={},_t={},It=[],tt=function p(O,me,we,_e,Ue,Ge){if(!(this instanceof p))return new p(O,me,we,_e,Ue,Ge);isNaN(O)&&(O=1),isNaN(me)&&(me=0),isNaN(we)&&(we=0),isNaN(_e)&&(_e=1),isNaN(Ue)&&(Ue=0),isNaN(Ge)&&(Ge=0),this._matrix=[O,me,we,_e,Ue,Ge]};Object.defineProperty(tt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(tt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(tt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(tt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(tt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(tt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(tt.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(tt.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(tt.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(tt.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(tt.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(tt.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(tt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tt.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(V).join(p)},tt.prototype.multiply=function(p){var O=p.sx*this.sx+p.shy*this.shx,me=p.sx*this.shy+p.shy*this.sy,we=p.shx*this.sx+p.sy*this.shx,_e=p.shx*this.shy+p.sy*this.sy,Ue=p.tx*this.sx+p.ty*this.shx+this.tx,Ge=p.tx*this.shy+p.ty*this.sy+this.ty;return new tt(O,me,we,_e,Ue,Ge)},tt.prototype.decompose=function(){var p=this.sx,O=this.shy,me=this.shx,we=this.sy,_e=this.tx,Ue=this.ty,Ge=Math.sqrt(p*p+O*O),it=(p/=Ge)*me+(O/=Ge)*we;me-=p*it,we-=O*it;var ct=Math.sqrt(me*me+we*we);return it/=ct,p*(we/=ct)<O*(me/=ct)&&(p=-p,O=-O,it=-it,Ge=-Ge),{scale:new tt(Ge,0,0,ct,0,0),translate:new tt(1,0,0,1,_e,Ue),rotate:new tt(p,O,-O,p,0,0),skew:new tt(1,0,it,1,0,0)}},tt.prototype.toString=function(p){return this.join(" ")},tt.prototype.inversed=function(){var p=this.sx,O=this.shy,me=this.shx,we=this.sy,_e=this.tx,Ue=this.ty,Ge=1/(p*we-O*me),it=we*Ge,ct=-O*Ge,bt=-me*Ge,jt=p*Ge;return new tt(it,ct,bt,jt,-it*_e-bt*Ue,-ct*_e-jt*Ue)},tt.prototype.applyToPoint=function(p){var O=p.x*this.sx+p.y*this.shx+this.tx,me=p.x*this.shy+p.y*this.sy+this.ty;return new Qa(O,me)},tt.prototype.applyToRectangle=function(p){var O=this.applyToPoint(p),me=this.applyToPoint(new Qa(p.x+p.w,p.y+p.h));return new ki(O.x,O.y,me.x-O.x,me.y-O.y)},tt.prototype.clone=function(){var p=this.sx,O=this.shy,me=this.shx,we=this.sy,_e=this.tx,Ue=this.ty;return new tt(p,O,me,we,_e,Ue)},x.Matrix=tt;var Qt=x.matrixMult=function(p,O){return O.multiply(p)},xr=new tt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=xr;var Js=function(p,O){if(!mt[p]){var me=(O instanceof gn?"Sh":"P")+(Object.keys(Ze).length+1).toString(10);O.id=me,mt[p]=me,Ze[me]=O,be.publish("addPattern",O)}};x.ShadingPattern=gn,x.TilingPattern=ei,x.addShadingPattern=function(p,O){return L("addShadingPattern()"),Js(p,O),this},x.beginTilingPattern=function(p){L("beginTilingPattern()"),_i(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},x.endTilingPattern=function(p,O){L("endTilingPattern()"),O.stream=se[q].join(`
`),Js(p,O),be.publish("endTilingPattern",O),It.pop().restore()};var fr,rs=x.__private__.newObject=function(){var p=$s();return _s(p,!0),p},$s=x.__private__.newObjectDeferred=function(){return F++,J[F]=function(){return le},F},_s=function(p,O){return O=typeof O=="boolean"&&O,J[p]=le,O&&K(p+" 0 obj"),p},Wa=x.__private__.newAdditionalObject=function(){var p={objId:$s(),content:""};return he.push(p),p},ba=$s(),Sr=$s(),Br=x.__private__.decodeColorString=function(p){var O=p.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var me=parseFloat(O[0]);O=[me,me,me,"r"]}for(var we="#",_e=0;_e<3;_e++)we+=("0"+Math.floor(255*parseFloat(O[_e])).toString(16)).slice(-2);return we},Cr=x.__private__.encodeColorString=function(p){var O;typeof p=="string"&&(p={ch1:p});var me=p.ch1,we=p.ch2,_e=p.ch3,Ue=p.ch4,Ge=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof me=="string"&&me.charAt(0)!=="#"){var it=new Cg(me);if(it.ok)me=it.toHex();else if(!/^\d*\.?\d*$/.test(me))throw new Error('Invalid color "'+me+'" passed to jsPDF.encodeColorString.')}if(typeof me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(me)&&(me="#"+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]),typeof me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(me)){var ct=parseInt(me.substr(1),16);me=ct>>16&255,we=ct>>8&255,_e=255&ct}if(we===void 0||Ue===void 0&&me===we&&we===_e)O=typeof me=="string"?me+" "+Ge[0]:p.precision===2?w(me/255)+" "+Ge[0]:R(me/255)+" "+Ge[0];else if(Ue===void 0||Ut(Ue)==="object"){if(Ue&&!isNaN(Ue.a)&&Ue.a===0)return["1.","1.","1.",Ge[1]].join(" ");O=typeof me=="string"?[me,we,_e,Ge[1]].join(" "):p.precision===2?[w(me/255),w(we/255),w(_e/255),Ge[1]].join(" "):[R(me/255),R(we/255),R(_e/255),Ge[1]].join(" ")}else O=typeof me=="string"?[me,we,_e,Ue,Ge[2]].join(" "):p.precision===2?[w(me),w(we),w(_e),w(Ue),Ge[2]].join(" "):[R(me),R(we),R(_e),R(Ue),Ge[2]].join(" ");return O},$r=x.__private__.getFilters=function(){return l},gr=x.__private__.putStream=function(p){var O=(p=p||{}).data||"",me=p.filters||$r(),we=p.alreadyAppliedFilters||[],_e=p.addLength1||!1,Ue=O.length,Ge=p.objectId,it=function(js){return js};if(u!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(it=os.encryptor(Ge,0));var ct={};me===!0&&(me=["FlateEncode"]);var bt=p.additionalKeyValues||[],jt=(ct=ut.API.processDataByFilters!==void 0?ut.API.processDataByFilters(O,me):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(ct.data.length!==0&&(bt.push({key:"Length",value:ct.data.length}),_e===!0&&bt.push({key:"Length1",value:Ue})),jt.length!=0)if(jt.split("/").length-1==1)bt.push({key:"Filter",value:jt});else{bt.push({key:"Filter",value:"["+jt+"]"});for(var Rt=0;Rt<bt.length;Rt+=1)if(bt[Rt].key==="DecodeParms"){for(var ss=[],bs=0;bs<ct.reverseChain.split("/").length-1;bs+=1)ss.push("null");ss.push(bt[Rt].value),bt[Rt].value="["+ss.join(" ")+"]"}}K("<<");for(var Vt=0;Vt<bt.length;Vt++)K("/"+bt[Vt].key+" "+bt[Vt].value);K(">>"),ct.data.length!==0&&(K("stream"),K(it(ct.data)),K("endstream"))},Ha=x.__private__.putPage=function(p){var O=p.number,me=p.data,we=p.objId,_e=p.contentsObjId;_s(we,!0),K("<</Type /Page"),K("/Parent "+p.rootDictionaryObjId+" 0 R"),K("/Resources "+p.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(V(p.mediaBox.bottomLeftX))+" "+parseFloat(V(p.mediaBox.bottomLeftY))+" "+V(p.mediaBox.topRightX)+" "+V(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&K("/CropBox ["+V(p.cropBox.bottomLeftX)+" "+V(p.cropBox.bottomLeftY)+" "+V(p.cropBox.topRightX)+" "+V(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&K("/BleedBox ["+V(p.bleedBox.bottomLeftX)+" "+V(p.bleedBox.bottomLeftY)+" "+V(p.bleedBox.topRightX)+" "+V(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&K("/TrimBox ["+V(p.trimBox.bottomLeftX)+" "+V(p.trimBox.bottomLeftY)+" "+V(p.trimBox.topRightX)+" "+V(p.trimBox.topRightY)+"]"),p.artBox!==null&&K("/ArtBox ["+V(p.artBox.bottomLeftX)+" "+V(p.artBox.bottomLeftY)+" "+V(p.artBox.topRightX)+" "+V(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&K("/UserUnit "+p.userUnit),be.publish("putPage",{objId:we,pageContext:gt[O],pageNumber:O,page:me}),K("/Contents "+_e+" 0 R"),K(">>"),K("endobj");var Ue=me.join(`
`);return A===_&&(Ue+=`
Q`),_s(_e,!0),gr({data:Ue,filters:$r(),objectId:_e}),K("endobj"),we},Ur=x.__private__.putPages=function(){var p,O,me=[];for(p=1;p<=Et;p++)gt[p].objId=$s(),gt[p].contentsObjId=$s();for(p=1;p<=Et;p++)me.push(Ha({number:p,data:se[p],objId:gt[p].objId,contentsObjId:gt[p].contentsObjId,mediaBox:gt[p].mediaBox,cropBox:gt[p].cropBox,bleedBox:gt[p].bleedBox,trimBox:gt[p].trimBox,artBox:gt[p].artBox,userUnit:gt[p].userUnit,rootDictionaryObjId:ba,resourceDictionaryObjId:Sr}));_s(ba,!0),K("<</Type /Pages");var we="/Kids [";for(O=0;O<Et;O++)we+=me[O]+" 0 R ";K(we+"]"),K("/Count "+Et),K(">>"),K("endobj"),be.publish("postPutPages")},Va=function(p){be.publish("putFont",{font:p,out:K,newObject:rs,putStream:gr}),p.isAlreadyPutted!==!0&&(p.objectNumber=rs(),K("<<"),K("/Type /Font"),K("/BaseFont /"+Zn(p.postScriptName)),K("/Subtype /Type1"),typeof p.encoding=="string"&&K("/Encoding /"+p.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},_n=function(p){p.objectNumber=rs();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[V(p.x),V(p.y),V(p.x+p.width),V(p.y+p.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var me=p.pages[1].join(`
`);gr({data:me,additionalKeyValues:O,objectId:p.objectNumber}),K("endobj")},An=function(p,O){O||(O=21);var me=rs(),we=(function(Ge,it){var ct,bt=[],jt=1/(it-1);for(ct=0;ct<1;ct+=jt)bt.push(ct);if(bt.push(1),Ge[0].offset!=0){var Rt={offset:0,color:Ge[0].color};Ge.unshift(Rt)}if(Ge[Ge.length-1].offset!=1){var ss={offset:1,color:Ge[Ge.length-1].color};Ge.push(ss)}for(var bs="",Vt=0,js=0;js<bt.length;js++){for(ct=bt[js];ct>Ge[Vt+1].offset;)Vt++;var ys=Ge[Vt].offset,As=(ct-ys)/(Ge[Vt+1].offset-ys),br=Ge[Vt].color,Ks=Ge[Vt+1].color;bs+=B(Math.round((1-As)*br[0]+As*Ks[0]).toString(16))+B(Math.round((1-As)*br[1]+As*Ks[1]).toString(16))+B(Math.round((1-As)*br[2]+As*Ks[2]).toString(16))}return bs.trim()})(p.colors,O),_e=[];_e.push({key:"FunctionType",value:"0"}),_e.push({key:"Domain",value:"[0.0 1.0]"}),_e.push({key:"Size",value:"["+O+"]"}),_e.push({key:"BitsPerSample",value:"8"}),_e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gr({data:we,additionalKeyValues:_e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:me}),K("endobj"),p.objectNumber=rs(),K("<< /ShadingType "+p.type),K("/ColorSpace /DeviceRGB");var Ue="/Coords ["+V(parseFloat(p.coords[0]))+" "+V(parseFloat(p.coords[1]))+" ";p.type===2?Ue+=V(parseFloat(p.coords[2]))+" "+V(parseFloat(p.coords[3])):Ue+=V(parseFloat(p.coords[2]))+" "+V(parseFloat(p.coords[3]))+" "+V(parseFloat(p.coords[4]))+" "+V(parseFloat(p.coords[5])),K(Ue+="]"),p.matrix&&K("/Matrix ["+p.matrix.toString()+"]"),K("/Function "+me+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},Pn=function(p,O){var me=$s(),we=rs();O.push({resourcesOid:me,objectOid:we}),p.objectNumber=we;var _e=[];_e.push({key:"Type",value:"/Pattern"}),_e.push({key:"PatternType",value:"1"}),_e.push({key:"PaintType",value:"1"}),_e.push({key:"TilingType",value:"1"}),_e.push({key:"BBox",value:"["+p.boundingBox.map(V).join(" ")+"]"}),_e.push({key:"XStep",value:V(p.xStep)}),_e.push({key:"YStep",value:V(p.yStep)}),_e.push({key:"Resources",value:me+" 0 R"}),p.matrix&&_e.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),gr({data:p.stream,additionalKeyValues:_e,objectId:p.objectNumber}),K("endobj")},_c=function(p){for(var O in p.objectNumber=rs(),K("<<"),p)switch(O){case"opacity":K("/ca "+w(p[O]));break;case"stroke-opacity":K("/CA "+w(p[O]))}K(">>"),K("endobj")},pi=function(p){_s(p.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var O in K("/Font <<"),je)je.hasOwnProperty(O)&&(f===!1||f===!0&&g.hasOwnProperty(O))&&K("/"+O+" "+je[O].objectNumber+" 0 R");K(">>")})(),(function(){if(Object.keys(Ze).length>0){for(var O in K("/Shading <<"),Ze)Ze.hasOwnProperty(O)&&Ze[O]instanceof gn&&Ze[O].objectNumber>=0&&K("/"+O+" "+Ze[O].objectNumber+" 0 R");be.publish("putShadingPatternDict"),K(">>")}})(),(function(O){if(Object.keys(Ze).length>0){for(var me in K("/Pattern <<"),Ze)Ze.hasOwnProperty(me)&&Ze[me]instanceof x.TilingPattern&&Ze[me].objectNumber>=0&&Ze[me].objectNumber<O&&K("/"+me+" "+Ze[me].objectNumber+" 0 R");be.publish("putTilingPatternDict"),K(">>")}})(p.objectOid),(function(){if(Object.keys(xt).length>0){var O;for(O in K("/ExtGState <<"),xt)xt.hasOwnProperty(O)&&xt[O].objectNumber>=0&&K("/"+O+" "+xt[O].objectNumber+" 0 R");be.publish("putGStateDict"),K(">>")}})(),(function(){for(var O in K("/XObject <<"),nt)nt.hasOwnProperty(O)&&nt[O].objectNumber>=0&&K("/"+O+" "+nt[O].objectNumber+" 0 R");be.publish("putXobjectDict"),K(">>")})(),K(">>"),K("endobj")},Pl=function(p){Me[p.fontName]=Me[p.fontName]||{},Me[p.fontName][p.fontStyle]=p.id},Ll=function(p,O,me,we,_e){var Ue={id:"F"+(Object.keys(je).length+1).toString(10),postScriptName:p,fontName:O,fontStyle:me,encoding:we,isStandardFont:_e||!1,metadata:{}};return be.publish("addFont",{font:Ue,instance:this}),je[Ue.id]=Ue,Pl(Ue),Ue.id},pr=x.__private__.pdfEscape=x.pdfEscape=function(p,O){return(function(me,we){var _e,Ue,Ge,it,ct,bt,jt,Rt,ss;if(Ge=(we=we||{}).sourceEncoding||"Unicode",ct=we.outputEncoding,(we.autoencode||ct)&&je[Fe].metadata&&je[Fe].metadata[Ge]&&je[Fe].metadata[Ge].encoding&&(it=je[Fe].metadata[Ge].encoding,!ct&&je[Fe].encoding&&(ct=je[Fe].encoding),!ct&&it.codePages&&(ct=it.codePages[0]),typeof ct=="string"&&(ct=it[ct]),ct)){for(jt=!1,bt=[],_e=0,Ue=me.length;_e<Ue;_e++)(Rt=ct[me.charCodeAt(_e)])?bt.push(String.fromCharCode(Rt)):bt.push(me[_e]),bt[_e].charCodeAt(0)>>8&&(jt=!0);me=bt.join("")}for(_e=me.length;jt===void 0&&_e!==0;)me.charCodeAt(_e-1)>>8&&(jt=!0),_e--;if(!jt)return me;for(bt=we.noBOM?[]:[254,255],_e=0,Ue=me.length;_e<Ue;_e++){if((ss=(Rt=me.charCodeAt(_e))>>8)>>8)throw new Error("Character at position "+_e+" of string '"+me+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");bt.push(ss),bt.push(Rt-(ss<<8))}return String.fromCharCode.apply(void 0,bt)})(p,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bi=x.__private__.beginPage=function(p){se[++Et]=[],gt[Et]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},Tl(Et),ce(se[q])},El=function(p,O){var me,we,_e;switch(r=O||r,typeof p=="string"&&(me=N(p.toLowerCase()),Array.isArray(me)&&(we=me[0],_e=me[1])),Array.isArray(p)&&(we=p[0]*Xe,_e=p[1]*Xe),isNaN(we)&&(we=n[0],_e=n[1]),(we>14400||_e>14400)&&(Ht.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),_e=Math.min(14400,_e)),n=[we,_e],r.substr(0,1)){case"l":_e>we&&(n=[_e,we]);break;case"p":we>_e&&(n=[_e,we])}bi(n),Oc(wi),K(En),Ci!==0&&K(Ci+" J"),$i!==0&&K($i+" j"),be.publish("addPage",{pageNumber:Et})},yi=function(p){p>0&&p<=Et&&(se.splice(p,1),gt.splice(p,1),Et--,q>Et&&(q=Et),this.setPage(q))},Tl=function(p){p>0&&p<=Et&&(q=p)},Il=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return se.length-1},Rl=function(p,O,me){var we,_e=void 0;return me=me||{},p=p!==void 0?p:je[Fe].fontName,O=O!==void 0?O:je[Fe].fontStyle,we=p.toLowerCase(),Me[we]!==void 0&&Me[we][O]!==void 0?_e=Me[we][O]:Me[p]!==void 0&&Me[p][O]!==void 0?_e=Me[p][O]:me.disableWarning===!1&&Ht.warn("Unable to look up font label for font '"+p+"', '"+O+"'. Refer to getFontList() for available fonts."),_e||me.noFallback||(_e=Me.times[O])==null&&(_e=Me.times.normal),_e},Ln=x.__private__.putInfo=function(){var p=rs(),O=function(we){return we};for(var me in u!==null&&(O=os.encryptor(p,0)),K("<<"),K("/Producer ("+pr(O("jsPDF "+ut.version))+")"),Ce)Ce.hasOwnProperty(me)&&Ce[me]&&K("/"+me.substr(0,1).toUpperCase()+me.substr(1)+" ("+pr(O(Ce[me]))+")");K("/CreationDate ("+pr(O(re))+")"),K(">>"),K("endobj")},Ac=x.__private__.putCatalog=function(p){var O=(p=p||{}).rootDictionaryObjId||ba;switch(rs(),K("<<"),K("/Type /Catalog"),K("/Pages "+O+" 0 R"),xe||(xe="fullwidth"),xe){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var me=""+xe;me.substr(me.length-1)==="%"&&(xe=parseInt(xe)/100),typeof xe=="number"&&K("/OpenAction [3 0 R /XYZ null null "+w(xe)+"]")}switch(Re||(Re="continuous"),Re){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}pe&&K("/PageMode /"+pe),be.publish("putCatalog"),K(">>"),K("endobj")},ps=x.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(F+1)),K("/Root "+F+" 0 R"),K("/Info "+(F-1)+" 0 R"),u!==null&&K("/Encrypt "+os.oid+" 0 R"),K("/ID [ <"+ee+"> <"+ee+"> ]"),K(">>")},Fl=x.__private__.putHeader=function(){K("%PDF-"+y),K("%ºß¬à")},Ol=x.__private__.putXRef=function(){var p="0000000000";K("xref"),K("0 "+(F+1)),K("0000000000 65535 f ");for(var O=1;O<=F;O++)typeof J[O]=="function"?K((p+J[O]()).slice(-10)+" 00000 n "):J[O]!==void 0?K((p+J[O]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},ea=x.__private__.buildDocument=function(){var p;F=0,le=0,W=[],J=[],he=[],ba=$s(),Sr=$s(),ce(W),be.publish("buildDocument"),Fl(),Ur(),(function(){be.publish("putAdditionalObjects");for(var me=0;me<he.length;me++){var we=he[me];_s(we.objId,!0),K(we.content),K("endobj")}be.publish("postPutAdditionalObjects")})(),p=[],(function(){for(var me in je)je.hasOwnProperty(me)&&(f===!1||f===!0&&g.hasOwnProperty(me))&&Va(je[me])})(),(function(){var me;for(me in xt)xt.hasOwnProperty(me)&&_c(xt[me])})(),(function(){for(var me in nt)nt.hasOwnProperty(me)&&_n(nt[me])})(),(function(me){var we;for(we in Ze)Ze.hasOwnProperty(we)&&(Ze[we]instanceof gn?An(Ze[we]):Ze[we]instanceof ei&&Pn(Ze[we],me))})(p),be.publish("putResources"),p.forEach(pi),pi({resourcesOid:Sr,objectOid:Number.MAX_SAFE_INTEGER}),be.publish("postPutResources"),u!==null&&(os.oid=rs(),K("<<"),K("/Filter /Standard"),K("/V "+os.v),K("/R "+os.r),K("/U <"+os.toHexString(os.U)+">"),K("/O <"+os.toHexString(os.O)+">"),K("/P "+os.P),K(">>"),K("endobj")),Ln(),Ac();var O=le;return Ol(),ps(),K("startxref"),K(""+O),K("%%EOF"),ce(se[q]),W.join(`
`)},Ga=x.__private__.getBlob=function(p){return new Blob([Ie(p)],{type:"application/pdf"})},kr=x.output=x.__private__.output=(fr=function(p,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",p){case void 0:return ea();case"save":x.save(O.filename);break;case"arraybuffer":return Ie(ea());case"blob":return Ga(ea());case"bloburi":case"bloburl":if(pt.URL!==void 0&&typeof pt.URL.createObjectURL=="function")return pt.URL&&pt.URL.createObjectURL(Ga(ea()))||void 0;Ht.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var me="",we=ea();try{me=Gh(we)}catch{me=Gh(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+O.filename+";base64,"+me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var _e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(_e=O.pdfObjectUrl,Ue="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+_e+'"'+Ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",it=pt.open();return it!==null&&it.document.write(Ge),it}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',bt=pt.open();if(bt!==null){bt.document.write(ct);var jt=this;bt.document.documentElement.querySelector("#pdfViewer").onload=function(){bt.document.title=O.filename,bt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jt.output("bloburl"))}}return bt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',ss=pt.open();if(ss!==null&&(ss.document.write(Rt),ss.document.title=O.filename),ss||typeof safari>"u")return ss;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",O);default:return null}},fr.foo=function(){try{return fr.apply(this,arguments)}catch(me){var p=me.stack||"";~p.indexOf(" at ")&&(p=p.split(" at ")[1]);var O="Error in function "+p.split(`
`)[0].split("<")[0]+": "+me.message;if(!pt.console)throw new Error(O);pt.console.error(O,me),pt.alert&&alert(O)}},fr.foo.bar=fr,fr.foo),Ja=function(p){return Array.isArray(st)===!0&&st.indexOf(p)>-1};switch(a){case"pt":Xe=1;break;case"mm":Xe=72/25.4;break;case"cm":Xe=72/2.54;break;case"in":Xe=72;break;case"px":Xe=Ja("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xe=12;break;case"ex":Xe=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Xe=a}var os=null;X(),G();var vi=x.__private__.getPageInfo=x.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gt[p].objId,pageNumber:p,pageContext:gt[p]}},Pc=x.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in gt)if(gt[O].objId===p)break;return vi(O)},Lc=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:gt[q].objId,pageNumber:q,pageContext:gt[q]}};x.addPage=function(){return El.apply(this,arguments),this},x.setPage=function(){return Tl.apply(this,arguments),ce.call(this,se[q]),this},x.insertPage=function(p){return this.addPage(),this.movePage(q,p),this},x.movePage=function(p,O){var me,we;if(p>O){me=se[p],we=gt[p];for(var _e=p;_e>O;_e--)se[_e]=se[_e-1],gt[_e]=gt[_e-1];se[O]=me,gt[O]=we,this.setPage(O)}else if(p<O){me=se[p],we=gt[p];for(var Ue=p;Ue<O;Ue++)se[Ue]=se[Ue+1],gt[Ue]=gt[Ue+1];se[O]=me,gt[O]=we,this.setPage(O)}return this},x.deletePage=function(){return yi.apply(this,arguments),this},x.__private__.text=x.text=function(p,O,me,we,_e){var Ue,Ge,it,ct,bt,jt,Rt,ss,bs,Vt=(we=we||{}).scope||this;if(typeof p=="number"&&typeof O=="number"&&(typeof me=="string"||Array.isArray(me))){var js=me;me=O,O=p,p=js}if(arguments[3]instanceof tt==0?(it=arguments[4],ct=arguments[5],Ut(Rt=arguments[3])==="object"&&Rt!==null||(typeof it=="string"&&(ct=it,it=null),typeof Rt=="string"&&(ct=Rt,Rt=null),typeof Rt=="number"&&(it=Rt,Rt=null),we={flags:Rt,angle:it,align:ct})):(L("The transform parameter of text() with a Matrix value"),bs=_e),isNaN(O)||isNaN(me)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return Vt;var ys,As="",br=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:Ya,Ks=Vt.internal.scaleFactor;function Hl(Ft){return Ft=Ft.split("	").join(Array(we.TabLen||9).join(" ")),pr(Ft,Rt)}function Fn(Ft){for(var zt,ds=Ft.concat(),Ns=[],la=ds.length;la--;)typeof(zt=ds.shift())=="string"?Ns.push(zt):Array.isArray(Ft)&&(zt.length===1||zt[1]===void 0&&zt[2]===void 0)?Ns.push(zt[0]):Ns.push([zt[0],zt[1],zt[2]]);return Ns}function sn(Ft,zt){var ds;if(typeof Ft=="string")ds=zt(Ft)[0];else if(Array.isArray(Ft)){for(var Ns,la,Di=Ft.concat(),Mn=[],Jl=Di.length;Jl--;)typeof(Ns=Di.shift())=="string"?Mn.push(zt(Ns)[0]):Array.isArray(Ns)&&typeof Ns[0]=="string"&&(la=zt(Ns[0],Ns[1],Ns[2]),Mn.push([la[0],la[1],la[2]]));ds=Mn}return ds}var ja=!1,rn=!0;if(typeof p=="string")ja=!0;else if(Array.isArray(p)){var an=p.concat();Ge=[];for(var nn,Is=an.length;Is--;)(typeof(nn=an.shift())!="string"||Array.isArray(nn)&&typeof nn[0]!="string")&&(rn=!1);ja=rn}if(ja===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var ln=U/Vt.internal.scaleFactor,on=ln*(br-1);switch(we.baseline){case"bottom":me-=on;break;case"top":me+=ln-on;break;case"hanging":me+=ln-2*on;break;case"middle":me+=ln/2-on}if((jt=we.maxWidth||0)>0&&(typeof p=="string"?p=Vt.splitTextToSize(p,jt):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(Ft,zt){return Ft.concat(Vt.splitTextToSize(zt,jt))},[]))),Ue={text:p,x:O,y:me,options:we,mutex:{pdfEscape:pr,activeFontKey:Fe,fonts:je,activeFontSize:U}},be.publish("preProcessText",Ue),p=Ue.text,it=(we=Ue.options).angle,bs instanceof tt==0&&it&&typeof it=="number"){it*=Math.PI/180,we.rotationDirection===0&&(it=-it),A===_&&(it=-it);var Ai=Math.cos(it),Pi=Math.sin(it);bs=new tt(Ai,Pi,-Pi,Ai,0,0)}else it&&it instanceof tt&&(bs=it);A!==_||bs||(bs=xr),(bt=we.charSpace||In)!==void 0&&(As+=V(Z(bt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ss=we.horizontalScale)!==void 0&&(As+=V(100*ss)+` Tz
`),we.lang;var as=-1,na=we.renderingMode!==void 0?we.renderingMode:we.stroke,On=Vt.internal.getCurrentPageInfo().pageContext;switch(na){case 0:case!1:case"fill":as=0;break;case 1:case!0:case"stroke":as=1;break;case 2:case"fillThenStroke":as=2;break;case 3:case"invisible":as=3;break;case 4:case"fillAndAddForClipping":as=4;break;case 5:case"strokeAndAddPathForClipping":as=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":as=6;break;case 7:case"addToPathForClipping":as=7}var Vl=On.usedRenderingMode!==void 0?On.usedRenderingMode:-1;as!==-1?As+=as+` Tr
`:Vl!==-1&&(As+=`0 Tr
`),as!==-1&&(On.usedRenderingMode=as),ct=we.align||"left";var yr,cn=U*br,Li=Vt.internal.pageSize.getWidth(),Ei=je[Fe];bt=we.charSpace||In,jt=we.maxWidth||0,Rt=Object.assign({autoencode:!0,noBOM:!0},we.flags);var Na=[],dn=function(Ft){return Vt.getStringUnitWidth(Ft,{font:Ei,charSpace:bt,fontSize:U,doKerning:!1})*U/Ks};if(Object.prototype.toString.call(p)==="[object Array]"){var rr;Ge=Fn(p),ct!=="left"&&(yr=Ge.map(dn));var ar,wa=0;if(ct==="right"){O-=yr[0],p=[],Is=Ge.length;for(var ia=0;ia<Is;ia++)ia===0?(ar=ta(O),rr=sa(me)):(ar=Z(wa-yr[ia]),rr=-cn),p.push([Ge[ia],ar,rr]),wa=yr[ia]}else if(ct==="center"){O-=yr[0]/2,p=[],Is=Ge.length;for(var Sa=0;Sa<Is;Sa++)Sa===0?(ar=ta(O),rr=sa(me)):(ar=Z((wa-yr[Sa])/2),rr=-cn),p.push([Ge[Sa],ar,rr]),wa=yr[Sa]}else if(ct==="left"){p=[],Is=Ge.length;for(var Ti=0;Ti<Is;Ti++)p.push(Ge[Ti])}else if(ct==="justify"&&Ei.encoding==="Identity-H"){p=[],Is=Ge.length,jt=jt!==0?jt:Li;for(var Dn=0,cs=0;cs<Is;cs++)if(rr=cs===0?sa(me):-cn,ar=cs===0?ta(O):Dn,cs<Is-1){var Gl=Z((jt-yr[cs])/(Ge[cs].split(" ").length-1)),zr=Ge[cs].split(" ");p.push([zr[0]+" ",ar,rr]),Dn=0;for(var Wr=1;Wr<zr.length;Wr++){var Ii=(dn(zr[Wr-1]+" "+zr[Wr])-dn(zr[Wr]))*Ks+Gl;Wr==zr.length-1?p.push([zr[Wr],Ii,0]):p.push([zr[Wr]+" ",Ii,0]),Dn-=Ii}}else p.push([Ge[cs],ar,rr]);p.push(["",Dn,0])}else{if(ct!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(p=[],Is=Ge.length,jt=jt!==0?jt:Li,cs=0;cs<Is;cs++){rr=cs===0?sa(me):-cn,ar=cs===0?ta(O):0;var Ri=Ge[cs].split(" ").length-1,Fi=Ri>0?(jt-yr[cs])/Ri:0;cs<Is-1?Na.push(V(Z(Fi))):Na.push(0),p.push([Ge[cs],ar,rr])}}}(typeof we.R2L=="boolean"?we.R2L:ye)===!0&&(p=sn(p,function(Ft,zt,ds){return[Ft.split("").reverse().join(""),zt,ds]})),Ue={text:p,x:O,y:me,options:we,mutex:{pdfEscape:pr,activeFontKey:Fe,fonts:je,activeFontSize:U}},be.publish("postProcessText",Ue),p=Ue.text,ys=Ue.mutex.isHex||!1;var Oi=je[Fe].encoding;Oi!=="WinAnsiEncoding"&&Oi!=="StandardEncoding"||(p=sn(p,function(Ft,zt,ds){return[Hl(Ft),zt,ds]})),Ge=Fn(p),p=[];for(var Ca,$a,ka,un=Array.isArray(Ge[0])?1:0,_a="",mn=function(Ft,zt,ds){var Ns="";return ds instanceof tt?(ds=typeof we.angle=="number"?Qt(ds,new tt(1,0,0,1,Ft,zt)):Qt(new tt(1,0,0,1,Ft,zt),ds),A===_&&(ds=Qt(new tt(1,0,0,-1,0,0),ds)),Ns=ds.join(" ")+` Tm
`):Ns=V(Ft)+" "+V(zt)+` Td
`,Ns},vr=0;vr<Ge.length;vr++){switch(_a="",un){case 1:ka=(ys?"<":"(")+Ge[vr][0]+(ys?">":")"),Ca=parseFloat(Ge[vr][1]),$a=parseFloat(Ge[vr][2]);break;case 0:ka=(ys?"<":"(")+Ge[vr]+(ys?">":")"),Ca=ta(O),$a=sa(me)}Na!==void 0&&Na[vr]!==void 0&&(_a=Na[vr]+` Tw
`),vr===0?p.push(_a+mn(Ca,$a,bs)+ka):un===0?p.push(_a+ka):un===1&&p.push(_a+mn(Ca,$a,bs)+ka)}p=un===0?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var Hr=`BT
/`;return Hr+=Fe+" "+U+` Tf
`,Hr+=V(U*br)+` TL
`,Hr+=Za+`
`,Hr+=As,Hr+=p,K(Hr+="ET"),g[Fe]=!0,Vt};var Ec=x.__private__.clip=x.clip=function(p){return K(p==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Ec("evenodd")},x.__private__.discardPath=x.discardPath=function(){return K("n"),this};var qr=x.__private__.isValidStyle=function(p){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(O=!0),O};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(p){return qr(p)&&(d=p),this};var Dl=x.__private__.getStyle=x.getStyle=function(p){var O=d;switch(p){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=p}return O},Ml=x.close=function(){return K("h"),this};x.stroke=function(){return K("S"),this},x.fill=function(p){return ya("f",p),this},x.fillEvenOdd=function(p){return ya("f*",p),this},x.fillStroke=function(p){return ya("B",p),this},x.fillStrokeEvenOdd=function(p){return ya("B*",p),this};var ya=function(p,O){Ut(O)==="object"?Ic(O,p):K(p)},ji=function(p){p===null||A===_&&p===void 0||(p=Dl(p),K(p))};function Tc(p,O,me,we,_e){var Ue=new ei(O||this.boundingBox,me||this.xStep,we||this.yStep,this.gState,_e||this.matrix);Ue.stream=this.stream;var Ge=p+"$$"+this.cloneIndex+++"$$";return Js(Ge,Ue),Ue}var Ic=function(p,O){var me=mt[p.key],we=Ze[me];if(we instanceof gn)K("q"),K(Rc(O)),we.gState&&x.setGState(we.gState),K(p.matrix.toString()+" cm"),K("/"+me+" sh"),K("Q");else if(we instanceof ei){var _e=new tt(1,0,0,-1,0,tn());p.matrix&&(_e=_e.multiply(p.matrix||xr),me=Tc.call(we,p.key,p.boundingBox,p.xStep,p.yStep,_e).id),K("q"),K("/Pattern cs"),K("/"+me+" scn"),we.gState&&x.setGState(we.gState),K(O),K("Q")}},Rc=function(p){switch(p){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ni=x.moveTo=function(p,O){return K(V(Z(p))+" "+V(I(O))+" m"),this},Ka=x.lineTo=function(p,O){return K(V(Z(p))+" "+V(I(O))+" l"),this},va=x.curveTo=function(p,O,me,we,_e,Ue){return K([V(Z(p)),V(I(O)),V(Z(me)),V(I(we)),V(Z(_e)),V(I(Ue)),"c"].join(" ")),this};x.__private__.line=x.line=function(p,O,me,we,_e){if(isNaN(p)||isNaN(O)||isNaN(me)||isNaN(we)||!qr(_e))throw new Error("Invalid arguments passed to jsPDF.line");return A===S?this.lines([[me-p,we-O]],p,O,[1,1],_e||"S"):this.lines([[me-p,we-O]],p,O,[1,1]).stroke()},x.__private__.lines=x.lines=function(p,O,me,we,_e,Ue){var Ge,it,ct,bt,jt,Rt,ss,bs,Vt,js,ys,As;if(typeof p=="number"&&(As=me,me=O,O=p,p=As),we=we||[1,1],Ue=Ue||!1,isNaN(O)||isNaN(me)||!Array.isArray(p)||!Array.isArray(we)||!qr(_e)||typeof Ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ni(O,me),Ge=we[0],it=we[1],bt=p.length,js=O,ys=me,ct=0;ct<bt;ct++)(jt=p[ct]).length===2?(js=jt[0]*Ge+js,ys=jt[1]*it+ys,Ka(js,ys)):(Rt=jt[0]*Ge+js,ss=jt[1]*it+ys,bs=jt[2]*Ge+js,Vt=jt[3]*it+ys,js=jt[4]*Ge+js,ys=jt[5]*it+ys,va(Rt,ss,bs,Vt,js,ys));return Ue&&Ml(),ji(_e),this},x.path=function(p){for(var O=0;O<p.length;O++){var me=p[O],we=me.c;switch(me.op){case"m":Ni(we[0],we[1]);break;case"l":Ka(we[0],we[1]);break;case"c":va.apply(this,we);break;case"h":Ml()}}return this},x.__private__.rect=x.rect=function(p,O,me,we,_e){if(isNaN(p)||isNaN(O)||isNaN(me)||isNaN(we)||!qr(_e))throw new Error("Invalid arguments passed to jsPDF.rect");return A===S&&(we=-we),K([V(Z(p)),V(I(O)),V(Z(me)),V(Z(we)),"re"].join(" ")),ji(_e),this},x.__private__.triangle=x.triangle=function(p,O,me,we,_e,Ue,Ge){if(isNaN(p)||isNaN(O)||isNaN(me)||isNaN(we)||isNaN(_e)||isNaN(Ue)||!qr(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[me-p,we-O],[_e-me,Ue-we],[p-_e,O-Ue]],p,O,[1,1],Ge,!0),this},x.__private__.roundedRect=x.roundedRect=function(p,O,me,we,_e,Ue,Ge){if(isNaN(p)||isNaN(O)||isNaN(me)||isNaN(we)||isNaN(_e)||isNaN(Ue)||!qr(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var it=4/3*(Math.SQRT2-1);return _e=Math.min(_e,.5*me),Ue=Math.min(Ue,.5*we),this.lines([[me-2*_e,0],[_e*it,0,_e,Ue-Ue*it,_e,Ue],[0,we-2*Ue],[0,Ue*it,-_e*it,Ue,-_e,Ue],[2*_e-me,0],[-_e*it,0,-_e,-Ue*it,-_e,-Ue],[0,2*Ue-we],[0,-Ue*it,_e*it,-Ue,_e,-Ue]],p+_e,O,[1,1],Ge,!0),this},x.__private__.ellipse=x.ellipse=function(p,O,me,we,_e){if(isNaN(p)||isNaN(O)||isNaN(me)||isNaN(we)||!qr(_e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ue=4/3*(Math.SQRT2-1)*me,Ge=4/3*(Math.SQRT2-1)*we;return Ni(p+me,O),va(p+me,O-Ge,p+Ue,O-we,p,O-we),va(p-Ue,O-we,p-me,O-Ge,p-me,O),va(p-me,O+Ge,p-Ue,O+we,p,O+we),va(p+Ue,O+we,p+me,O+Ge,p+me,O),ji(_e),this},x.__private__.circle=x.circle=function(p,O,me,we){if(isNaN(p)||isNaN(O)||isNaN(me)||!qr(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,O,me,me,we)},x.setFont=function(p,O,me){return me&&(O=ne(O,me)),Fe=Rl(p,O,{disableWarning:!1}),this};var Fc=x.__private__.getFont=x.getFont=function(){return je[Rl.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var p,O,me={};for(p in Me)if(Me.hasOwnProperty(p))for(O in me[p]=[],Me[p])Me[p].hasOwnProperty(O)&&me[p].push(O);return me},x.addFont=function(p,O,me,we,_e){var Ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ue.indexOf(arguments[3])!==-1?_e=arguments[3]:arguments[3]&&Ue.indexOf(arguments[3])==-1&&(me=ne(me,we)),Ll.call(this,p,O,me,_e=_e||"Identity-H")};var Ya,wi=t.lineWidth||.200025,yt=x.__private__.getLineWidth=x.getLineWidth=function(){return wi},Oc=x.__private__.setLineWidth=x.setLineWidth=function(p){return wi=p,K(V(Z(p))+" w"),this};x.__private__.setLineDash=ut.API.setLineDash=ut.API.setLineDashPattern=function(p,O){if(p=p||[],O=O||0,isNaN(O)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(me){return V(Z(me))}).join(" "),O=V(Z(O)),K("["+p+"] "+O+" d"),this};var Dc=x.__private__.getLineHeight=x.getLineHeight=function(){return U*Ya};x.__private__.getLineHeight=x.getLineHeight=function(){return U*Ya};var Mc=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(Ya=p),this},Bc=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Ya};Mc(t.lineHeight);var ta=x.__private__.getHorizontalCoordinate=function(p){return Z(p)},sa=x.__private__.getVerticalCoordinate=function(p){return A===_?p:gt[q].mediaBox.topRightY-gt[q].mediaBox.bottomLeftY-Z(p)},Uc=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(p){return V(ta(p))},qc=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(p){return V(sa(p))},En=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Br(En)},x.__private__.setStrokeColor=x.setDrawColor=function(p,O,me,we){return En=Cr({ch1:p,ch2:O,ch3:me,ch4:we,pdfColorType:"draw",precision:2}),K(En),this};var Si=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Br(Si)},x.__private__.setFillColor=x.setFillColor=function(p,O,me,we){return Si=Cr({ch1:p,ch2:O,ch3:me,ch4:we,pdfColorType:"fill",precision:2}),K(Si),this};var Za=t.textColor||"0 g",Tn=x.__private__.getTextColor=x.getTextColor=function(){return Br(Za)};x.__private__.setTextColor=x.setTextColor=function(p,O,me,we){return Za=Cr({ch1:p,ch2:O,ch3:me,ch4:we,pdfColorType:"text",precision:3}),this};var In=t.charSpace,zc=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(In||0)};x.__private__.setCharSpace=x.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return In=p,this};var Ci=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(p){var O=x.CapJoinStyles[p];if(O===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ci=O,K(O+" J"),this};var $i=0;x.__private__.setLineJoin=x.setLineJoin=function(p){var O=x.CapJoinStyles[p];if(O===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $i=O,K(O+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(V(Z(p))+" M"),this},x.GState=ac,x.setGState=function(p){(p=typeof p=="string"?xt[Dt[p]]:Xa(null,p)).equals(Kt)||(K("/"+p.id+" gs"),Kt=p)};var Xa=function(p,O){if(!p||!Dt[p]){var me=!1;for(var we in xt)if(xt.hasOwnProperty(we)&&xt[we].equals(O)){me=!0;break}if(me)O=xt[we];else{var _e="GS"+(Object.keys(xt).length+1).toString(10);xt[_e]=O,O.id=_e}return p&&(Dt[p]=O.id),be.publish("addGState",O),O}};x.addGState=function(p,O){return Xa(p,O),this},x.saveGraphicsState=function(){return K("q"),et.push({key:Fe,size:U,color:Za}),this},x.restoreGraphicsState=function(){K("Q");var p=et.pop();return Fe=p.key,U=p.size,Za=p.color,Kt=null,this},x.setCurrentTransformationMatrix=function(p){return K(p.toString()+" cm"),this},x.comment=function(p){return K("#"+p),this};var Qa=function(p,O){var me=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(Ue){isNaN(Ue)||(me=parseFloat(Ue))}});var we=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(Ue){isNaN(Ue)||(we=parseFloat(Ue))}});var _e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _e},set:function(Ue){_e=Ue.toString()}}),this},ki=function(p,O,me,we){Qa.call(this,p,O),this.type="rect";var _e=me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _e},set:function(Ge){isNaN(Ge)||(_e=parseFloat(Ge))}});var Ue=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ue},set:function(Ge){isNaN(Ge)||(Ue=parseFloat(Ge))}}),this},Rn=function(){this.page=Et,this.currentPage=q,this.pages=se.slice(0),this.pagesContext=gt.slice(0),this.x=ae,this.y=Oe,this.matrix=oe,this.width=Bl(q),this.height=ra(q),this.outputDestination=E,this.id="",this.objectNumber=-1};Rn.prototype.restore=function(){Et=this.page,q=this.currentPage,gt=this.pagesContext,se=this.pages,ae=this.x,Oe=this.y,oe=this.matrix,Ul(q,this.width),aa(q,this.height),E=this.outputDestination};var _i=function(p,O,me,we,_e){It.push(new Rn),Et=q=0,se=[],ae=p,Oe=O,oe=_e,bi([me,we])};for(var en in x.beginFormObject=function(p,O,me,we,_e){return _i(p,O,me,we,_e),this},x.endFormObject=function(p){return(function(O){if(_t[O])It.pop().restore();else{var me=new Rn,we="Xo"+(Object.keys(nt).length+1).toString(10);me.id=we,_t[O]=we,nt[we]=me,be.publish("addFormObject",me),It.pop().restore()}})(p),this},x.doFormObject=function(p,O){var me=nt[_t[p]];return K("q"),K(O.toString()+" cm"),K("/"+me.id+" Do"),K("Q"),this},x.getFormObject=function(p){var O=nt[_t[p]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},x.save=function(p,O){return p=p||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(xn(Ga(ea()),p),typeof xn.unload=="function"&&pt.setTimeout&&setTimeout(xn.unload,911),this):new Promise(function(me,we){try{var _e=xn(Ga(ea()),p);typeof xn.unload=="function"&&pt.setTimeout&&setTimeout(xn.unload,911),me(_e)}catch(Ue){we(Ue.message)}})},ut.API)ut.API.hasOwnProperty(en)&&(en==="events"&&ut.API.events.length?(function(p,O){var me,we,_e;for(_e=O.length-1;_e!==-1;_e--)me=O[_e][0],we=O[_e][1],p.subscribe.apply(p,[me].concat(typeof we=="function"?[we]:we))})(be,ut.API.events):x[en]=ut.API[en]);function Bl(p){return gt[p].mediaBox.topRightX-gt[p].mediaBox.bottomLeftX}function Ul(p,O){gt[p].mediaBox.topRightX=O+gt[p].mediaBox.bottomLeftX}function ra(p){return gt[p].mediaBox.topRightY-gt[p].mediaBox.bottomLeftY}function aa(p,O){gt[p].mediaBox.topRightY=O+gt[p].mediaBox.bottomLeftY}var ql=x.getPageWidth=function(p){return Bl(p=p||q)/Xe},zl=x.setPageWidth=function(p,O){Ul(p,O*Xe)},tn=x.getPageHeight=function(p){return ra(p=p||q)/Xe},Wl=x.setPageHeight=function(p,O){aa(p,O*Xe)};return x.internal={pdfEscape:pr,getStyle:Dl,getFont:Fc,getFontSize:H,getCharSpace:zc,getTextColor:Tn,getLineHeight:Dc,getLineHeightFactor:Bc,getLineWidth:yt,write:ze,getHorizontalCoordinate:ta,getVerticalCoordinate:sa,getCoordinateString:Uc,getVerticalCoordinateString:qc,collections:{},newObject:rs,newAdditionalObject:Wa,newObjectDeferred:$s,newObjectDeferredBegin:_s,getFilters:$r,putStream:gr,events:be,scaleFactor:Xe,pageSize:{getWidth:function(){return ql(q)},setWidth:function(p){zl(q,p)},getHeight:function(){return tn(q)},setHeight:function(p){Wl(q,p)}},encryptionOptions:u,encryption:os,getEncryptor:function(p){return u!==null?os.encryptor(p,0):function(O){return O}},output:kr,getNumberOfPages:Il,pages:se,out:K,f2:w,f3:R,getPageInfo:vi,getPageInfoByObjId:Pc,getCurrentPageInfo:Lc,getPDFVersion:$,Point:Qa,Rectangle:ki,Matrix:tt,hasHotfix:Ja},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return ql(q)},set:function(p){zl(q,p)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return tn(q)},set:function(p){Wl(q,p)},enumerable:!0,configurable:!0}),(function(p){for(var O=0,me=Ne.length;O<me;O++){var we=Ll.call(this,p[O][0],p[O][1],p[O][2],Ne[O][3],!0);f===!1&&(g[we]=!0);var _e=p[O][0].split("-");Pl({id:we,fontName:_e[0],fontStyle:_e[1]||""})}be.publish("addFonts",{fonts:je,dictionary:Me})}).call(x,Ne),Fe="F1",El(n,r),be.publish("initialized"),x}Yn.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Yn.prototype.toHexString=function(t){return t.split("").map(function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Yn.prototype.hexToBytes=function(t){for(var s=[],r=0;r<t.length;r+=2)s.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return s.join("")},Yn.prototype.processOwnerPassword=function(t,s){return $u(Cu(s).substr(0,5),t)},Yn.prototype.encryptor=function(t,s){var r=Cu(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&s,s>>8&255)).substr(0,10);return function(a){return $u(r,a)}},ac.prototype.equals=function(t){var s,r="id,objectNumber,equals";if(!t||Ut(t)!==Ut(this))return!1;var a=0;for(s in this)if(!(r.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!t.hasOwnProperty(s)||this[s]!==t[s])return!1;a++}for(s in t)t.hasOwnProperty(s)&&r.indexOf(s)<0&&a--;return a===0},ut.API={events:[]},ut.version="3.0.3";var ls=ut.API,tm=1,kn=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vn=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nt=function(t){return t.toFixed(2)},Fa=function(t){return t.toFixed(5)};ls.__acroform__={};var sr=function(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t},Zh=function(t){return t*tm},Yr=function(t){var s=new Ag,r=at.internal.getHeight(t)||0,a=at.internal.getWidth(t)||0;return s.BBox=[0,0,Number(Nt(a)),Number(Nt(r))],s},g3=ls.__acroform__.setBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<s},p3=ls.__acroform__.clearBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<s)},b3=ls.__acroform__.getBit=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<s?1:0},hs=ls.__acroform__.getBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return b3(t,s-1)},xs=ls.__acroform__.setBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return g3(t,s-1)},fs=ls.__acroform__.clearBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return p3(t,s-1)},y3=ls.__acroform__.calculateCoordinates=function(t,s){var r=s.internal.getHorizontalCoordinate,a=s.internal.getVerticalCoordinate,n=t[0],i=t[1],l=t[2],o=t[3],c={};return c.lowerLeft_X=r(n)||0,c.lowerLeft_Y=a(i+o)||0,c.upperRight_X=r(n+l)||0,c.upperRight_Y=a(i)||0,[Number(Nt(c.lowerLeft_X)),Number(Nt(c.lowerLeft_Y)),Number(Nt(c.upperRight_X)),Number(Nt(c.upperRight_Y))]},v3=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var s=[],r=t._V||t.DV,a=ku(t,r),n=t.scope.internal.getFont(t.fontName,t.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(t.scope.__private__.encodeColorString(t.color)),s.push("/"+n+" "+Nt(a.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(a.text),s.push("ET"),s.push("Q"),s.push("EMC");var i=Yr(t);return i.scope=t.scope,i.stream=s.join(`
`),i}},ku=function(t,s){var r=t.fontSize===0?t.maxFontSize:t.fontSize,a={text:"",fontSize:""},n=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");n=t.multiline?n.map(function(w){return w.split(`
`)}):n.map(function(w){return[w]});var i=r,l=at.internal.getHeight(t)||0;l=l<0?-l:l;var o=at.internal.getWidth(t)||0;o=o<0?-o:o;var c=function(w,R,Z){if(w+1<n.length){var I=R+" "+n[w+1][0];return Co(I,t,Z).width<=o-4}return!1};i++;e:for(;i>0;){s="",i--;var d,u,f=Co("3",t,i).height,g=t.multiline?l-i:(l-f)/2,x=g+=2,y=0,$=0,j=0;if(i<=0){s=`(...) Tj
`,s+="% Width of Text: "+Co(s,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var N="",S=0,_=0;_<n.length;_++)if(n.hasOwnProperty(_)){var A=!1;if(n[_].length!==1&&j!==n[_].length-1){if((f+2)*(S+2)+2>l)continue e;N+=n[_][j],A=!0,$=_,_--}else{N=(N+=n[_][j]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var P=parseInt(_),M=c(P,N,i),ne=_>=n.length-1;if(M&&!ne){N+=" ",j=0;continue}if(M||ne){if(ne)$=P;else if(t.multiline&&(f+2)*(S+2)+2>l)continue e}else{if(!t.multiline||(f+2)*(S+2)+2>l)continue e;$=P}}for(var V="",L=y;L<=$;L++){var Q=n[L];if(t.multiline){if(L===$){V+=Q[j]+" ",j=(j+1)%Q.length;continue}if(L===y){V+=Q[Q.length-1]+" ";continue}}V+=Q[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,u=Co(V,t,i).width,t.textAlign){case"right":d=o-u-2;break;case"center":d=(o-u)/2;break;default:d=2}s+=Nt(d)+" "+Nt(x)+` Td
`,s+="("+kn(V)+`) Tj
`,s+=-Nt(d)+` 0 Td
`,x=-(i+2),u=0,y=A?$:$+1,S++,N=""}break}return a.text=s,a.fontSize=i,a},Co=function(t,s,r){var a=s.scope.internal.getFont(s.fontName,s.fontStyle),n=s.scope.getStringUnitWidth(t,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:s.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},j3={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},N3=function(t,s){var r={type:"reference",object:t};s.internal.getPageInfo(t.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&s.internal.getPageInfo(t.page).pageContext.annotations.push(r)},w3=function(t,s){if(s.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Or.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(j3)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");tm=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Pg,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];i.objId=void 0,i.hasAnnotation&&N3(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(a,n){var i=!a;for(var l in a||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(l)){var o=a[l],c=[],d=o.Rect;if(o.Rect&&(o.Rect=y3(o.Rect,n)),n.internal.newObjectDeferredBegin(o.objId,!0),o.DA=at.createDefaultAppearanceStream(o),Ut(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=v3(o);c.push({key:"AP",value:"<</N "+u+">>"}),n.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var f="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var x=o.appearanceStreamContent[g];if(f+="/"+g+" ",f+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var y=x[l];typeof y=="function"&&(y=y.call(n,o)),f+="/"+l+" "+y+" ",n.internal.acroformPlugin.xForms.indexOf(y)>=0||n.internal.acroformPlugin.xForms.push(y)}}else typeof(y=x)=="function"&&(y=y.call(n,o)),f+="/"+l+" "+y,n.internal.acroformPlugin.xForms.indexOf(y)>=0||n.internal.acroformPlugin.xForms.push(y);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:o.objId}),n.internal.out("endobj")}i&&(function($,j){for(var N in $)if($.hasOwnProperty(N)){var S=N,_=$[N];j.internal.newObjectDeferredBegin(_.objId,!0),Ut(_)==="object"&&typeof _.putStream=="function"&&_.putStream(),delete $[S]}})(n.internal.acroformPlugin.xForms,n)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},_g=ls.__acroform__.arrayToPdfArray=function(t,s,r){var a=function(l){return l};if(Array.isArray(t)){for(var n="[",i=0;i<t.length;i++)switch(i!==0&&(n+=" "),Ut(t[i])){case"boolean":case"number":case"object":n+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(s!==void 0&&r&&(a=r.internal.getEncryptor(s)),n+="("+kn(a(t[i].toString()))+")"):n+=t[i].toString()}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ed=function(t,s,r){var a=function(n){return n};return s!==void 0&&r&&(a=r.internal.getEncryptor(s)),(t=t||"").toString(),"("+kn(a(t))+")"},Zr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Zr.prototype.toString=function(){return this.objId+" 0 R"},Zr.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Zr.prototype.getKeyValueListForStream=function(){var t=[],s=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in s)if(Object.getOwnPropertyDescriptor(this,s[r]).configurable===!1){var a=s[r],n=this[a];n&&(Array.isArray(n)?t.push({key:a,value:_g(n,this.objId,this.scope)}):n instanceof Zr?(n.scope=this.scope,t.push({key:a,value:n.objId+" 0 R"})):typeof n!="function"&&t.push({key:a,value:n}))}return t};var Ag=function(){Zr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};sr(Ag,Zr);var Pg=function(){Zr.call(this);var t,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+kn(r(t))+")"}},set:function(r){t=r}})};sr(Pg,Zr);var Or=function t(){Zr.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');s=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!hs(s,3)},set:function(N){N?this.F=xs(s,3):this.F=fs(s,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(N){a=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(N){a[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(N){a[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(N){a[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(N){a[3]=N}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof nc)return;i="FieldObject"+t.FieldNum++}var N=function(S){return S};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+kn(N(i))+")"},set:function(N){i=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(N){i=N}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/tm:d},set:function(N){d=N}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof nc||this instanceof yn))return Ed(f,this.objId,this.scope)},set:function(N){N=N.toString(),f=N}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ks==0?Ed(g,this.objId,this.scope):g},set:function(N){N=N.toString(),g=this instanceof ks==0?N.substr(0,1)==="("?Vn(N.substr(1,N.length-2)):Vn(N):N}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ks==1?Vn(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof ks==1?"/"+N:N}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof ks==0?Ed(x,this.objId,this.scope):x},set:function(N){N=N.toString(),x=this instanceof ks==0?N.substr(0,1)==="("?Vn(N.substr(1,N.length-2)):Vn(N):N}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ks==1?Vn(x.substr(1,x.length-1)):x},set:function(N){N=N.toString(),x=this instanceof ks==1?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,$=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return $},set:function(N){N=!!N,$=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(N){y=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,1)},set:function(N){N?this.Ff=xs(this.Ff,1):this.Ff=fs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,2)},set:function(N){N?this.Ff=xs(this.Ff,2):this.Ff=fs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,3)},set:function(N){N?this.Ff=xs(this.Ff,3):this.Ff=fs(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');j=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(j){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:j=2;break;case"center":case 1:j=1;break;default:j=0}}})};sr(Or,Zr);var ii=function(){Or.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _g(s,this.objId,this.scope)},set:function(r){var a,n;n=[],typeof(a=r)=="string"&&(n=(function(i,l,o){o||(o=1);for(var c,d=[];c=l.exec(i);)d.push(c[o]);return d})(a,/\((.*?)\)/g)),s=n}}),this.getOptions=function(){return s},this.setOptions=function(r){s=r,this.sort&&s.sort()},this.addOption=function(r){r=(r=r||"").toString(),s.push(r),this.sort&&s.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();s.indexOf(r)!==-1&&(s.splice(s.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,18)},set:function(r){r?this.Ff=xs(this.Ff,18):this.Ff=fs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=xs(this.Ff,19):this.Ff=fs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,20)},set:function(r){r?(this.Ff=xs(this.Ff,20),s.sort()):this.Ff=fs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,22)},set:function(r){r?this.Ff=xs(this.Ff,22):this.Ff=fs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,23)},set:function(r){r?this.Ff=xs(this.Ff,23):this.Ff=fs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,27)},set:function(r){r?this.Ff=xs(this.Ff,27):this.Ff=fs(this.Ff,27)}}),this.hasAppearanceStream=!1};sr(ii,Or);var li=function(){ii.call(this),this.fontName="helvetica",this.combo=!1};sr(li,ii);var oi=function(){li.call(this),this.combo=!0};sr(oi,li);var qo=function(){oi.call(this),this.edit=!0};sr(qo,oi);var ks=function(){Or.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,15)},set:function(r){r?this.Ff=xs(this.Ff,15):this.Ff=fs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,16)},set:function(r){r?this.Ff=xs(this.Ff,16):this.Ff=fs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,17)},set:function(r){r?this.Ff=xs(this.Ff,17):this.Ff=fs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,26)},set:function(r){r?this.Ff=xs(this.Ff,26):this.Ff=fs(this.Ff,26)}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var a,n=[];for(a in n.push("<<"),s)n.push("/"+a+" ("+kn(r(s[a]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){Ut(r)==="object"&&(s=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(r){typeof r=="string"&&(s.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};sr(ks,Or);var zo=function(){ks.call(this),this.pushButton=!0};sr(zo,ks);var ci=function(){ks.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s!==void 0?s:[]}})};sr(ci,ks);var nc=function(){var t,s;Or.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(n){s=n}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),a)l.push("/"+i+" ("+kn(n(a[i]))+")");return l.push(">>"),l.join(`
`)},set:function(n){Ut(n)==="object"&&(a=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(n){typeof n=="string"&&(a.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=at.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sr(nc,Or),ci.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var r=this.Kids[s];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},ci.prototype.createOption=function(t){var s=new nc;return s.Parent=this,s.optionName=t,this.Kids.push(s),S3.call(this.scope,s),s};var Wo=function(){ks.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=at.CheckBox.createAppearanceStream()};sr(Wo,ks);var yn=function(){Or.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,13)},set:function(s){s?this.Ff=xs(this.Ff,13):this.Ff=fs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,21)},set:function(s){s?this.Ff=xs(this.Ff,21):this.Ff=fs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,23)},set:function(s){s?this.Ff=xs(this.Ff,23):this.Ff=fs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,24)},set:function(s){s?this.Ff=xs(this.Ff,24):this.Ff=fs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,25)},set:function(s){s?this.Ff=xs(this.Ff,25):this.Ff=fs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,26)},set:function(s){s?this.Ff=xs(this.Ff,26):this.Ff=fs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){Number.isInteger(s)&&(t=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sr(yn,Or);var Ho=function(){yn.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,14)},set:function(t){t?this.Ff=xs(this.Ff,14):this.Ff=fs(this.Ff,14)}}),this.password=!0};sr(Ho,yn);var at={CheckBox:{createAppearanceStream:function(){return{N:{On:at.CheckBox.YesNormal},D:{On:at.CheckBox.YesPushDown,Off:at.CheckBox.OffPushDown}}},YesPushDown:function(t){var s=Yr(t);s.scope=t.scope;var r=[],a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=ku(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Nt(at.internal.getWidth(t))+" "+Nt(at.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Nt(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),s.stream=r.join(`
`),s},YesNormal:function(t){var s=Yr(t);s.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),n=[],i=at.internal.getHeight(t),l=at.internal.getWidth(t),o=ku(t,t.caption);return n.push("1 g"),n.push("0 0 "+Nt(l)+" "+Nt(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+Nt(l-1)+" "+Nt(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+Nt(o.fontSize)+" Tf "+a),n.push(o.text),n.push("ET"),n.push("Q"),s.stream=n.join(`
`),s},OffPushDown:function(t){var s=Yr(t);s.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Nt(at.internal.getWidth(t))+" "+Nt(at.internal.getHeight(t))+" re"),r.push("f"),s.stream=r.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(t){var s={D:{Off:at.RadioButton.Circle.OffPushDown},N:{}};return s.N[t]=at.RadioButton.Circle.YesNormal,s.D[t]=at.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(t){var s=Yr(t);s.scope=t.scope;var r=[],a=at.internal.getWidth(t)<=at.internal.getHeight(t)?at.internal.getWidth(t)/4:at.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var n=at.internal.Bezier_C,i=Number((a*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Fa(at.internal.getWidth(t)/2)+" "+Fa(at.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(t){var s=Yr(t);s.scope=t.scope;var r=[],a=at.internal.getWidth(t)<=at.internal.getHeight(t)?at.internal.getWidth(t)/4:at.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*at.internal.Bezier_C).toFixed(5)),l=Number((a*at.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Fa(at.internal.getWidth(t)/2)+" "+Fa(at.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Fa(at.internal.getWidth(t)/2)+" "+Fa(at.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),r.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),r.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),r.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(t){var s=Yr(t);s.scope=t.scope;var r=[],a=at.internal.getWidth(t)<=at.internal.getHeight(t)?at.internal.getWidth(t)/4:at.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*at.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Fa(at.internal.getWidth(t)/2)+" "+Fa(at.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s}},Cross:{createAppearanceStream:function(t){var s={D:{Off:at.RadioButton.Cross.OffPushDown},N:{}};return s.N[t]=at.RadioButton.Cross.YesNormal,s.D[t]=at.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(t){var s=Yr(t);s.scope=t.scope;var r=[],a=at.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Nt(at.internal.getWidth(t)-2)+" "+Nt(at.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Nt(a.x1.x)+" "+Nt(a.x1.y)+" m"),r.push(Nt(a.x2.x)+" "+Nt(a.x2.y)+" l"),r.push(Nt(a.x4.x)+" "+Nt(a.x4.y)+" m"),r.push(Nt(a.x3.x)+" "+Nt(a.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(t){var s=Yr(t);s.scope=t.scope;var r=at.internal.calculateCross(t),a=[];return a.push("0.749023 g"),a.push("0 0 "+Nt(at.internal.getWidth(t))+" "+Nt(at.internal.getHeight(t))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Nt(at.internal.getWidth(t)-2)+" "+Nt(at.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(Nt(r.x1.x)+" "+Nt(r.x1.y)+" m"),a.push(Nt(r.x2.x)+" "+Nt(r.x2.y)+" l"),a.push(Nt(r.x4.x)+" "+Nt(r.x4.y)+" m"),a.push(Nt(r.x3.x)+" "+Nt(r.x3.y)+" l"),a.push("s"),a.push("Q"),s.stream=a.join(`
`),s},OffPushDown:function(t){var s=Yr(t);s.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Nt(at.internal.getWidth(t))+" "+Nt(at.internal.getHeight(t))+" re"),r.push("f"),s.stream=r.join(`
`),s}}},createDefaultAppearanceStream:function(t){var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+s+" "+t.fontSize+" Tf "+r}};at.internal={Bezier_C:.551915024494,calculateCross:function(t){var s=at.internal.getWidth(t),r=at.internal.getHeight(t),a=Math.min(s,r);return{x1:{x:(s-a)/2,y:(r-a)/2+a},x2:{x:(s-a)/2+a,y:(r-a)/2},x3:{x:(s-a)/2,y:(r-a)/2},x4:{x:(s-a)/2+a,y:(r-a)/2+a}}}},at.internal.getWidth=function(t){var s=0;return Ut(t)==="object"&&(s=Zh(t.Rect[2])),s},at.internal.getHeight=function(t){var s=0;return Ut(t)==="object"&&(s=Zh(t.Rect[3])),s};var S3=ls.addField=function(t){if(w3(this,t),!(t instanceof Or))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=t).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ls.AcroFormChoiceField=ii,ls.AcroFormListBox=li,ls.AcroFormComboBox=oi,ls.AcroFormEditBox=qo,ls.AcroFormButton=ks,ls.AcroFormPushButton=zo,ls.AcroFormRadioButton=ci,ls.AcroFormCheckBox=Wo,ls.AcroFormTextField=yn,ls.AcroFormPasswordField=Ho,ls.AcroFormAppearance=at,ls.AcroForm={ChoiceField:ii,ListBox:li,ComboBox:oi,EditBox:qo,Button:ks,PushButton:zo,RadioButton:ci,CheckBox:Wo,TextField:yn,PasswordField:Ho,Appearance:at},ut.AcroForm={ChoiceField:ii,ListBox:li,ComboBox:oi,EditBox:qo,Button:ks,PushButton:zo,RadioButton:ci,CheckBox:Wo,TextField:yn,PasswordField:Ho,Appearance:at};ut.AcroForm;function Lg(t){return t.reduce(function(s,r,a){return s[r]=a,s},{})}(function(t){var s="addImage_";t.__addimage__={};var r="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(w,R){var Z,I,re,ee,ge,G=r;if((R=R||r)==="RGBA"||w.data!==void 0&&w.data instanceof Uint8ClampedArray&&"height"in w&&"width"in w)return"RGBA";if(M(w))for(ge in a)for(re=a[ge],Z=0;Z<re.length;Z+=1){for(ee=!0,I=0;I<re[Z].length;I+=1)if(re[Z][I]!==void 0&&re[Z][I]!==w[I]){ee=!1;break}if(ee===!0){G=ge;break}}else for(ge in a)for(re=a[ge],Z=0;Z<re.length;Z+=1){for(ee=!0,I=0;I<re[Z].length;I+=1)if(re[Z][I]!==void 0&&re[Z][I]!==w.charCodeAt(I)){ee=!1;break}if(ee===!0){G=ge;break}}return G===r&&R!==r&&(G=R),G},i=function w(R){for(var Z=this.internal.write,I=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:R.width}),ee.push({key:"Height",value:R.height}),R.colorSpace===N.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===N.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var ge="",G=0,fe=R.transparency.length;G<fe;G++)ge+=R.transparency[G]+" "+R.transparency[G]+" ";ee.push({key:"Mask",value:"["+ge+"]"})}R.sMask!==void 0&&ee.push({key:"SMask",value:R.objectId+1+" 0 R"});var ke=R.filter!==void 0?["/"+R.filter]:void 0;if(I({data:R.data,additionalKeyValues:ee,alreadyAppliedFilters:ke,objectId:R.objectId}),Z("endobj"),"sMask"in R&&R.sMask!==void 0){var X,k=(X=R.sMaskBitsPerComponent)!==null&&X!==void 0?X:R.bitsPerComponent,q={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:R.sMask};"filter"in R&&(q.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(R.width),q.filter=R.filter),w.call(this,q)}if(R.colorSpace===N.INDEXED){var T=this.internal.newObject();I({data:V(new Uint8Array(R.palette)),objectId:T}),Z("endobj")}},l=function(){var w=this.internal.collections[s+"images"];for(var R in w)i.call(this,w[R])},o=function(){var w,R=this.internal.collections[s+"images"],Z=this.internal.write;for(var I in R)Z("/I"+(w=R[I]).index,w.objectId,"0","R")},c=function(){this.internal.collections[s+"images"]||(this.internal.collections[s+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var w=this.internal.collections[s+"images"];return c.call(this),w},u=function(){return Object.keys(this.internal.collections[s+"images"]).length},f=function(w){return typeof t["process"+w.toUpperCase()]=="function"},g=function(w){return Ut(w)==="object"&&w.nodeType===1},x=function(w,R){if(w.nodeName==="IMG"&&w.hasAttribute("src")){var Z=""+w.getAttribute("src");if(Z.indexOf("data:image/")===0)return Uo(unescape(Z).split("base64,").pop());var I=t.loadFile(Z,!0);if(I!==void 0)return I}if(w.nodeName==="CANVAS"){if(w.width===0||w.height===0)throw new Error("Given canvas must have data. Canvas width: "+w.width+", height: "+w.height);var re;switch(R){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;default:re="image/jpeg"}return Uo(w.toDataURL(re,1).split("base64,").pop())}},y=function(w){var R=this.internal.collections[s+"images"];if(R){for(var Z in R)if(w===R[Z].alias)return R[Z]}},$=function(w,R,Z){return w||R||(w=-96,R=-96),w<0&&(w=-1*Z.width*72/w/this.internal.scaleFactor),R<0&&(R=-1*Z.height*72/R/this.internal.scaleFactor),w===0&&(w=R*Z.width/Z.height),R===0&&(R=w*Z.height/Z.width),[w,R]},j=function(w,R,Z,I,re,ee){var ge=$.call(this,Z,I,re),G=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,ke=d.call(this);if(Z=ge[0],I=ge[1],ke[re.index]=re,ee){ee*=Math.PI/180;var X=Math.cos(ee),k=Math.sin(ee),q=function(B){return B.toFixed(4)},T=[q(X),q(k),q(-1*k),q(X),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,G(w),fe(R+I),"cm"].join(" ")),this.internal.write(T.join(" ")),this.internal.write([G(Z),"0","0",G(I),"0","0","cm"].join(" "))):this.internal.write([G(Z),"0","0",G(I),G(w),fe(R+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},N=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=t.__addimage__.sHashCode=function(w){var R,Z,I=0;if(typeof w=="string")for(Z=w.length,R=0;R<Z;R++)I=(I<<5)-I+w.charCodeAt(R),I|=0;else if(M(w))for(Z=w.byteLength/2,R=0;R<Z;R++)I=(I<<5)-I+w[R],I|=0;return I},A=t.__addimage__.validateStringAsBase64=function(w){(w=w||"").toString().trim();var R=!0;return w.length===0&&(R=!1),w.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(w.substr(0,w.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(w.substr(-2))===!1&&(R=!1),R},P=t.__addimage__.extractImageFromDataUrl=function(w){if(w==null||!(w=w.trim()).startsWith("data:"))return null;var R=w.indexOf(",");return R<0?null:w.substring(0,R).trim().endsWith("base64")?w.substring(R+1):null};t.__addimage__.isArrayBuffer=function(w){return w instanceof ArrayBuffer};var M=t.__addimage__.isArrayBufferView=function(w){return w instanceof Int8Array||w instanceof Uint8Array||w instanceof Uint8ClampedArray||w instanceof Int16Array||w instanceof Uint16Array||w instanceof Int32Array||w instanceof Uint32Array||w instanceof Float32Array||w instanceof Float64Array},ne=t.__addimage__.binaryStringToUint8Array=function(w){for(var R=w.length,Z=new Uint8Array(R),I=0;I<R;I++)Z[I]=w.charCodeAt(I);return Z},V=t.__addimage__.arrayBufferToBinaryString=function(w){for(var R="",Z=M(w)?w:new Uint8Array(w),I=0;I<Z.length;I+=8192)R+=String.fromCharCode.apply(null,Z.subarray(I,I+8192));return R};t.addImage=function(){var w,R,Z,I,re,ee,ge,G,fe;if(typeof arguments[1]=="number"?(R=r,Z=arguments[1],I=arguments[2],re=arguments[3],ee=arguments[4],ge=arguments[5],G=arguments[6],fe=arguments[7]):(R=arguments[1],Z=arguments[2],I=arguments[3],re=arguments[4],ee=arguments[5],ge=arguments[6],G=arguments[7],fe=arguments[8]),Ut(w=arguments[0])==="object"&&!g(w)&&"imageData"in w){var ke=w;w=ke.imageData,R=ke.format||R||r,Z=ke.x||Z||0,I=ke.y||I||0,re=ke.w||ke.width||re,ee=ke.h||ke.height||ee,ge=ke.alias||ge,G=ke.compression||G,fe=ke.rotation||ke.angle||fe}var X=this.internal.getFilters();if(G===void 0&&X.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(Z)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=L.call(this,w,R,ge,G);return j.call(this,Z,I,re,ee,k,fe),this};var L=function(w,R,Z,I){var re,ee,ge;if(typeof w=="string"&&n(w)===r){w=unescape(w);var G=Q(w,!1);(G!==""||(G=t.loadFile(w,!0))!==void 0)&&(w=G)}if(g(w)&&(w=x(w,R)),R=n(w,R),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((ge=Z)==null||ge.length===0)&&(Z=(function(fe){return typeof fe=="string"||M(fe)?_(fe):M(fe.data)?_(fe.data):null})(w)),(re=y.call(this,Z))||(w instanceof Uint8Array||R==="RGBA"||(ee=w,w=ne(w)),re=this["process"+R.toUpperCase()](w,u.call(this),Z,(function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in t.image_compression?fe:S.NONE})(I),ee)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},Q=t.__addimage__.convertBase64ToBinaryString=function(w,R){R=typeof R!="boolean"||R;var Z,I="";if(typeof w=="string"){var re;Z=(re=P(w))!==null&&re!==void 0?re:w;try{I=Uo(Z)}catch(ee){if(R)throw A(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return I};t.getImageProperties=function(w){var R,Z,I="";if(g(w)&&(w=x(w)),typeof w=="string"&&n(w)===r&&((I=Q(w,!1))===""&&(I=t.loadFile(w)||""),w=I),Z=n(w),!f(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(w instanceof Uint8Array||(w=ne(w)),!(R=this["process"+Z.toUpperCase()](w)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=Z,R}})(ut.API),(function(t){var s=function(r){if(r!==void 0&&r!="")return!0};ut.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var a,n,i,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,f=0;f<d.length&&!u;f++)switch((a=d[f]).type){case"link":(s(a.options.url)||s(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){a=d[g];var x=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var $=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),N=this.internal.getEncryptor($.objId),S=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+l(a.bounds.x)+" "+o(a.bounds.y+a.bounds.h)+" "+l(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y)+"] ")+"/Contents ("+x(N(a.contents))+")",i+=" /Popup "+j.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+x(N(S))+") >>",$.content=i;var _=$.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+l(a.bounds.x+30)+" "+o(a.bounds.y+a.bounds.h)+" "+l(a.bounds.x+a.bounds.w+30)+" "+o(a.bounds.y)+"] ")+" /Parent "+_,a.open&&(i+=" /Open true"),i+=" >>",j.content=i,this.internal.write($.objId,"0 R",j.objId,"0 R");break;case"freetext":n="/Rect ["+l(a.bounds.x)+" "+o(a.bounds.y)+" "+l(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y+a.bounds.h)+"] ";var A=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+x(y(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var P=this.annotations._nameMap[a.options.name];a.options.pageNumber=P.page,a.options.top=P.y}else a.options.top||(a.options.top=0);if(n="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+x(y(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var M=o(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+M+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},t.link=function(r,a,n,i,l){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:d(a),w:c(r+n),h:d(a+i)},options:l,type:"link"})},t.textWithLink=function(r,a,n,i){var l,o,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;l=Math.ceil(d*u)}else o=c,l=d;return this.text(r,a,n,i),n+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,n-d,o,l,i),c},t.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(ut.API),(function(t){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function($){return s[$.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function($){return typeof $=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test($)},o=t.__arabicParser__.isArabicEndLetter=function($){return l($)&&i($)&&s[$.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function($){return l($)&&n.indexOf($.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function($){return l($)&&i($)&&s[$.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function($){return l($)&&i($)&&s[$.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function($){return l($)&&i($)&&s[$.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function($){return l($)&&i($)&&s[$.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function($){var j=0,N=r,S="",_=0;for(j=0;j<$.length;j+=1)N[$.charCodeAt(j)]!==void 0?(_++,typeof(N=N[$.charCodeAt(j)])=="number"&&(S+=String.fromCharCode(N),N=r,_=0),j===$.length-1&&(N=r,S+=$.charAt(j-(_-1)),j-=_-1,_=0)):(N=r,S+=$.charAt(j-_),j-=_,_=0);return S};t.__arabicParser__.isArabicDiacritic=function($){return $!==void 0&&a[$.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function($,j,N){return l($)?i($)===!1?-1:!d($)||!l(j)&&!l(N)||!l(N)&&o(j)||o($)&&!l(j)||o($)&&c(j)||o($)&&o(j)?0:u($)&&l(j)&&!o(j)&&l(N)&&d(N)?3:o($)||!l(N)?1:2:-1},x=function($){var j=0,N=0,S=0,_="",A="",P="",M=($=$||"").split("\\s+"),ne=[];for(j=0;j<M.length;j+=1){for(ne.push(""),N=0;N<M[j].length;N+=1)_=M[j][N],A=M[j][N-1],P=M[j][N+1],l(_)?(S=g(_,A,P),ne[j]+=S!==-1?String.fromCharCode(s[_.charCodeAt(0)][S]):_):ne[j]+=_;ne[j]=f(ne[j])}return ne.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var $,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(j)){var S=0;for(N=[],S=0;S<j.length;S+=1)Array.isArray(j[S])?N.push([x(j[S][0]),j[S][1],j[S][2]]):N.push([x(j[S])]);$=N}else $=x(j);return typeof arguments[0]=="string"?$:(arguments[0].text=$,arguments[0])};t.events.push(["preProcessText",y])})(ut.API),ut.API.autoPrint=function(t){var s;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+s+" 0 R")})),this},(function(t){var s=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(r,a){var n;if((r=r||"2d")!=="2d")return null;for(n in a)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=a[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])})(ut.API),(function(t){var s={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function($){c=$}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function($){d=$}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function($){u=$}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function($){f=$}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function($){g=$}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function($){x=$}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function($){y=$}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,x=0,y=0,$=0,j=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var N=d.maxWidth;N>0?typeof c=="string"?c=this.splitTextToSize(c,N):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,A){return _.concat(j.splitTextToSize(A,N))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)x<($=this.getStringUnitWidth(c[S],{font:f})*u)&&(x=$);return x!==0&&(y=c.length),{w:x/=g,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||s,g=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,x&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};t.table=function(c,d,u,f,g){if(a.call(this),!u)throw new Error("No data for PDF table.");var x,y,$,j,N=[],S=[],_=[],A={},P={},M=[],ne=[],V=(g=g||{}).autoSize||!1,L=g.printHeaders!==!1,Q=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,w=g.margins||Object.assign({width:this.getPageWidth()},s),R=typeof g.padding=="number"?g.padding:3,Z=g.headerBackgroundColor||"#c8c8c8",I=g.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=w,this.internal.__cell__.table_font_size=Q,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=Z,this.internal.__cell__.headerTextColor=I,this.setFontSize(Q),f==null)S=N=Object.keys(u[0]),_=N.map(function(){return"left"});else if(Array.isArray(f)&&Ut(f[0])==="object")for(N=f.map(function(ke){return ke.name}),S=f.map(function(ke){return ke.prompt||ke.name||""}),_=f.map(function(ke){return ke.align||"left"}),x=0;x<f.length;x+=1)P[f[x].name]=.7499990551181103*f[x].width;else Array.isArray(f)&&typeof f[0]=="string"&&(S=N=f,_=N.map(function(){return"left"}));if(V||Array.isArray(f)&&typeof f[0]=="string")for(x=0;x<N.length;x+=1){for(A[j=N[x]]=u.map(function(ke){return ke[j]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(S[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=A[j],this.setFont(void 0,"normal"),$=0;$<y.length;$+=1)M.push(this.getTextDimensions(y[$],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[j]=Math.max.apply(null,M)+R+R,M=[]}if(L){var re={};for(x=0;x<N.length;x+=1)re[N[x]]={},re[N[x]].text=S[x],re[N[x]].align=_[x];var ee=o.call(this,re,P);ne=N.map(function(ke){return new i(c,d,P[ke],ee,re[ke].text,void 0,re[ke].align)}),this.setTableHeaderRow(ne),this.printHeaderRow(1,!1)}var ge=f.reduce(function(ke,X){return ke[X.name]=X.align,ke},{});for(x=0;x<u.length;x+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:x,data:u[x]},this);var G=o.call(this,u[x],P);for($=0;$<N.length;$+=1){var fe=u[x][N[$]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:x,col:$,data:fe},this),l.call(this,new i(c,d,P[N[$]],G,fe,x+2,ge[N[$]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(x){var y=c[x];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[x]-u-u)},this).map(function(x){return this.getLineHeightFactor()*x.length*f/g+u+u},this).reduce(function(x,y){return Math.max(x,y)},0)};t.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){u=this.internal.__cell__.tableHeaderRow[x].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,g.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,u),this.setTextColor(y)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}})(ut.API);var Eg={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Tg=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_u=Lg(Tg),Ig=[100,200,300,400,500,600,700,800,900],C3=Lg(Ig);function Td(t){var s=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return Eg[i=i||"normal"]?i:"normal"})(t.style),a=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(t.weight),n=(function(i){return typeof _u[i=i||"normal"]=="number"?i:"normal"})(t.stretch);return{family:s,style:r,weight:a,stretch:n,src:t.src||[],ref:t.ref||{name:s,style:[n,r,a].join(" ")}}}function Xh(t,s,r,a){var n;for(n=r;n>=0&&n<s.length;n+=a)if(t[s[n]])return t[s[n]];for(n=r;n>=0&&n<s.length;n-=a)if(t[s[n]])return t[s[n]]}var $3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Qh={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ex(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function tx(t){return t.trimLeft()}function k3(t,s){for(var r=0;r<t.length;){if(t.charAt(r)===s)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function _3(t){var s=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],t.substring(s[0].length)]}var $o,sx,rx,Gn,ko,ax,nx,ix,Id=["times"];function lx(t,s,r,a,n){var i=4,l=cx;switch(n){case ut.API.image_compression.FAST:i=1,l=ox;break;case ut.API.image_compression.MEDIUM:i=6,l=dx;break;case ut.API.image_compression.SLOW:i=9,l=ux}t=(function(c,d,u,f){for(var g,x=c.length/d,y=new Uint8Array(c.length+x),$=[A3,ox,cx,dx,ux],j=0;j<x;j+=1){var N=j*d,S=c.subarray(N,N+d);if(f)y.set(f(S,u,g),N+j);else{for(var _=$.length,A=[],P=0;P<_;P+=1)A[P]=$[P](S,u,g);var M=L3(A.concat());y.set(A[M],N+j)}g=S}return y})(t,s,Math.ceil(r*a/8),l);var o=ju(t,{level:i});return ut.API.__addimage__.arrayBufferToBinaryString(o)}function A3(t){var s=Array.apply([],t);return s.unshift(0),s}function ox(t,s){var r=t.length,a=[];a[0]=1;for(var n=0;n<r;n+=1){var i=t[n-s]||0;a[n+1]=t[n]-i+256&255}return a}function cx(t,s,r){var a=t.length,n=[];n[0]=2;for(var i=0;i<a;i+=1){var l=r&&r[i]||0;n[i+1]=t[i]-l+256&255}return n}function dx(t,s,r){var a=t.length,n=[];n[0]=3;for(var i=0;i<a;i+=1){var l=t[i-s]||0,o=r&&r[i]||0;n[i+1]=t[i]+256-(l+o>>>1)&255}return n}function ux(t,s,r){var a=t.length,n=[];n[0]=4;for(var i=0;i<a;i+=1){var l=P3(t[i-s]||0,r&&r[i]||0,r&&r[i-s]||0);n[i+1]=t[i]-l+256&255}return n}function P3(t,s,r){if(t===s&&s===r)return t;var a=Math.abs(s-r),n=Math.abs(t-r),i=Math.abs(t+s-r-r);return a<=n&&a<=i?t:n<=i?s:r}function L3(t){var s=t.map(function(r){return r.reduce(function(a,n){return a+Math.abs(n)},0)});return s.indexOf(Math.min.apply(null,s))}function Rd(t,s,r){var a=s*r,n=Math.floor(a/8),i=16-(a-8*n+r),l=(1<<r)-1;return Rg(t,n)>>i&l}function mx(t,s,r,a){var n=r*a,i=Math.floor(n/8),l=16-(n-8*i+a),o=(1<<a)-1,c=(s&o)<<l;(function(d,u,f){if(u+1<d.byteLength)d.setUint16(u,f,!1);else{var g=f>>8&255;d.setUint8(u,g)}})(t,i,Rg(t,i)&~(o<<l)&65535|c)}function Rg(t,s){return s+1<t.byteLength?t.getUint16(s,!1):t.getUint8(s)<<8}function E3(t){var s=0;if(t[s++]!==71||t[s++]!==73||t[s++]!==70||t[s++]!==56||(t[s++]+1&253)!=56||t[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[s++]|t[s++]<<8,a=t[s++]|t[s++]<<8,n=t[s++],i=n>>7,l=1<<1+(7&n);t[s++],t[s++];var o=null,c=null;i&&(o=s,c=l,s+=3*l);var d=!0,u=[],f=0,g=null,x=0,y=null;for(this.width=r,this.height=a;d&&s<t.length;)switch(t[s++]){case 33:switch(t[s++]){case 255:if(t[s]!==11||t[s+1]==78&&t[s+2]==69&&t[s+3]==84&&t[s+4]==83&&t[s+5]==67&&t[s+6]==65&&t[s+7]==80&&t[s+8]==69&&t[s+9]==50&&t[s+10]==46&&t[s+11]==48&&t[s+12]==3&&t[s+13]==1&&t[s+16]==0)s+=14,y=t[s++]|t[s++]<<8,s++;else for(s+=12;;){if(!((w=t[s++])>=0))throw Error("Invalid block size");if(w===0)break;s+=w}break;case 249:if(t[s++]!==4||t[s+4]!==0)throw new Error("Invalid graphics extension block.");var $=t[s++];f=t[s++]|t[s++]<<8,g=t[s++],1&$||(g=null),x=$>>2&7,s++;break;case 254:for(;;){if(!((w=t[s++])>=0))throw Error("Invalid block size");if(w===0)break;s+=w}break;default:throw new Error("Unknown graphic control label: 0x"+t[s-1].toString(16))}break;case 44:var j=t[s++]|t[s++]<<8,N=t[s++]|t[s++]<<8,S=t[s++]|t[s++]<<8,_=t[s++]|t[s++]<<8,A=t[s++],P=A>>6&1,M=1<<1+(7&A),ne=o,V=c,L=!1;A>>7&&(L=!0,ne=s,V=M,s+=3*M);var Q=s;for(s++;;){var w;if(!((w=t[s++])>=0))throw Error("Invalid block size");if(w===0)break;s+=w}u.push({x:j,y:N,width:S,height:_,has_local_palette:L,palette_offset:ne,palette_size:V,data_offset:Q,data_length:s-Q,transparent_index:g,interlaced:!!P,delay:f,disposal:x});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[s-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(R){if(R<0||R>=u.length)throw new Error("Frame index out of range.");return u[R]},this.decodeAndBlitFrameBGRA=function(R,Z){var I=this.frameInfo(R),re=I.width*I.height,ee=new Uint8Array(re);hx(t,I.data_offset,ee,re);var ge=I.palette_offset,G=I.transparent_index;G===null&&(G=256);var fe=I.width,ke=r-fe,X=fe,k=4*(I.y*r+I.x),q=4*((I.y+I.height)*r+I.x),T=k,B=4*ke;I.interlaced===!0&&(B+=4*r*7);for(var F=8,J=0,W=ee.length;J<W;++J){var le=ee[J];if(X===0&&(X=fe,(T+=B)>=q&&(B=4*ke+4*r*(F-1),T=k+(fe+ke)*(F<<1),F>>=1)),le===G)T+=4;else{var he=t[ge+3*le],se=t[ge+3*le+1],ve=t[ge+3*le+2];Z[T++]=ve,Z[T++]=se,Z[T++]=he,Z[T++]=255}--X}},this.decodeAndBlitFrameRGBA=function(R,Z){var I=this.frameInfo(R),re=I.width*I.height,ee=new Uint8Array(re);hx(t,I.data_offset,ee,re);var ge=I.palette_offset,G=I.transparent_index;G===null&&(G=256);var fe=I.width,ke=r-fe,X=fe,k=4*(I.y*r+I.x),q=4*((I.y+I.height)*r+I.x),T=k,B=4*ke;I.interlaced===!0&&(B+=4*r*7);for(var F=8,J=0,W=ee.length;J<W;++J){var le=ee[J];if(X===0&&(X=fe,(T+=B)>=q&&(B=4*ke+4*r*(F-1),T=k+(fe+ke)*(F<<1),F>>=1)),le===G)T+=4;else{var he=t[ge+3*le],se=t[ge+3*le+1],ve=t[ge+3*le+2];Z[T++]=he,Z[T++]=se,Z[T++]=ve,Z[T++]=255}--X}}}function hx(t,s,r,a){for(var n=t[s++],i=1<<n,l=i+1,o=l+1,c=n+1,d=(1<<c)-1,u=0,f=0,g=0,x=t[s++],y=new Int32Array(4096),$=null;;){for(;u<16&&x!==0;)f|=t[s++]<<u,u+=8,x===1?x=t[s++]:--x;if(u<c)break;var j=f&d;if(f>>=c,u-=c,j!==i){if(j===l)break;for(var N=j<o?j:$,S=0,_=N;_>i;)_=y[_]>>8,++S;var A=_;if(g+S+(N!==j?1:0)>a)return void Ht.log("Warning, gif stream longer than expected.");r[g++]=A;var P=g+=S;for(N!==j&&(r[g++]=A),_=N;S--;)_=y[_],r[--P]=255&_,_>>=8;$!==null&&o<4096&&(y[o++]=$<<8|A,o>=d+1&&c<12&&(++c,d=d<<1|1)),$=j}else o=l+1,d=(1<<(c=n+1))-1,$=null}return g!==a&&Ht.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Fd(t){var s,r,a,n,i,l=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(65535),g=new Array(65535),x=new Array(64),y=new Array(64),$=[],j=0,N=7,S=new Array(64),_=new Array(64),A=new Array(64),P=new Array(256),M=new Array(2048),ne=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],w=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(k,q){for(var T=0,B=0,F=new Array,J=1;J<=16;J++){for(var W=1;W<=k[J];W++)F[q[B]]=[],F[q[B]][0]=T,F[q[B]][1]=J,B++,T++;T*=2}return F}function ge(k){for(var q=k[0],T=k[1]-1;T>=0;)q&1<<T&&(j|=1<<N),T--,--N<0&&(j==255?(G(255),G(0)):G(j),N=7,j=0)}function G(k){$.push(k)}function fe(k){G(k>>8&255),G(255&k)}function ke(k,q,T,B,F){for(var J,W=F[0],le=F[240],he=(function(U,xe){var H,ye,pe,Le,Re,We,Ye,Ce,Fe,Xe,ae=0;for(Fe=0;Fe<8;++Fe){H=U[ae],ye=U[ae+1],pe=U[ae+2],Le=U[ae+3],Re=U[ae+4],We=U[ae+5],Ye=U[ae+6];var Oe=H+(Ce=U[ae+7]),oe=H-Ce,je=ye+Ye,Me=ye-Ye,et=pe+We,Ze=pe-We,mt=Le+Re,xt=Le-Re,Dt=Oe+mt,Kt=Oe-mt,Et=je+et,gt=je-et;U[ae]=Dt+Et,U[ae+4]=Dt-Et;var be=.707106781*(gt+Kt);U[ae+2]=Kt+be,U[ae+6]=Kt-be;var st=.382683433*((Dt=xt+Ze)-(gt=Me+oe)),nt=.5411961*Dt+st,_t=1.306562965*gt+st,It=.707106781*(Et=Ze+Me),tt=oe+It,Qt=oe-It;U[ae+5]=Qt+nt,U[ae+3]=Qt-nt,U[ae+1]=tt+_t,U[ae+7]=tt-_t,ae+=8}for(ae=0,Fe=0;Fe<8;++Fe){H=U[ae],ye=U[ae+8],pe=U[ae+16],Le=U[ae+24],Re=U[ae+32],We=U[ae+40],Ye=U[ae+48];var xr=H+(Ce=U[ae+56]),Js=H-Ce,fr=ye+Ye,rs=ye-Ye,$s=pe+We,_s=pe-We,Wa=Le+Re,ba=Le-Re,Sr=xr+Wa,Br=xr-Wa,Cr=fr+$s,$r=fr-$s;U[ae]=Sr+Cr,U[ae+32]=Sr-Cr;var gr=.707106781*($r+Br);U[ae+16]=Br+gr,U[ae+48]=Br-gr;var Ha=.382683433*((Sr=ba+_s)-($r=rs+Js)),Ur=.5411961*Sr+Ha,Va=1.306562965*$r+Ha,_n=.707106781*(Cr=_s+rs),An=Js+_n,Pn=Js-_n;U[ae+40]=Pn+Ur,U[ae+24]=Pn-Ur,U[ae+8]=An+Va,U[ae+56]=An-Va,ae++}for(Fe=0;Fe<64;++Fe)Xe=U[Fe]*xe[Fe],x[Fe]=Xe>0?Xe+.5|0:Xe-.5|0;return x})(k,q),se=0;se<64;++se)y[ne[se]]=he[se];var ve=y[0]-T;T=y[0],ve==0?ge(B[0]):(ge(B[g[J=32767+ve]]),ge(f[J]));for(var E=63;E>0&&y[E]==0;)E--;if(E==0)return ge(W),T;for(var ce,K=1;K<=E;){for(var ze=K;y[K]==0&&K<=E;)++K;var Ie=K-ze;if(Ie>=16){ce=Ie>>4;for(var Ne=1;Ne<=ce;++Ne)ge(le);Ie&=15}J=32767+y[K],ge(F[(Ie<<4)+g[J]]),ge(f[J]),K++}return E!=63&&ge(W),T}function X(k){k=Math.min(Math.max(k,1),100),i!=k&&((function(q){for(var T=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],B=0;B<64;B++){var F=l((T[B]*q+50)/100);F=Math.min(Math.max(F,1),255),o[ne[B]]=F}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],W=0;W<64;W++){var le=l((J[W]*q+50)/100);le=Math.min(Math.max(le,1),255),c[ne[W]]=le}for(var he=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],se=0,ve=0;ve<8;ve++)for(var E=0;E<8;E++)d[se]=1/(o[ne[se]]*he[ve]*he[E]*8),u[se]=1/(c[ne[se]]*he[ve]*he[E]*8),se++})(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),i=k)}this.encode=function(k,q){q&&X(q),$=new Array,j=0,N=7,fe(65496),fe(65504),fe(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),fe(1),fe(1),G(0),G(0),(function(){fe(65499),fe(132),G(0);for(var ye=0;ye<64;ye++)G(o[ye]);G(1);for(var pe=0;pe<64;pe++)G(c[pe])})(),(function(ye,pe){fe(65472),fe(17),G(8),fe(pe),fe(ye),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(k.width,k.height),(function(){fe(65476),fe(418),G(0);for(var ye=0;ye<16;ye++)G(V[ye+1]);for(var pe=0;pe<=11;pe++)G(L[pe]);G(16);for(var Le=0;Le<16;Le++)G(Q[Le+1]);for(var Re=0;Re<=161;Re++)G(w[Re]);G(1);for(var We=0;We<16;We++)G(R[We+1]);for(var Ye=0;Ye<=11;Ye++)G(Z[Ye]);G(17);for(var Ce=0;Ce<16;Ce++)G(I[Ce+1]);for(var Fe=0;Fe<=161;Fe++)G(re[Fe])})(),fe(65498),fe(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var T=0,B=0,F=0;j=0,N=7,this.encode.displayName="_encode_";for(var J,W,le,he,se,ve,E,ce,K,ze=k.data,Ie=k.width,Ne=k.height,U=4*Ie,xe=0;xe<Ne;){for(J=0;J<U;){for(se=U*xe+J,E=-1,ce=0,K=0;K<64;K++)ve=se+(ce=K>>3)*U+(E=4*(7&K)),xe+ce>=Ne&&(ve-=U*(xe+1+ce-Ne)),J+E>=U&&(ve-=J+E-U+4),W=ze[ve++],le=ze[ve++],he=ze[ve++],S[K]=(M[W]+M[le+256|0]+M[he+512|0]>>16)-128,_[K]=(M[W+768|0]+M[le+1024|0]+M[he+1280|0]>>16)-128,A[K]=(M[W+1280|0]+M[le+1536|0]+M[he+1792|0]>>16)-128;T=ke(S,d,T,s,a),B=ke(_,u,B,r,n),F=ke(A,u,F,r,n),J+=32}xe+=8}if(N>=0){var H=[];H[1]=N+1,H[0]=(1<<N+1)-1,ge(H)}return fe(65497),new Uint8Array($)},t=t||50,(function(){for(var k=String.fromCharCode,q=0;q<256;q++)P[q]=k(q)})(),s=ee(V,L),r=ee(R,Z),a=ee(Q,w),n=ee(I,re),(function(){for(var k=1,q=2,T=1;T<=15;T++){for(var B=k;B<q;B++)g[32767+B]=T,f[32767+B]=[],f[32767+B][1]=T,f[32767+B][0]=B;for(var F=-(q-1);F<=-k;F++)g[32767+F]=T,f[32767+F]=[],f[32767+F][1]=T,f[32767+F][0]=q-1+F;k<<=1,q<<=1}})(),(function(){for(var k=0;k<256;k++)M[k]=19595*k,M[k+256|0]=38470*k,M[k+512|0]=7471*k+32768,M[k+768|0]=-11059*k,M[k+1024|0]=-21709*k,M[k+1280|0]=32768*k+8421375,M[k+1536|0]=-27439*k,M[k+1792|0]=-5329*k})(),X(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Er(t,s){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xx(t){function s(L){if(!L)throw Error("assert :P")}function r(L,Q,w){for(var R=0;4>R;R++)if(L[Q+R]!=w.charCodeAt(R))return!0;return!1}function a(L,Q,w,R,Z){for(var I=0;I<Z;I++)L[Q+I]=w[R+I]}function n(L,Q,w,R){for(var Z=0;Z<R;Z++)L[Q+Z]=w}function i(L){return new Int32Array(L)}function l(L,Q){for(var w=[],R=0;R<L;R++)w.push(new Q);return w}function o(L,Q){var w=[];return(function R(Z,I,re){for(var ee=re[I],ge=0;ge<ee&&(Z.push(re.length>I+1?[]:new Q),!(re.length<I+1));ge++)R(Z[ge],I+1,re)})(w,0,L),w}var c=function(){var L=this;function Q(m,h){for(var v=1<<h-1>>>0;m&v;)v>>>=1;return v?(m&v-1)+v:m}function w(m,h,v,C,D){s(!(C%v));do m[h+(C-=v)]=D;while(0<C)}function R(m,h,v,C,D){if(s(2328>=D),512>=D)var z=i(512);else if((z=i(D))==null)return 0;return(function(Y,te,ie,de,Se,Ee){var ue,$e,Ae=te,De=1<<ie,Pe=i(16),Be=i(16);for(s(Se!=0),s(de!=null),s(Y!=null),s(0<ie),$e=0;$e<Se;++$e){if(15<de[$e])return 0;++Pe[de[$e]]}if(Pe[0]==Se)return 0;for(Be[1]=0,ue=1;15>ue;++ue){if(Pe[ue]>1<<ue)return 0;Be[ue+1]=Be[ue]+Pe[ue]}for($e=0;$e<Se;++$e)ue=de[$e],0<de[$e]&&(Ee[Be[ue]++]=$e);if(Be[15]==1)return(de=new Z).g=0,de.value=Ee[0],w(Y,Ae,1,De,de),De;var qe,Ke=-1,He=De-1,dt=0,rt=1,Ct=1,lt=1<<ie;for($e=0,ue=1,Se=2;ue<=ie;++ue,Se<<=1){if(rt+=Ct<<=1,0>(Ct-=Pe[ue]))return 0;for(;0<Pe[ue];--Pe[ue])(de=new Z).g=ue,de.value=Ee[$e++],w(Y,Ae+dt,Se,lt,de),dt=Q(dt,ue)}for(ue=ie+1,Se=2;15>=ue;++ue,Se<<=1){if(rt+=Ct<<=1,0>(Ct-=Pe[ue]))return 0;for(;0<Pe[ue];--Pe[ue]){if(de=new Z,(dt&He)!=Ke){for(Ae+=lt,qe=1<<(Ke=ue)-ie;15>Ke&&!(0>=(qe-=Pe[Ke]));)++Ke,qe<<=1;De+=lt=1<<(qe=Ke-ie),Y[te+(Ke=dt&He)].g=qe+ie,Y[te+Ke].value=Ae-te-Ke}de.g=ue-ie,de.value=Ee[$e++],w(Y,Ae+(dt>>ie),Se,lt,de),dt=Q(dt,ue)}}return rt!=2*Be[15]-1?0:De})(m,h,v,C,D,z)}function Z(){this.value=this.g=0}function I(){this.value=this.g=0}function re(){this.G=l(5,Z),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(dn,I)}function ee(m,h,v,C){s(m!=null),s(h!=null),s(2147483648>C),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=h,m.pa=v,m.Jd=h,m.Yc=v+C,m.Zc=4<=C?v+C-4+1:v,W(m)}function ge(m,h){for(var v=0;0<h--;)v|=he(m,128)<<h;return v}function G(m,h){var v=ge(m,h);return le(m)?-v:v}function fe(m,h,v,C){var D,z=0;for(s(m!=null),s(h!=null),s(4294967288>C),m.Sb=C,m.Ra=0,m.u=0,m.h=0,4<C&&(C=4),D=0;D<C;++D)z+=h[v+D]<<8*D;m.Ra=z,m.bb=C,m.oa=h,m.pa=v}function ke(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<wa-8>>>0,++m.bb,m.u-=8;B(m)&&(m.h=1,m.u=0)}function X(m,h){if(s(0<=h),!m.h&&h<=ar){var v=T(m)&rr[h];return m.u+=h,ke(m),v}return m.h=1,m.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function T(m){return m.Ra>>>(m.u&wa-1)>>>0}function B(m){return s(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>wa}function F(m,h){m.u=h,m.h=B(m)}function J(m){m.u>=ia&&(s(m.u>=ia),ke(m))}function W(m){s(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(s(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function le(m){return ge(m,1)}function he(m,h){var v=m.Ca;0>m.b&&W(m);var C=m.b,D=v*h>>>8,z=(m.I>>>C>D)+0;for(z?(v-=D,m.I-=D+1<<C>>>0):v=D+1,C=v,D=0;256<=C;)D+=8,C>>=8;return C=7^D+Sa[C],m.b-=C,m.Ca=(v<<C)-1,z}function se(m,h,v){m[h+0]=v>>24&255,m[h+1]=v>>16&255,m[h+2]=v>>8&255,m[h+3]=255&v}function ve(m,h){return m[h+0]|m[h+1]<<8}function E(m,h){return ve(m,h)|m[h+2]<<16}function ce(m,h){return ve(m,h)|ve(m,h+2)<<16}function K(m,h){var v=1<<h;return s(m!=null),s(0<h),m.X=i(v),m.X==null?0:(m.Mb=32-h,m.Xa=h,1)}function ze(m,h){s(m!=null),s(h!=null),s(m.Xa==h.Xa),a(h.X,0,m.X,0,1<<h.Xa)}function Ie(){this.X=[],this.Xa=this.Mb=0}function Ne(m,h,v,C){s(v!=null),s(C!=null);var D=v[0],z=C[0];return D==0&&(D=(m*z+h/2)/h),z==0&&(z=(h*D+m/2)/m),0>=D||0>=z?0:(v[0]=D,C[0]=z,1)}function U(m,h){return m+(1<<h)-1>>>h}function xe(m,h){return((4278255360&m)+(4278255360&h)>>>0&4278255360)+((16711935&m)+(16711935&h)>>>0&16711935)>>>0}function H(m,h){L[h]=function(v,C,D,z,Y,te,ie){var de;for(de=0;de<Y;++de){var Se=L[m](te[ie+de-1],D,z+de);te[ie+de]=xe(v[C+de],Se)}}}function ye(){this.ud=this.hd=this.jd=0}function pe(m,h){return((4278124286&(m^h))>>>1)+(m&h)>>>0}function Le(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Re(m,h){return Le(m+(m-h+.5>>1))}function We(m,h,v){return Math.abs(h-v)-Math.abs(m-v)}function Ye(m,h,v,C,D,z,Y){for(C=z[Y-1],v=0;v<D;++v)z[Y+v]=C=xe(m[h+v],C)}function Ce(m,h,v,C,D){var z;for(z=0;z<v;++z){var Y=m[h+z],te=Y>>8&255,ie=16711935&(ie=(ie=16711935&Y)+((te<<16)+te));C[D+z]=(4278255360&Y)+ie>>>0}}function Fe(m,h){h.jd=255&m,h.hd=m>>8&255,h.ud=m>>16&255}function Xe(m,h,v,C,D,z){var Y;for(Y=0;Y<C;++Y){var te=h[v+Y],ie=te>>>8,de=te,Se=255&(Se=(Se=te>>>16)+((m.jd<<24>>24)*(ie<<24>>24)>>>5));de=255&(de=(de+=(m.hd<<24>>24)*(ie<<24>>24)>>>5)+((m.ud<<24>>24)*(Se<<24>>24)>>>5)),D[z+Y]=(4278255360&te)+(Se<<16)+de}}function ae(m,h,v,C,D){L[h]=function(z,Y,te,ie,de,Se,Ee,ue,$e){for(ie=Ee;ie<ue;++ie)for(Ee=0;Ee<$e;++Ee)de[Se++]=D(te[C(z[Y++])])},L[m]=function(z,Y,te,ie,de,Se,Ee){var ue=8>>z.b,$e=z.Ea,Ae=z.K[0],De=z.w;if(8>ue)for(z=(1<<z.b)-1,De=(1<<ue)-1;Y<te;++Y){var Pe,Be=0;for(Pe=0;Pe<$e;++Pe)Pe&z||(Be=C(ie[de++])),Se[Ee++]=D(Ae[Be&De]),Be>>=ue}else L["VP8LMapColor"+v](ie,de,Ae,De,Se,Ee,Y,te,$e)}}function Oe(m,h,v,C,D){for(v=h+v;h<v;){var z=m[h++];C[D++]=z>>16&255,C[D++]=z>>8&255,C[D++]=255&z}}function oe(m,h,v,C,D){for(v=h+v;h<v;){var z=m[h++];C[D++]=z>>16&255,C[D++]=z>>8&255,C[D++]=255&z,C[D++]=z>>24&255}}function je(m,h,v,C,D){for(v=h+v;h<v;){var z=(Y=m[h++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;C[D++]=z,C[D++]=Y}}function Me(m,h,v,C,D){for(v=h+v;h<v;){var z=(Y=m[h++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;C[D++]=z,C[D++]=Y}}function et(m,h,v,C,D){for(v=h+v;h<v;){var z=m[h++];C[D++]=255&z,C[D++]=z>>8&255,C[D++]=z>>16&255}}function Ze(m,h,v,C,D,z){if(z==0)for(v=h+v;h<v;)se(C,((z=m[h++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),D+=32;else a(C,D,m,h,v)}function mt(m,h){L[h][0]=L[m+"0"],L[h][1]=L[m+"1"],L[h][2]=L[m+"2"],L[h][3]=L[m+"3"],L[h][4]=L[m+"4"],L[h][5]=L[m+"5"],L[h][6]=L[m+"6"],L[h][7]=L[m+"7"],L[h][8]=L[m+"8"],L[h][9]=L[m+"9"],L[h][10]=L[m+"10"],L[h][11]=L[m+"11"],L[h][12]=L[m+"12"],L[h][13]=L[m+"13"],L[h][14]=L[m+"0"],L[h][15]=L[m+"0"]}function xt(m){return m==Vc||m==Gc||m==eo||m==Jc}function Dt(){this.eb=[],this.size=this.A=this.fb=0}function Kt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Et(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Dt,this.f.kb=new Kt,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function be(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function st(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function nt(m,h){var v=m.T,C=h.ba.f.RGBA,D=C.eb,z=C.fb+m.ka*C.A,Y=Nr[h.ba.S],te=m.y,ie=m.O,de=m.f,Se=m.N,Ee=m.ea,ue=m.W,$e=h.cc,Ae=h.dc,De=h.Mc,Pe=h.Nc,Be=m.ka,qe=m.ka+m.T,Ke=m.U,He=Ke+1>>1;for(Be==0?Y(te,ie,null,null,de,Se,Ee,ue,de,Se,Ee,ue,D,z,null,null,Ke):(Y(h.ec,h.fc,te,ie,$e,Ae,De,Pe,de,Se,Ee,ue,D,z-C.A,D,z,Ke),++v);Be+2<qe;Be+=2)$e=de,Ae=Se,De=Ee,Pe=ue,Se+=m.Rc,ue+=m.Rc,z+=2*C.A,Y(te,(ie+=2*m.fa)-m.fa,te,ie,$e,Ae,De,Pe,de,Se,Ee,ue,D,z-C.A,D,z,Ke);return ie+=m.fa,m.j+qe<m.o?(a(h.ec,h.fc,te,ie,Ke),a(h.cc,h.dc,de,Se,He),a(h.Mc,h.Nc,Ee,ue,He),v--):1&qe||Y(te,ie,null,null,de,Se,Ee,ue,de,Se,Ee,ue,D,z+C.A,null,null,Ke),v}function _t(m,h,v){var C=m.F,D=[m.J];if(C!=null){var z=m.U,Y=h.ba.S,te=Y==Ql||Y==eo;h=h.ba.f.RGBA;var ie=[0],de=m.ka;ie[0]=m.T,m.Kb&&(de==0?--ie[0]:(--de,D[0]-=m.width),m.j+m.ka+m.T==m.o&&(ie[0]=m.o-m.j-de));var Se=h.eb;de=h.fb+de*h.A,m=mm(C,D[0],m.width,z,ie,Se,de+(te?0:3),h.A),s(v==ie),m&&xt(Y)&&Mi(Se,de,te,z,ie,h.A)}return 0}function It(m){var h=m.ma,v=h.ba.S,C=11>v,D=v==Zl||v==Xl||v==Ql||v==Hc||v==12||xt(v);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Li(h.Oa,m,D?11:12))return 0;if(D&&xt(v)&&Hl(),m.da)alert("todo:use_scaling");else{if(C){if(h.Ib=st,m.Kb){if(v=m.U+1>>1,h.memory=i(m.U+2*v),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+m.U,h.Mc=h.cc,h.Nc=h.dc+v,h.Ib=nt,Hl()}}else alert("todo:EmitYUV");D&&(h.Jb=_t,C&&br())}if(C&&!_m){for(m=0;256>m;++m)Ap[m]=89858*(m-128)+so>>to,Ep[m]=-22014*(m-128)+so,Lp[m]=-45773*(m-128),Pp[m]=113618*(m-128)+so>>to;for(m=Ui;m<Zc;++m)h=76283*(m-16)+so>>to,Tp[m-Ui]=as(h,255),Ip[m-Ui]=as(h+8>>4,15);_m=1}return 1}function tt(m){var h=m.ma,v=m.U,C=m.T;return s(!(1&m.ka)),0>=v||0>=C?0:(v=h.Ib(m,h),h.Jb!=null&&h.Jb(m,h,v),h.Dc+=v,1)}function Qt(m){m.ma.memory=null}function xr(m,h,v,C){return X(m,8)!=47?0:(h[0]=X(m,14)+1,v[0]=X(m,14)+1,C[0]=X(m,1),X(m,3)!=0?0:!m.h)}function Js(m,h){if(4>m)return m+1;var v=m-2>>1;return(2+(1&m)<<v)+X(h,v)+1}function fr(m,h){return 120<h?h-120:1<=(v=((v=fp[h-1])>>4)*m+(8-(15&v)))?v:1;var v}function rs(m,h,v){var C=T(v),D=m[h+=255&C].g-8;return 0<D&&(F(v,v.u+8),C=T(v),h+=m[h].value,h+=C&(1<<D)-1),F(v,v.u+m[h].g),m[h].value}function $s(m,h,v){return v.g+=m.g,v.value+=m.value<<h>>>0,s(8>=v.g),m.g}function _s(m,h,v){var C=m.xc;return s((h=C==0?0:m.vc[m.md*(v>>C)+(h>>C)])<m.Wb),m.Ya[h]}function Wa(m,h,v,C){var D=m.ab,z=m.c*h,Y=m.C;h=Y+h;var te=v,ie=C;for(C=m.Ta,v=m.Ua;0<D--;){var de=m.gc[D],Se=Y,Ee=h,ue=te,$e=ie,Ae=(ie=C,te=v,de.Ea);switch(s(Se<Ee),s(Ee<=de.nc),de.hc){case 2:cs(ue,$e,(Ee-Se)*Ae,ie,te);break;case 0:var De=Se,Pe=Ee,Be=ie,qe=te,Ke=(lt=de).Ea;De==0&&(Ti(ue,$e,null,null,1,Be,qe),Ye(ue,$e+1,0,0,Ke-1,Be,qe+1),$e+=Ke,qe+=Ke,++De);for(var He=1<<lt.b,dt=He-1,rt=U(Ke,lt.b),Ct=lt.K,lt=lt.w+(De>>lt.b)*rt;De<Pe;){var At=Ct,ws=lt,$t=1;for(Dn(ue,$e,Be,qe-Ke,1,Be,qe);$t<Ke;){var ot=($t&~dt)+He;ot>Ke&&(ot=Ke),(0,Ri[At[ws++]>>8&15])(ue,$e+ +$t,Be,qe+$t-Ke,ot-$t,Be,qe+$t),$t=ot}$e+=Ke,qe+=Ke,++De&dt||(lt+=rt)}Ee!=de.nc&&a(ie,te-Ae,ie,te+(Ee-Se-1)*Ae,Ae);break;case 1:for(Ae=ue,Pe=$e,Ke=(ue=de.Ea)-(qe=ue&~(Be=($e=1<<de.b)-1)),De=U(ue,de.b),He=de.K,de=de.w+(Se>>de.b)*De;Se<Ee;){for(dt=He,rt=de,Ct=new ye,lt=Pe+qe,At=Pe+ue;Pe<lt;)Fe(dt[rt++],Ct),Fi(Ct,Ae,Pe,$e,ie,te),Pe+=$e,te+=$e;Pe<At&&(Fe(dt[rt++],Ct),Fi(Ct,Ae,Pe,Ke,ie,te),Pe+=Ke,te+=Ke),++Se&Be||(de+=De)}break;case 3:if(ue==ie&&$e==te&&0<de.b){for(Pe=ie,ue=Ae=te+(Ee-Se)*Ae-(qe=(Ee-Se)*U(de.Ea,de.b)),$e=ie,Be=te,De=[],qe=(Ke=qe)-1;0<=qe;--qe)De[qe]=$e[Be+qe];for(qe=Ke-1;0<=qe;--qe)Pe[ue+qe]=De[qe];Gl(de,Se,Ee,ie,Ae,ie,te)}else Gl(de,Se,Ee,ue,$e,ie,te)}te=C,ie=v}ie!=v&&a(C,v,te,ie,z)}function ba(m,h){var v=m.V,C=m.Ba+m.c*m.C,D=h-m.C;if(s(h<=m.l.o),s(16>=D),0<D){var z=m.l,Y=m.Ta,te=m.Ua,ie=z.width;if(Wa(m,D,v,C),D=te=[te],s((v=m.C)<(C=h)),s(z.v<z.va),C>z.o&&(C=z.o),v<z.j){var de=z.j-v;v=z.j,D[0]+=de*ie}if(v>=C?v=0:(D[0]+=4*z.v,z.ka=v-z.j,z.U=z.va-z.v,z.T=C-v,v=1),v){if(te=te[0],11>(v=m.ca).S){var Se=v.f.RGBA,Ee=(C=v.S,D=z.U,z=z.T,de=Se.eb,Se.A),ue=z;for(Se=Se.fb+m.Ma*Se.A;0<ue--;){var $e=Y,Ae=te,De=D,Pe=de,Be=Se;switch(C){case Yl:Oi($e,Ae,De,Pe,Be);break;case Zl:Ca($e,Ae,De,Pe,Be);break;case Vc:Ca($e,Ae,De,Pe,Be),Mi(Pe,Be,0,De,1,0);break;case ym:un($e,Ae,De,Pe,Be);break;case Xl:Ze($e,Ae,De,Pe,Be,1);break;case Gc:Ze($e,Ae,De,Pe,Be,1),Mi(Pe,Be,0,De,1,0);break;case Ql:Ze($e,Ae,De,Pe,Be,0);break;case eo:Ze($e,Ae,De,Pe,Be,0),Mi(Pe,Be,1,De,1,0);break;case Hc:$a($e,Ae,De,Pe,Be);break;case Jc:$a($e,Ae,De,Pe,Be),um(Pe,Be,De,1,0);break;case vm:ka($e,Ae,De,Pe,Be);break;default:s(0)}te+=ie,Se+=Ee}m.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");s(m.Ma<=v.height)}}m.C=h,s(m.C<=m.i)}function Sr(m){var h;if(0<m.ua)return 0;for(h=0;h<m.Wb;++h){var v=m.Ya[h].G,C=m.Ya[h].H;if(0<v[1][C[1]+0].g||0<v[2][C[2]+0].g||0<v[3][C[3]+0].g)return 0}return 1}function Br(m,h,v,C,D,z){if(m.Z!=0){var Y=m.qd,te=m.rd;for(s(Pa[m.Z]!=null);h<v;++h)Pa[m.Z](Y,te,C,D,C,D,z),Y=C,te=D,D+=z;m.qd=Y,m.rd=te}}function Cr(m,h){var v=m.l.ma,C=v.Z==0||v.Z==1?m.l.j:m.C;if(C=m.C<C?C:m.C,s(h<=m.l.o),h>C){var D=m.l.width,z=v.ca,Y=v.tb+D*C,te=m.V,ie=m.Ba+m.c*C,de=m.gc;s(m.ab==1),s(de[0].hc==3),Wr(de[0],C,h,te,ie,z,Y),Br(v,C,h,z,Y,D)}m.C=m.Ma=h}function $r(m,h,v,C,D,z,Y){var te=m.$/C,ie=m.$%C,de=m.m,Se=m.s,Ee=v+m.$,ue=Ee;D=v+C*D;var $e=v+C*z,Ae=280+Se.ua,De=m.Pb?te:16777216,Pe=0<Se.ua?Se.Wa:null,Be=Se.wc,qe=Ee<$e?_s(Se,ie,te):null;s(m.C<z),s($e<=D);var Ke=!1;e:for(;;){for(;Ke||Ee<$e;){var He=0;if(te>=De){var dt=Ee-v;s((De=m).Pb),De.wd=De.m,De.xd=dt,0<De.s.ua&&ze(De.s.Wa,De.s.vb),De=te+pp}if(ie&Be||(qe=_s(Se,ie,te)),s(qe!=null),qe.Qb&&(h[Ee]=qe.qb,Ke=!0),!Ke)if(J(de),qe.jc){He=de,dt=h;var rt=Ee,Ct=qe.pd[T(He)&dn-1];s(qe.jc),256>Ct.g?(F(He,He.u+Ct.g),dt[rt]=Ct.value,He=0):(F(He,He.u+Ct.g-256),s(256<=Ct.value),He=Ct.value),He==0&&(Ke=!0)}else He=rs(qe.G[0],qe.H[0],de);if(de.h)break;if(Ke||256>He){if(!Ke)if(qe.nd)h[Ee]=(qe.qb|He<<8)>>>0;else{if(J(de),Ke=rs(qe.G[1],qe.H[1],de),J(de),dt=rs(qe.G[2],qe.H[2],de),rt=rs(qe.G[3],qe.H[3],de),de.h)break;h[Ee]=(rt<<24|Ke<<16|He<<8|dt)>>>0}if(Ke=!1,++Ee,++ie>=C&&(ie=0,++te,Y!=null&&te<=z&&!(te%16)&&Y(m,te),Pe!=null))for(;ue<Ee;)He=h[ue++],Pe.X[(506832829*He&4294967295)>>>Pe.Mb]=He}else if(280>He){if(He=Js(He-256,de),dt=rs(qe.G[4],qe.H[4],de),J(de),dt=fr(C,dt=Js(dt,de)),de.h)break;if(Ee-v<dt||D-Ee<He)break e;for(rt=0;rt<He;++rt)h[Ee+rt]=h[Ee+rt-dt];for(Ee+=He,ie+=He;ie>=C;)ie-=C,++te,Y!=null&&te<=z&&!(te%16)&&Y(m,te);if(s(Ee<=D),ie&Be&&(qe=_s(Se,ie,te)),Pe!=null)for(;ue<Ee;)He=h[ue++],Pe.X[(506832829*He&4294967295)>>>Pe.Mb]=He}else{if(!(He<Ae))break e;for(Ke=He-280,s(Pe!=null);ue<Ee;)He=h[ue++],Pe.X[(506832829*He&4294967295)>>>Pe.Mb]=He;He=Ee,s(!(Ke>>>(dt=Pe).Xa)),h[He]=dt.X[Ke],Ke=!0}Ke||s(de.h==B(de))}if(m.Pb&&de.h&&Ee<D)s(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&ze(m.s.vb,m.s.Wa);else{if(de.h)break e;Y?.(m,te>z?z:te),m.a=0,m.$=Ee-v}return 1}return m.a=3,0}function gr(m){s(m!=null),m.vc=null,m.yc=null,m.Ya=null;var h=m.Wa;h!=null&&(h.X=null),m.vb=null,s(m!=null)}function Ha(){var m=new ct;return m==null?null:(m.a=0,m.xb=wm,mt("Predictor","VP8LPredictors"),mt("Predictor","VP8LPredictors_C"),mt("PredictorAdd","VP8LPredictorsAdd"),mt("PredictorAdd","VP8LPredictorsAdd_C"),cs=Ce,Fi=Xe,Oi=Oe,Ca=oe,$a=je,ka=Me,un=et,L.VP8LMapColor32b=zr,L.VP8LMapColor8b=Ii,m)}function Ur(m,h,v,C,D){var z=1,Y=[m],te=[h],ie=C.m,de=C.s,Se=null,Ee=0;e:for(;;){if(v)for(;z&&X(ie,1);){var ue=Y,$e=te,Ae=C,De=1,Pe=Ae.m,Be=Ae.gc[Ae.ab],qe=X(Pe,2);if(Ae.Oc&1<<qe)z=0;else{switch(Ae.Oc|=1<<qe,Be.hc=qe,Be.Ea=ue[0],Be.nc=$e[0],Be.K=[null],++Ae.ab,s(4>=Ae.ab),qe){case 0:case 1:Be.b=X(Pe,3)+2,De=Ur(U(Be.Ea,Be.b),U(Be.nc,Be.b),0,Ae,Be.K),Be.K=Be.K[0];break;case 3:var Ke,He=X(Pe,8)+1,dt=16<He?0:4<He?1:2<He?2:3;if(ue[0]=U(Be.Ea,dt),Be.b=dt,Ke=De=Ur(He,1,0,Ae,Be.K)){var rt,Ct=He,lt=Be,At=1<<(8>>lt.b),ws=i(At);if(ws==null)Ke=0;else{var $t=lt.K[0],ot=lt.w;for(ws[0]=lt.K[0][0],rt=1;rt<1*Ct;++rt)ws[rt]=xe($t[ot+rt],ws[rt-1]);for(;rt<4*At;++rt)ws[rt]=0;lt.K[0]=null,lt.K[0]=ws,Ke=1}}De=Ke;break;case 2:break;default:s(0)}z=De}}if(Y=Y[0],te=te[0],z&&X(ie,1)&&!(z=1<=(Ee=X(ie,4))&&11>=Ee)){C.a=3;break e}var Qe;if(Qe=z)t:{var us,wt,Pt,Yt=C,Ps=Y,Us=te,ns=Ee,Rs=v,qs=Yt.m,Ss=Yt.s,Tt=[null],Mt=1,is=0,Bt=gp[ns];s:for(;;){if(Rs&&X(qs,1)){var Ls=X(qs,3)+2,Ar=U(Ps,Ls),ms=U(Us,Ls),Ys=Ar*ms;if(!Ur(Ar,ms,0,Yt,Tt))break s;for(Tt=Tt[0],Ss.xc=Ls,us=0;us<Ys;++us){var Wt=Tt[us]>>8&65535;Tt[us]=Wt,Wt>=Mt&&(Mt=Wt+1)}}if(qs.h)break s;for(wt=0;5>wt;++wt){var Cs=jm[wt];!wt&&0<ns&&(Cs+=1<<ns),is<Cs&&(is=Cs)}var ir=l(Mt*Bt,Z),zs=Mt,lr=l(zs,re);if(lr==null)var or=null;else s(65536>=zs),or=lr;var Zs=i(is);if(or==null||Zs==null||ir==null){Yt.a=1;break s}var cr=ir;for(us=Pt=0;us<Mt;++us){var Gt=or[us],dr=Gt.G,Pr=Gt.H,hn=0,ca=1,Es=0;for(wt=0;5>wt;++wt){Cs=jm[wt],dr[wt]=cr,Pr[wt]=Pt,!wt&&0<ns&&(Cs+=1<<ns);a:{var ao,Xc=Cs,no=Yt,qi=Zs,Op=cr,Dp=Pt,Qc=0,La=no.m,Mp=X(La,1);if(n(qi,0,0,Xc),Mp){var Bp=X(La,1)+1,Up=X(La,1),Lm=X(La,Up==0?1:8);qi[Lm]=1,Bp==2&&(qi[Lm=X(La,8)]=1);var io=1}else{var Em=i(19),Tm=X(La,4)+4;if(19<Tm){no.a=3;var lo=0;break a}for(ao=0;ao<Tm;++ao)Em[xp[ao]]=X(La,3);var ed=void 0,zi=void 0,Im=no,qp=Em,oo=Xc,Rm=qi,td=0,Ea=Im.m,Fm=8,Om=l(128,Z);r:for(;R(Om,0,7,qp,19);){if(X(Ea,1)){var zp=2+2*X(Ea,3);if((ed=2+X(Ea,zp))>oo)break r}else ed=oo;for(zi=0;zi<oo&&ed--;){J(Ea);var Dm=Om[0+(127&T(Ea))];F(Ea,Ea.u+Dm.g);var Bn=Dm.value;if(16>Bn)Rm[zi++]=Bn,Bn!=0&&(Fm=Bn);else{var Wp=Bn==16,Mm=Bn-16,Hp=mp[Mm],Bm=X(Ea,up[Mm])+Hp;if(zi+Bm>oo)break r;for(var Vp=Wp?Fm:0;0<Bm--;)Rm[zi++]=Vp}}td=1;break r}td||(Im.a=3),io=td}(io=io&&!La.h)&&(Qc=R(Op,Dp,8,qi,Xc)),io&&Qc!=0?lo=Qc:(no.a=3,lo=0)}if(lo==0)break s;if(ca&&hp[wt]==1&&(ca=cr[Pt].g==0),hn+=cr[Pt].g,Pt+=lo,3>=wt){var Wi,sd=Zs[0];for(Wi=1;Wi<Cs;++Wi)Zs[Wi]>sd&&(sd=Zs[Wi]);Es+=sd}}if(Gt.nd=ca,Gt.Qb=0,ca&&(Gt.qb=(dr[3][Pr[3]+0].value<<24|dr[1][Pr[1]+0].value<<16|dr[2][Pr[2]+0].value)>>>0,hn==0&&256>dr[0][Pr[0]+0].value&&(Gt.Qb=1,Gt.qb+=dr[0][Pr[0]+0].value<<8)),Gt.jc=!Gt.Qb&&6>Es,Gt.jc){var co,da=Gt;for(co=0;co<dn;++co){var Ta=co,Ia=da.pd[Ta],uo=da.G[0][da.H[0]+Ta];256<=uo.value?(Ia.g=uo.g+256,Ia.value=uo.value):(Ia.g=0,Ia.value=0,Ta>>=$s(uo,8,Ia),Ta>>=$s(da.G[1][da.H[1]+Ta],16,Ia),Ta>>=$s(da.G[2][da.H[2]+Ta],0,Ia),$s(da.G[3][da.H[3]+Ta],24,Ia))}}}Ss.vc=Tt,Ss.Wb=Mt,Ss.Ya=or,Ss.yc=ir,Qe=1;break t}Qe=0}if(!(z=Qe)){C.a=3;break e}if(0<Ee){if(de.ua=1<<Ee,!K(de.Wa,Ee)){C.a=1,z=0;break e}}else de.ua=0;var rd=C,Um=Y,Gp=te,ad=rd.s,nd=ad.xc;if(rd.c=Um,rd.i=Gp,ad.md=U(Um,nd),ad.wc=nd==0?-1:(1<<nd)-1,v){C.xb=Sp;break e}if((Se=i(Y*te))==null){C.a=1,z=0;break e}z=(z=$r(C,Se,0,Y,te,te,null))&&!ie.h;break e}return z?(D!=null?D[0]=Se:(s(Se==null),s(v)),C.$=0,v||gr(de)):gr(de),z}function Va(m,h){var v=m.c*m.i,C=v+h+16*h;return s(m.c<=h),m.V=i(C),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+v+h,1)}function _n(m,h){var v=m.C,C=h-v,D=m.V,z=m.Ba+m.c*v;for(s(h<=m.l.o);0<C;){var Y=16<C?16:C,te=m.l.ma,ie=m.l.width,de=ie*Y,Se=te.ca,Ee=te.tb+ie*v,ue=m.Ta,$e=m.Ua;Wa(m,Y,D,z),hm(ue,$e,Se,Ee,de),Br(te,v,v+Y,Se,Ee,ie),C-=Y,D+=Y*m.c,v+=Y}s(v==h),m.C=m.Ma=h}function An(){this.ub=this.yd=this.td=this.Rb=0}function Pn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _c(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function pi(){this.Yb=(function(){var m=[];return(function h(v,C,D){for(var z=D[C],Y=0;Y<z&&(v.push(D.length>C+1?[]:0),!(D.length<C+1));Y++)h(v[Y],C+1,D)})(m,0,[3,11]),m})()}function Pl(){this.jb=i(3),this.Wc=o([4,8],pi),this.Xc=o([4,17],pi)}function Ll(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function pr(){this.ld=this.La=this.dd=this.tc=0}function bi(){this.Na=this.la=0}function El(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yi(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Tl(){this.uc=this.M=this.Nb=0,this.wa=Array(new pr),this.Y=0,this.ya=Array(new yi),this.aa=0,this.l=new Ln}function Il(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Rl(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new An,this.Kc=new Pn,this.ed=new Ll,this.Qa=new _c,this.Ic=this.$c=this.Aa=0,this.D=new Tl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,k),this.ia=0,this.pb=l(4,El),this.Pa=new Pl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Il),this.Hd=0,this.rb=Array(new bi),this.sb=0,this.wa=Array(new pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yi),this.L=this.aa=0,this.gd=o([4,2],pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ln(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ac(){var m=new Rl;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Bi||(Bi=ea)),m}function ps(m,h,v){return m.a==0&&(m.a=h,m.sc=v,m.cb=0),0}function Fl(m,h,v){return 3<=v&&m[h+0]==157&&m[h+1]==1&&m[h+2]==42}function Ol(m,h){if(m==null)return 0;if(m.a=0,m.sc="OK",h==null)return ps(m,2,"null VP8Io passed to VP8GetHeaders()");var v=h.data,C=h.w,D=h.ha;if(4>D)return ps(m,7,"Truncated header.");var z=v[C+0]|v[C+1]<<8|v[C+2]<<16,Y=m.Od;if(Y.Rb=!(1&z),Y.td=z>>1&7,Y.yd=z>>4&1,Y.ub=z>>5,3<Y.td)return ps(m,3,"Incorrect keyframe parameters.");if(!Y.yd)return ps(m,4,"Frame not displayable.");C+=3,D-=3;var te=m.Kc;if(Y.Rb){if(7>D)return ps(m,7,"cannot parse picture header");if(!Fl(v,C,D))return ps(m,3,"Bad code word");te.c=16383&(v[C+4]<<8|v[C+3]),te.Td=v[C+4]>>6,te.i=16383&(v[C+6]<<8|v[C+5]),te.Ud=v[C+6]>>6,C+=7,D-=7,m.za=te.c+15>>4,m.Ub=te.i+15>>4,h.width=te.c,h.height=te.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,n((z=m.Pa).jb,0,255,z.jb.length),s((z=m.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,n(z.Zb,0,0,z.Zb.length),n(z.Lb,0,0,z.Lb)}if(Y.ub>D)return ps(m,7,"bad partition length");ee(z=m.m,v,C,Y.ub),C+=Y.ub,D-=Y.ub,Y.Rb&&(te.Ld=le(z),te.Kd=le(z)),te=m.Qa;var ie,de=m.Pa;if(s(z!=null),s(te!=null),te.Cb=le(z),te.Cb){if(te.Bb=le(z),le(z)){for(te.Fb=le(z),ie=0;4>ie;++ie)te.Zb[ie]=le(z)?G(z,7):0;for(ie=0;4>ie;++ie)te.Lb[ie]=le(z)?G(z,6):0}if(te.Bb)for(ie=0;3>ie;++ie)de.jb[ie]=le(z)?ge(z,8):255}else te.Bb=0;if(z.Ka)return ps(m,3,"cannot parse segment header");if((te=m.ed).zd=le(z),te.Tb=ge(z,6),te.wb=ge(z,3),te.Pc=le(z),te.Pc&&le(z)){for(de=0;4>de;++de)le(z)&&(te.vd[de]=G(z,6));for(de=0;4>de;++de)le(z)&&(te.od[de]=G(z,6))}if(m.L=te.Tb==0?0:te.zd?1:2,z.Ka)return ps(m,3,"cannot parse filter header");var Se=D;if(D=ie=C,C=ie+Se,te=Se,m.Xb=(1<<ge(m.m,2))-1,Se<3*(de=m.Xb))v=7;else{for(ie+=3*de,te-=3*de,Se=0;Se<de;++Se){var Ee=v[D+0]|v[D+1]<<8|v[D+2]<<16;Ee>te&&(Ee=te),ee(m.Jc[+Se],v,ie,Ee),ie+=Ee,te-=Ee,D+=3}ee(m.Jc[+de],v,ie,te),v=ie<C?0:5}if(v!=0)return ps(m,v,"cannot parse partitions");for(v=ge(ie=m.m,7),D=le(ie)?G(ie,4):0,C=le(ie)?G(ie,4):0,te=le(ie)?G(ie,4):0,de=le(ie)?G(ie,4):0,ie=le(ie)?G(ie,4):0,Se=m.Qa,Ee=0;4>Ee;++Ee){if(Se.Cb){var ue=Se.Zb[Ee];Se.Fb||(ue+=v)}else{if(0<Ee){m.pb[Ee]=m.pb[0];continue}ue=v}var $e=m.pb[Ee];$e.Sc[0]=Kc[as(ue+D,127)],$e.Sc[1]=Yc[as(ue+0,127)],$e.Eb[0]=2*Kc[as(ue+C,127)],$e.Eb[1]=101581*Yc[as(ue+te,127)]>>16,8>$e.Eb[1]&&($e.Eb[1]=8),$e.Qc[0]=Kc[as(ue+de,117)],$e.Qc[1]=Yc[as(ue+ie,127)],$e.lc=ue+ie}if(!Y.Rb)return ps(m,4,"Not a key frame.");for(le(z),Y=m.Pa,v=0;4>v;++v){for(D=0;8>D;++D)for(C=0;3>C;++C)for(te=0;11>te;++te)de=he(z,Np[v][D][C][te])?ge(z,8):vp[v][D][C][te],Y.Wc[v][D].Yb[C][te]=de;for(D=0;17>D;++D)Y.Xc[v][D]=Y.Wc[v][wp[D]]}return m.kc=le(z),m.kc&&(m.Bd=ge(z,8)),m.cb=1}function ea(m,h,v,C,D,z,Y){var te=h[D].Yb[v];for(v=0;16>D;++D){if(!he(m,te[v+0]))return D;for(;!he(m,te[v+1]);)if(te=h[++D].Yb[0],v=0,D==16)return 16;var ie=h[D+1].Yb;if(he(m,te[v+2])){var de=m,Se=0;if(he(de,(ue=te)[(Ee=v)+3]))if(he(de,ue[Ee+6])){for(te=0,Ee=2*(Se=he(de,ue[Ee+8]))+(ue=he(de,ue[Ee+9+Se])),Se=0,ue=bp[Ee];ue[te];++te)Se+=Se+he(de,ue[te]);Se+=3+(8<<Ee)}else he(de,ue[Ee+7])?(Se=7+2*he(de,165),Se+=he(de,145)):Se=5+he(de,159);else Se=he(de,ue[Ee+4])?3+he(de,ue[Ee+5]):2;te=ie[2]}else Se=1,te=ie[1];ie=Y+yp[D],0>(de=m).b&&W(de);var Ee,ue=de.b,$e=(Ee=de.Ca>>1)-(de.I>>ue)>>31;--de.b,de.Ca+=$e,de.Ca|=1,de.I-=(Ee+1&$e)<<ue,z[ie]=((Se^$e)-$e)*C[(0<D)+0]}return 16}function Ga(m){var h=m.rb[m.sb-1];h.la=0,h.Na=0,n(m.zc,0,0,m.zc.length),m.ja=0}function kr(m,h,v,C,D){D=m[h+v+32*C]+(D>>3),m[h+v+32*C]=-256&D?0>D?0:255:D}function Ja(m,h,v,C,D,z){kr(m,h,0,v,C+D),kr(m,h,1,v,C+z),kr(m,h,2,v,C-z),kr(m,h,3,v,C-D)}function os(m){return(20091*m>>16)+m}function vi(m,h,v,C){var D,z=0,Y=i(16);for(D=0;4>D;++D){var te=m[h+0]+m[h+8],ie=m[h+0]-m[h+8],de=(35468*m[h+4]>>16)-os(m[h+12]),Se=os(m[h+4])+(35468*m[h+12]>>16);Y[z+0]=te+Se,Y[z+1]=ie+de,Y[z+2]=ie-de,Y[z+3]=te-Se,z+=4,h++}for(D=z=0;4>D;++D)te=(m=Y[z+0]+4)+Y[z+8],ie=m-Y[z+8],de=(35468*Y[z+4]>>16)-os(Y[z+12]),kr(v,C,0,0,te+(Se=os(Y[z+4])+(35468*Y[z+12]>>16))),kr(v,C,1,0,ie+de),kr(v,C,2,0,ie-de),kr(v,C,3,0,te-Se),z++,C+=32}function Pc(m,h,v,C){var D=m[h+0]+4,z=35468*m[h+4]>>16,Y=os(m[h+4]),te=35468*m[h+1]>>16;Ja(v,C,0,D+Y,m=os(m[h+1]),te),Ja(v,C,1,D+z,m,te),Ja(v,C,2,D-z,m,te),Ja(v,C,3,D-Y,m,te)}function Lc(m,h,v,C,D){vi(m,h,v,C),D&&vi(m,h+16,v,C+4)}function Ec(m,h,v,C){mn(m,h+0,v,C,1),mn(m,h+32,v,C+128,1)}function qr(m,h,v,C){var D;for(m=m[h+0]+4,D=0;4>D;++D)for(h=0;4>h;++h)kr(v,C,h,D,m)}function Dl(m,h,v,C){m[h+0]&&Ft(m,h+0,v,C),m[h+16]&&Ft(m,h+16,v,C+4),m[h+32]&&Ft(m,h+32,v,C+128),m[h+48]&&Ft(m,h+48,v,C+128+4)}function Ml(m,h,v,C){var D,z=i(16);for(D=0;4>D;++D){var Y=m[h+0+D]+m[h+12+D],te=m[h+4+D]+m[h+8+D],ie=m[h+4+D]-m[h+8+D],de=m[h+0+D]-m[h+12+D];z[0+D]=Y+te,z[8+D]=Y-te,z[4+D]=de+ie,z[12+D]=de-ie}for(D=0;4>D;++D)Y=(m=z[0+4*D]+3)+z[3+4*D],te=z[1+4*D]+z[2+4*D],ie=z[1+4*D]-z[2+4*D],de=m-z[3+4*D],v[C+0]=Y+te>>3,v[C+16]=de+ie>>3,v[C+32]=Y-te>>3,v[C+48]=de-ie>>3,C+=64}function ya(m,h,v){var C,D=h-32,z=nr,Y=255-m[D-1];for(C=0;C<v;++C){var te,ie=z,de=Y+m[h-1];for(te=0;te<v;++te)m[h+te]=ie[de+m[D+te]];h+=32}}function ji(m,h){ya(m,h,4)}function Tc(m,h){ya(m,h,8)}function Ic(m,h){ya(m,h,16)}function Rc(m,h){var v;for(v=0;16>v;++v)a(m,h+32*v,m,h-32,16)}function Ni(m,h){var v;for(v=16;0<v;--v)n(m,h,m[h-1],16),h+=32}function Ka(m,h,v){var C;for(C=0;16>C;++C)n(h,v+32*C,m,16)}function va(m,h){var v,C=16;for(v=0;16>v;++v)C+=m[h-1+32*v]+m[h+v-32];Ka(C>>5,m,h)}function Fc(m,h){var v,C=8;for(v=0;16>v;++v)C+=m[h-1+32*v];Ka(C>>4,m,h)}function Ya(m,h){var v,C=8;for(v=0;16>v;++v)C+=m[h+v-32];Ka(C>>4,m,h)}function wi(m,h){Ka(128,m,h)}function yt(m,h,v){return m+2*h+v+2>>2}function Oc(m,h){var v,C=h-32;for(C=new Uint8Array([yt(m[C-1],m[C+0],m[C+1]),yt(m[C+0],m[C+1],m[C+2]),yt(m[C+1],m[C+2],m[C+3]),yt(m[C+2],m[C+3],m[C+4])]),v=0;4>v;++v)a(m,h+32*v,C,0,C.length)}function Dc(m,h){var v=m[h-1],C=m[h-1+32],D=m[h-1+64],z=m[h-1+96];se(m,h+0,16843009*yt(m[h-1-32],v,C)),se(m,h+32,16843009*yt(v,C,D)),se(m,h+64,16843009*yt(C,D,z)),se(m,h+96,16843009*yt(D,z,z))}function Mc(m,h){var v,C=4;for(v=0;4>v;++v)C+=m[h+v-32]+m[h-1+32*v];for(C>>=3,v=0;4>v;++v)n(m,h+32*v,C,4)}function Bc(m,h){var v=m[h-1+0],C=m[h-1+32],D=m[h-1+64],z=m[h-1-32],Y=m[h+0-32],te=m[h+1-32],ie=m[h+2-32],de=m[h+3-32];m[h+0+96]=yt(C,D,m[h-1+96]),m[h+1+96]=m[h+0+64]=yt(v,C,D),m[h+2+96]=m[h+1+64]=m[h+0+32]=yt(z,v,C),m[h+3+96]=m[h+2+64]=m[h+1+32]=m[h+0+0]=yt(Y,z,v),m[h+3+64]=m[h+2+32]=m[h+1+0]=yt(te,Y,z),m[h+3+32]=m[h+2+0]=yt(ie,te,Y),m[h+3+0]=yt(de,ie,te)}function ta(m,h){var v=m[h+1-32],C=m[h+2-32],D=m[h+3-32],z=m[h+4-32],Y=m[h+5-32],te=m[h+6-32],ie=m[h+7-32];m[h+0+0]=yt(m[h+0-32],v,C),m[h+1+0]=m[h+0+32]=yt(v,C,D),m[h+2+0]=m[h+1+32]=m[h+0+64]=yt(C,D,z),m[h+3+0]=m[h+2+32]=m[h+1+64]=m[h+0+96]=yt(D,z,Y),m[h+3+32]=m[h+2+64]=m[h+1+96]=yt(z,Y,te),m[h+3+64]=m[h+2+96]=yt(Y,te,ie),m[h+3+96]=yt(te,ie,ie)}function sa(m,h){var v=m[h-1+0],C=m[h-1+32],D=m[h-1+64],z=m[h-1-32],Y=m[h+0-32],te=m[h+1-32],ie=m[h+2-32],de=m[h+3-32];m[h+0+0]=m[h+1+64]=z+Y+1>>1,m[h+1+0]=m[h+2+64]=Y+te+1>>1,m[h+2+0]=m[h+3+64]=te+ie+1>>1,m[h+3+0]=ie+de+1>>1,m[h+0+96]=yt(D,C,v),m[h+0+64]=yt(C,v,z),m[h+0+32]=m[h+1+96]=yt(v,z,Y),m[h+1+32]=m[h+2+96]=yt(z,Y,te),m[h+2+32]=m[h+3+96]=yt(Y,te,ie),m[h+3+32]=yt(te,ie,de)}function Uc(m,h){var v=m[h+0-32],C=m[h+1-32],D=m[h+2-32],z=m[h+3-32],Y=m[h+4-32],te=m[h+5-32],ie=m[h+6-32],de=m[h+7-32];m[h+0+0]=v+C+1>>1,m[h+1+0]=m[h+0+64]=C+D+1>>1,m[h+2+0]=m[h+1+64]=D+z+1>>1,m[h+3+0]=m[h+2+64]=z+Y+1>>1,m[h+0+32]=yt(v,C,D),m[h+1+32]=m[h+0+96]=yt(C,D,z),m[h+2+32]=m[h+1+96]=yt(D,z,Y),m[h+3+32]=m[h+2+96]=yt(z,Y,te),m[h+3+64]=yt(Y,te,ie),m[h+3+96]=yt(te,ie,de)}function qc(m,h){var v=m[h-1+0],C=m[h-1+32],D=m[h-1+64],z=m[h-1+96];m[h+0+0]=v+C+1>>1,m[h+2+0]=m[h+0+32]=C+D+1>>1,m[h+2+32]=m[h+0+64]=D+z+1>>1,m[h+1+0]=yt(v,C,D),m[h+3+0]=m[h+1+32]=yt(C,D,z),m[h+3+32]=m[h+1+64]=yt(D,z,z),m[h+3+64]=m[h+2+64]=m[h+0+96]=m[h+1+96]=m[h+2+96]=m[h+3+96]=z}function En(m,h){var v=m[h-1+0],C=m[h-1+32],D=m[h-1+64],z=m[h-1+96],Y=m[h-1-32],te=m[h+0-32],ie=m[h+1-32],de=m[h+2-32];m[h+0+0]=m[h+2+32]=v+Y+1>>1,m[h+0+32]=m[h+2+64]=C+v+1>>1,m[h+0+64]=m[h+2+96]=D+C+1>>1,m[h+0+96]=z+D+1>>1,m[h+3+0]=yt(te,ie,de),m[h+2+0]=yt(Y,te,ie),m[h+1+0]=m[h+3+32]=yt(v,Y,te),m[h+1+32]=m[h+3+64]=yt(C,v,Y),m[h+1+64]=m[h+3+96]=yt(D,C,v),m[h+1+96]=yt(z,D,C)}function Si(m,h){var v;for(v=0;8>v;++v)a(m,h+32*v,m,h-32,8)}function Za(m,h){var v;for(v=0;8>v;++v)n(m,h,m[h-1],8),h+=32}function Tn(m,h,v){var C;for(C=0;8>C;++C)n(h,v+32*C,m,8)}function In(m,h){var v,C=8;for(v=0;8>v;++v)C+=m[h+v-32]+m[h-1+32*v];Tn(C>>4,m,h)}function zc(m,h){var v,C=4;for(v=0;8>v;++v)C+=m[h+v-32];Tn(C>>3,m,h)}function Ci(m,h){var v,C=4;for(v=0;8>v;++v)C+=m[h-1+32*v];Tn(C>>3,m,h)}function $i(m,h){Tn(128,m,h)}function Xa(m,h,v){var C=m[h-v],D=m[h+0],z=3*(D-C)+Wc[1020+m[h-2*v]-m[h+v]],Y=Kl[112+(z+4>>3)];m[h-v]=nr[255+C+Kl[112+(z+3>>3)]],m[h+0]=nr[255+D-Y]}function Qa(m,h,v,C){var D=m[h+0],z=m[h+v];return jr[255+m[h-2*v]-m[h-v]]>C||jr[255+z-D]>C}function ki(m,h,v,C){return 4*jr[255+m[h-v]-m[h+0]]+jr[255+m[h-2*v]-m[h+v]]<=C}function Rn(m,h,v,C,D){var z=m[h-3*v],Y=m[h-2*v],te=m[h-v],ie=m[h+0],de=m[h+v],Se=m[h+2*v],Ee=m[h+3*v];return 4*jr[255+te-ie]+jr[255+Y-de]>C?0:jr[255+m[h-4*v]-z]<=D&&jr[255+z-Y]<=D&&jr[255+Y-te]<=D&&jr[255+Ee-Se]<=D&&jr[255+Se-de]<=D&&jr[255+de-ie]<=D}function _i(m,h,v,C){var D=2*C+1;for(C=0;16>C;++C)ki(m,h+C,v,D)&&Xa(m,h+C,v)}function en(m,h,v,C){var D=2*C+1;for(C=0;16>C;++C)ki(m,h+C*v,1,D)&&Xa(m,h+C*v,1)}function Bl(m,h,v,C){var D;for(D=3;0<D;--D)_i(m,h+=4*v,v,C)}function Ul(m,h,v,C){var D;for(D=3;0<D;--D)en(m,h+=4,v,C)}function ra(m,h,v,C,D,z,Y,te){for(z=2*z+1;0<D--;){if(Rn(m,h,v,z,Y))if(Qa(m,h,v,te))Xa(m,h,v);else{var ie=m,de=h,Se=v,Ee=ie[de-2*Se],ue=ie[de-Se],$e=ie[de+0],Ae=ie[de+Se],De=ie[de+2*Se],Pe=27*(qe=Wc[1020+3*($e-ue)+Wc[1020+Ee-Ae]])+63>>7,Be=18*qe+63>>7,qe=9*qe+63>>7;ie[de-3*Se]=nr[255+ie[de-3*Se]+qe],ie[de-2*Se]=nr[255+Ee+Be],ie[de-Se]=nr[255+ue+Pe],ie[de+0]=nr[255+$e-Pe],ie[de+Se]=nr[255+Ae-Be],ie[de+2*Se]=nr[255+De-qe]}h+=C}}function aa(m,h,v,C,D,z,Y,te){for(z=2*z+1;0<D--;){if(Rn(m,h,v,z,Y))if(Qa(m,h,v,te))Xa(m,h,v);else{var ie=m,de=h,Se=v,Ee=ie[de-Se],ue=ie[de+0],$e=ie[de+Se],Ae=Kl[112+(4+(De=3*(ue-Ee))>>3)],De=Kl[112+(De+3>>3)],Pe=Ae+1>>1;ie[de-2*Se]=nr[255+ie[de-2*Se]+Pe],ie[de-Se]=nr[255+Ee+De],ie[de+0]=nr[255+ue-Ae],ie[de+Se]=nr[255+$e-Pe]}h+=C}}function ql(m,h,v,C,D,z){ra(m,h,v,1,16,C,D,z)}function zl(m,h,v,C,D,z){ra(m,h,1,v,16,C,D,z)}function tn(m,h,v,C,D,z){var Y;for(Y=3;0<Y;--Y)aa(m,h+=4*v,v,1,16,C,D,z)}function Wl(m,h,v,C,D,z){var Y;for(Y=3;0<Y;--Y)aa(m,h+=4,1,v,16,C,D,z)}function p(m,h,v,C,D,z,Y,te){ra(m,h,D,1,8,z,Y,te),ra(v,C,D,1,8,z,Y,te)}function O(m,h,v,C,D,z,Y,te){ra(m,h,1,D,8,z,Y,te),ra(v,C,1,D,8,z,Y,te)}function me(m,h,v,C,D,z,Y,te){aa(m,h+4*D,D,1,8,z,Y,te),aa(v,C+4*D,D,1,8,z,Y,te)}function we(m,h,v,C,D,z,Y,te){aa(m,h+4,1,D,8,z,Y,te),aa(v,C+4,1,D,8,z,Y,te)}function _e(){this.ba=new Et,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new be,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ue(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ge(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function it(){this.ua=0,this.Wa=new Ie,this.vb=new Ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new re,this.yc=new Z}function ct(){this.xb=this.a=0,this.l=new Ln,this.ca=new Et,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new it,this.ab=0,this.gc=l(4,Ge),this.Oc=0}function bt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ln,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function jt(m,h,v,C,D,z,Y){for(m=m==null?0:m[h+0],h=0;h<Y;++h)D[z+h]=m+v[C+h]&255,m=D[z+h]}function Rt(m,h,v,C,D,z,Y){var te;if(m==null)jt(null,null,v,C,D,z,Y);else for(te=0;te<Y;++te)D[z+te]=m[h+te]+v[C+te]&255}function ss(m,h,v,C,D,z,Y){if(m==null)jt(null,null,v,C,D,z,Y);else{var te,ie=m[h+0],de=ie,Se=ie;for(te=0;te<Y;++te)de=Se+(ie=m[h+te])-de,Se=v[C+te]+(-256&de?0>de?0:255:de)&255,de=ie,D[z+te]=Se}}function bs(m,h,v,C){var D=h.width,z=h.o;if(s(m!=null&&h!=null),0>v||0>=C||v+C>z)return null;if(!m.Cc){if(m.ga==null){var Y;if(m.ga=new bt,(Y=m.ga==null)||(Y=h.width*h.o,s(m.Gb.length==0),m.Gb=i(Y),m.Uc=0,m.Gb==null?Y=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,Y=1),Y=!Y),!Y){Y=m.ga;var te=m.Fa,ie=m.P,de=m.qc,Se=m.mb,Ee=m.nb,ue=ie+1,$e=de-1,Ae=Y.l;if(s(te!=null&&Se!=null&&h!=null),Pa[0]=null,Pa[1]=jt,Pa[2]=Rt,Pa[3]=ss,Y.ca=Se,Y.tb=Ee,Y.c=h.width,Y.i=h.height,s(0<Y.c&&0<Y.i),1>=de)h=0;else if(Y.$a=3&te[ie+0],Y.Z=te[ie+0]>>2&3,Y.Lc=te[ie+0]>>4&3,ie=te[ie+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ie)h=0;else if(Ae.put=tt,Ae.ac=It,Ae.bc=Qt,Ae.ma=Y,Ae.width=h.width,Ae.height=h.height,Ae.Da=h.Da,Ae.v=h.v,Ae.va=h.va,Ae.j=h.j,Ae.o=h.o,Y.$a)e:{s(Y.$a==1),h=Ha();t:for(;;){if(h==null){h=0;break e}if(s(Y!=null),Y.mc=h,h.c=Y.c,h.i=Y.i,h.l=Y.l,h.l.ma=Y,h.l.width=Y.c,h.l.height=Y.i,h.a=0,fe(h.m,te,ue,$e),!Ur(Y.c,Y.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Sr(h.s)?(Y.ic=1,te=h.c*h.i,h.Ta=null,h.Ua=0,h.V=i(te),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(Y.ic=0,h=Va(h,Y.c)),!h))break t;h=1;break e}Y.mc=null,h=0}else h=$e>=Y.c*Y.i;Y=!h}if(Y)return null;m.ga.Lc!=1?m.Ga=0:C=z-v}s(m.ga!=null),s(v+C<=z);e:{if(h=(te=m.ga).c,z=te.l.o,te.$a==0){if(ue=m.rc,$e=m.Vc,Ae=m.Fa,ie=m.P+1+v*h,de=m.mb,Se=m.nb+v*h,s(ie<=m.P+m.qc),te.Z!=0)for(s(Pa[te.Z]!=null),Y=0;Y<C;++Y)Pa[te.Z](ue,$e,Ae,ie,de,Se,h),ue=de,$e=Se,Se+=h,ie+=h;else for(Y=0;Y<C;++Y)a(de,Se,Ae,ie,h),ue=de,$e=Se,Se+=h,ie+=h;m.rc=ue,m.Vc=$e}else{if(s(te.mc!=null),h=v+C,s((Y=te.mc)!=null),s(h<=Y.i),Y.C>=h)h=1;else if(te.ic||br(),te.ic){te=Y.V,ue=Y.Ba,$e=Y.c;var De=Y.i,Pe=(Ae=1,ie=Y.$/$e,de=Y.$%$e,Se=Y.m,Ee=Y.s,Y.$),Be=$e*De,qe=$e*h,Ke=Ee.wc,He=Pe<qe?_s(Ee,de,ie):null;s(Pe<=Be),s(h<=De),s(Sr(Ee));t:for(;;){for(;!Se.h&&Pe<qe;){if(de&Ke||(He=_s(Ee,de,ie)),s(He!=null),J(Se),256>(De=rs(He.G[0],He.H[0],Se)))te[ue+Pe]=De,++Pe,++de>=$e&&(de=0,++ie<=h&&!(ie%16)&&Cr(Y,ie));else{if(!(280>De)){Ae=0;break t}De=Js(De-256,Se);var dt,rt=rs(He.G[4],He.H[4],Se);if(J(Se),!(Pe>=(rt=fr($e,rt=Js(rt,Se)))&&Be-Pe>=De)){Ae=0;break t}for(dt=0;dt<De;++dt)te[ue+Pe+dt]=te[ue+Pe+dt-rt];for(Pe+=De,de+=De;de>=$e;)de-=$e,++ie<=h&&!(ie%16)&&Cr(Y,ie);Pe<qe&&de&Ke&&(He=_s(Ee,de,ie))}s(Se.h==B(Se))}Cr(Y,ie>h?h:ie);break t}!Ae||Se.h&&Pe<Be?(Ae=0,Y.a=Se.h?5:3):Y.$=Pe,h=Ae}else h=$r(Y,Y.V,Y.Ba,Y.c,Y.i,h,_n);if(!h){C=0;break e}}v+C>=z&&(m.Cc=1),C=1}if(!C)return null;if(m.Cc&&((C=m.ga)!=null&&(C.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+v*D}function Vt(m,h,v,C,D,z){for(;0<D--;){var Y,te=m,ie=h+(v?1:0),de=m,Se=h+(v?0:3);for(Y=0;Y<C;++Y){var Ee=de[Se+4*Y];Ee!=255&&(Ee*=32897,te[ie+4*Y+0]=te[ie+4*Y+0]*Ee>>23,te[ie+4*Y+1]=te[ie+4*Y+1]*Ee>>23,te[ie+4*Y+2]=te[ie+4*Y+2]*Ee>>23)}h+=z}}function js(m,h,v,C,D){for(;0<C--;){var z;for(z=0;z<v;++z){var Y=m[h+2*z+0],te=15&(de=m[h+2*z+1]),ie=4369*te,de=(240&de|de>>4)*ie>>16;m[h+2*z+0]=(240&Y|Y>>4)*ie>>16&240|(15&Y|Y<<4)*ie>>16>>4&15,m[h+2*z+1]=240&de|te}h+=D}}function ys(m,h,v,C,D,z,Y,te){var ie,de,Se=255;for(de=0;de<D;++de){for(ie=0;ie<C;++ie){var Ee=m[h+ie];z[Y+4*ie]=Ee,Se&=Ee}h+=v,Y+=te}return Se!=255}function As(m,h,v,C,D){var z;for(z=0;z<D;++z)v[C+z]=m[h+z]>>8}function br(){Mi=Vt,um=js,mm=ys,hm=As}function Ks(m,h,v){L[m]=function(C,D,z,Y,te,ie,de,Se,Ee,ue,$e,Ae,De,Pe,Be,qe,Ke){var He,dt=Ke-1>>1,rt=te[ie+0]|de[Se+0]<<16,Ct=Ee[ue+0]|$e[Ae+0]<<16;s(C!=null);var lt=3*rt+Ct+131074>>2;for(h(C[D+0],255&lt,lt>>16,De,Pe),z!=null&&(lt=3*Ct+rt+131074>>2,h(z[Y+0],255&lt,lt>>16,Be,qe)),He=1;He<=dt;++He){var At=te[ie+He]|de[Se+He]<<16,ws=Ee[ue+He]|$e[Ae+He]<<16,$t=rt+At+Ct+ws+524296,ot=$t+2*(At+Ct)>>3;lt=ot+rt>>1,rt=($t=$t+2*(rt+ws)>>3)+At>>1,h(C[D+2*He-1],255&lt,lt>>16,De,Pe+(2*He-1)*v),h(C[D+2*He-0],255&rt,rt>>16,De,Pe+(2*He-0)*v),z!=null&&(lt=$t+Ct>>1,rt=ot+ws>>1,h(z[Y+2*He-1],255&lt,lt>>16,Be,qe+(2*He-1)*v),h(z[Y+2*He+0],255&rt,rt>>16,Be,qe+(2*He+0)*v)),rt=At,Ct=ws}1&Ke||(lt=3*rt+Ct+131074>>2,h(C[D+Ke-1],255&lt,lt>>16,De,Pe+(Ke-1)*v),z!=null&&(lt=3*Ct+rt+131074>>2,h(z[Y+Ke-1],255&lt,lt>>16,Be,qe+(Ke-1)*v)))}}function Hl(){Nr[Yl]=Cp,Nr[Zl]=Sm,Nr[ym]=$p,Nr[Xl]=Cm,Nr[Ql]=$m,Nr[Hc]=km,Nr[vm]=kp,Nr[Vc]=Sm,Nr[Gc]=Cm,Nr[eo]=$m,Nr[Jc]=km}function Fn(m){return m&-16384?0>m?0:255:m>>_p}function sn(m,h){return Fn((19077*m>>8)+(26149*h>>8)-14234)}function ja(m,h,v){return Fn((19077*m>>8)-(6419*h>>8)-(13320*v>>8)+8708)}function rn(m,h){return Fn((19077*m>>8)+(33050*h>>8)-17685)}function an(m,h,v,C,D){C[D+0]=sn(m,v),C[D+1]=ja(m,h,v),C[D+2]=rn(m,h)}function nn(m,h,v,C,D){C[D+0]=rn(m,h),C[D+1]=ja(m,h,v),C[D+2]=sn(m,v)}function Is(m,h,v,C,D){var z=ja(m,h,v);h=z<<3&224|rn(m,h)>>3,C[D+0]=248&sn(m,v)|z>>5,C[D+1]=h}function ln(m,h,v,C,D){var z=240&rn(m,h)|15;C[D+0]=240&sn(m,v)|ja(m,h,v)>>4,C[D+1]=z}function on(m,h,v,C,D){C[D+0]=255,an(m,h,v,C,D+1)}function Ai(m,h,v,C,D){nn(m,h,v,C,D),C[D+3]=255}function Pi(m,h,v,C,D){an(m,h,v,C,D),C[D+3]=255}function as(m,h){return 0>m?0:m>h?h:m}function na(m,h,v){L[m]=function(C,D,z,Y,te,ie,de,Se,Ee){for(var ue=Se+(-2&Ee)*v;Se!=ue;)h(C[D+0],z[Y+0],te[ie+0],de,Se),h(C[D+1],z[Y+0],te[ie+0],de,Se+v),D+=2,++Y,++ie,Se+=2*v;1&Ee&&h(C[D+0],z[Y+0],te[ie+0],de,Se)}}function On(m,h,v){return v==0?m==0?h==0?6:5:h==0?4:0:v}function Vl(m,h,v,C,D){switch(m>>>30){case 3:mn(h,v,C,D,0);break;case 2:vr(h,v,C,D);break;case 1:Ft(h,v,C,D)}}function yr(m,h){var v,C,D=h.M,z=h.Nb,Y=m.oc,te=m.pc+40,ie=m.oc,de=m.pc+584,Se=m.oc,Ee=m.pc+600;for(v=0;16>v;++v)Y[te+32*v-1]=129;for(v=0;8>v;++v)ie[de+32*v-1]=129,Se[Ee+32*v-1]=129;for(0<D?Y[te-1-32]=ie[de-1-32]=Se[Ee-1-32]=129:(n(Y,te-32-1,127,21),n(ie,de-32-1,127,9),n(Se,Ee-32-1,127,9)),C=0;C<m.za;++C){var ue=h.ya[h.aa+C];if(0<C){for(v=-1;16>v;++v)a(Y,te+32*v-4,Y,te+32*v+12,4);for(v=-1;8>v;++v)a(ie,de+32*v-4,ie,de+32*v+4,4),a(Se,Ee+32*v-4,Se,Ee+32*v+4,4)}var $e=m.Gd,Ae=m.Hd+C,De=ue.ad,Pe=ue.Hc;if(0<D&&(a(Y,te-32,$e[Ae].y,0,16),a(ie,de-32,$e[Ae].f,0,8),a(Se,Ee-32,$e[Ae].ea,0,8)),ue.Za){var Be=Y,qe=te-32+16;for(0<D&&(C>=m.za-1?n(Be,qe,$e[Ae].y[15],4):a(Be,qe,$e[Ae+1].y,0,4)),v=0;4>v;v++)Be[qe+128+v]=Be[qe+256+v]=Be[qe+384+v]=Be[qe+0+v];for(v=0;16>v;++v,Pe<<=2)Be=Y,qe=te+Am[v],_r[ue.Ob[v]](Be,qe),Vl(Pe,De,16*+v,Be,qe)}else if(Be=On(C,D,ue.Ob[0]),Aa[Be](Y,te),Pe!=0)for(v=0;16>v;++v,Pe<<=2)Vl(Pe,De,16*+v,Y,te+Am[v]);for(v=ue.Gc,Be=On(C,D,ue.Dd),oa[Be](ie,de),oa[Be](Se,Ee),Pe=De,Be=ie,qe=de,255&(ue=0|v)&&(170&ue?Hr(Pe,256,Be,qe):zt(Pe,256,Be,qe)),ue=Se,Pe=Ee,255&(v>>=8)&&(170&v?Hr(De,320,ue,Pe):zt(De,320,ue,Pe)),D<m.Ub-1&&(a($e[Ae].y,0,Y,te+480,16),a($e[Ae].f,0,ie,de+224,8),a($e[Ae].ea,0,Se,Ee+224,8)),v=8*z*m.B,$e=m.sa,Ae=m.ta+16*C+16*z*m.R,De=m.qa,ue=m.ra+8*C+v,Pe=m.Ha,Be=m.Ia+8*C+v,v=0;16>v;++v)a($e,Ae+v*m.R,Y,te+32*v,16);for(v=0;8>v;++v)a(De,ue+v*m.B,ie,de+32*v,8),a(Pe,Be+v*m.B,Se,Ee+32*v,8)}}function cn(m,h,v,C,D,z,Y,te,ie){var de=[0],Se=[0],Ee=0,ue=ie!=null?ie.kd:0,$e=ie??new Ue;if(m==null||12>v)return 7;$e.data=m,$e.w=h,$e.ha=v,h=[h],v=[v],$e.gb=[$e.gb];e:{var Ae=h,De=v,Pe=$e.gb;if(s(m!=null),s(De!=null),s(Pe!=null),Pe[0]=0,12<=De[0]&&!r(m,Ae[0],"RIFF")){if(r(m,Ae[0]+8,"WEBP")){Pe=3;break e}var Be=ce(m,Ae[0]+4);if(12>Be||4294967286<Be){Pe=3;break e}if(ue&&Be>De[0]-8){Pe=7;break e}Pe[0]=Be,Ae[0]+=12,De[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Be=0<$e.gb[0],v=v[0];;){e:{var qe=m;De=h,Pe=v;var Ke=de,He=Se,dt=Ae=[0];if((lt=Ee=[Ee])[0]=0,8>Pe[0])Pe=7;else{if(!r(qe,De[0],"VP8X")){if(ce(qe,De[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var rt=ce(qe,De[0]+8),Ct=1+E(qe,De[0]+12);if(2147483648<=Ct*(qe=1+E(qe,De[0]+15))){Pe=3;break e}dt!=null&&(dt[0]=rt),Ke!=null&&(Ke[0]=Ct),He!=null&&(He[0]=qe),De[0]+=18,Pe[0]-=18,lt[0]=1}Pe=0}}if(Ee=Ee[0],Ae=Ae[0],Pe!=0)return Pe;if(De=!!(2&Ae),!Be&&Ee)return 3;if(z!=null&&(z[0]=!!(16&Ae)),Y!=null&&(Y[0]=De),te!=null&&(te[0]=0),Y=de[0],Ae=Se[0],Ee&&De&&ie==null){Pe=0;break}if(4>v){Pe=7;break}if(Be&&Ee||!Be&&!Ee&&!r(m,h[0],"ALPH")){v=[v],$e.na=[$e.na],$e.P=[$e.P],$e.Sa=[$e.Sa];e:{rt=m,Pe=h,Be=v;var lt=$e.gb;Ke=$e.na,He=$e.P,dt=$e.Sa,Ct=22,s(rt!=null),s(Be!=null),qe=Pe[0];var At=Be[0];for(s(Ke!=null),s(dt!=null),Ke[0]=null,He[0]=null,dt[0]=0;;){if(Pe[0]=qe,Be[0]=At,8>At){Pe=7;break e}var ws=ce(rt,qe+4);if(4294967286<ws){Pe=3;break e}var $t=8+ws+1&-2;if(Ct+=$t,0<lt&&Ct>lt){Pe=3;break e}if(!r(rt,qe,"VP8 ")||!r(rt,qe,"VP8L")){Pe=0;break e}if(At[0]<$t){Pe=7;break e}r(rt,qe,"ALPH")||(Ke[0]=rt,He[0]=qe+8,dt[0]=ws),qe+=$t,At-=$t}}if(v=v[0],$e.na=$e.na[0],$e.P=$e.P[0],$e.Sa=$e.Sa[0],Pe!=0)break}v=[v],$e.Ja=[$e.Ja],$e.xa=[$e.xa];e:if(lt=m,Pe=h,Be=v,Ke=$e.gb[0],He=$e.Ja,dt=$e.xa,rt=Pe[0],qe=!r(lt,rt,"VP8 "),Ct=!r(lt,rt,"VP8L"),s(lt!=null),s(Be!=null),s(He!=null),s(dt!=null),8>Be[0])Pe=7;else{if(qe||Ct){if(lt=ce(lt,rt+4),12<=Ke&&lt>Ke-12){Pe=3;break e}if(ue&&lt>Be[0]-8){Pe=7;break e}He[0]=lt,Pe[0]+=8,Be[0]-=8,dt[0]=Ct}else dt[0]=5<=Be[0]&&lt[rt+0]==47&&!(lt[rt+4]>>5),He[0]=Be[0];Pe=0}if(v=v[0],$e.Ja=$e.Ja[0],$e.xa=$e.xa[0],h=h[0],Pe!=0)break;if(4294967286<$e.Ja)return 3;if(te==null||De||(te[0]=$e.xa?2:1),Y=[Y],Ae=[Ae],$e.xa){if(5>v){Pe=7;break}te=Y,ue=Ae,De=z,m==null||5>v?m=0:5<=v&&m[h+0]==47&&!(m[h+4]>>5)?(Be=[0],lt=[0],Ke=[0],fe(He=new q,m,h,v),xr(He,Be,lt,Ke)?(te!=null&&(te[0]=Be[0]),ue!=null&&(ue[0]=lt[0]),De!=null&&(De[0]=Ke[0]),m=1):m=0):m=0}else{if(10>v){Pe=7;break}te=Ae,m==null||10>v||!Fl(m,h+3,v-3)?m=0:(ue=m[h+0]|m[h+1]<<8|m[h+2]<<16,De=16383&(m[h+7]<<8|m[h+6]),m=16383&(m[h+9]<<8|m[h+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=$e.Ja||!De||!m?m=0:(Y&&(Y[0]=De),te&&(te[0]=m),m=1))}if(!m||(Y=Y[0],Ae=Ae[0],Ee&&(de[0]!=Y||Se[0]!=Ae)))return 3;ie!=null&&(ie[0]=$e,ie.offset=h-ie.w,s(4294967286>h-ie.w),s(ie.offset==ie.ha-v));break}return Pe==0||Pe==7&&Ee&&ie==null?(z!=null&&(z[0]|=$e.na!=null&&0<$e.na.length),C!=null&&(C[0]=Y),D!=null&&(D[0]=Ae),0):Pe}function Li(m,h,v){var C=h.width,D=h.height,z=0,Y=0,te=C,ie=D;if(h.Da=m!=null&&0<m.Da,h.Da&&(te=m.cd,ie=m.bd,z=m.v,Y=m.j,11>v||(z&=-2,Y&=-2),0>z||0>Y||0>=te||0>=ie||z+te>C||Y+ie>D))return 0;if(h.v=z,h.j=Y,h.va=z+te,h.o=Y+ie,h.U=te,h.T=ie,h.da=m!=null&&0<m.da,h.da){if(!Ne(te,ie,v=[m.ib],z=[m.hb]))return 0;h.ib=v[0],h.hb=z[0]}return h.ob=m!=null&&m.ob,h.Kb=m==null||!m.Sd,h.da&&(h.ob=h.ib<3*C/4&&h.hb<3*D/4,h.Kb=0),1}function Ei(m){if(m==null)return 2;if(11>m.S){var h=m.f.RGBA;h.fb+=(m.height-1)*h.A,h.A=-h.A}else h=m.f.kb,m=m.height,h.O+=(m-1)*h.fa,h.fa=-h.fa,h.N+=(m-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(m-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(m-1)*h.lb,h.lb=-h.lb);return 0}function Na(m,h,v,C){if(C==null||0>=m||0>=h)return 2;if(v!=null){if(v.Da){var D=v.cd,z=v.bd,Y=-2&v.v,te=-2&v.j;if(0>Y||0>te||0>=D||0>=z||Y+D>m||te+z>h)return 2;m=D,h=z}if(v.da){if(!Ne(m,h,D=[v.ib],z=[v.hb]))return 2;m=D[0],h=z[0]}}C.width=m,C.height=h;e:{var ie=C.width,de=C.height;if(m=C.S,0>=ie||0>=de||!(m>=Yl&&13>m))m=2;else{if(0>=C.Rd&&C.sd==null){Y=z=D=h=0;var Se=(te=ie*Pm[m])*de;if(11>m||(z=(de+1)/2*(h=(ie+1)/2),m==12&&(Y=(D=ie)*de)),(de=i(Se+2*z+Y))==null){m=1;break e}C.sd=de,11>m?((ie=C.f.RGBA).eb=de,ie.fb=0,ie.A=te,ie.size=Se):((ie=C.f.kb).y=de,ie.O=0,ie.fa=te,ie.Fd=Se,ie.f=de,ie.N=0+Se,ie.Ab=h,ie.Cd=z,ie.ea=de,ie.W=0+Se+z,ie.Db=h,ie.Ed=z,m==12&&(ie.F=de,ie.J=0+Se+2*z),ie.Tc=Y,ie.lb=D)}if(h=1,D=C.S,z=C.width,Y=C.height,D>=Yl&&13>D)if(11>D)m=C.f.RGBA,h&=(te=Math.abs(m.A))*(Y-1)+z<=m.size,h&=te>=z*Pm[D],h&=m.eb!=null;else{m=C.f.kb,te=(z+1)/2,Se=(Y+1)/2,ie=Math.abs(m.fa),de=Math.abs(m.Ab);var Ee=Math.abs(m.Db),ue=Math.abs(m.lb),$e=ue*(Y-1)+z;h&=ie*(Y-1)+z<=m.Fd,h&=de*(Se-1)+te<=m.Cd,h=(h&=Ee*(Se-1)+te<=m.Ed)&ie>=z&de>=te&Ee>=te,h&=m.y!=null,h&=m.f!=null,h&=m.ea!=null,D==12&&(h&=ue>=z,h&=$e<=m.Tc,h&=m.F!=null)}else h=0;m=h?0:2}}return m!=0||v!=null&&v.fd&&(m=Ei(C)),m}var dn=64,rr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ar=24,wa=32,ia=8,Sa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];H("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(m){return m},L.Predictor2=function(m,h,v){return h[v+0]},L.Predictor3=function(m,h,v){return h[v+1]},L.Predictor4=function(m,h,v){return h[v-1]},L.Predictor5=function(m,h,v){return pe(pe(m,h[v+1]),h[v+0])},L.Predictor6=function(m,h,v){return pe(m,h[v-1])},L.Predictor7=function(m,h,v){return pe(m,h[v+0])},L.Predictor8=function(m,h,v){return pe(h[v-1],h[v+0])},L.Predictor9=function(m,h,v){return pe(h[v+0],h[v+1])},L.Predictor10=function(m,h,v){return pe(pe(m,h[v-1]),pe(h[v+0],h[v+1]))},L.Predictor11=function(m,h,v){var C=h[v+0];return 0>=We(C>>24&255,m>>24&255,(h=h[v-1])>>24&255)+We(C>>16&255,m>>16&255,h>>16&255)+We(C>>8&255,m>>8&255,h>>8&255)+We(255&C,255&m,255&h)?C:m},L.Predictor12=function(m,h,v){var C=h[v+0];return(Le((m>>24&255)+(C>>24&255)-((h=h[v-1])>>24&255))<<24|Le((m>>16&255)+(C>>16&255)-(h>>16&255))<<16|Le((m>>8&255)+(C>>8&255)-(h>>8&255))<<8|Le((255&m)+(255&C)-(255&h)))>>>0},L.Predictor13=function(m,h,v){var C=h[v-1];return(Re((m=pe(m,h[v+0]))>>24&255,C>>24&255)<<24|Re(m>>16&255,C>>16&255)<<16|Re(m>>8&255,C>>8&255)<<8|Re(255&m,255&C))>>>0};var Ti=L.PredictorAdd0;L.PredictorAdd1=Ye,H("Predictor2","PredictorAdd2"),H("Predictor3","PredictorAdd3"),H("Predictor4","PredictorAdd4"),H("Predictor5","PredictorAdd5"),H("Predictor6","PredictorAdd6"),H("Predictor7","PredictorAdd7"),H("Predictor8","PredictorAdd8"),H("Predictor9","PredictorAdd9"),H("Predictor10","PredictorAdd10"),H("Predictor11","PredictorAdd11"),H("Predictor12","PredictorAdd12"),H("Predictor13","PredictorAdd13");var Dn=L.PredictorAdd2;ae("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),ae("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var cs,Gl=L.ColorIndexInverseTransform,zr=L.MapARGB,Wr=L.VP8LColorIndexInverseTransformAlpha,Ii=L.MapAlpha,Ri=L.VP8LPredictorsAdd=[];Ri.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var Fi,Oi,Ca,$a,ka,un,_a,mn,vr,Hr,Ft,zt,ds,Ns,la,Di,Mn,Jl,nm,im,lm,om,cm,dm,Mi,um,mm,hm,xm=i(511),fm=i(2041),gm=i(225),pm=i(767),bm=0,Wc=fm,Kl=gm,nr=pm,jr=xm,Yl=0,Zl=1,ym=2,Xl=3,Ql=4,Hc=5,vm=6,Vc=7,Gc=8,eo=9,Jc=10,up=[2,3,7],mp=[3,3,11],jm=[280,256,256,256,40],hp=[0,1,1,1,0],xp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],fp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pp=8,Kc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bi=null,bp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],yp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Nm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],jp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Np=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Aa=[],_r=[],oa=[],Sp=1,wm=2,Pa=[],Nr=[];Ks("UpsampleRgbLinePair",an,3),Ks("UpsampleBgrLinePair",nn,3),Ks("UpsampleRgbaLinePair",Pi,4),Ks("UpsampleBgraLinePair",Ai,4),Ks("UpsampleArgbLinePair",on,4),Ks("UpsampleRgba4444LinePair",ln,2),Ks("UpsampleRgb565LinePair",Is,2);var Cp=L.UpsampleRgbLinePair,$p=L.UpsampleBgrLinePair,Sm=L.UpsampleRgbaLinePair,Cm=L.UpsampleBgraLinePair,$m=L.UpsampleArgbLinePair,km=L.UpsampleRgba4444LinePair,kp=L.UpsampleRgb565LinePair,to=16,so=1<<to-1,Ui=-227,Zc=482,_p=6,_m=0,Ap=i(256),Pp=i(256),Lp=i(256),Ep=i(256),Tp=i(Zc-Ui),Ip=i(Zc-Ui);na("YuvToRgbRow",an,3),na("YuvToBgrRow",nn,3),na("YuvToRgbaRow",Pi,4),na("YuvToBgraRow",Ai,4),na("YuvToArgbRow",on,4),na("YuvToRgba4444Row",ln,2),na("YuvToRgb565Row",Is,2);var Am=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ro=[0,2,8],Rp=[8,7,6,4,4,2,2,2,1,1,1,1],Fp=1;this.WebPDecodeRGBA=function(m,h,v,C,D){var z=Zl,Y=new _e,te=new Et;Y.ba=te,te.S=z,te.width=[te.width],te.height=[te.height];var ie=te.width,de=te.height,Se=new gt;if(Se==null||m==null)var Ee=2;else s(Se!=null),Ee=cn(m,h,v,Se.width,Se.height,Se.Pd,Se.Qd,Se.format,null);if(Ee!=0?ie=0:(ie!=null&&(ie[0]=Se.width[0]),de!=null&&(de[0]=Se.height[0]),ie=1),ie){te.width=te.width[0],te.height=te.height[0],C!=null&&(C[0]=te.width),D!=null&&(D[0]=te.height);e:{if(C=new Ln,(D=new Ue).data=m,D.w=h,D.ha=v,D.kd=1,h=[0],s(D!=null),((m=cn(D.data,D.w,D.ha,null,null,null,h,null,D))==0||m==7)&&h[0]&&(m=4),(h=m)==0){if(s(Y!=null),C.data=D.data,C.w=D.w+D.offset,C.ha=D.ha-D.offset,C.put=tt,C.ac=It,C.bc=Qt,C.ma=Y,D.xa){if((m=Ha())==null){Y=1;break e}if((function(ue,$e){var Ae=[0],De=[0],Pe=[0];t:for(;;){if(ue==null)return 0;if($e==null)return ue.a=2,0;if(ue.l=$e,ue.a=0,fe(ue.m,$e.data,$e.w,$e.ha),!xr(ue.m,Ae,De,Pe)){ue.a=3;break t}if(ue.xb=wm,$e.width=Ae[0],$e.height=De[0],!Ur(Ae[0],De[0],1,ue,null))break t;return 1}return s(ue.a!=0),0})(m,C)){if(C=(h=Na(C.width,C.height,Y.Oa,Y.ba))==0){t:{C=m;s:for(;;){if(C==null){C=0;break t}if(s(C.s.yc!=null),s(C.s.Ya!=null),s(0<C.s.Wb),s((v=C.l)!=null),s((D=v.ma)!=null),C.xb!=0){if(C.ca=D.ba,C.tb=D.tb,s(C.ca!=null),!Li(D.Oa,v,Xl)){C.a=2;break s}if(!Va(C,v.width)||v.da)break s;if((v.da||xt(C.ca.S))&&br(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&br()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!K(C.s.vb,C.s.Wa.Xa)){C.a=1;break s}C.xb=0}if(!$r(C,C.V,C.Ba,C.c,C.i,v.o,ba))break s;D.Dc=C.Ma,C=1;break t}s(C.a!=0),C=0}C=!C}C&&(h=m.a)}else h=m.a}else{if((m=new Ac)==null){Y=1;break e}if(m.Fa=D.na,m.P=D.P,m.qc=D.Sa,Ol(m,C)){if((h=Na(C.width,C.height,Y.Oa,Y.ba))==0){if(m.Aa=0,v=Y.Oa,s((D=m)!=null),v!=null){if(0<(ie=0>(ie=v.Md)?0:100<ie?255:255*ie/100)){for(de=Se=0;4>de;++de)12>(Ee=D.pb[de]).lc&&(Ee.ia=ie*Rp[0>Ee.lc?0:Ee.lc]>>3),Se|=Ee.ia;Se&&(alert("todo:VP8InitRandom"),D.ia=1)}D.Ga=v.Id,100<D.Ga?D.Ga=100:0>D.Ga&&(D.Ga=0)}(function(ue,$e){if(ue==null)return 0;if($e==null)return ps(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!Ol(ue,$e))return 0;if(s(ue.cb),$e.ac==null||$e.ac($e)){$e.ob&&(ue.L=0);var Ae=ro[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=$e.v-Ae>>4,ue.zb=$e.j-Ae>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=$e.o+15+Ae>>4,ue.Hb=$e.va+15+Ae>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var De=ue.ed;for(Ae=0;4>Ae;++Ae){var Pe;if(ue.Qa.Cb){var Be=ue.Qa.Lb[Ae];ue.Qa.Fb||(Be+=De.Tb)}else Be=De.Tb;for(Pe=0;1>=Pe;++Pe){var qe=ue.gd[Ae][Pe],Ke=Be;if(De.Pc&&(Ke+=De.vd[0],Pe&&(Ke+=De.od[0])),0<(Ke=0>Ke?0:63<Ke?63:Ke)){var He=Ke;0<De.wb&&(He=4<De.wb?He>>2:He>>1)>9-De.wb&&(He=9-De.wb),1>He&&(He=1),qe.dd=He,qe.tc=2*Ke+He,qe.ld=40<=Ke?2:15<=Ke?1:0}else qe.tc=0;qe.La=Pe}}}Ae=0}else ps(ue,6,"Frame setup failed"),Ae=ue.a;if(Ae=Ae==0){if(Ae){ue.$c=0,0<ue.Aa||(ue.Ic=Fp);t:{Ae=ue.Ic,De=4*(He=ue.za);var dt=32*He,rt=He+1,Ct=0<ue.L?He*(0<ue.Aa?2:1):0,lt=(ue.Aa==2?2:1)*He;if((qe=De+832+(Pe=3*(16*Ae+ro[ue.L])/2*dt)+(Be=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=qe)Ae=0;else{if(qe>ue.Vb){if(ue.Vb=0,ue.Ec=i(qe),ue.Fc=0,ue.Ec==null){Ae=ps(ue,1,"no memory during frame initialization.");break t}ue.Vb=qe}qe=ue.Ec,Ke=ue.Fc,ue.Ac=qe,ue.Bc=Ke,Ke+=De,ue.Gd=l(dt,Il),ue.Hd=0,ue.rb=l(rt+1,bi),ue.sb=1,ue.wa=Ct?l(Ct,pr):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=He),s(!0),ue.oc=qe,ue.pc=Ke,Ke+=832,ue.ya=l(lt,yi),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=He),ue.R=16*He,ue.B=8*He,He=(dt=ro[ue.L])*ue.R,dt=dt/2*ue.B,ue.sa=qe,ue.ta=Ke+He,ue.qa=ue.sa,ue.ra=ue.ta+16*Ae*ue.R+dt,ue.Ha=ue.qa,ue.Ia=ue.ra+8*Ae*ue.B+dt,ue.$c=0,Ke+=Pe,ue.mb=Be?qe:null,ue.nb=Be?Ke:null,s(Ke+Be<=ue.Fc+ue.Vb),Ga(ue),n(ue.Ac,ue.Bc,0,De),Ae=1}}if(Ae){if($e.ka=0,$e.y=ue.sa,$e.O=ue.ta,$e.f=ue.qa,$e.N=ue.ra,$e.ea=ue.Ha,$e.Vd=ue.Ia,$e.fa=ue.R,$e.Rc=ue.B,$e.F=null,$e.J=0,!bm){for(Ae=-255;255>=Ae;++Ae)xm[255+Ae]=0>Ae?-Ae:Ae;for(Ae=-1020;1020>=Ae;++Ae)fm[1020+Ae]=-128>Ae?-128:127<Ae?127:Ae;for(Ae=-112;112>=Ae;++Ae)gm[112+Ae]=-16>Ae?-16:15<Ae?15:Ae;for(Ae=-255;510>=Ae;++Ae)pm[255+Ae]=0>Ae?0:255<Ae?255:Ae;bm=1}_a=Ml,mn=Lc,Hr=Ec,Ft=qr,zt=Dl,vr=Pc,ds=ql,Ns=zl,la=p,Di=O,Mn=tn,Jl=Wl,nm=me,im=we,lm=_i,om=en,cm=Bl,dm=Ul,_r[0]=Mc,_r[1]=ji,_r[2]=Oc,_r[3]=Dc,_r[4]=Bc,_r[5]=sa,_r[6]=ta,_r[7]=Uc,_r[8]=En,_r[9]=qc,Aa[0]=va,Aa[1]=Ic,Aa[2]=Rc,Aa[3]=Ni,Aa[4]=Fc,Aa[5]=Ya,Aa[6]=wi,oa[0]=In,oa[1]=Tc,oa[2]=Si,oa[3]=Za,oa[4]=Ci,oa[5]=zc,oa[6]=$i,Ae=1}else Ae=0}Ae&&(Ae=(function(At,ws){for(At.M=0;At.M<At.Va;++At.M){var $t,ot=At.Jc[At.M&At.Xb],Qe=At.m,us=At;for($t=0;$t<us.za;++$t){var wt=Qe,Pt=us,Yt=Pt.Ac,Ps=Pt.Bc+4*$t,Us=Pt.zc,ns=Pt.ya[Pt.aa+$t];if(Pt.Qa.Bb?ns.$b=he(wt,Pt.Pa.jb[0])?2+he(wt,Pt.Pa.jb[2]):he(wt,Pt.Pa.jb[1]):ns.$b=0,Pt.kc&&(ns.Ad=he(wt,Pt.Bd)),ns.Za=!he(wt,145)+0,ns.Za){var Rs=ns.Ob,qs=0;for(Pt=0;4>Pt;++Pt){var Ss,Tt=Us[0+Pt];for(Ss=0;4>Ss;++Ss){Tt=jp[Yt[Ps+Ss]][Tt];for(var Mt=Nm[he(wt,Tt[0])];0<Mt;)Mt=Nm[2*Mt+he(wt,Tt[Mt])];Tt=-Mt,Yt[Ps+Ss]=Tt}a(Rs,qs,Yt,Ps,4),qs+=4,Us[0+Pt]=Tt}}else Tt=he(wt,156)?he(wt,128)?1:3:he(wt,163)?2:0,ns.Ob[0]=Tt,n(Yt,Ps,Tt,4),n(Us,0,Tt,4);ns.Dd=he(wt,142)?he(wt,114)?he(wt,183)?1:3:2:0}if(us.m.Ka)return ps(At,7,"Premature end-of-partition0 encountered.");for(;At.ja<At.za;++At.ja){if(us=ot,wt=(Qe=At).rb[Qe.sb-1],Yt=Qe.rb[Qe.sb+Qe.ja],$t=Qe.ya[Qe.aa+Qe.ja],Ps=Qe.kc?$t.Ad:0)wt.la=Yt.la=0,$t.Za||(wt.Na=Yt.Na=0),$t.Hc=0,$t.Gc=0,$t.ia=0;else{var is,Bt;if(wt=Yt,Yt=us,Ps=Qe.Pa.Xc,Us=Qe.ya[Qe.aa+Qe.ja],ns=Qe.pb[Us.$b],Pt=Us.ad,Rs=0,qs=Qe.rb[Qe.sb-1],Tt=Ss=0,n(Pt,Rs,0,384),Us.Za)var Ls=0,Ar=Ps[3];else{Mt=i(16);var ms=wt.Na+qs.Na;if(ms=Bi(Yt,Ps[1],ms,ns.Eb,0,Mt,0),wt.Na=qs.Na=(0<ms)+0,1<ms)_a(Mt,0,Pt,Rs);else{var Ys=Mt[0]+3>>3;for(Mt=0;256>Mt;Mt+=16)Pt[Rs+Mt]=Ys}Ls=1,Ar=Ps[0]}var Wt=15&wt.la,Cs=15&qs.la;for(Mt=0;4>Mt;++Mt){var ir=1&Cs;for(Ys=Bt=0;4>Ys;++Ys)Wt=Wt>>1|(ir=(ms=Bi(Yt,Ar,ms=ir+(1&Wt),ns.Sc,Ls,Pt,Rs))>Ls)<<7,Bt=Bt<<2|(3<ms?3:1<ms?2:Pt[Rs+0]!=0),Rs+=16;Wt>>=4,Cs=Cs>>1|ir<<7,Ss=(Ss<<8|Bt)>>>0}for(Ar=Wt,Ls=Cs>>4,is=0;4>is;is+=2){for(Bt=0,Wt=wt.la>>4+is,Cs=qs.la>>4+is,Mt=0;2>Mt;++Mt){for(ir=1&Cs,Ys=0;2>Ys;++Ys)ms=ir+(1&Wt),Wt=Wt>>1|(ir=0<(ms=Bi(Yt,Ps[2],ms,ns.Qc,0,Pt,Rs)))<<3,Bt=Bt<<2|(3<ms?3:1<ms?2:Pt[Rs+0]!=0),Rs+=16;Wt>>=2,Cs=Cs>>1|ir<<5}Tt|=Bt<<4*is,Ar|=Wt<<4<<is,Ls|=(240&Cs)<<is}wt.la=Ar,qs.la=Ls,Us.Hc=Ss,Us.Gc=Tt,Us.ia=43690&Tt?0:ns.ia,Ps=!(Ss|Tt)}if(0<Qe.L&&(Qe.wa[Qe.Y+Qe.ja]=Qe.gd[$t.$b][$t.Za],Qe.wa[Qe.Y+Qe.ja].La|=!Ps),us.Ka)return ps(At,7,"Premature end-of-file encountered.")}if(Ga(At),Qe=ws,us=1,$t=(ot=At).D,wt=0<ot.L&&ot.M>=ot.zb&&ot.M<=ot.Va,ot.Aa==0)t:{if($t.M=ot.M,$t.uc=wt,yr(ot,$t),us=1,$t=(Bt=ot.D).Nb,wt=(Tt=ro[ot.L])*ot.R,Yt=Tt/2*ot.B,Mt=16*$t*ot.R,Ys=8*$t*ot.B,Ps=ot.sa,Us=ot.ta-wt+Mt,ns=ot.qa,Pt=ot.ra-Yt+Ys,Rs=ot.Ha,qs=ot.Ia-Yt+Ys,Cs=(Wt=Bt.M)==0,Ss=Wt>=ot.Va-1,ot.Aa==2&&yr(ot,Bt),Bt.uc)for(ir=(ms=ot).D.M,s(ms.D.uc),Bt=ms.yb;Bt<ms.Hb;++Bt){Ls=Bt,Ar=ir;var zs=(lr=(Es=ms).D).Nb;is=Es.R;var lr=lr.wa[lr.Y+Ls],or=Es.sa,Zs=Es.ta+16*zs*is+16*Ls,cr=lr.dd,Gt=lr.tc;if(Gt!=0)if(s(3<=Gt),Es.L==1)0<Ls&&om(or,Zs,is,Gt+4),lr.La&&dm(or,Zs,is,Gt),0<Ar&&lm(or,Zs,is,Gt+4),lr.La&&cm(or,Zs,is,Gt);else{var dr=Es.B,Pr=Es.qa,hn=Es.ra+8*zs*dr+8*Ls,ca=Es.Ha,Es=Es.Ia+8*zs*dr+8*Ls;zs=lr.ld,0<Ls&&(Ns(or,Zs,is,Gt+4,cr,zs),Di(Pr,hn,ca,Es,dr,Gt+4,cr,zs)),lr.La&&(Jl(or,Zs,is,Gt,cr,zs),im(Pr,hn,ca,Es,dr,Gt,cr,zs)),0<Ar&&(ds(or,Zs,is,Gt+4,cr,zs),la(Pr,hn,ca,Es,dr,Gt+4,cr,zs)),lr.La&&(Mn(or,Zs,is,Gt,cr,zs),nm(Pr,hn,ca,Es,dr,Gt,cr,zs))}}if(ot.ia&&alert("todo:DitherRow"),Qe.put!=null){if(Bt=16*Wt,Wt=16*(Wt+1),Cs?(Qe.y=ot.sa,Qe.O=ot.ta+Mt,Qe.f=ot.qa,Qe.N=ot.ra+Ys,Qe.ea=ot.Ha,Qe.W=ot.Ia+Ys):(Bt-=Tt,Qe.y=Ps,Qe.O=Us,Qe.f=ns,Qe.N=Pt,Qe.ea=Rs,Qe.W=qs),Ss||(Wt-=Tt),Wt>Qe.o&&(Wt=Qe.o),Qe.F=null,Qe.J=null,ot.Fa!=null&&0<ot.Fa.length&&Bt<Wt&&(Qe.J=bs(ot,Qe,Bt,Wt-Bt),Qe.F=ot.mb,Qe.F==null&&Qe.F.length==0)){us=ps(ot,3,"Could not decode alpha data.");break t}Bt<Qe.j&&(Tt=Qe.j-Bt,Bt=Qe.j,s(!(1&Tt)),Qe.O+=ot.R*Tt,Qe.N+=ot.B*(Tt>>1),Qe.W+=ot.B*(Tt>>1),Qe.F!=null&&(Qe.J+=Qe.width*Tt)),Bt<Wt&&(Qe.O+=Qe.v,Qe.N+=Qe.v>>1,Qe.W+=Qe.v>>1,Qe.F!=null&&(Qe.J+=Qe.v),Qe.ka=Bt-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=Wt-Bt,us=Qe.put(Qe))}$t+1!=ot.Ic||Ss||(a(ot.sa,ot.ta-wt,Ps,Us+16*ot.R,wt),a(ot.qa,ot.ra-Yt,ns,Pt+8*ot.B,Yt),a(ot.Ha,ot.Ia-Yt,Rs,qs+8*ot.B,Yt))}if(!us)return ps(At,6,"Output aborted.")}return 1})(ue,$e)),$e.bc!=null&&$e.bc($e),Ae&=1}return Ae?(ue.cb=0,Ae):0})(m,C)||(h=m.a)}}else h=m.a}h==0&&Y.Oa!=null&&Y.Oa.fd&&(h=Ei(Y.ba))}Y=h}z=Y!=0?null:11>z?te.f.RGBA.eb:te.f.kb.y}else z=null;return z};var Pm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(L,Q){for(var w="",R=0;R<4;R++)w+=String.fromCharCode(L[Q++]);return w}function u(L,Q){return L[Q+0]|L[Q+1]<<8}function f(L,Q){return(L[Q+0]|L[Q+1]<<8|L[Q+2]<<16)>>>0}function g(L,Q){return(L[Q+0]|L[Q+1]<<8|L[Q+2]<<16|L[Q+3]<<24)>>>0}new c;var x=[0],y=[0],$=[],j=new c,N=t,S=(function(L,Q){var w={},R=0,Z=!1,I=0,re=0;if(w.frames=[],!(function(k,q){for(var T=0;T<4;T++)if(k[q+T]!="RIFF".charCodeAt(T))return!0;return!1})(L,Q)){for(g(L,Q+=4),Q+=8;Q<L.length;){var ee=d(L,Q),ge=g(L,Q+=4);Q+=4;var G=ge+(1&ge);switch(ee){case"VP8 ":case"VP8L":w.frames[R]===void 0&&(w.frames[R]={}),(X=w.frames[R]).src_off=Z?re:Q-8,X.src_size=I+ge+8,R++,Z&&(Z=!1,I=0,re=0);break;case"VP8X":(X=w.header={}).feature_flags=L[Q];var fe=Q+4;X.canvas_width=1+f(L,fe),fe+=3,X.canvas_height=1+f(L,fe),fe+=3;break;case"ALPH":Z=!0,I=G+8,re=Q-8;break;case"ANIM":(X=w.header).bgcolor=g(L,Q),fe=Q+4,X.loop_count=u(L,fe),fe+=2;break;case"ANMF":var ke,X;(X=w.frames[R]={}).offset_x=2*f(L,Q),Q+=3,X.offset_y=2*f(L,Q),Q+=3,X.width=1+f(L,Q),Q+=3,X.height=1+f(L,Q),Q+=3,X.duration=f(L,Q),Q+=3,ke=L[Q++],X.dispose=1&ke,X.blend=ke>>1&1}ee!="ANMF"&&(Q+=G)}return w}})(N,0);S.response=N,S.rgbaoutput=!0,S.dataurl=!1;var _=S.header?S.header:null,A=S.frames?S.frames:null;if(_){_.loop_counter=_.loop_count,x=[_.canvas_height],y=[_.canvas_width];for(var P=0;P<A.length&&A[P].blend!=0;P++);}var M=A[0],ne=j.WebPDecodeRGBA(N,M.src_off,M.src_size,y,x);M.rgba=ne,M.imgwidth=y[0],M.imgheight=x[0];for(var V=0;V<y[0]*x[0]*4;V++)$[V]=ne[V];return this.width=y,this.height=x,this.data=$,this}(function(t){var s,r,a,n,i,l,o,c,d,u=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new l,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new l,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),s=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var f=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=k;Object.defineProperty(this,"pdf",{get:function(){return q}});var T=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return T},set:function(ce){T=!!ce}});var B=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return B},set:function(ce){B=!!ce}});var F=0;Object.defineProperty(this,"posX",{get:function(){return F},set:function(ce){isNaN(ce)||(F=ce)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(ce){isNaN(ce)||(J=ce)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ce){var K;typeof ce=="number"?K=[ce,ce,ce,ce]:((K=new Array(4))[0]=ce[0],K[1]=ce.length>=2?ce[1]:K[0],K[2]=ce.length>=3?ce[2]:K[0],K[3]=ce.length>=4?ce[3]:K[1]),d.margin=K}});var W=!1;Object.defineProperty(this,"autoPaging",{get:function(){return W},set:function(ce){W=ce}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(ce){le=ce}});var he=[];Object.defineProperty(this,"pageBreaks",{get:function(){return he},set:function(ce){he=ce}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ce){ce instanceof u&&(d=ce)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ce){d.path=ce}});var se=[];Object.defineProperty(this,"ctxStack",{get:function(){return se},set:function(ce){se=ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ce){var K;K=g(ce),this.ctx.fillStyle=K.style,this.ctx.isFillTransparent=K.a===0,this.ctx.fillOpacity=K.a,this.pdf.setFillColor(K.r,K.g,K.b,{a:K.a}),this.pdf.setTextColor(K.r,K.g,K.b,{a:K.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ce){var K=g(ce);this.ctx.strokeStyle=K.style,this.ctx.isStrokeTransparent=K.a===0,this.ctx.strokeOpacity=K.a,K.a===0?this.pdf.setDrawColor(255,255,255):(K.a,this.pdf.setDrawColor(K.r,K.g,K.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ce){["butt","round","square"].indexOf(ce)!==-1&&(this.ctx.lineCap=ce,this.pdf.setLineCap(ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ce){isNaN(ce)||(this.ctx.lineWidth=ce,this.pdf.setLineWidth(ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ce){["bevel","round","miter"].indexOf(ce)!==-1&&(this.ctx.lineJoin=ce,this.pdf.setLineJoin(ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ce){isNaN(ce)||(this.ctx.miterLimit=ce,this.pdf.setMiterLimit(ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ce){this.ctx.textBaseline=ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ce){["right","end","center","left","start"].indexOf(ce)!==-1&&(this.ctx.textAlign=ce)}});var ve=null,E=null;Object.defineProperty(this,"fontFaces",{get:function(){return E},set:function(ce){ve=null,E=ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ce){var K;if(this.ctx.font=ce,(K=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ce))!==null){var ze=K[1];K[2];var Ie=K[3],Ne=K[4];K[5];var U=K[6],xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(xe==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:xe==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var H=(function(Xe){var ae,Oe,oe=[],je=Xe.trim();if(je==="")return Id;if(je in Qh)return[Qh[je]];for(;je!=="";){switch(Oe=null,ae=(je=tx(je)).charAt(0)){case'"':case"'":Oe=k3(je.substring(1),ae);break;default:Oe=_3(je)}if(Oe===null||(oe.push(Oe[0]),(je=tx(Oe[1]))!==""&&je.charAt(0)!==","))return Id;je=je.replace(/^,/,"")}return oe})(U);if(this.fontFaces){var ye=(function(Xe,ae){if(ve===null){var Oe=(function(oe){var je=[];return Object.keys(oe).forEach(function(Me){oe[Me].forEach(function(et){var Ze=null;switch(et){case"bold":Ze={family:Me,weight:"bold"};break;case"italic":Ze={family:Me,style:"italic"};break;case"bolditalic":Ze={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":Ze={family:Me}}Ze!==null&&(Ze.ref={name:Me,style:et},je.push(Ze))})}),je})(Xe.getFontList());ve=(function(oe){for(var je={},Me=0;Me<oe.length;++Me){var et=Td(oe[Me]),Ze=et.family,mt=et.stretch,xt=et.style,Dt=et.weight;je[Ze]=je[Ze]||{},je[Ze][mt]=je[Ze][mt]||{},je[Ze][mt][xt]=je[Ze][mt][xt]||{},je[Ze][mt][xt][Dt]=et}return je})(Oe.concat(ae))}return ve})(this.pdf,this.fontFaces),pe=H.map(function(Xe){return{family:Xe,stretch:"normal",weight:Ie,style:ze}}),Le=(function(Xe,ae,Oe){for(var oe=(Oe=Oe||{}).defaultFontFamily||"times",je=Object.assign({},$3,Oe.genericFontFamilies||{}),Me=null,et=null,Ze=0;Ze<ae.length;++Ze)if(je[(Me=Td(ae[Ze])).family]&&(Me.family=je[Me.family]),Xe.hasOwnProperty(Me.family)){et=Xe[Me.family];break}if(!(et=et||Xe[oe]))throw new Error("Could not find a font-family for the rule '"+ex(Me)+"' and default family '"+oe+"'.");if(et=(function(mt,xt){if(xt[mt])return xt[mt];var Dt=_u[mt],Kt=Dt<=_u.normal?-1:1,Et=Xh(xt,Tg,Dt,Kt);if(!Et)throw new Error("Could not find a matching font-stretch value for "+mt);return Et})(Me.stretch,et),et=(function(mt,xt){if(xt[mt])return xt[mt];for(var Dt=Eg[mt],Kt=0;Kt<Dt.length;++Kt)if(xt[Dt[Kt]])return xt[Dt[Kt]];throw new Error("Could not find a matching font-style for "+mt)})(Me.style,et),!(et=(function(mt,xt){if(xt[mt])return xt[mt];if(mt===400&&xt[500])return xt[500];if(mt===500&&xt[400])return xt[400];var Dt=C3[mt],Kt=Xh(xt,Ig,Dt,mt<400?-1:1);if(!Kt)throw new Error("Could not find a matching font-weight for value "+mt);return Kt})(Me.weight,et)))throw new Error("Failed to resolve a font for the rule '"+ex(Me)+"'.");return et})(ye,pe);this.pdf.setFont(Le.ref.name,Le.ref.style)}else{var Re="";(Ie==="bold"||parseInt(Ie,10)>=700||ze==="bold")&&(Re="bold"),ze==="italic"&&(Re+="italic"),Re.length===0&&(Re="normal");for(var We="",Ye={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ce=0;Ce<H.length;Ce++){if(this.pdf.internal.getFont(H[Ce],Re,{noFallback:!0,disableWarning:!0})!==void 0){We=H[Ce];break}if(Re==="bolditalic"&&this.pdf.internal.getFont(H[Ce],"bold",{noFallback:!0,disableWarning:!0})!==void 0)We=H[Ce],Re="bold";else if(this.pdf.internal.getFont(H[Ce],"normal",{noFallback:!0,disableWarning:!0})!==void 0){We=H[Ce],Re="normal";break}}if(We===""){for(var Fe=0;Fe<H.length;Fe++)if(Ye[H[Fe]]){We=Ye[H[Fe]];break}}We=We===""?"Times":We,this.pdf.setFont(We,Re)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ce){this.ctx.globalCompositeOperation=ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ce){this.ctx.globalAlpha=ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ce){this.ctx.lineDashOffset=ce,X.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ce){this.ctx.lineDash=ce,X.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ce){this.ctx.ignoreClearRect=!!ce}})};f.prototype.setLineDash=function(k){this.lineDash=k},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){A.call(this,"fill",!1)},f.prototype.stroke=function(){A.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(k,q){if(isNaN(k)||isNaN(q))throw Ht.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var T=this.ctx.transform.applyToPoint(new l(k,q));this.path.push({type:"mt",x:T.x,y:T.y}),this.ctx.lastPoint=new l(k,q)},f.prototype.closePath=function(){var k=new l(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Ut(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){k=new l(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(k.x,k.y)},f.prototype.lineTo=function(k,q){if(isNaN(k)||isNaN(q))throw Ht.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var T=this.ctx.transform.applyToPoint(new l(k,q));this.path.push({type:"lt",x:T.x,y:T.y}),this.ctx.lastPoint=new l(T.x,T.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},f.prototype.quadraticCurveTo=function(k,q,T,B){if(isNaN(T)||isNaN(B)||isNaN(k)||isNaN(q))throw Ht.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var F=this.ctx.transform.applyToPoint(new l(T,B)),J=this.ctx.transform.applyToPoint(new l(k,q));this.path.push({type:"qct",x1:J.x,y1:J.y,x:F.x,y:F.y}),this.ctx.lastPoint=new l(F.x,F.y)},f.prototype.bezierCurveTo=function(k,q,T,B,F,J){if(isNaN(F)||isNaN(J)||isNaN(k)||isNaN(q)||isNaN(T)||isNaN(B))throw Ht.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var W=this.ctx.transform.applyToPoint(new l(F,J)),le=this.ctx.transform.applyToPoint(new l(k,q)),he=this.ctx.transform.applyToPoint(new l(T,B));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:he.x,y2:he.y,x:W.x,y:W.y}),this.ctx.lastPoint=new l(W.x,W.y)},f.prototype.arc=function(k,q,T,B,F,J){if(isNaN(k)||isNaN(q)||isNaN(T)||isNaN(B)||isNaN(F))throw Ht.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var W=this.ctx.transform.applyToPoint(new l(k,q));k=W.x,q=W.y;var le=this.ctx.transform.applyToPoint(new l(0,T)),he=this.ctx.transform.applyToPoint(new l(0,0));T=Math.sqrt(Math.pow(le.x-he.x,2)+Math.pow(le.y-he.y,2))}Math.abs(F-B)>=2*Math.PI&&(B=0,F=2*Math.PI),this.path.push({type:"arc",x:k,y:q,radius:T,startAngle:B,endAngle:F,counterclockwise:J})},f.prototype.arcTo=function(k,q,T,B,F){throw new Error("arcTo not implemented.")},f.prototype.rect=function(k,q,T,B){if(isNaN(k)||isNaN(q)||isNaN(T)||isNaN(B))throw Ht.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,q),this.lineTo(k+T,q),this.lineTo(k+T,q+B),this.lineTo(k,q+B),this.lineTo(k,q),this.lineTo(k+T,q),this.lineTo(k,q)},f.prototype.fillRect=function(k,q,T,B){if(isNaN(k)||isNaN(q)||isNaN(T)||isNaN(B))throw Ht.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var F={};this.lineCap!=="butt"&&(F.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(F.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,q,T,B),this.fill(),F.hasOwnProperty("lineCap")&&(this.lineCap=F.lineCap),F.hasOwnProperty("lineJoin")&&(this.lineJoin=F.lineJoin)}},f.prototype.strokeRect=function(k,q,T,B){if(isNaN(k)||isNaN(q)||isNaN(T)||isNaN(B))throw Ht.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(k,q,T,B),this.stroke())},f.prototype.clearRect=function(k,q,T,B){if(isNaN(k)||isNaN(q)||isNaN(T)||isNaN(B))throw Ht.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,q,T,B))},f.prototype.save=function(k){k=typeof k!="boolean"||k;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,T=0;T<this.pdf.internal.getNumberOfPages();T++)this.pdf.setPage(T+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var B=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=B}},f.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,T=0;T<this.pdf.internal.getNumberOfPages();T++)this.pdf.setPage(T+1),this.pdf.internal.out("Q");this.pdf.setPage(q),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(k){var q,T,B,F;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))q=0,T=0,B=0,F=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(J!==null)q=parseInt(J[1]),T=parseInt(J[2]),B=parseInt(J[3]),F=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)q=parseInt(J[1]),T=parseInt(J[2]),B=parseInt(J[3]),F=parseFloat(J[4]);else{if(F=1,typeof k=="string"&&k.charAt(0)!=="#"){var W=new Cg(k);k=W.ok?W.toHex():"#000000"}k.length===4?(q=k.substring(1,2),q+=q,T=k.substring(2,3),T+=T,B=k.substring(3,4),B+=B):(q=k.substring(1,3),T=k.substring(3,5),B=k.substring(5,7)),q=parseInt(q,16),T=parseInt(T,16),B=parseInt(B,16)}}return{r:q,g:T,b:B,a:F,style:k}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(k,q,T,B){if(isNaN(q)||isNaN(T)||typeof k!="string")throw Ht.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(B=isNaN(B)?void 0:B,!x.call(this)){var F=G(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;R.call(this,{text:k,x:q,y:T,scale:J,angle:F,align:this.textAlign,maxWidth:B})}},f.prototype.strokeText=function(k,q,T,B){if(isNaN(q)||isNaN(T)||typeof k!="string")throw Ht.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){B=isNaN(B)?void 0:B;var F=G(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;R.call(this,{text:k,x:q,y:T,scale:J,renderingMode:"stroke",angle:F,align:this.textAlign,maxWidth:B})}},f.prototype.measureText=function(k){if(typeof k!="string")throw Ht.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,T=this.pdf.internal.scaleFactor,B=q.internal.getFontSize(),F=q.getStringUnitWidth(k)*B/q.internal.scaleFactor;return new function(J){var W=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return W}}),this}({width:F*=Math.round(96*T/72*1e4)/1e4})},f.prototype.scale=function(k,q){if(isNaN(k)||isNaN(q))throw Ht.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var T=new c(k,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(T)},f.prototype.rotate=function(k){if(isNaN(k))throw Ht.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(k,q){if(isNaN(k)||isNaN(q))throw Ht.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var T=new c(1,0,0,1,k,q);this.ctx.transform=this.ctx.transform.multiply(T)},f.prototype.transform=function(k,q,T,B,F,J){if(isNaN(k)||isNaN(q)||isNaN(T)||isNaN(B)||isNaN(F)||isNaN(J))throw Ht.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var W=new c(k,q,T,B,F,J);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.setTransform=function(k,q,T,B,F,J){k=isNaN(k)?1:k,q=isNaN(q)?0:q,T=isNaN(T)?0:T,B=isNaN(B)?1:B,F=isNaN(F)?0:F,J=isNaN(J)?0:J,this.ctx.transform=new c(k,q,T,B,F,J)};var $=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(k,q,T,B,F,J,W,le,he){var se=this.pdf.getImageProperties(k),ve=1,E=1,ce=1,K=1;B!==void 0&&le!==void 0&&(ce=le/B,K=he/F,ve=se.width/B*le/B,E=se.height/F*he/F),J===void 0&&(J=q,W=T,q=0,T=0),B!==void 0&&le===void 0&&(le=B,he=F),B===void 0&&le===void 0&&(le=se.width,he=se.height);for(var ze,Ie=this.ctx.transform.decompose(),Ne=G(Ie.rotate.shx),U=new c,xe=(U=(U=(U=U.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(J-q*ce,W-T*K,B*ve,F*E)),H=j.call(this,xe),ye=[],pe=0;pe<H.length;pe+=1)ye.indexOf(H[pe])===-1&&ye.push(H[pe]);if(_(ye),this.autoPaging)for(var Le=ye[0],Re=ye[ye.length-1],We=Le;We<Re+1;We++){this.pdf.setPage(We);var Ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ce=We===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ae=We===1?0:Fe+(We-2)*Xe;if(this.ctx.clip_path.length!==0){var Oe=this.path;ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ze,this.posX+this.margin[3],-ae+Ce+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=Oe}var oe=JSON.parse(JSON.stringify(xe));oe=S([oe],this.posX+this.margin[3],-ae+Ce+this.ctx.prevPageLastElemOffset)[0];var je=(We>Le||We<Re)&&$.call(this);je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ye,Xe,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",oe.x,oe.y,oe.w,oe.h,null,null,Ne),je&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",xe.x,xe.y,xe.w,xe.h,null,null,Ne)};var j=function(k,q,T){var B=[];q=q||this.pdf.internal.pageSize.width,T=T||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var F=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":B.push(Math.floor((k.y+F)/T)+1);break;case"arc":B.push(Math.floor((k.y+F-k.radius)/T)+1),B.push(Math.floor((k.y+F+k.radius)/T)+1);break;case"qct":var J=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);B.push(Math.floor((J.y+F)/T)+1),B.push(Math.floor((J.y+J.h+F)/T)+1);break;case"bct":var W=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);B.push(Math.floor((W.y+F)/T)+1),B.push(Math.floor((W.y+W.h+F)/T)+1);break;case"rect":B.push(Math.floor((k.y+F)/T)+1),B.push(Math.floor((k.y+k.h+F)/T)+1)}for(var le=0;le<B.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<B[le];)N.call(this);return B},N=function(){var k=this.fillStyle,q=this.strokeStyle,T=this.font,B=this.lineCap,F=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=q,this.font=T,this.lineCap=B,this.lineWidth=F,this.lineJoin=J},S=function(k,q,T){for(var B=0;B<k.length;B++)switch(k[B].type){case"bct":k[B].x2+=q,k[B].y2+=T;case"qct":k[B].x1+=q,k[B].y1+=T;default:k[B].x+=q,k[B].y+=T}return k},_=function(k){return k.sort(function(q,T){return q-T})},A=function(k,q){for(var T,B,F=this.fillStyle,J=this.strokeStyle,W=this.lineCap,le=this.lineWidth,he=Math.abs(le*this.ctx.transform.scaleX),se=this.lineJoin,ve=JSON.parse(JSON.stringify(this.path)),E=JSON.parse(JSON.stringify(this.path)),ce=[],K=0;K<E.length;K++)if(E[K].x!==void 0)for(var ze=j.call(this,E[K]),Ie=0;Ie<ze.length;Ie+=1)ce.indexOf(ze[Ie])===-1&&ce.push(ze[Ie]);for(var Ne=0;Ne<ce.length;Ne++)for(;this.pdf.internal.getNumberOfPages()<ce[Ne];)N.call(this);if(_(ce),this.autoPaging)for(var U=ce[0],xe=ce[ce.length-1],H=U;H<xe+1;H++){this.pdf.setPage(H),this.fillStyle=F,this.strokeStyle=J,this.lineCap=W,this.lineWidth=he,this.lineJoin=se;var ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=H===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=H===1?0:Le+(H-2)*Re;if(this.ctx.clip_path.length!==0){var Ye=this.path;T=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(T,this.posX+this.margin[3],-We+pe+this.ctx.prevPageLastElemOffset),P.call(this,k,!0),this.path=Ye}if(B=JSON.parse(JSON.stringify(ve)),this.path=S(B,this.posX+this.margin[3],-We+pe+this.ctx.prevPageLastElemOffset),q===!1||H===0){var Ce=(H>U||H<xe)&&$.call(this);Ce&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,Re,null).clip().discardPath()),P.call(this,k,q),Ce&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=he,P.call(this,k,q),this.lineWidth=le;this.path=ve},P=function(k,q){if((k!=="stroke"||q||!y.call(this))&&(k==="stroke"||q||!x.call(this))){for(var T,B,F=[],J=this.path,W=0;W<J.length;W++){var le=J[W];switch(le.type){case"begin":F.push({begin:!0});break;case"close":F.push({close:!0});break;case"mt":F.push({start:le,deltas:[],abs:[]});break;case"lt":var he=F.length;if(J[W-1]&&!isNaN(J[W-1].x)&&(T=[le.x-J[W-1].x,le.y-J[W-1].y],he>0)){for(;he>=0;he--)if(F[he-1].close!==!0&&F[he-1].begin!==!0){F[he-1].deltas.push(T),F[he-1].abs.push(le);break}}break;case"bct":T=[le.x1-J[W-1].x,le.y1-J[W-1].y,le.x2-J[W-1].x,le.y2-J[W-1].y,le.x-J[W-1].x,le.y-J[W-1].y],F[F.length-1].deltas.push(T);break;case"qct":var se=J[W-1].x+2/3*(le.x1-J[W-1].x),ve=J[W-1].y+2/3*(le.y1-J[W-1].y),E=le.x+2/3*(le.x1-le.x),ce=le.y+2/3*(le.y1-le.y),K=le.x,ze=le.y;T=[se-J[W-1].x,ve-J[W-1].y,E-J[W-1].x,ce-J[W-1].y,K-J[W-1].x,ze-J[W-1].y],F[F.length-1].deltas.push(T);break;case"arc":F.push({deltas:[],abs:[],arc:!0}),Array.isArray(F[F.length-1].abs)&&F[F.length-1].abs.push(le)}}B=q?null:k==="stroke"?"stroke":"fill";for(var Ie=!1,Ne=0;Ne<F.length;Ne++)if(F[Ne].arc)for(var U=F[Ne].abs,xe=0;xe<U.length;xe++){var H=U[xe];H.type==="arc"?V.call(this,H.x,H.y,H.radius,H.startAngle,H.endAngle,H.counterclockwise,void 0,q,!Ie):Z.call(this,H.x,H.y),Ie=!0}else if(F[Ne].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(F[Ne].begin!==!0){var ye=F[Ne].start.x,pe=F[Ne].start.y;I.call(this,F[Ne].deltas,ye,pe),Ie=!0}B&&L.call(this,B),q&&Q.call(this)}},M=function(k){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,T=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-T;case"top":return k+q-T;case"hanging":return k+q-2*T;case"middle":return k+q/2-T;default:return k}},ne=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(q,T){this.colorStops.push([q,T])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(k,q,T,B,F,J,W,le,he){for(var se=ee.call(this,T,B,F,J),ve=0;ve<se.length;ve++){var E=se[ve];ve===0&&(he?w.call(this,E.x1+k,E.y1+q):Z.call(this,E.x1+k,E.y1+q)),re.call(this,k,q,E.x2,E.y2,E.x3,E.y3,E.x4,E.y4)}le?Q.call(this):L.call(this,W)},L=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Q=function(){this.pdf.clip(),this.pdf.discardPath()},w=function(k,q){this.pdf.internal.out(r(k)+" "+a(q)+" m")},R=function(k){var q;switch(k.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var T=this.pdf.getTextDimensions(k.text),B=M.call(this,k.y),F=ne.call(this,B)-T.h,J=this.ctx.transform.applyToPoint(new l(k.x,B)),W=this.ctx.transform.decompose(),le=new c;le=(le=(le=le.multiply(W.translate)).multiply(W.skew)).multiply(W.scale);for(var he,se,ve,E=this.ctx.transform.applyToRectangle(new o(k.x,B,T.w,T.h)),ce=le.applyToRectangle(new o(k.x,F,T.w,T.h)),K=j.call(this,ce),ze=[],Ie=0;Ie<K.length;Ie+=1)ze.indexOf(K[Ie])===-1&&ze.push(K[Ie]);if(_(ze),this.autoPaging)for(var Ne=ze[0],U=ze[ze.length-1],xe=Ne;xe<U+1;xe++){this.pdf.setPage(xe);var H=xe===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[2],Le=pe-this.margin[0],Re=this.pdf.internal.pageSize.width-this.margin[1],We=Re-this.margin[3],Ye=xe===1?0:ye+(xe-2)*Le;if(this.ctx.clip_path.length!==0){var Ce=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(he,this.posX+this.margin[3],-1*Ye+H),P.call(this,"fill",!0),this.path=Ce}var Fe=S([JSON.parse(JSON.stringify(ce))],this.posX+this.margin[3],-Ye+H+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(se*k.scale),ve=this.lineWidth,this.lineWidth=ve*k.scale);var Xe=this.autoPaging!=="text";if(Xe||Fe.y+Fe.h<=pe){if(Xe||Fe.y>=H&&Fe.x<=Re){var ae=Xe?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||Re-Fe.x)[0],Oe=S([JSON.parse(JSON.stringify(E))],this.posX+this.margin[3],-Ye+H+this.ctx.prevPageLastElemOffset)[0],oe=Xe&&(xe>Ne||xe<U)&&$.call(this);oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,Le,null).clip().discardPath()),this.pdf.text(ae,Oe.x,Oe.y,{angle:k.angle,align:q,renderingMode:k.renderingMode}),oe&&this.pdf.restoreGraphicsState()}}else Fe.y<pe&&(this.ctx.prevPageLastElemOffset+=pe-Fe.y);k.scale>=.01&&(this.pdf.setFontSize(se),this.lineWidth=ve)}else k.scale>=.01&&(se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(se*k.scale),ve=this.lineWidth,this.lineWidth=ve*k.scale),this.pdf.text(k.text,J.x+this.posX,J.y+this.posY,{angle:k.angle,align:q,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(se),this.lineWidth=ve)},Z=function(k,q,T,B){T=T||0,B=B||0,this.pdf.internal.out(r(k+T)+" "+a(q+B)+" l")},I=function(k,q,T){return this.pdf.lines(k,q,T,null,null)},re=function(k,q,T,B,F,J,W,le){this.pdf.internal.out([s(n(T+k)),s(i(B+q)),s(n(F+k)),s(i(J+q)),s(n(W+k)),s(i(le+q)),"c"].join(" "))},ee=function(k,q,T,B){for(var F=2*Math.PI,J=Math.PI/2;q>T;)q-=F;var W=Math.abs(T-q);W<F&&B&&(W=F-W);for(var le=[],he=B?-1:1,se=q;W>1e-5;){var ve=se+he*Math.min(W,J);le.push(ge.call(this,k,se,ve)),W-=Math.abs(ve-se),se=ve}return le},ge=function(k,q,T){var B=(T-q)/2,F=k*Math.cos(B),J=k*Math.sin(B),W=F,le=-J,he=W*W+le*le,se=he+W*F+le*J,ve=4/3*(Math.sqrt(2*he*se)-se)/(W*J-le*F),E=W-ve*le,ce=le+ve*W,K=E,ze=-ce,Ie=B+q,Ne=Math.cos(Ie),U=Math.sin(Ie);return{x1:k*Math.cos(q),y1:k*Math.sin(q),x2:E*Ne-ce*U,y2:E*U+ce*Ne,x3:K*Ne-ze*U,y3:K*U+ze*Ne,x4:k*Math.cos(T),y4:k*Math.sin(T)}},G=function(k){return 180*k/Math.PI},fe=function(k,q,T,B,F,J){var W=k+.5*(T-k),le=q+.5*(B-q),he=F+.5*(T-F),se=J+.5*(B-J),ve=Math.min(k,F,W,he),E=Math.max(k,F,W,he),ce=Math.min(q,J,le,se),K=Math.max(q,J,le,se);return new o(ve,ce,E-ve,K-ce)},ke=function(k,q,T,B,F,J,W,le){var he,se,ve,E,ce,K,ze,Ie,Ne,U,xe,H,ye,pe,Le=T-k,Re=B-q,We=F-T,Ye=J-B,Ce=W-F,Fe=le-J;for(se=0;se<41;se++)Ne=(ze=(ve=k+(he=se/40)*Le)+he*((ce=T+he*We)-ve))+he*(ce+he*(F+he*Ce-ce)-ze),U=(Ie=(E=q+he*Re)+he*((K=B+he*Ye)-E))+he*(K+he*(J+he*Fe-K)-Ie),se==0?(xe=Ne,H=U,ye=Ne,pe=U):(xe=Math.min(xe,Ne),H=Math.min(H,U),ye=Math.max(ye,Ne),pe=Math.max(pe,U));return new o(Math.round(xe),Math.round(H),Math.round(ye-xe),Math.round(pe-H))},X=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,q,T=(k=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:q}));this.prevLineDash!==T&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=T)}}})(ut.API),(function(t){var s=function(l){var o,c,d,u,f,g,x,y,$,j;for(c=[],d=0,u=(l+=o="\0\0\0\0".slice(l.length%4||4)).length;u>d;d+=4)(f=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(g=(f=((f=((f=((f=(f-(j=f%85))/85)-($=f%85))/85)-(y=f%85))/85)-(x=f%85))/85)%85,c.push(g+33,x+33,y+33,$+33,j+33)):c.push(122);return(function(N,S){for(var _=S;_>0;_--)N.pop()})(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(l){var o,c,d,u,f,g=String,x="length",y=255,$="charCodeAt",j="slice",N="replace";for(l[j](-2),l=l[j](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),d=[],u=0,f=(l+=o="uuuuu"[j](l[x]%5||5))[x];f>u;u+=5)c=52200625*(l[$](u)-33)+614125*(l[$](u+1)-33)+7225*(l[$](u+2)-33)+85*(l[$](u+3)-33)+(l[$](u+4)-33),d.push(y&c>>24,y&c>>16,y&c>>8,y&c);return(function(S,_){for(var A=_;A>0;A--)S.pop()})(d,o[x]),g.fromCharCode.apply(g,d)},a=function(l){return l.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},n=function(l){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),o.test(l)===!1)return"";for(var c="",d=0;d<l.length;d+=2)c+=String.fromCharCode("0x"+(l[d]+l[d+1]));return c},i=function(l){for(var o=new Uint8Array(l.length),c=l.length;c--;)o[c]=l.charCodeAt(c);return(o=ju(o)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};t.processDataByFilters=function(l,o){var c=0,d=l||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=s(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=n(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=a(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}})(ut.API),(function(t){t.loadFile=function(s,r,a){return(function(n,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=(function(c,d,u){var f=new XMLHttpRequest,g=0,x=function(y){var $=y.length,j=[],N=String.fromCharCode;for(g=0;g<$;g+=1)j.push(N(255&y.charCodeAt(g)));return j.join("")};if(f.open("GET",c,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?u(x(this.responseText)):u(void 0)}),f.send(null),d&&f.status===200)return x(f.responseText)})(n,i,l)}catch{}return o})(s,r,a)},t.loadImageFile=t.loadFile})(ut.API),(function(t){function s(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):Mo(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):Mo(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var c=Ut(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},n=function(o,c){var d=document.createElement(o);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},i=function o(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)d!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||u.appendChild(o(f,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},l=function o(c){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),d);return(u=u.setProgress(1,o,1,[o])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(o,c){return o.__proto__=c||l.prototype,o},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(o,c){return this.then(function(){switch(c=c||(function(d){switch(a(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),c){case"string":return this.then(r).then(function(d){return this.set({src:n("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},l.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(s).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(s).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var x=0;x<u.length;++x){var y=u[x],$=y.src.find(function(j){return j.format==="truetype"});$&&d.addFont($.url,y.ref.name,y.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,d.context2d.save(!0),c(this.prop.container,g)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(o,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},l.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},l.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},l.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(o){if(a(o)!=="object")return this;var c=Object.keys(o||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(o,c){return this.then(function(){var d=o in l.template.prop?this.prop[o]:this.opt[o];return c?c(d):d})},l.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},l.prototype.setPageSize=function(o){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(o=o||ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},l.prototype.setProgress=function(o,c,d,u){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(o,c,d,u){return this.setProgress(o?this.progress.val+o:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},l.prototype.then=function(o,c){var d=this;return this.thenCore(o,c,function(u,f){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(g){return d.updateProgress(null,u),g}).then(u,f).then(function(g){return d.updateProgress(1),g})})},l.prototype.thenCore=function(o,c,d){d=d||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),c&&(c=c.bind(u));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:l.convert(Object.assign({},u),Promise.prototype),g=d.call(f,o,c);return l.convert(g,u.__proto__)},l.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},l.prototype.thenList=function(o){var c=this;return o.forEach(function(d){c=c.thenCore(d)}),c},l.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return l.convert(c,this)},l.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},l.prototype.error=function(o){return this.then(function(){throw new Error(o)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,ut.getPageSize=function(o,c,d){if(Ut(o)==="object"){var u=o;o=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var f,g=(""+d).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var y,$=0,j=0;if(x.hasOwnProperty(g))$=x[g][1]/f,j=x[g][0]/f;else try{$=d[1],j=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",j>$&&(y=j,j=$,$=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",$>j&&(y=j,j=$,$=y)}return{width:j,height:$,unit:c,k:f,orientation:o}},t.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Td):null;var d=new l(c);return c.worker?d:d.from(o).doCallback()}})(ut.API),ut.API.addJS=function(t){return rx=t,this.internal.events.subscribe("postPutResources",function(){$o=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($o+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),sx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+rx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){$o!==void 0&&sx!==void 0&&this.internal.out("/Names <</JavaScript "+$o+" 0 R>>")}),this},(function(t){var s;t.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),i=0;i<n.length;i++){var l=n[i],o=a.exec(l);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var f=r.internal.newObject();u.push(f);var g=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),s=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+s+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,n,i){var l={title:n,options:i,children:[]};return a==null&&(a=this.root),a.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var n=0;n<a.children.length;n++)this.genIds_r(a.children[n])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var l=a.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var c=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,n){for(var i=0;i<n.children.length;i++)a.count++,this.count_r(a,n.children[i]);return a.count}}])})(ut.API),(function(t){var s=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,a,n,i,l,o){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=(function(f){for(var g,x=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,$={width:0,height:0,numcomponents:1},j=4;j<y;j+=2){if(j+=x,s.indexOf(f.charCodeAt(j+1))!==-1){g=256*f.charCodeAt(j+5)+f.charCodeAt(j+6),$={width:256*f.charCodeAt(j+7)+f.charCodeAt(j+8),height:g,numcomponents:f.charCodeAt(j+9)};break}x=256*f.charCodeAt(j+2)+f.charCodeAt(j+3)}return $})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:a,alias:n}}return u}})(ut.API),ut.API.processPNG=function(t,s,r,a){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var n,i=u3(t,{checkCrc:!0}),l=i.width,o=i.height,c=i.channels,d=i.palette,u=i.depth;n=d&&c===1?(function(V){for(var L=V.width,Q=V.height,w=V.data,R=V.palette,Z=V.depth,I=!1,re=[],ee=[],ge=void 0,G=!1,fe=0,ke=0;ke<R.length;ke++){var X=lh(R[ke],4),k=X[0],q=X[1],T=X[2],B=X[3];re.push(k,q,T),B!=null&&(B===0?(fe++,ee.length<1&&ee.push(ke)):B<255&&(G=!0))}if(G||fe>1){I=!0,ee=void 0;var F=L*Q;ge=new Uint8Array(F);for(var J=new DataView(w.buffer),W=0;W<F;W++){var le=Rd(J,W,Z),he=lh(R[le],4)[3];ge[W]=he}}else fe===0&&(ee=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:I?8:void 0,colorBytes:w,alphaBytes:ge,needSMask:I,palette:re,mask:ee}})(i):c===2||c===4?(function(V){for(var L=V.data,Q=V.width,w=V.height,R=V.channels,Z=V.depth,I=R===2?"DeviceGray":"DeviceRGB",re=R-1,ee=Q*w,ge=re,G=ee*ge,fe=1*ee,ke=Math.ceil(G*Z/8),X=Math.ceil(fe*Z/8),k=new Uint8Array(ke),q=new Uint8Array(X),T=new DataView(L.buffer),B=new DataView(k.buffer),F=new DataView(q.buffer),J=!1,W=0;W<ee;W++){for(var le=W*R,he=0;he<ge;he++)mx(B,Rd(T,le+he,Z),W*ge+he,Z);var se=Rd(T,le+ge,Z);se<(1<<Z)-1&&(J=!0),mx(F,se,1*W,Z)}return{colorSpace:I,colorsPerPixel:re,sMaskBitsPerComponent:J?Z:void 0,colorBytes:k,alphaBytes:q,needSMask:J}})(i):(function(V){var L=V.data,Q=V.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Q,colorsPerPixel:Q==="DeviceGray"?1:3,colorBytes:L instanceof Uint16Array?(function(w){for(var R=w.length,Z=new Uint8Array(2*R),I=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),re=0;re<R;re++)I.setUint16(2*re,w[re],!1);return Z})(L):L,needSMask:!1}})(i);var f,g,x,y=n,$=y.colorSpace,j=y.colorsPerPixel,N=y.sMaskBitsPerComponent,S=y.colorBytes,_=y.alphaBytes,A=y.needSMask,P=y.palette,M=y.mask,ne=null;return a!==ut.API.image_compression.NONE&&typeof ju=="function"?(ne=(function(V){var L;switch(V){case ut.API.image_compression.FAST:L=11;break;case ut.API.image_compression.MEDIUM:L=13;break;case ut.API.image_compression.SLOW:L=14;break;default:L=12}return L})(a),f=this.decode.FLATE_DECODE,g="/Predictor ".concat(ne," /Colors ").concat(j," /BitsPerComponent ").concat(u," /Columns ").concat(l),t=lx(S,Math.ceil(l*j*u/8),j,u,a),A&&(x=lx(_,Math.ceil(l*N/8),1,N,a))):(f=void 0,g=void 0,t=S,A&&(x=_)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:t,index:s,filter:f,decodeParameters:g,transparency:M,palette:P,sMask:x,predictor:ne,width:l,height:o,bitsPerComponent:u,sMaskBitsPerComponent:N,colorSpace:$}}},(function(t){t.processGIF89A=function(s,r,a,n){var i=new E3(s),l=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:l,height:o},u=new Fd(100).encode(d,100);return t.processJPEG.call(this,u,r,a,n)},t.processGIF87A=t.processGIF89A})(ut.API),Er.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var s=0;s<t;s++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:n,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Er.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[t]()}catch(r){Ht.log("bit decode error:"+r)}},Er.prototype.bit1=function(){var t,s=Math.ceil(this.width/8),r=s%4;for(t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,n=0;n<s;n++)for(var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+8*n*4,o=0;o<8&&8*n+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[l+4*o]=c.blue,this.data[l+4*o+1]=c.green,this.data[l+4*o+2]=c.red,this.data[l+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Er.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),s=t%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<t;n++){var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+2*n*4,o=i>>4,c=15&i,d=this.palette[o];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*n+1>=this.width)break;d=this.palette[c],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}s!==0&&(this.pos+=4-s)}},Er.prototype.bit8=function(){for(var t=this.width%4,s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(n<this.palette.length){var l=this.palette[n];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Er.prototype.bit15=function(){for(var t=this.width%3,s=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&s)/s*255|0,o=(i>>5&s)/s*255|0,c=(i>>10&s)/s*255|0,d=i>>15?255:0,u=a*this.width*4+4*n;this.data[u]=c,this.data[u+1]=o,this.data[u+2]=l,this.data[u+3]=d}this.pos+=t}},Er.prototype.bit16=function(){for(var t=this.width%3,s=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&s)/s*255|0,c=(l>>5&r)/r*255|0,d=(l>>11)/s*255|0,u=n*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},Er.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+4*r;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=a,this.data[l+3]=255}this.pos+=this.width%4}},Er.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=l}},Er.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(s,r,a,n){var i=new Er(s,!1),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new Fd(100).encode(c,100);return t.processJPEG.call(this,d,r,a,n)}})(ut.API),xx.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(s,r,a,n){var i=new xx(s),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new Fd(100).encode(c,100);return t.processJPEG.call(this,d,r,a,n)}})(ut.API),ut.API.processRGBA=function(t,s,r){for(var a=t.data,n=a.length,i=new Uint8Array(n/4*3),l=new Uint8Array(n/4),o=0,c=0,d=0;d<n;d+=4){var u=a[d],f=a[d+1],g=a[d+2],x=a[d+3];i[o++]=u,i[o++]=f,i[o++]=g,l[c++]=x}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:y,index:s,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ut.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Gn=ut.API,ko=Gn.getCharWidthsArray=function(t,s){var r,a,n=(s=s||{}).font||this.internal.getFont(),i=s.fontSize||this.internal.getFontSize(),l=s.charSpace||this.internal.getCharSpace(),o=s.widths?s.widths:n.metadata.Unicode.widths,c=o.fof?o.fof:1,d=s.kerning?s.kerning:n.metadata.Unicode.kerning,u=d.fof?d.fof:1,f=s.doKerning!==!1,g=0,x=t.length,y=0,$=o[0]||c,j=[];for(r=0;r<x;r++)a=t.charCodeAt(r),typeof n.metadata.widthOfString=="function"?j.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+l*(1e3/i)||0)/1e3):(g=f&&Ut(d[a])==="object"&&!isNaN(parseInt(d[a][y],10))?d[a][y]/u:0,j.push((o[a]||$)/c+g)),y=a;return j},ax=Gn.getStringUnitWidth=function(t,s){var r=(s=s||{}).fontSize||this.internal.getFontSize(),a=s.font||this.internal.getFont(),n=s.charSpace||this.internal.getCharSpace();return Gn.processArabic&&(t=Gn.processArabic(t)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(t,r,n)/r:ko.apply(this,arguments).reduce(function(i,l){return i+l},0)},nx=function(t,s,r,a){for(var n=[],i=0,l=t.length,o=0;i!==l&&o+s[i]<r;)o+=s[i],i++;n.push(t.slice(0,i));var c=i;for(o=0;i!==l;)o+s[i]>a&&(n.push(t.slice(c,i)),o=0,c=i),o+=s[i],i++;return c!==i&&n.push(t.slice(c,i)),n},ix=function(t,s,r){r||(r={});var a,n,i,l,o,c,d,u=[],f=[u],g=r.textIndent||0,x=0,y=0,$=t.split(" "),j=ko.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?$[0].length+2:r.lineIndent||0){var N=Array(c).join(" "),S=[];$.map(function(A){(A=A.split(/\s*\n/)).length>1?S=S.concat(A.map(function(P,M){return(M&&P.length?`
`:"")+P})):S.push(A[0])}),$=S,c=ax.apply(this,[N,r])}for(i=0,l=$.length;i<l;i++){var _=0;if(a=$[i],c&&a[0]==`
`&&(a=a.substr(1),_=1),g+x+(y=(n=ko.apply(this,[a,r])).reduce(function(A,P){return A+P},0))>s||_){if(y>s){for(o=nx.apply(this,[a,n,s-(g+x),s]),u.push(o.shift()),u=[o.pop()];o.length;)f.push([o.shift()]);y=n.slice(a.length-(u[0]?u[0].length:0)).reduce(function(A,P){return A+P},0)}else u=[a];f.push(u),g=y+c,x=j}else u.push(a),g+=x+y,x=j}return d=c?function(A,P){return(P?N:"")+A.join(" ")}:function(A){return A.join(" ")},f.map(d)},Gn.splitTextToSize=function(t,s,r){var a,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle),g="Unicode";return f.metadata[g]?{widths:f.metadata[g].widths||{0:1},kerning:f.metadata[g].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*s/n;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var o,c,d=[];for(o=0,c=a.length;o<c;o++)d=d.concat(ix.apply(this,[a[o],l,i]));return d},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var s="0123456789abcdef",r="klmnopqrstuvwxyz",a={},n={},i=0;i<16;i++)a[r[i]]=s[i],n[s[i]]=r[i];var l=function(g){return"0x"+parseInt(g,10).toString(16)},o=t.__fontmetrics__.compress=function(g){var x,y,$,j,N=["{"];for(var S in g){if(x=g[S],isNaN(parseInt(S,10))?y="'"+S+"'":(S=parseInt(S,10),y=(y=l(S).slice(2)).slice(0,-1)+n[y.slice(-1)]),typeof x=="number")x<0?($=l(x).slice(3),j="-"):($=l(x).slice(2),j=""),$=j+$.slice(0,-1)+n[$.slice(-1)];else{if(Ut(x)!=="object")throw new Error("Don't know what to do with value type "+Ut(x)+".");$=o(x)}N.push(y+$)}return N.push("}"),N.join("")},c=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,y,$,j,N={},S=1,_=N,A=[],P="",M="",ne=g.length-1,V=1;V<ne;V+=1)(j=g[V])=="'"?x?($=x.join(""),x=void 0):x=[]:x?x.push(j):j=="{"?(A.push([_,$]),_={},$=void 0):j=="}"?((y=A.pop())[0][y[1]]=_,$=void 0,_=y[0]):j=="-"?S=-1:$===void 0?a.hasOwnProperty(j)?(P+=a[j],$=parseInt(P,16)*S,S=1,P=""):P+=j:a.hasOwnProperty(j)?(M+=a[j],_[$]=parseInt(M,16)*S,S=1,$=void 0,M=""):M+=j;return N},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var x=g.font,y=f.Unicode[x.postScriptName];y&&(x.metadata.Unicode={},x.metadata.Unicode.widths=y.widths,x.metadata.Unicode.kerning=y.kerning);var $=u.Unicode[x.postScriptName];$&&(x.metadata.Unicode.encoding=$,x.encoding=$.codePages[0])}])})(ut.API),(function(t){var s=function(r){for(var a=r.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=r.charCodeAt(i);return n};t.API.events.push(["addFont",function(r){var a=void 0,n=r.font,i=r.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(a=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?s(o):s(Uo(o)),l.metadata=t.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(n,a)}}])})(ut),ut.API.addSvgAsImage=function(t,s,r,a,n,i,l,o){if(isNaN(s)||isNaN(r))throw Ht.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(n))throw Ht.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=a,c.height=n;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(pt.canvg?Promise.resolve(pt.canvg):Mo(()=>import("./index.es-DGor_zIB.js"),__vite__mapDeps([0,1,2,3]))).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(d,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(u)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),s,r,a,n,l,o)})},ut.API.putTotalPages=function(t){var s,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(s,r);return this},ut.API.viewerPreferences=function(t,s){var r;t=t||{},s=s||!1;var a,n,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),c=[],d=0,u=0,f=0;function g(y,$){var j,N=!1;for(j=0;j<y.length;j+=1)y[j]===$&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||s===!0){var x=o.length;for(f=0;f<x;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(Ut(t)==="object"){for(n in t)if(i=t[n],g(o,n)&&i!==void 0){if(r[n].type==="boolean"&&typeof i=="boolean")r[n].value=i;else if(r[n].type==="name"&&g(r[n].valueSet,i))r[n].value=i;else if(r[n].type==="integer"&&Number.isInteger(i))r[n].value=i;else if(r[n].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[n].value="["+c.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,$=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?$.push("/"+y+" /"+r[y].value):$.push("/"+y+" "+r[y].value));$.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+$.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var s=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+l.length+o.length+n.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(n+i+l+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(a,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",s)),this}})(ut.API),(function(t){var s=t.API,r=s.pdfEscape16=function(i,l){for(var o,c=l.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],f=0,g=i.length;f<g;++f){if(o=l.metadata.characterToGlyph(i.charCodeAt(f)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=i.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(d[4-o.length],o)}return u.join("")},a=function(i){var l,o,c,d,u,f,g;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,g=(o=Object.keys(i).sort(function(x,y){return x-y})).length;f<g;f++)l=o[f],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(d=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,u=l.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),x="",y=0;y<g.length;y++)x+=String.fromCharCode(g[y]);var $=d();u({data:x,addLength1:!0,objectId:$}),c("endobj");var j=d();u({data:a(o.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var N=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Zn(o.fontName)),c("/FontFile2 "+$+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var S=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Zn(o.fontName)),c("/FontDescriptor "+N+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+j+" 0 R"),c("/BaseFont /"+Zn(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),s.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,u=l.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,g="",x=0;x<f.length;x++)g+=String.fromCharCode(f[x]);var y=d();u({data:g,addLength1:!0,objectId:y}),c("endobj");var $=d();u({data:a(o.metadata.toUnicode),addLength1:!0,objectId:$}),c("endobj");var j=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Zn(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var N=0;N<o.metadata.hmtx.widths.length;N++)o.metadata.hmtx.widths[N]=parseInt(o.metadata.hmtx.widths[N]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+$+" 0 R/BaseFont/"+Zn(o.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var n=function(i){var l,o=i.text||"",c=i.x,d=i.y,u=i.options||{},f=i.mutex||{},g=f.pdfEscape,x=f.activeFontKey,y=f.fonts,$=x,j="",N=0,S="",_=y[$].encoding;if(y[$].encoding!=="Identity-H")return{text:o,x:c,y:d,options:u,mutex:f};for(S=o,$=x,Array.isArray(o)&&(S=o[0]),N=0;N<S.length;N+=1)y[$].metadata.hasOwnProperty("cmap")&&(l=y[$].metadata.cmap.unicode.codeMap[S[N].charCodeAt(0)]),l||S[N].charCodeAt(0)<256&&y[$].metadata.hasOwnProperty("Unicode")?j+=S[N]:j+="";var A="";return parseInt($.slice(1))<14||_==="WinAnsiEncoding"?A=g(j,$).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(A=r(j,y[$])),f.isHex=!0,{text:A,x:c,y:d,options:u,mutex:f}};s.events.push(["postProcessText",function(i){var l=i.text||"",o=[],c={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?o.push([n(Object.assign({},c,{text:l[d][0]})).text,l[d][1],l[d][2]]):o.push(n(Object.assign({},c,{text:l[d]})).text);i.text=o}else i.text=n(Object.assign({},c,{text:l})).text}])})(ut),(function(t){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,a){return s.call(this),this.internal.vFS[r]=a,this},t.getFileFromVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(ut.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(a){var n,i,l,o,c,d,u,f=s,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},$={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,_=0;this.__bidiEngine__={};var A=function(w){var R=w.charCodeAt(),Z=R>>8,I=$[Z];return I!==void 0?f[256*I+(255&R)]:Z===252||Z===253?"AL":N.test(Z)?"L":Z===8?"R":"N"},P=function(w){for(var R,Z=0;Z<w.length;Z++){if((R=A(w.charAt(Z)))==="L")return!1;if(R==="R")return!0}return!1},M=function(w,R,Z,I){var re,ee,ge,G,fe=R[I];switch(fe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(fe="AN");break;case"AL":S=!0,fe="R";break;case"WS":case"BN":fe="N";break;case"CS":I<1||I+1>=R.length||(re=Z[I-1])!=="EN"&&re!=="AN"||(ee=R[I+1])!=="EN"&&ee!=="AN"?fe="N":S&&(ee="AN"),fe=ee===re?ee:"N";break;case"ES":fe=(re=I>0?Z[I-1]:"B")==="EN"&&I+1<R.length&&R[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&Z[I-1]==="EN"){fe="EN";break}if(S){fe="N";break}for(ge=I+1,G=R.length;ge<G&&R[ge]==="ET";)ge++;fe=ge<G&&R[ge]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for(G=R.length,ge=I+1;ge<G&&R[ge]==="NSM";)ge++;if(ge<G){var ke=w[I],X=ke>=1425&&ke<=2303||ke===64286;if(re=R[ge],X&&(re==="R"||re==="AL")){fe="R";break}}}fe=I<1||(re=R[I-1])==="B"?"N":Z[I-1];break;case"B":S=!1,n=!0,fe=_;break;case"S":i=!0,fe="N"}return fe},ne=function(w,R,Z){var I=w.split("");return Z&&V(I,Z,{hiLevel:_}),I.reverse(),R&&R.reverse(),I.join("")},V=function(w,R,Z){var I,re,ee,ge,G,fe=-1,ke=w.length,X=0,k=[],q=_?x:g,T=[];for(S=!1,n=!1,i=!1,re=0;re<ke;re++)T[re]=A(w[re]);for(ee=0;ee<ke;ee++){if(G=X,k[ee]=M(w,T,k,ee),I=240&(X=q[G][y[k[ee]]]),X&=15,R[ee]=ge=q[X][5],I>0)if(I===16){for(re=fe;re<ee;re++)R[re]=1;fe=-1}else fe=-1;if(q[X][6])fe===-1&&(fe=ee);else if(fe>-1){for(re=fe;re<ee;re++)R[re]=ge;fe=-1}T[ee]==="B"&&(R[ee]=0),Z.hiLevel|=ge}i&&(function(B,F,J){for(var W=0;W<J;W++)if(B[W]==="S"){F[W]=_;for(var le=W-1;le>=0&&B[le]==="WS";le--)F[le]=_}})(T,R,ke)},L=function(w,R,Z,I,re){if(!(re.hiLevel<w)){if(w===1&&_===1&&!n)return R.reverse(),void(Z&&Z.reverse());for(var ee,ge,G,fe,ke=R.length,X=0;X<ke;){if(I[X]>=w){for(G=X+1;G<ke&&I[G]>=w;)G++;for(fe=X,ge=G-1;fe<ge;fe++,ge--)ee=R[fe],R[fe]=R[ge],R[ge]=ee,Z&&(ee=Z[fe],Z[fe]=Z[ge],Z[ge]=ee);X=G}X++}}},Q=function(w,R,Z){var I=w.split(""),re={hiLevel:_};return Z||(Z=[]),V(I,Z,re),(function(ee,ge,G){if(G.hiLevel!==0&&u)for(var fe,ke=0;ke<ee.length;ke++)ge[ke]===1&&(fe=j.indexOf(ee[ke]))>=0&&(ee[ke]=j[fe+1])})(I,Z,re),L(2,I,R,Z,re),L(1,I,R,Z,re),I.join("")};return this.__bidiEngine__.doBidiReorder=function(w,R,Z){if((function(re,ee){if(ee)for(var ge=0;ge<re.length;ge++)ee[ge]=ge;o===void 0&&(o=P(re)),d===void 0&&(d=P(re))})(w,R),l||!c||d)if(l&&c&&o^d)_=o?1:0,w=ne(w,R,Z);else if(!l&&c&&d)_=o?1:0,w=Q(w,R,Z),w=ne(w,R);else if(!l||o||c||d){if(l&&!c&&o^d)w=ne(w,R),o?(_=0,w=Q(w,R,Z)):(_=1,w=Q(w,R,Z),w=ne(w,R));else if(l&&o&&!c&&d)_=1,w=Q(w,R,Z),w=ne(w,R);else if(!l&&!c&&o^d){var I=u;o?(_=1,w=Q(w,R,Z),_=0,u=!1,w=Q(w,R,Z),u=I):(_=0,w=Q(w,R,Z),w=ne(w,R),_=1,u=!1,w=Q(w,R,Z),u=I,w=ne(w,R))}}else _=0,w=Q(w,R,Z);else _=o?1:0,w=Q(w,R,Z);return w},this.__bidiEngine__.setOptions=function(w){w&&(l=w.isInputVisual,c=w.isOutputVisual,o=w.isInputRtl,d=w.isOutputRtl,u=w.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(a){var n=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var o=0;for(l=[],o=0;o<n.length;o+=1)Object.prototype.toString.call(n[o])==="[object Array]"?l.push([r.doBidiReorder(n[o][0]),n[o][1],n[o][2]]):l.push([r.doBidiReorder(n[o])]);a.text=l}else a.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])})(ut),ut.API.TTFFont=(function(){function t(s){var r;if(this.rawData=s,r=this.contents=new Ua(s),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new G3(this),this.registerTTF()}return t.open=function(s){return new t(s)},t.prototype.parse=function(){return this.directory=new T3(this.contents),this.head=new R3(this),this.name=new B3(this),this.cmap=new Fg(this),this.toUnicode={},this.hhea=new F3(this),this.maxp=new U3(this),this.hmtx=new q3(this),this.post=new D3(this),this.os2=new O3(this),this.loca=new V3(this),this.glyf=new z3(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var s,r,a,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,c,d;for(d=[],l=0,o=(c=this.bbox).length;l<o;l++)s=c[l],d.push(Math.round(s*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(s){var r;return((r=this.cmap.unicode)!=null?r.codeMap[s]:void 0)||0},t.prototype.widthOfGlyph=function(s){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*r},t.prototype.widthOfString=function(s,r,a){var n,i,l,o;for(l=0,i=0,o=(s=""+s).length;0<=o?i<o:i>o;i=0<=o?++i:--i)n=s.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(n))+a*(1e3/r)||0;return l*(r/1e3)},t.prototype.lineHeight=function(s,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*s},t})();var Dr,Ua=(function(){function t(s){this.data=s??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(s){return this.data[this.pos++]=s},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},t.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},t.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},t.prototype.readString=function(s){var r,a;for(a=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},t.prototype.writeString=function(s){var r,a,n;for(n=[],r=0,a=s.length;0<=a?r<a:r>a;r=0<=a?++r:--r)n.push(this.writeByte(s.charCodeAt(r)));return n},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(s){return this.writeInt16(s)},t.prototype.readLongLong=function(){var s,r,a,n,i,l,o,c;return s=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),i=this.readByte(),l=this.readByte(),o=this.readByte(),c=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^n)+16777216*(255^i)+65536*(255^l)+256*(255^o)+(255^c)+1):72057594037927940*s+281474976710656*r+1099511627776*a+4294967296*n+16777216*i+65536*l+256*o+c},t.prototype.writeLongLong=function(s){var r,a;return r=Math.floor(s/4294967296),a=4294967295&s,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(s){return this.writeInt32(s)},t.prototype.read=function(s){var r,a;for(r=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)r.push(this.readByte());return r},t.prototype.write=function(s){var r,a,n,i;for(i=[],a=0,n=s.length;a<n;a++)r=s[a],i.push(this.writeByte(r));return i},t})(),T3=(function(){var t;function s(r){var a,n,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return s.prototype.encode=function(r){var a,n,i,l,o,c,d,u,f,g,x,y,$;for($ in x=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(x)/c),l=Math.floor(f/c),u=16*x-f,(n=new Ua).writeInt(this.scalarType),n.writeShort(x),n.writeShort(f),n.writeShort(l),n.writeShort(u),i=16*x,d=n.pos+i,o=null,y=[],r)for(g=r[$],n.writeString($),n.writeInt(t(g)),n.writeInt(d),n.writeInt(g.length),y=y.concat(g),$==="head"&&(o=d),d+=g.length;d%4;)y.push(0),d++;return n.write(y),a=2981146554-t(n.data),n.pos=o+8,n.writeUInt32(a),n.data},t=function(r){var a,n,i,l;for(r=Og.call(r);r.length%4;)r.push(0);for(i=new Ua(r),n=0,a=0,l=r.length;a<l;a=a+=4)n+=i.readUInt32();return 4294967295&n},s})(),I3={}.hasOwnProperty,Qr=function(t,s){for(var r in s)I3.call(s,r)&&(t[r]=s[r]);function a(){this.constructor=t}return a.prototype=s.prototype,t.prototype=new a,t.__super__=s.prototype,t};Dr=(function(){function t(s){var r;this.file=s,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var R3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var r;return(r=new Ua).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(s),r.writeShort(this.glyphDataFormat),r.data},t})(),fx=(function(){function t(s,r){var a,n,i,l,o,c,d,u,f,g,x,y,$,j,N,S,_;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=r+s.readInt(),f=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=s.readByte();break;case 4:for(x=s.readUInt16(),g=x/2,s.pos+=6,i=(function(){var A,P;for(P=[],c=A=0;0<=g?A<g:A>g;c=0<=g?++A:--A)P.push(s.readUInt16());return P})(),s.pos+=2,$=(function(){var A,P;for(P=[],c=A=0;0<=g?A<g:A>g;c=0<=g?++A:--A)P.push(s.readUInt16());return P})(),d=(function(){var A,P;for(P=[],c=A=0;0<=g?A<g:A>g;c=0<=g?++A:--A)P.push(s.readUInt16());return P})(),u=(function(){var A,P;for(P=[],c=A=0;0<=g?A<g:A>g;c=0<=g?++A:--A)P.push(s.readUInt16());return P})(),n=(this.length-s.pos+this.offset)/2,o=(function(){var A,P;for(P=[],c=A=0;0<=n?A<n:A>n;c=0<=n?++A:--A)P.push(s.readUInt16());return P})(),c=N=0,_=i.length;N<_;c=++N)for(j=i[c],a=S=y=$[c];y<=j?S<=j:S>=j;a=y<=j?++S:--S)u[c]===0?l=a+d[c]:(l=o[u[c]/2+(a-y)-(g-c)]||0)!==0&&(l+=d[c]),this.codeMap[a]=65535&l}s.pos=f}return t.encode=function(s,r){var a,n,i,l,o,c,d,u,f,g,x,y,$,j,N,S,_,A,P,M,ne,V,L,Q,w,R,Z,I,re,ee,ge,G,fe,ke,X,k,q,T,B,F,J,W,le,he,se,ve;switch(I=new Ua,l=Object.keys(s).sort(function(E,ce){return E-ce}),r){case"macroman":for($=0,j=(function(){var E=[];for(y=0;y<256;++y)E.push(0);return E})(),S={0:0},i={},re=0,fe=l.length;re<fe;re++)S[le=s[n=l[re]]]==null&&(S[le]=++$),i[n]={old:s[n],new:S[s[n]]},j[n]=S[s[n]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(j),{charMap:i,subtable:I.data,maxGlyphID:$+1};case"unicode":for(R=[],f=[],_=0,S={},a={},N=d=null,ee=0,ke=l.length;ee<ke;ee++)S[P=s[n=l[ee]]]==null&&(S[P]=++_),a[n]={old:P,new:S[P]},o=S[P]-n,N!=null&&o===d||(N&&f.push(N),R.push(n),d=o),N=n;for(N&&f.push(N),f.push(65535),R.push(65535),Q=2*(L=R.length),V=2*Math.pow(Math.log(L)/Math.LN2,2),g=Math.log(V/2)/Math.LN2,ne=2*L-V,c=[],M=[],x=[],y=ge=0,X=R.length;ge<X;y=++ge){if(w=R[y],u=f[y],w===65535){c.push(0),M.push(0);break}if(w-(Z=a[w].new)>=32768)for(c.push(0),M.push(2*(x.length+L-y)),n=G=w;w<=u?G<=u:G>=u;n=w<=u?++G:--G)x.push(a[n].new);else c.push(Z-w),M.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*L+2*x.length),I.writeUInt16(0),I.writeUInt16(Q),I.writeUInt16(V),I.writeUInt16(g),I.writeUInt16(ne),J=0,k=f.length;J<k;J++)n=f[J],I.writeUInt16(n);for(I.writeUInt16(0),W=0,q=R.length;W<q;W++)n=R[W],I.writeUInt16(n);for(he=0,T=c.length;he<T;he++)o=c[he],I.writeUInt16(o);for(se=0,B=M.length;se<B;se++)A=M[se],I.writeUInt16(A);for(ve=0,F=x.length;ve<F;ve++)$=x[ve],I.writeUInt16($);return{charMap:a,subtable:I.data,maxGlyphID:_+1}}},t})(),Fg=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="cmap",t.prototype.parse=function(s){var r,a,n;for(s.pos=this.offset,this.version=s.readUInt16(),n=s.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r=new fx(s,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(s,r){var a,n;return r==null&&(r="macroman"),a=fx.encode(s,r),(n=new Ua).writeUInt16(0),n.writeUInt16(1),a.table=n.data.concat(a.subtable),a},t})(),F3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t})(),O3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=(function(){var r,a;for(a=[],r=0;r<10;++r)a.push(s.readByte());return a})(),this.charRange=(function(){var r,a;for(a=[],r=0;r<4;++r)a.push(s.readInt());return a})(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=(function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(s.readInt());return a})(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t})(),D3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="post",t.prototype.parse=function(s){var r,a,n;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(a=s.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],n=[];s.pos<this.offset+this.length;)r=s.readByte(),n.push(this.names.push(s.readString(r)));return n;case 151552:return a=s.readUInt16(),this.offsets=s.read(a);case 262144:return this.map=(function(){var l,o,c;for(c=[],i=l=0,o=this.file.maxp.numGlyphs;0<=o?l<o:l>o;i=0<=o?++l:--l)c.push(s.readUInt32());return c}).call(this)}},t})(),M3=function(t,s){this.raw=t,this.length=t.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},B3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="name",t.prototype.parse=function(s){var r,a,n,i,l,o,c,d,u,f,g;for(s.pos=this.offset,s.readShort(),r=s.readShort(),o=s.readShort(),a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+o+s.readShort()});for(c={},i=u=0,f=a.length;u<f;i=++u)n=a[i],s.pos=n.offset,d=s.readString(n.length),l=new M3(d,n),c[g=n.nameID]==null&&(c[g]=[]),c[n.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t})(),U3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t})(),q3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="hmtx",t.prototype.parse=function(s){var r,a,n,i,l,o,c;for(s.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,u;for(u=[],r=d=0;0<=n?d<n:d>n;r=0<=n?++d:--d)u.push(s.readInt16());return u})(),this.widths=(function(){var d,u,f,g;for(g=[],d=0,u=(f=this.metrics).length;d<u;d++)i=f[d],g.push(i.advance);return g}).call(this),a=this.widths[this.widths.length-1],c=[],r=l=0;0<=n?l<n:l>n;r=0<=n?++l:--l)c.push(this.widths.push(a));return c},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t})(),Og=[].slice,z3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var r,a,n,i,l,o,c,d,u,f;return s in this.cache?this.cache[s]:(i=this.file.loca,r=this.file.contents,a=i.indexOf(s),(n=i.lengthOf(s))===0?this.cache[s]=null:(r.pos=this.offset+a,l=(o=new Ua(r.read(n))).readShort(),d=o.readShort(),f=o.readShort(),c=o.readShort(),u=o.readShort(),this.cache[s]=l===-1?new H3(o,d,f,c,u):new W3(o,l,d,f,c,u),this.cache[s]))},t.prototype.encode=function(s,r,a){var n,i,l,o,c;for(l=[],i=[],o=0,c=r.length;o<c;o++)n=s[r[o]],i.push(l.length),n&&(l=l.concat(n.encode(a)));return i.push(l.length),{table:l,offsets:i}},t})(),W3=(function(){function t(s,r,a,n,i,l){this.raw=s,this.numberOfContours=r,this.xMin=a,this.yMin=n,this.xMax=i,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),H3=(function(){function t(s,r,a,n,i){var l,o;for(this.raw=s,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return t.prototype.encode=function(){var s,r,a;for(r=new Ua(Og.call(this.raw.data)),s=0,a=this.glyphIDs.length;s<a;++s)r.pos=this.glyphOffsets[s];return r.data},t})(),V3=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Qr(t,Dr),t.prototype.tag="loca",t.prototype.parse=function(s){var r,a;return s.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var n,i;for(i=[],a=0,n=this.length;a<n;a+=2)i.push(2*s.readUInt16());return i}).call(this):(function(){var n,i;for(i=[],a=0,n=this.length;a<n;a+=4)i.push(s.readUInt32());return i}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,r){for(var a=new Uint32Array(this.offsets.length),n=0,i=0,l=0;l<a.length;++l)if(a[l]=n,i<r.length&&r[i]==l){++i,a[l]=n;var o=this.offsets[l],c=this.offsets[l+1]-o;c>0&&(n+=c)}for(var d=new Array(4*a.length),u=0;u<a.length;++u)d[4*u+3]=255&a[u],d[4*u+2]=(65280&a[u])>>8,d[4*u+1]=(16711680&a[u])>>16,d[4*u]=(4278190080&a[u])>>24;return d},t})(),G3=(function(){function t(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var s,r,a,n,i;for(r in n=this.font.cmap.tables[0].codeMap,s={},i=this.subset)a=i[r],s[r]=n[a];return s},t.prototype.glyphsFor=function(s){var r,a,n,i,l,o,c;for(n={},l=0,o=s.length;l<o;l++)n[i=s[l]]=this.font.glyf.glyphFor(i);for(i in r=[],n)(a=n[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],n[i]=a;return n},t.prototype.encode=function(s,r){var a,n,i,l,o,c,d,u,f,g,x,y,$,j,N;for(n in a=Fg.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(s),x={0:0},N=a.charMap)x[(c=N[n]).old]=c.new;for(y in g=a.maxGlyphID,l)y in x||(x[y]=g++);return u=(function(S){var _,A;for(_ in A={},S)A[S[_]]=_;return A})(x),f=Object.keys(u).sort(function(S,_){return S-_}),$=(function(){var S,_,A;for(A=[],S=0,_=f.length;S<_;S++)o=f[S],A.push(u[o]);return A})(),i=this.font.glyf.encode(l,$,x),d=this.font.loca.encode(i.offsets,$),j={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},t})();ut.API.PDFObject=(function(){var t;function s(){}return t=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},s.convert=function(r){var a,n,i,l;if(Array.isArray(r))return"["+(function(){var o,c,d;for(d=[],o=0,c=r.length;o<c;o++)a=r[o],d.push(s.convert(a));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in i=["<<"],r)l=r[n],i.push("/"+n+" "+s.convert(l));return i.push(">>"),i.join(`
`)}return""+r},s})();class ft{static exportToCSV(s,r,a={}){const{filename:n="export",includeTimestamp:i=!0}=a,l=r.map(d=>d.label),o=s.map(d=>r.map(u=>{const f=d[u.key];return u.format?u.format(f,d):String(f||"")})),c=[l,...o].map(d=>d.map(u=>`"${u.replace(/"/g,'""')}"`).join(",")).join(`
`);this.downloadFile(c,`${n}${i?`_${this.getTimestamp()}`:""}.csv`,"text/csv")}static async exportToPDF(s,r,a={}){const{filename:n="export",title:i="Data Export",includeTimestamp:l=!0,logoUrl:o="/images/partners/MDRRMO.png"}=a,c=new ut,d=c.internal.pageSize.getWidth(),u=c.internal.pageSize.getHeight(),f=20,g=45;let x=g;const y=async()=>{if(c.setFillColor(248,250,252),c.rect(0,0,d,g+5,"F"),l){c.setFontSize(10),c.setFont("helvetica","normal"),c.setTextColor(75,85,99);const L=new Date,Q=L.toLocaleString("default",{month:"long"}),w=L.getDate(),R=L.getFullYear();let Z=L.getHours();const I=L.getMinutes().toString().padStart(2,"0"),re=L.getSeconds().toString().padStart(2,"0"),ee=Z>=12?"PM":"AM";Z=Z%12,Z=Z||12;const ge=Z.toString().padStart(2,"0"),G=`Generated: ${Q} ${w}, ${R} at ${ge}:${I}:${re} ${ee}`;c.text(G,f,18)}if(o)try{if(o.startsWith("data:image"))c.addImage(o,"PNG",d-f-30,10,30,20);else{const L=new Image;L.crossOrigin="Anonymous";const Q=new Promise((w,R)=>{L.onload=()=>{try{const Z=document.createElement("canvas"),I=Z.getContext("2d");if(!I){R(new Error("Canvas context not available"));return}const re=6,ee=30,ge=20,G=L.width/L.height;let fe=ee,ke=ge;(L.width>ee||L.height>ge)&&(G>ee/ge?ke=ee/G:fe=ge*G),Z.width=Math.max(L.width,fe*re),Z.height=Math.max(L.height,ke*re),I.imageSmoothingEnabled=!0,I.imageSmoothingQuality="high",I.fillStyle="#FFFFFF",I.fillRect(0,0,Z.width,Z.height);const X=Z.width/L.width,k=Z.height/L.height,q=Math.min(X,k),T=(Z.width-L.width*q)/2,B=(Z.height-L.height*q)/2;I.drawImage(L,T,B,L.width*q,L.height*q);const F=Z.toDataURL("image/png",1);c.addImage(F,"PNG",d-f-fe,10,fe,ke),w()}catch(Z){R(Z)}},L.onerror=()=>{R(new Error(`Failed to load image: ${o}`))},L.src=o});try{await Q}catch(w){console.warn("Failed to load logo, using text placeholder:",w),c.setFontSize(12),c.setFont("helvetica","bold"),c.setTextColor(59,130,246),c.text("LOGO",d-f-25,20)}}}catch(L){console.warn("Failed to add logo to PDF:",L)}c.setFontSize(18),c.setFont("helvetica","bold"),c.setTextColor(17,24,39),c.text(i,d/2,35,{align:"center"}),c.setDrawColor(229,231,235),c.setLineWidth(.5),c.line(f,g,d-f,g)};await y();const $=r.map(L=>L.label),j=s.map(L=>r.map(Q=>{const w=L[Q.key];return Q.format?Q.format(w,L):String(w||"")})),N=d-2*f,S=20,_=50,A=[];$.forEach((L,Q)=>{const w=c.getTextWidth(L)+8,R=j.length>30?j.slice(0,30):j,Z=Math.max(...R.map(re=>{const ee=String(re[Q]||"");if(!ee||ee==="undefined"||ee==="null")return 0;const ge=c.splitTextToSize(ee,_-8);return Array.isArray(ge)?Math.max(...ge.map(G=>c.getTextWidth(G)))+8:c.getTextWidth(ge)+8})),I=Math.max(w,Z,S);A.push(Math.min(I,_))});const P=A.reduce((L,Q)=>L+Q,0);if(P>N){const L=N/P;A.forEach((Q,w)=>{A[w]=Math.max(Q*L,S)})}const M=(L,Q)=>{c.setFillColor(59,130,246),c.rect(f,L-5,A.reduce((I,re)=>I+re,0),10,"F"),c.setLineWidth(.2),c.setDrawColor(37,99,235),c.rect(f,L-5,A.reduce((I,re)=>I+re,0),10);let R=f;for(let I=0;I<A.length;I++)I>0&&(c.setDrawColor(255,255,255),c.line(R,L-5,R,L-5+10)),R+=A[I];c.setTextColor(255,255,255),c.setFont("helvetica",Q===1?"bold":"normal"),c.setFontSize(8);let Z=f;return $.forEach((I,re)=>{const ee=A[re],ge=String(I),G=ee-4,fe=c.splitTextToSize(ge,G);Array.isArray(fe)?fe.forEach((ke,X)=>{c.text(ke,Z+2,L+X*4)}):c.text(ge||"",Z+2,L),Z+=ee}),L+8};let ne=1;x+=15,x=M(x,ne),c.setFont("helvetica","normal"),c.setFontSize(7);for(let L=0;L<j.length;L++){const Q=j[L];let w=f,R=8;const Z=[];Q.forEach((re,ee)=>{const ge=A[ee],G=String(Q[ee]||""),fe=c.splitTextToSize(G,ge-6);Z.push(Array.isArray(fe)?fe:[fe]);const ke=(Array.isArray(fe)?fe.length:1)*4+4;R=Math.max(R,ke)}),x+R>u-f-15&&(c.setFontSize(8),c.setTextColor(107,114,128),c.text(`Page ${ne} of ${Math.ceil(s.length/25)}`,d/2,u-10,{align:"center"}),c.addPage(),ne++,await y(),x=g+15,x=M(x,ne),c.setFontSize(7)),L%2===1&&(c.setFillColor(249,250,251),c.rect(f,x-3,A.reduce((re,ee)=>re+ee,0),R,"F")),c.setLineWidth(.1),c.setDrawColor(229,231,235),c.rect(f,x-3,A.reduce((re,ee)=>re+ee,0),R);let I=f;for(let re=0;re<A.length;re++)re>0&&c.line(I,x-3,I,x-3+R),I+=A[re];c.setTextColor(55,65,81),w=f,Z.forEach((re,ee)=>{const ge=A[ee],G=re.length*4,fe=x+(R-G)/2+1;re.forEach((ke,X)=>{let k=ke;if(c.getTextWidth(ke)>ge-6){const q=c.splitTextToSize(ke,ge-6);k=Array.isArray(q)?q[0]:q}c.text(k,w+3,fe+X*4,{maxWidth:ge-6})}),w+=ge}),x+=R}x+=15,c.setFillColor(239,246,255),c.rect(f,x,N,15,"F"),c.setDrawColor(59,130,246),c.setLineWidth(.3),c.rect(f,x,N,15),c.setFont("helvetica","bold"),c.setFontSize(12),c.setTextColor(30,64,175),c.text(`Total Records: ${s.length}`,d/2,x+10,{align:"center"}),c.setFontSize(8),c.setTextColor(107,114,128);const V=`Page ${ne} • Generated ${new Date().toLocaleDateString()}`;c.text(V,d/2,u-10,{align:"center"}),c.save(`${n}${l?`_${this.getTimestamp()}`:""}.pdf`)}static exportToJSON(s,r={}){const{filename:a="export",includeTimestamp:n=!0}=r,i=JSON.stringify(s,null,2);this.downloadFile(i,`${a}${n?`_${this.getTimestamp()}`:""}.json`,"application/json")}static exportToExcel(s,r,a={}){const{filename:n="export",title:i="Data Export",includeTimestamp:l=!0}=a,o=r.map(x=>x.label),c=s.map(x=>r.map(y=>{const $=x[y.key];return y.format?y.format($,x):String($||"")}));let d="";i&&(d+=`"${i}"
`,d+=`"Generated on: ${new Date().toLocaleString()}"
`,d+=`"Total Records: ${s.length}"
`,d+=`
`);const u=o.map(x=>`"${x.replace(/"/g,'""')}"`).join(",");d+=u+`
`,c.forEach(x=>{const y=x.map($=>{const j=String($||"");return!isNaN(Number(j))&&j!==""&&!j.includes("/")&&!j.includes("-")&&j.length<15?j:j.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)||j.match(/^\d{4}-\d{2}-\d{2}/)?`"${j}"`:`"${j.replace(/"/g,'""')}"`}).join(",");d+=y+`
`}),d+=`
`,d+=`"Summary","Total Records: ${s.length}","Generated: ${new Date().toLocaleDateString()}"
`;const g="\uFEFF"+d;this.downloadFile(g,`${n}${l?`_${this.getTimestamp()}`:""}.csv`,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}static downloadFile(s,r,a){const n=new Blob([s],{type:a}),i=URL.createObjectURL(n),l=document.createElement("a");l.href=i,l.download=r,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)}static getTimestamp(){const s=new Date;return s.getFullYear().toString()+(s.getMonth()+1).toString().padStart(2,"0")+s.getDate().toString().padStart(2,"0")+"_"+s.getHours().toString().padStart(2,"0")+s.getMinutes().toString().padStart(2,"0")+s.getSeconds().toString().padStart(2,"0")}static formatDate=s=>s?new Date(s).toLocaleDateString():"";static formatDateTime=s=>s?new Date(s).toLocaleString():"";static formatCurrency=s=>s==null?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s);static formatStatus=s=>{switch(s){case 1:return"Active";case 0:return"Inactive";case-1:return"Suspended";default:return"Unknown"}};static async loadImageAsBase64(s){return new Promise((r,a)=>{const n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{const i=document.createElement("canvas"),l=i.getContext("2d");if(!l){a(new Error("Failed to get canvas context"));return}const o=6;i.width=Math.max(n.width,n.width*o),i.height=Math.max(n.height,n.height*o),l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",l.fillStyle="#FFFFFF",l.fillRect(0,0,i.width,i.height);const c=i.width/n.width,d=i.height/n.height,u=Math.min(c,d),f=(i.width-n.width*u)/2,g=(i.height-n.height*u)/2;l.drawImage(n,f,g,n.width*u,n.height*u);try{const x=i.toDataURL("image/png",1);r(x)}catch(x){a(x)}},n.onerror=()=>{a(new Error(`Failed to load image: ${s}`))},n.src=s})}}const tr=({open:t,onClose:s,onExportPDF:r,onExportCSV:a,onExportExcel:n,data:i,columns:l,title:o})=>{if(!t)return null;const c=i.slice(0,5),d=u=>{u.target===u.currentTarget&&s()};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",onClick:d,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-white",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:o||"Export Preview"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Preview of first 5 records • ",i.length," total records"]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200","aria-label":"Close modal",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)]",children:e.jsx("div",{className:"p-6",children:i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-white",children:l.map(u=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b border-gray-200",children:u.label},u.key))})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map((u,f)=>e.jsx("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:l.map(g=>e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:u[g.key]||"-"},g.key))},f))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-file-list-line text-4xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No data to preview"})]})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-white flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("i",{className:"ri-information-line"}),e.jsxs("span",{children:["Total records to export: ",e.jsx("strong",{className:"text-gray-900",children:i.length})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all duration-200 font-medium",children:"Cancel"}),e.jsxs("button",{onClick:a,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all duration-200 font-medium shadow-sm hover:shadow-md flex items-center gap-2",disabled:i.length===0,children:[e.jsx("i",{className:"ri-file-text-line"}),"Export CSV"]}),e.jsxs("button",{onClick:n,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all duration-200 font-medium shadow-sm hover:shadow-md flex items-center gap-2",disabled:i.length===0,children:[e.jsx("i",{className:"ri-file-excel-line"}),"Export Excel"]}),e.jsxs("button",{onClick:r,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 font-medium shadow-sm hover:shadow-md flex items-center gap-2",disabled:i.length===0,children:[e.jsx("i",{className:"ri-file-pdf-line"}),"Export PDF"]})]})]})]})})},gx=()=>{const[t,s]=b.useState({totalIncidents:0,activeIncidents:0,totalUsers:0,totalStaff:0,totalAlerts:0,activeAlerts:0}),[r,a]=b.useState([]),[n,i]=b.useState(null),[l,o]=b.useState(null),[c,d]=b.useState([]),[u,f]=b.useState([]),[g,x]=b.useState([]),[y,$]=b.useState([]),[j,N]=b.useState("days"),[S,_]=b.useState(7),[A,P]=b.useState([]),[M,ne]=b.useState(""),[V,L]=b.useState([]),[Q,w]=b.useState(!0),[R,Z]=b.useState(!1),[I,re]=b.useState(null),[ee,ge]=b.useState(!1),[G,fe]=b.useState([]),[ke,X]=b.useState([]),[k,q]=b.useState(""),{showToast:T}=Gs();b.useEffect(()=>{(async()=>{await Ie(),await ze(j,S)})()},[]),b.useEffect(()=>{j==="days"&&S>30?_(7):(j==="weeks"&&S>52||j==="months"&&S>24)&&_(12)},[j]),b.useEffect(()=>{console.log(`useEffect triggered - Period: ${j}, Limit: ${S}`),Z(!0),ze(j,S)},[j,S]);const B=U=>{const xe=["12 AM","1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"];return U.map(H=>{const pe=(H.sample_datetimes?H.sample_datetimes.split(","):[])[0]||H.latest_datetime,Le=H.consecutive_dates?H.consecutive_dates.split(","):[],We=(Oe=>{const oe={};return Oe.forEach(je=>{if(!je)return;const Me=new Date(je),et=Me.toLocaleDateString("en-US",{month:"short"}),Ze=Me.getDate();oe[et]||(oe[et]=[]),oe[et].push(Ze)}),Object.keys(oe).forEach(je=>{oe[je].sort((Me,et)=>Me-et)}),Object.keys(oe).sort((je,Me)=>{const et=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return et.indexOf(je)-et.indexOf(Me)}).map(je=>`${je} ${oe[je].join(", ")}`).join(", ")})(Le),Ye=Oe=>{if(!Oe)return null;const oe=new Date(Oe);return{date:oe.toLocaleDateString("en-US",{month:"long",day:"numeric"}),time:oe.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),full:oe.toLocaleDateString("en-US",{month:"long",day:"numeric"})+" "+oe.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}},Ce=Ye(pe),Fe=Ye(H.earliest_datetime),Xe=Ye(H.latest_datetime),ae=We||Ce?.date||"";return{name:xe[H.hour]||`${H.hour}:00`,count:H.incident_count,percentage:0,timeLabel:`${xe[H.hour]||`${H.hour}:00`} (${Ce?.full||""})`,hour:H.hour,formattedTime:xe[H.hour]||`${H.hour}:00`,displayName:xe[H.hour]||`${H.hour}:00`,sampleDate:Ce?.date||"",sampleTime:Ce?.time||"",sampleDateTime:Ce?.full||"",dateRange:ae,timeRange:Fe?.time&&Xe?.time?`${Fe.time} - ${Xe.time}`:"",consecutiveDates:We.split(", "),earliestDateTime:H.earliest_datetime,latestDateTime:H.latest_datetime}})},F=()=>{const U=new Date,xe=new Date;xe.setDate(xe.getDate()-30);const H=ye=>ye.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${H(xe)} - ${H(U)}`},J=()=>{const U=[{metric:"Total Incidents",value:t.totalIncidents},{metric:"Active Incidents",value:t.activeIncidents},{metric:"Total Users",value:t.totalUsers},{metric:"Staff Members",value:t.totalStaff},{metric:"Total Alerts",value:t.totalAlerts},{metric:"Active Alerts",value:t.activeAlerts}],xe=[{key:"metric",label:"Metric"},{key:"value",label:"Value"}];fe(U),X(xe),q("Dashboard Statistics"),ge(!0)},W=()=>{const U=[{key:"incident_type",label:"Incident Type"},{key:"count",label:"Count"}];fe(c),X(U),q("Incident Types Distribution"),ge(!0)},le=()=>{const U=[{key:"priority",label:"Priority Level"},{key:"count",label:"Count"}];fe(u),X(U),q("Priority Level Distribution"),ge(!0)},he=()=>{const U=[{key:"period",label:"Period"},{key:"total_incidents",label:"Total Incidents"},{key:"resolved_incidents",label:"Resolved Incidents"},{key:"high_priority_incidents",label:"High Priority Incidents"}];fe(y),X(U),q(`Incident Trends (Last ${S} ${j})`),ge(!0)},se=()=>{const U=B(A),xe=[{key:"name",label:"Hour"},{key:"count",label:"Incident Count"},{key:"dateRange",label:"Date Range"},{key:"sampleDateTime",label:"Sample DateTime"}];fe(U),X(xe),q(`Peak Hours Analysis (${M})`),ge(!0)},ve=()=>{if(g.length===0){T({message:"No location data available to export",type:"warning"});return}const U=[{key:"name",label:"Barangay"},...Object.keys(g[0]||{}).filter(xe=>xe!=="name").map(xe=>({key:xe,label:xe.charAt(0).toUpperCase()+xe.slice(1)}))];fe(g),X(U),q("Barangay-based Risk Analysis"),ge(!0)},E=()=>{if(V.length===0){T({message:"No seasonal data available to export",type:"warning"});return}const U=[{key:"period",label:"Period"},{key:"floods",label:"Floods"},{key:"fires",label:"Fires"},{key:"accidents",label:"Accidents"},{key:"otherIncidents",label:"Other Incidents"},{key:"allIncidents",label:"All Incidents"},{key:"total",label:"Total"}];fe(V),X(U),q("Seasonal Incident Patterns"),ge(!0)},ce=()=>{if(r.length===0){T({message:"No recent activity available to export",type:"warning"});return}const U=[{key:"action",label:"Action"},{key:"details",label:"Details"},{key:"user_type",label:"User Type"},{key:"created_at",label:"Date"}];fe(r),X(U),q("Recent Activity"),ge(!0)},K=()=>{const U=[];U.push({section:"Dashboard Statistics",metric:"Total Incidents",value:t.totalIncidents,details:"Overall incident count"}),U.push({section:"Dashboard Statistics",metric:"Active Incidents",value:t.activeIncidents,details:"Currently active incidents"}),U.push({section:"Dashboard Statistics",metric:"Total Users",value:t.totalUsers,details:"Registered users count"}),U.push({section:"Dashboard Statistics",metric:"Staff Members",value:t.totalStaff,details:"Staff members count"}),U.push({section:"Dashboard Statistics",metric:"Total Alerts",value:t.totalAlerts,details:"Total alerts count"}),U.push({section:"Dashboard Statistics",metric:"Active Alerts",value:t.activeAlerts,details:"Currently active alerts"}),c.forEach(ye=>{U.push({section:"Incident Types",metric:ye.incident_type,value:ye.count,details:"Incident type distribution"})}),u.forEach(ye=>{U.push({section:"Priority Distribution",metric:ye.priority,value:ye.count,details:"Priority level distribution"})}),y.forEach(ye=>{U.push({section:"Trends Data",metric:ye.period||ye.month||"Unknown Period",value:ye.total_incidents,details:`Total incidents in ${ye.period||ye.month||"Unknown Period"}`})}),B(A).forEach(ye=>{U.push({section:"Peak Hours Analysis",metric:ye.name,value:ye.count,details:`Peak hour: ${ye.dateRange||"N/A"}`})}),g.forEach(ye=>{Object.keys(ye).forEach(pe=>{pe!=="name"&&U.push({section:"Location Data",metric:`${ye.name} - ${pe}`,value:ye[pe],details:"Barangay-based incident data"})})}),V.forEach(ye=>{U.push({section:"Seasonal Patterns",metric:ye.period,value:ye.total,details:`Total incidents in ${ye.period}`})}),r.forEach(ye=>{U.push({section:"Recent Activity",metric:ye.action,value:1,details:`${ye.details} - ${ye.user_type}`})});const H=[{key:"section",label:"Data Section"},{key:"metric",label:"Metric/Type"},{key:"value",label:"Value"},{key:"details",label:"Details"}];fe(U),X(H),q("Complete Dashboard Data Export"),ge(!0)},ze=async(U="months",xe=12)=>{try{Z(!0),console.log(`Fetching trends data for period: ${U}, limit: ${xe}`);const H=await Un.getMonthlyTrends(U,xe);if(console.log("Trends response:",H),H.success&&H.trendsData){const ye=H.trendsData.map(pe=>({month:pe.period,period:pe.period,total_incidents:pe.total_incidents||0,resolved_incidents:pe.resolved_incidents||0,high_priority_incidents:pe.high_priority_incidents||0}));console.log("Mapped data:",ye),$(ye)}else console.warn("Trends API returned success: false or no data"),$([])}catch(H){console.error("Failed to fetch trends data:",H),$([])}finally{Z(!1)}},Ie=async()=>{try{w(!0),re(null);const[U,xe,H]=await Promise.all([Un.getStats(),Un.getOverview(),Un.getAnalytics()]);await ze(j,S);let ye=null;try{ye=await Un.getLocationIncidents()}catch(Le){console.warn("Location incidents endpoint not available, using fallback data:",Le),ye={success:!0,locationIncidents:[]}}let pe=null;try{pe=await Un.getSeasonalPatterns()}catch(Le){console.warn("Seasonal patterns endpoint not available, using fallback data:",Le),pe={success:!0,seasonalData:[]}}if(U.success)if(s({totalIncidents:U.stats.incidents.total_incidents,activeIncidents:U.stats.incidents.active_incidents,totalUsers:U.stats.users.total_users,totalStaff:U.stats.staff.total_staff,totalAlerts:U.stats.alerts.total_alerts,activeAlerts:U.stats.alerts.active_alerts}),a(U.recentActivity||[]),U.trends){const Le=U.trends.incidents,Re=U.trends.users;if(Le&&Le.length>=2){const We=Le[Le.length-1].count,Ye=Le[Le.length-2].count,Ce=Ye===0?0:(We-Ye)/Ye*100;i(`${Ce>=0?"+":""}${Ce.toFixed(1)}% from last period`)}else i(null);if(Re&&Re.length>=2){const We=Re[Re.length-1].count,Ye=Re[Re.length-2].count,Ce=Ye===0?0:(We-Ye)/Ye*100;o(`${Ce>=0?"+":""}${Ce.toFixed(1)}% from last period`)}else o(null)}else i(null),o(null);else re("Failed to fetch dashboard statistics");if(xe.success&&d(xe.overview.incidentTypes||[]),H.success){f(H.analytics.incidentPriority||[]),$(H.analytics.monthlyIncidents||[]);const Re=(H.analytics.peakHours||[]).map(We=>({hour:We.hour,incident_count:We.incident_count,earliest_datetime:We.earliest_datetime||"",latest_datetime:We.latest_datetime||"",sample_datetimes:We.sample_datetimes||"",consecutive_dates:We.consecutive_dates||""}));P(Re),ne(F())}ye&&ye.success?x(ye.locationIncidents||[]):x([]),pe&&pe.success?L(pe.seasonalData||[]):L([])}catch(U){console.error("Error fetching dashboard stats:",U),re(U instanceof Error?U.message:"Failed to fetch dashboard statistics")}finally{w(!1)}},Ne=({title:U,value:xe,icon:H,color:ye,trend:pe})=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:U}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:xe?.toLocaleString()||"0"}),pe&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[e.jsx("i",{className:"ri-arrow-up-line mr-1"}),pe]})]}),e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${ye}`,children:e.jsx("i",{className:`${H} text-xl text-white`})})]})});return Q?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):I?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 text-xl mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Dashboard"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:I}),e.jsx("button",{onClick:Ie,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Try Again"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Analytics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Overview of emergency management system"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Data",e.jsx("i",{className:"ri-arrow-down-s-line ml-1"})]}),e.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:K,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center border-b border-gray-200 mb-1",children:[e.jsx("i",{className:"ri-download-cloud-line mr-3 text-green-600"}),e.jsx("span",{className:"font-semibold",children:"Export All Data"})]}),e.jsx("div",{className:"px-2 py-1 text-xs text-gray-500 mb-2",children:"Individual Exports:"}),e.jsxs("button",{onClick:J,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("i",{className:"ri-bar-chart-line mr-3 text-blue-500"}),"Dashboard Statistics"]}),e.jsxs("button",{onClick:W,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("i",{className:"ri-pie-chart-line mr-3 text-red-500"}),"Incident Types"]}),e.jsxs("button",{onClick:le,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("i",{className:"ri-pie-chart-2-line mr-3 text-orange-500"}),"Priority Distribution"]}),e.jsxs("button",{onClick:he,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("i",{className:"ri-line-chart-line mr-3 text-green-500"}),"Trends Data"]}),e.jsxs("button",{onClick:se,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("i",{className:"ri-time-line mr-3 text-yellow-500"}),"Peak Hours Analysis"]}),e.jsxs("button",{onClick:ve,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("i",{className:"ri-map-pin-line mr-3 text-purple-500"}),"Location Data"]}),e.jsxs("button",{onClick:E,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("i",{className:"ri-calendar-line mr-3 text-indigo-500"}),"Seasonal Patterns"]}),e.jsxs("button",{onClick:ce,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[e.jsx("i",{className:"ri-history-line mr-3 text-gray-500"}),"Recent Activity"]})]})})]}),e.jsxs("button",{onClick:Ie,disabled:Q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:`ri-refresh-line mr-2 ${Q?"animate-spin":""}`}),"Refresh Data"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(Ne,{title:"Total Incidents",value:t.totalIncidents,icon:"ri-error-warning-line",color:"bg-red-500",trend:n||void 0}),e.jsx(Ne,{title:"Active Incidents",value:t.activeIncidents,icon:"ri-alarm-warning-line",color:"bg-orange-500"}),e.jsx(Ne,{title:"Total Users",value:t.totalUsers,icon:"ri-user-line",color:"bg-blue-500",trend:l||void 0}),e.jsx(Ne,{title:"Staff Members",value:t.totalStaff,icon:"ri-team-line",color:"bg-green-500"}),e.jsx(Ne,{title:"Total Alerts",value:t.totalAlerts,icon:"ri-notification-line",color:"bg-purple-500"}),e.jsx(Ne,{title:"Active Alerts",value:t.activeAlerts,icon:"ri-alarm-warning-line",color:"bg-indigo-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Do,{data:c.map(U=>({name:U.incident_type,count:U.count})),title:"Most Common Incident Types",dataKey:"count",color:"#ef4444",height:300}),e.jsx(Qj,{data:u.map(U=>({name:U.priority,count:U.count})),title:"Priority Level Distribution",dataKey:"count",nameKey:"name",height:300,colors:{low:"#10B981",moderate:"#FFD966",high:"#E67E22",critical:"#EF4444"}})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Incident Trends Analysis"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Period:"}),e.jsxs("select",{value:j,onChange:U=>N(U.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"days",children:"Days"}),e.jsx("option",{value:"weeks",children:"Weeks"}),e.jsx("option",{value:"months",children:"Months"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Last:"}),e.jsxs("select",{value:S,onChange:U=>_(parseInt(U.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[j==="days"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:7,children:"7 days"}),e.jsx("option",{value:14,children:"14 days"}),e.jsx("option",{value:30,children:"30 days"})]}),j==="weeks"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:4,children:"4 weeks"}),e.jsx("option",{value:8,children:"8 weeks"}),e.jsx("option",{value:12,children:"12 weeks"}),e.jsx("option",{value:24,children:"24 weeks"})]}),j==="months"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:6,children:"6 months"}),e.jsx("option",{value:12,children:"12 months"}),e.jsx("option",{value:18,children:"18 months"}),e.jsx("option",{value:24,children:"24 months"})]})]})]}),e.jsxs("button",{onClick:()=>ze(j,S),disabled:R,className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:`ri-refresh-line mr-1 ${R?"animate-spin":""}`}),R?"Loading...":"Refresh"]})]})]}),R||y.length===0&&!R?e.jsx("div",{className:"flex items-center justify-center h-[350px] bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:R?"Loading trends data...":"Loading chart data..."}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Period: ",j," | Limit: ",S]})]})}):y.length>0?e.jsx(rN,{data:y.map(U=>({date:U.period||U.month||"Unknown",count:U.total_incidents||0})),title:`Incident Trends (Last ${S} ${j})`,color:"#10b981",height:350}):e.jsx("div",{className:"flex items-center justify-center h-[350px] bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-bar-chart-line text-4xl text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No data available for the selected period"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting the time range or check back later"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(Do,{data:B(A),title:`Peak Hours Analysis - Incident Distribution by Time (${M||"Last 30 Days"})`,dataKey:"count",color:"#f59e0b",height:350}),A.length===0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-information-line text-amber-500 text-lg mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-amber-800 font-medium",children:"Peak Hours Analysis"}),e.jsxs("p",{className:"text-amber-600 text-sm mt-1",children:["This bar chart shows incident distribution by hour of day over the period ",M||"last 30 days",'. Hover over bars to see consecutive incident dates and exact times in 12-hour format (e.g., "September 30 8:30 PM"). It helps identify peak hours when incidents are most likely to occur, enabling better resource allocation.']})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[(()=>{console.log("Location incidents data:",g);const U=[];return g.forEach(xe=>{Object.keys(xe).forEach(H=>{H!=="name"&&!U.includes(H)&&U.push(H)})}),console.log("Available incident type keys:",U),e.jsx(sN,{data:g.length>0?g:[],title:"Risky Areas by Barangay",stackKeys:U,height:400})})(),g.length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-information-line text-blue-500 text-lg mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-800 font-medium",children:"Barangay-based Risk Analysis"}),e.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"This chart shows incident distribution by barangay. Barangay names are extracted from incident descriptions. If no data appears, ensure incidents have barangay information in their descriptions or check the backend server."})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(Do,{data:V.map(U=>({name:U.period,floods:U.floods||0,fires:U.fires||0,accidents:U.accidents||0,otherIncidents:U.otherIncidents||0,allIncidents:U.allIncidents||0})),title:"Seasonal Incident Patterns",stacked:!0,stackKeys:["floods","fires","accidents","otherIncidents","allIncidents"],height:400}),V.length===0&&e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-information-line text-purple-500 text-lg mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-purple-800 font-medium",children:"Seasonal Patterns Analysis"}),e.jsx("p",{className:"text-purple-600 text-sm mt-1",children:"This clustered column chart compares incident patterns across different seasons: floods during rainy season (June-November), fires during summer (March-May), and accidents during holiday periods. Data covers the last 2 years."})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Incidents"}),e.jsx("a",{href:"/admin/incidents/view",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:r.length>0?r.slice(0,5).map((U,xe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${U.action.includes("incident")?"bg-red-500":U.action.includes("alert")?"bg-orange-500":"bg-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:U.action.replace("_"," ")}),e.jsx("p",{className:"text-sm text-gray-600",children:U.details})]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(U.created_at).toLocaleDateString()})]},xe)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-inbox-line text-3xl mb-2"}),e.jsx("p",{children:"No recent activity"})]})})]})}),e.jsx(tr,{open:ee,onClose:()=>ge(!1),data:G,columns:ke,title:k,onExportCSV:()=>{try{ft.exportToCSV(G,ke,{filename:k.toLowerCase().replace(/\s+/g,"_"),title:k}),T({message:"Data exported to CSV successfully!",type:"success"}),ge(!1)}catch(U){console.error("Export error:",U),T({message:"Failed to export data. Please try again.",type:"error"})}},onExportExcel:()=>{try{ft.exportToExcel(G,ke,{filename:k.toLowerCase().replace(/\s+/g,"_"),title:k}),T({message:"Data exported to Excel successfully!",type:"success"}),ge(!1)}catch(U){console.error("Export error:",U),T({message:"Failed to export data. Please try again.",type:"error"})}},onExportPDF:async()=>{try{await ft.exportToPDF(G,ke,{filename:k.toLowerCase().replace(/\s+/g,"_"),title:k}),T({message:"Data exported to PDF successfully!",type:"success"}),ge(!1)}catch(U){console.error("Export error:",U),T({message:"Failed to export data. Please try again.",type:"error"})}}})]})};delete Xt.Icon.Default.prototype._getIconUrl;Xt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const px=Xt.divIcon({html:`
    <div style="
      background-color: #ef4444;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
    ">
      <i class="ri-alert-line" style="color: white; font-size: 10px;"></i>
    </div>
  `,className:"alert-location-marker",iconSize:[20,20],iconAnchor:[10,10]}),Jr=[{name:"Alupay",lat:13.8404,lng:121.2922},{name:"Antipolo",lat:13.708,lng:121.3096},{name:"Bagong Pook",lat:13.8402,lng:121.2216},{name:"Balibago",lat:13.8512,lng:121.2855},{name:"Barangay A",lat:13.8457,lng:121.2104},{name:"Barangay B",lat:13.8461,lng:121.2065},{name:"Barangay C",lat:13.8467,lng:121.2032},{name:"Barangay D",lat:13.844,lng:121.2035},{name:"Barangay E",lat:13.8415,lng:121.2047},{name:"Bayawang",lat:13.7944,lng:121.2798},{name:"Baybayin",lat:13.8277,lng:121.2589},{name:"Bulihan",lat:13.7967,lng:121.2351},{name:"Cahigam",lat:13.8021,lng:121.2501},{name:"Calantas",lat:13.734,lng:121.3129},{name:"Colongan",lat:13.8114,lng:121.1762},{name:"Itlugan",lat:13.819,lng:121.2036},{name:"Leviste",lat:13.7694,lng:121.2868},{name:"Lumbangan",lat:13.8122,lng:121.2649},{name:"Maalas-as",lat:13.8112,lng:121.2122},{name:"Mabato",lat:13.8144,lng:121.2913},{name:"Mabunga",lat:13.781,lng:121.2924},{name:"Macalamcam A",lat:13.8551,lng:121.3046},{name:"Macalamcam B",lat:13.8606,lng:121.3265},{name:"Malaya",lat:13.8535,lng:121.172},{name:"Maligaya",lat:13.8182,lng:121.2742},{name:"Marilag",lat:13.8562,lng:121.1764},{name:"Masaya",lat:13.8383,lng:121.1852},{name:"Matamis",lat:13.7216,lng:121.3305},{name:"Mavalor",lat:13.8177,lng:121.2315},{name:"Mayuro",lat:13.7944,lng:121.2623},{name:"Namuco",lat:13.8382,lng:121.2036},{name:"Namunga",lat:13.8431,lng:121.1978},{name:"Nasi",lat:13.7699,lng:121.3127},{name:"Natu",lat:13.842,lng:121.2683},{name:"Palakpak",lat:13.7079,lng:121.332},{name:"Pinagsibaan",lat:13.8438,lng:121.3141},{name:"Putingkahoy",lat:13.8349,lng:121.3227},{name:"Quilib",lat:13.8603,lng:121.2002},{name:"Salao",lat:13.8578,lng:121.3455},{name:"San Carlos",lat:13.8478,lng:121.2475},{name:"San Ignacio",lat:13.8335,lng:121.1764},{name:"San Isidro",lat:13.8074,lng:121.3152},{name:"San Jose",lat:13.8419,lng:121.2329},{name:"San Roque",lat:13.8518,lng:121.2039},{name:"Santa Cruz",lat:13.8599,lng:121.1853},{name:"Timbugan",lat:13.8095,lng:121.1869},{name:"Tiquiwan",lat:13.8284,lng:121.2399},{name:"Tulos",lat:13.7231,lng:121.2971}],J3=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState({title:"",message:"",type:"info",priority:"medium",status:"draft",recipients:[],latitude:null,longitude:null,radius_km:5,location_text:""}),[c,d]=b.useState(!1),[u,f]=b.useState(null),[g,x]=b.useState(""),[y,$]=b.useState(!1),[j,N]=b.useState(""),[S,_]=b.useState(!1),[A,P]=b.useState(!1),[M]=b.useState([13.84542,121.206189]),[ne]=b.useState(13),{showToast:V}=Gs(),L=[{key:"id",label:"ID"},{key:"title",label:"Title"},{key:"message",label:"Message"},{key:"type",label:"Type"},{key:"priority",label:"Priority"},{key:"status",label:"Status"},{key:"created_at",label:"Created Date",format:se=>ft.formatDateTime(se)},{key:"radius_km",label:"Radius (km)",format:se=>se?`${se} km`:"N/A"}],Q=se=>{if(!t.length){V({type:"warning",message:"No data to export"});return}try{const ve={filename:"alerts_export",title:"Alerts Management Report",includeTimestamp:!0};switch(se){case"csv":ft.exportToCSV(t,L,ve);break;case"pdf":ft.exportToPDF(t,L,ve);break;case"json":ft.exportToJSON(t,ve);break;case"excel":ft.exportToExcel(t,L,ve);break}V({type:"success",message:`Data exported to ${se.toUpperCase()} successfully`})}catch(ve){console.error("Export failed:",ve),V({type:"error",message:"Export failed"})}};b.useEffect(()=>{Z()},[]);const w=()=>(fu({click:se=>{const{lat:ve,lng:E}=se.latlng;o(ce=>({...ce,latitude:ve,longitude:E,location_text:`${ve.toFixed(6)}, ${E.toFixed(6)}`}))}}),null),R=()=>(fu({click:se=>{const{lat:ve,lng:E}=se.latlng,ce=Number(ve),K=Number(E);f(ze=>ze?{...ze,latitude:ce,longitude:K,location_text:`${ce.toFixed(6)}, ${K.toFixed(6)}`}:null)}}),null),Z=async()=>{try{a(!0);const se=await Jn.getAlerts();if(se.success){const ve=se.alerts.map(E=>({...E,title:E.title||"Untitled Alert",message:E.message||E.description||"No description",type:E.type||E.alert_severity||"info",status:E.status||"active",recipients:typeof E.recipients=="string"?JSON.parse(E.recipients):E.recipients||[],priority:E.priority||"medium"}));s(ve)}else console.error("Failed to fetch alerts:",se.message)}catch(se){console.error("Error fetching alerts:",se)}finally{a(!1)}},I=async()=>{try{if(!l.title||!l.message){V({type:"warning",message:"Please fill in all required fields"});return}if(l.latitude&&l.longitude&&!l.radius_km){V({type:"warning",message:"Please specify alert radius"});return}const se={title:l.title,message:l.message,type:l.type,priority:l.priority,recipients:l.recipients,send_immediately:!1,latitude:l.latitude,longitude:l.longitude,radius_km:l.radius_km,location_text:l.location_text};(await Jn.createAlert(se)).success?(await Z(),o({title:"",message:"",type:"info",priority:"medium",recipients:[],latitude:null,longitude:null,radius_km:5,location_text:""}),i(!1),V({type:"success",message:"Alert created successfully"})):V({type:"error",message:"Failed to create alert"})}catch(se){console.error("Error creating alert:",se),V({type:"error",message:"Error creating alert"})}},re=async()=>{try{if(!u||!u.title||!u.message){V({type:"warning",message:"Please fill in all required fields"});return}if(u.latitude&&u.longitude&&!u.radius_km){V({type:"warning",message:"Please specify alert radius"});return}const se={title:u.title,message:u.message,type:u.type,priority:u.priority,recipients:u.recipients,latitude:u.latitude,longitude:u.longitude,radius_km:u.radius_km,location_text:u.location_text};(await Jn.updateAlert(u.id,se)).success?(await Z(),f(null),d(!1),V({type:"success",message:"Alert updated successfully"})):V({type:"error",message:"Failed to update alert"})}catch(se){console.error("Error updating alert:",se),V({type:"error",message:"Error updating alert"})}},ee=async se=>{try{(await Jn.sendAlert(se)).success?(await Z(),V({type:"success",message:"Alert sent successfully"})):V({type:"error",message:"Failed to send alert"})}catch(ve){console.error("Error sending alert:",ve),V({type:"error",message:"Error sending alert"})}},[ge,G]=b.useState(!1),[fe,ke]=b.useState(null),X=se=>{ke(se),G(!0)},k=async()=>{if(fe!=null)try{(await Jn.deleteAlert(fe)).success?(await Z(),V({type:"success",message:"Alert deleted successfully"})):V({type:"error",message:"Failed to delete alert"})}catch(se){console.error("Error deleting alert:",se),V({type:"error",message:"Error deleting alert"})}finally{G(!1),ke(null)}},q=se=>{switch(se){case"emergency":return"bg-red-100 text-red-800 border-red-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"info":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},T=se=>{switch(se){case"sent":return"bg-green-100 text-green-800";case"active":return"bg-blue-100 text-blue-800";case"resolved":return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},B=Jr.filter(se=>se.name.toLowerCase().includes(g.toLowerCase())),F=se=>{const ve=l?.recipients||[];ve.includes(se)?o(E=>({...E,recipients:ve.filter(ce=>ce!==se)})):o(E=>({...E,recipients:Array.from(new Set([...ve,se]))}))},J=(l?.recipients||[]).filter(se=>Jr.some(ve=>ve.name===se)).length,W=Jr.filter(se=>se.name.toLowerCase().includes(j.toLowerCase())),le=se=>{const ve=u?.recipients||[];ve.includes(se)?f(E=>E?{...E,recipients:ve.filter(ce=>ce!==se)}:null):f(E=>E?{...E,recipients:Array.from(new Set([...ve,se]))}:null)},he=(u?.recipients||[]).filter(se=>Jr.some(ve=>ve.name===se)).length;return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Alerts Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Send emergency alerts and notifications via email"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Create Alert"]}),e.jsxs("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",title:"Export alerts data",disabled:!t.length,children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-alarm-warning-line text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Emergency Alerts"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(se=>se.type==="emergency").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-error-warning-line text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Warnings"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(se=>se.type==="warning").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-mail-send-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sent Today"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(se=>se.sent_at&&new Date(se.sent_at).toDateString()===new Date().toDateString()).length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Alerts"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(se=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:se.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${q(se.type)}`,children:(se.type||"info").toUpperCase()}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T(se.status)}`,children:(se.status||"active").toUpperCase()})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:se.message}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),"Created: ",new Date(se.created_at).toLocaleString()]}),se.sent_at&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-mail-send-line mr-1"}),"Sent: ",new Date(se.sent_at).toLocaleString()]}),e.jsxs("span",{children:[e.jsx("i",{className:"ri-flag-line mr-1"}),"Priority: ",se.priority||"medium"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[se.status!=="sent"&&e.jsxs("button",{onClick:()=>ee(se.id),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("i",{className:"ri-mail-send-line mr-1"}),"Send"]}),e.jsxs("button",{onClick:()=>{se&&(f({id:se.id,title:se.title,message:se.message,type:se.type,priority:se.priority,status:se.status,recipients:se.recipients,latitude:se.latitude,longitude:se.longitude,radius_km:se.radius_km,location_text:se.location_text||""}),d(!0))},className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>X(se.id),className:"px-3 py-1 bg-red-100 text-red-700 text-sm rounded-lg hover:bg-red-200 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line mr-1"})})]})]})},se.id))})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-alarm-warning-line text-blue-600 text-lg"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Create New Alert"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send emergency notifications to targeted recipients"})]})]}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-text mr-1"}),"Alert Title *"]}),e.jsx("input",{type:"text",value:l.title,onChange:se=>o(ve=>({...ve,title:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter alert title",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-alert-line mr-1"}),"Alert Type *"]}),e.jsxs("select",{value:l.type,onChange:se=>o(ve=>({...ve,type:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"info",children:"Information"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"emergency",children:"Emergency"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),"Alert Severity"]}),e.jsxs("select",{value:l.type,onChange:se=>o(ve=>({...ve,type:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"info",children:"Low - Information"}),e.jsx("option",{value:"warning",children:"Medium - Warning"}),e.jsx("option",{value:"emergency",children:"High - Emergency"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-file-text-line mr-1"}),"Description *"]}),e.jsx("textarea",{value:l.message,onChange:se=>o(ve=>({...ve,message:se.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter detailed alert description",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-map-pin-line mr-1"}),"Location"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:l.location_text,onChange:se=>o(ve=>({...ve,location_text:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter location or click on map"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Click on the map to select a location, or enter coordinates manually"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-focus-3-line mr-1"}),"Alert Radius (km)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0.1",max:"50",step:"0.1",value:l.radius_km,onChange:se=>o(ve=>({...ve,radius_km:parseFloat(se.target.value)||5})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"5.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"kilometers"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Radius for geographic alert coverage (0.1 - 50 km)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-flag-line mr-1"}),"Priority"]}),e.jsxs("select",{value:l.priority||"medium",onChange:se=>o(ve=>({...ve,priority:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-map-2-line mr-1"}),"Location Selection"]}),e.jsx("div",{className:"text-xs text-gray-500 mb-3",children:"Click on the map below to select the alert location"}),e.jsx("div",{className:"w-full h-96 rounded-lg overflow-hidden border border-gray-300 shadow-sm",children:e.jsxs(Ma,{center:l?.latitude&&l?.longitude?[l.latitude,l.longitude]:M,zoom:ne,style:{height:"100%",width:"100%"},className:"z-0",children:[e.jsx(Ba,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(w,{}),l?.latitude&&l?.longitude&&e.jsxs(e.Fragment,{children:[e.jsx(hr,{position:[l.latitude,l.longitude],icon:px}),e.jsx(gu,{center:[l.latitude,l.longitude],radius:(l.radius_km||5)*1e3,pathOptions:{color:"#ef4444",fillColor:"#ef4444",fillOpacity:.1,weight:2,dashArray:"5, 5"}})]})]})}),l?.latitude&&l?.longitude&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-800",children:e.jsx("strong",{children:"Selected Location:"})}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Latitude: ",l.latitude.toFixed(6),e.jsx("br",{}),"Longitude: ",l.longitude.toFixed(6),e.jsx("br",{}),"Radius: ",l.radius_km||5," km"]})]})]})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 bg-gray-50 -mx-6 px-6 -mb-6 rounded-b-xl",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:[e.jsx("i",{className:"ri-group-line mr-2 text-blue-600"}),"Target Recipients"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select the groups who should receive this alert"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(l?.recipients||[]).includes("all_users"),onChange:se=>{const ve=l?.recipients||[];se.target.checked?o(E=>({...E,recipients:Array.from(new Set([...ve,"all_users"]))})):o(E=>({...E,recipients:ve.filter(ce=>ce!=="all_users")}))},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"All Registered Users"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Send to all users in the system"})]})]}),e.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(l?.recipients||[]).includes("emergency_responders"),onChange:se=>{const ve=l?.recipients||[];se.target.checked?o(E=>({...E,recipients:Array.from(new Set([...ve,"emergency_responders"]))})):o(E=>({...E,recipients:ve.filter(ce=>ce!=="emergency_responders")}))},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Emergency Responders"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Send to emergency response teams"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-map-pin-line mr-1"}),"Select Barangays"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>$(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-left focus:ring-2 focus:ring-blue-500 focus:border-blue-500 flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:J>0?`${J} barangay${J>1?"s":""} selected`:"Select barangays..."}),e.jsx("i",{className:`ri-arrow-${y?"up":"down"}-s-line text-gray-400`})]}),y&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search barangays...",value:g,onChange:se=>x(se.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:B.length>0?B.map((se,ve)=>e.jsxs("label",{className:"flex items-center px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("input",{type:"checkbox",checked:(l?.recipients||[]).includes(se.name),onChange:()=>F(se.name),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-medium text-gray-900 text-sm",children:se.name})})]},ve)):e.jsx("div",{className:"px-3 py-4 text-center text-gray-500 text-sm",children:"No barangays found"})}),e.jsxs("div",{className:"border-t border-gray-200 p-2 flex justify-between",children:[e.jsx("button",{type:"button",onClick:()=>{const se=Jr.map(ve=>ve.name);o(ve=>({...ve,recipients:Array.from(new Set([...ve?.recipients||[],...se]))}))},className:"text-xs text-blue-600 hover:text-blue-800 px-2 py-1",children:"Select All"}),e.jsx("button",{type:"button",onClick:()=>{const se=l?.recipients||[],ve=Jr.map(E=>E.name);o(E=>({...E,recipients:se.filter(ce=>!ve.includes(ce))}))},className:"text-xs text-red-600 hover:text-red-800 px-2 py-1",children:"Clear All"})]})]})]}),J>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[(l?.recipients||[]).filter(se=>Jr.some(ve=>ve.name===se)).slice(0,5).map((se,ve)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[se,e.jsx("button",{type:"button",onClick:()=>F(se),className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx("i",{className:"ri-close-line text-xs"})})]},ve)),J>5&&e.jsxs("span",{className:"text-xs text-gray-500 px-2 py-1",children:["+",J-5," more"]})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:(l?.recipients||[]).length>0&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-mail-line mr-1"}),(l?.recipients||[]).length," recipient group(s) selected"]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:I,disabled:!l.title||!l.message,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Create Alert"]})]})]})]})}),c&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-edit-line text-blue-600 text-lg"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Edit Alert"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Modify the alert details and settings"})]})]}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-text mr-1"}),"Alert Title *"]}),e.jsx("input",{type:"text",value:u?.title||"",onChange:se=>f(ve=>ve?{...ve,title:se.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter alert title",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-alert-line mr-1"}),"Alert Type *"]}),e.jsxs("select",{value:u?.type||"info",onChange:se=>f(ve=>ve?{...ve,type:se.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"info",children:"Information"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"emergency",children:"Emergency"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),"Alert Severity"]}),e.jsxs("select",{value:u?.type||"info",onChange:se=>f(ve=>ve?{...ve,type:se.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"info",children:"Low - Information"}),e.jsx("option",{value:"warning",children:"Medium - Warning"}),e.jsx("option",{value:"emergency",children:"High - Emergency"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-file-text-line mr-1"}),"Description *"]}),e.jsx("textarea",{value:u?.message||"",onChange:se=>f(ve=>ve?{...ve,message:se.target.value}:null),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter detailed alert description",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-map-pin-line mr-1"}),"Location"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:u.location_text,onChange:se=>f(ve=>ve?{...ve,location_text:se.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter location or click on map"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Click on the map to select a location, or enter coordinates manually"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-focus-3-line mr-1"}),"Alert Radius (km)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0.1",max:"50",step:"0.1",value:u.radius_km,onChange:se=>f(ve=>ve?{...ve,radius_km:parseFloat(se.target.value)||5}:null),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"5.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"kilometers"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Radius for geographic alert coverage (0.1 - 50 km)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-flag-line mr-1"}),"Priority"]}),e.jsxs("select",{value:u.priority||"medium",onChange:se=>f(ve=>ve?{...ve,priority:se.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-map-2-line mr-1"}),"Location Selection"]}),e.jsx("div",{className:"text-xs text-gray-500 mb-3",children:"Click on the map below to select the alert location"}),e.jsx("div",{className:"w-full h-96 rounded-lg overflow-hidden border border-gray-300 shadow-sm",children:e.jsxs(Ma,{center:u?.latitude&&u?.longitude&&typeof u.latitude=="number"&&typeof u.longitude=="number"?[u.latitude,u.longitude]:M,zoom:ne,style:{height:"100%",width:"100%"},className:"z-0",children:[e.jsx(Ba,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(R,{}),u?.latitude&&u?.longitude&&typeof u.latitude=="number"&&typeof u.longitude=="number"&&e.jsxs(e.Fragment,{children:[e.jsx(hr,{position:[u.latitude,u.longitude],icon:px}),e.jsx(gu,{center:[u.latitude,u.longitude],radius:(u.radius_km||5)*1e3,pathOptions:{color:"#ef4444",fillColor:"#ef4444",fillOpacity:.1,weight:2,dashArray:"5, 5"}})]})]})}),u?.latitude&&u?.longitude&&typeof u.latitude=="number"&&typeof u.longitude=="number"&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-800",children:e.jsx("strong",{children:"Selected Location:"})}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Latitude: ",u.latitude.toFixed(6),e.jsx("br",{}),"Longitude: ",u.longitude.toFixed(6),e.jsx("br",{}),"Radius: ",u.radius_km||5," km"]})]})]})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 bg-gray-50 -mx-6 px-6 -mb-6 rounded-b-xl",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:[e.jsx("i",{className:"ri-group-line mr-2 text-blue-600"}),"Target Recipients"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select the groups who should receive this alert"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(u?.recipients||[]).includes("all_users"),onChange:se=>{const ve=u?.recipients||[];se.target.checked?f(E=>E?{...E,recipients:Array.from(new Set([...ve,"all_users"]))}:null):f(E=>E?{...E,recipients:ve.filter(ce=>ce!=="all_users")}:null)},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"All Registered Users"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Send to all users in the system"})]})]}),e.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(u?.recipients||[]).includes("emergency_responders"),onChange:se=>{const ve=u?.recipients||[];se.target.checked?f(E=>E?{...E,recipients:Array.from(new Set([...ve,"emergency_responders"]))}:null):f(E=>E?{...E,recipients:ve.filter(ce=>ce!=="emergency_responders")}:null)},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Emergency Responders"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Send to emergency response teams"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-map-pin-line mr-1"}),"Select Barangays"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>_(!S),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-left focus:ring-2 focus:ring-blue-500 focus:border-blue-500 flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:he>0?`${he} barangay${he>1?"s":""} selected`:"Select barangays..."}),e.jsx("i",{className:`ri-arrow-${S?"up":"down"}-s-line text-gray-400`})]}),S&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search barangays...",value:j,onChange:se=>N(se.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:W.length>0?W.map((se,ve)=>e.jsxs("label",{className:"flex items-center px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("input",{type:"checkbox",checked:(u?.recipients||[]).includes(se.name),onChange:()=>le(se.name),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"font-medium text-gray-900 text-sm",children:se.name})})]},ve)):e.jsx("div",{className:"px-3 py-4 text-center text-gray-500 text-sm",children:"No barangays found"})}),e.jsxs("div",{className:"border-t border-gray-200 p-2 flex justify-between",children:[e.jsx("button",{type:"button",onClick:()=>{const se=Jr.map(ve=>ve.name);f(ve=>ve?{...ve,recipients:Array.from(new Set([...ve?.recipients||[],...se]))}:null)},className:"text-xs text-blue-600 hover:text-blue-800 px-2 py-1",children:"Select All"}),e.jsx("button",{type:"button",onClick:()=>{const se=u?.recipients||[],ve=Jr.map(E=>E.name);f(E=>E?{...E,recipients:se.filter(ce=>!ve.includes(ce))}:null)},className:"text-xs text-red-600 hover:text-red-800 px-2 py-1",children:"Clear All"})]})]})]}),he>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[(u?.recipients||[]).filter(se=>Jr.some(ve=>ve.name===se)).slice(0,5).map((se,ve)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[se,e.jsx("button",{type:"button",onClick:()=>le(se),className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx("i",{className:"ri-close-line text-xs"})})]},ve)),he>5&&e.jsxs("span",{className:"text-xs text-gray-500 px-2 py-1",children:["+",he-5," more"]})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:(u?.recipients||[]).length>0&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-mail-line mr-1"}),(u?.recipients||[]).length," recipient group(s) selected"]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:re,disabled:!u.title||!u.message,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Update Alert"]})]})]})]})}),e.jsx(pa,{isOpen:ge,onClose:()=>{G(!1),ke(null)},onConfirm:k,title:"Delete Alert",message:"Are you sure you want to delete this alert? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmVariant:"secondary",icon:"ri-delete-bin-line",iconColor:"text-red-600"}),e.jsx(tr,{open:A,onClose:()=>P(!1),onExportPDF:()=>{Q("pdf"),P(!1)},onExportCSV:()=>{Q("csv"),P(!1)},onExportExcel:()=>{Q("excel"),P(!1)},data:t,columns:L,title:"Export Alerts Data"})]})},K3=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(null),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,f]=b.useState("all"),[g,x]=b.useState(!1),[y,$]=b.useState(null),[j,N]=b.useState(1),[S,_]=b.useState(1),[A,P]=b.useState(0),{showToast:M}=Gs(),[ne,V]=b.useState(!1),[L,Q]=b.useState(null),[w,R]=b.useState([]),[Z,I]=b.useState(!1),re=[{key:"name",label:"Full Name"},{key:"email",label:"Email"},{key:"user_type",label:"User Type",format:W=>W?W.charAt(0).toUpperCase()+W.slice(1).toLowerCase():""},{key:"phone",label:"Phone"},{key:"address",label:"Address",format:(W,le)=>{const he=[];return W&&he.push(W),le.city&&he.push(le.city),le.state&&he.push(le.state),he.join(", ")||""}}];b.useEffect(()=>{ge(),ee()},[c,u]);const ee=async()=>{try{const W=await G();R(W)}catch(W){console.error("Error fetching all users for export:",W),R(t)}};b.useEffect(()=>{ge()},[j]);const ge=async()=>{try{a(!0),i(null);const W={page:j,limit:10,status:c,barangay:u},le=await ho.getUsers(W);le.success&&le.data?(s(le.data.users),_(le.data.pagination.totalPages),P(le.data.pagination.total)):i(le.message||"Failed to fetch users")}catch(W){console.error("Error fetching users:",W),i(W instanceof Error?W.message:"Failed to fetch users")}finally{a(!1)}},G=async()=>{try{const W={page:1,limit:1e3,status:c,barangay:u},le=await ho.getUsers(W);if(le.success&&le.data)return le.data.users;throw new Error(le.message||"Failed to fetch users for export")}catch(W){throw console.error("Error fetching users for export:",W),W}},fe=async(W,le)=>{try{const se=Lt().userData?.admin_id;await ho.updateUserStatus(W,le,se),s(ve=>ve.map(E=>E.user_id===W?{...E,status:le}:E)),M({type:"success",message:"User status updated"})}catch(he){console.error("Error updating user status:",he),i("Failed to update user status"),M({type:"error",message:"Failed to update user status"})}},ke=W=>{Q(W),V(!0)},X=async()=>{if(L!=null)try{await ho.deleteUser(L),s(W=>W.filter(le=>le.user_id!==L)),M({type:"success",message:"User deleted successfully"})}catch(W){console.error("Error deleting user:",W),i("Failed to delete user"),M({type:"error",message:"Failed to delete user"})}finally{V(!1),Q(null)}},k=()=>{I(!0)},q=async W=>{try{let le="Users Data Export";const he=[];l&&he.push(`Search: "${l}"`),c&&c!=="all"&&he.push(`Status: ${c.charAt(0).toUpperCase()+c.slice(1)}`),u&&u!=="all"&&he.push(`Type: ${u.charAt(0).toUpperCase()+u.slice(1)}`),he.length&&(le+=` (${he.join(", ")})`);const se={filename:"users_export",title:le,includeTimestamp:!0,logoUrl:"/images/partners/MDRRMO.png"};switch(W){case"pdf":await ft.exportToPDF(w,re,se);break;case"csv":ft.exportToCSV(w,re,se);break;case"excel":ft.exportToExcel(w,re,se);break}M({type:"success",message:"Users data exported successfully"}),I(!1)}catch(le){console.error("Export error:",le),M({type:"error",message:"Failed to export users data"})}},T=()=>{I(!1)},B=W=>W===1?"bg-green-100 text-green-800":W===0?"bg-gray-100 text-gray-800":W===-1?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",F=W=>W===1?"Active":W===0?"Inactive":W===-1?"Suspended":"Unknown",J=w.filter(W=>{const le=l.toLowerCase();return l.trim()===""?!0:W.first_name.toLowerCase().includes(le)||W.last_name.toLowerCase().includes(le)||W.email.toLowerCase().includes(le)||W.name.toLowerCase().includes(le)});return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage registered users and their access"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:k,disabled:r||w.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Users (",w.length,")"]})})]}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700",children:n}),e.jsx("button",{onClick:()=>i(null),className:"ml-auto text-red-500 hover:text-red-700",children:e.jsx("i",{className:"ri-close-line"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:A})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-check-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:J.filter(W=>W.status===1).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-unfollow-line text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Inactive Users"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:J.filter(W=>W.status===0||W.status===-1).length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:W=>o(W.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("select",{value:c,onChange:W=>d(W.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",J.length," of ",A," users"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profile Picture"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(W=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:W.profile_picture?e.jsx("img",{src:W.profile_picture,alt:W.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("i",{className:"ri-user-line text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[W.first_name," ",W.last_name]}),e.jsx("div",{className:"text-sm text-gray-500",children:W.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 capitalize",children:W.user_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:W.profile_picture?"Uploaded":"Not uploaded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full uppercase ${B(W.status)}`,children:F(W.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(W.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{$(W),x(!0)},className:"text-blue-600 hover:text-blue-900",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsxs("select",{value:W.status,onChange:le=>fe(W.user_id,parseInt(le.target.value)),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:1,children:"Active"}),e.jsx("option",{value:0,children:"Inactive"})]}),e.jsx("button",{onClick:()=>ke(W.user_id),className:"text-red-600 hover:text-red-900 ml-2",title:"Delete User",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},W.user_id))})]})})}),S>1&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",j," of ",S]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(W=>Math.max(1,W-1)),disabled:j===1,className:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>N(W=>Math.min(S,W+1)),disabled:j===S,className:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),g&&y&&e.jsx(jn,{isOpen:g,onClose:()=>x(!1),title:"",size:"lg",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-6 border border-blue-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:y.profile_picture?e.jsx("img",{src:y.profile_picture,alt:"Profile",className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover border-4 border-white shadow-lg"}):e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"ri-user-line text-3xl sm:text-5xl text-gray-400"})})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[y.first_name," ",y.last_name]}),e.jsx("p",{className:"text-gray-600 mb-3 break-words",children:y.email}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${B(y.status)}`,children:[e.jsx("i",{className:"ri-circle-fill text-xs mr-1"}),F(y.status)]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[e.jsx("i",{className:"ri-user-line mr-1"}),y.user_type]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-settings-line text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"First Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.first_name})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.last_name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Email Address"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:y.email})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Phone Number"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.phone||"Not provided"})]})]})]})]}),(y.address||y.city||y.state||y.zip_code)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-map-pin-line text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Address Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.address&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Street Address"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.address})]}),y.city&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"City"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.city})]}),y.state&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"State/Province"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.state})]}),y.zip_code&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"ZIP Code"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.zip_code})]})]})]})]})}),e.jsx(tr,{open:Z,onClose:T,onExportPDF:()=>q("pdf"),onExportCSV:()=>q("csv"),onExportExcel:()=>q("excel"),data:w,columns:re,title:(()=>{let W="Users Data Export";const le=[];return l&&le.push(`Search: "${l}"`),c&&c!=="all"&&le.push(`Status: ${c.charAt(0).toUpperCase()+c.slice(1)}`),u&&u!=="all"&&le.push(`Type: ${u.charAt(0).toUpperCase()+u.slice(1)}`),le.length&&(W+=` (${le.join(", ")})`),W})()}),e.jsx(pa,{isOpen:ne,onClose:()=>{V(!1),Q(null)},onConfirm:X,title:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmVariant:"secondary",icon:"ri-delete-bin-line",iconColor:"text-red-600"})]})},Y3=t=>{if(!t)return!1;if(t.startsWith("+63")){const r=t.replace(/\D/g,"");return/^639\d{9}$/.test(r)}if(t.startsWith("09")){const r=t.replace(/\D/g,"");return/^09\d{9}$/.test(r)}const s=t.replace(/\D/g,"");return s.startsWith("639")&&s.length===12?/^639\d{9}$/.test(s):s.startsWith("9")&&s.length===10?/^9\d{9}$/.test(s):!1},Z3={"Emergency Response":[1],"Risk Assessment":[3],"Medical Team":[2],Communications:[4],Logistics:[5]},X3={"Emergency Response":"available","Risk Assessment":"available","Medical Team":"available",Communications:"available",Logistics:"available"},Q3=()=>{const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState(""),[u,f]=b.useState("all"),[g,x]=b.useState("all"),[y,$]=b.useState("all"),[j,N]=b.useState("all"),[S,_]=b.useState(!1),[A,P]=b.useState(!1),[M,ne]=b.useState(null),[V,L]=b.useState(!1),[Q,w]=b.useState(1),[R,Z]=b.useState(1),[I,re]=b.useState(0),{showToast:ee}=Gs(),[ge,G]=b.useState(!1),[fe,ke]=b.useState([]);b.useEffect(()=>{X(),k()},[Q,c,u,g,y,j]);const X=async()=>{try{i(!0),o(null);const H=new URLSearchParams({page:Q.toString(),search:c,status:u,availability:g,role:y,team_id:j});console.log("Fetching staff with params:",H.toString());const pe=await(await fetch(`/api/staff?${H}`)).json();console.log("Staff API response:",pe),pe.success?(s(pe.staff||[]),Z(pe.pagination?.pages||1),re(pe.pagination?.total||0),console.log("Staff data set:",pe.staff?.length||0,"members")):(o(pe.message||"Failed to fetch staff"),s([]))}catch(H){o("Failed to connect to server"),console.error("Error fetching staff:",H)}finally{i(!1)}},k=async()=>{try{console.log("Fetching teams...");const ye=await(await fetch("/api/teams")).json();console.log("Teams API response:",ye),ye.success&&(a(ye.teams||[]),ke(ye.teams||[]),console.log("Teams data set:",ye.teams?.length||0,"teams"))}catch(H){console.error("Error fetching teams:",H)}},q=H=>{if(!H){ke(r);return}const ye=Z3[H]||[],pe=r.filter(Re=>ye.includes(Re.id));ke(pe),pe.length>0?F(Re=>({...Re,team_id:pe[0].id.toString()})):F(Re=>({...Re,team_id:""}));const Le=X3[H]||"available";F(Re=>({...Re,availability:Le}))},T=async(H,ye)=>{try{const Le=await(await fetch(`/api/staff/${H}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).token:""}`},body:JSON.stringify({status:ye})})).json();Le.success?(s(Re=>Re.map(We=>We.id===H?{...We,status:ye}:We)),ee({type:"success",message:"Staff status updated"})):(console.error("Failed to update staff status:",Le.message),ee({type:"error",message:"Failed to update staff status"}))}catch(pe){console.error("Error updating staff status:",pe),ee({type:"error",message:"Error updating staff status"})}},[B,F]=b.useState({name:"",email:"",phone:"",position:"",department:"",availability:"available",team_id:""}),J=()=>{ne(null),F({name:"",email:"",phone:"",position:"",department:"",availability:"available",team_id:""}),ke(r),L(!0),_(!0)},W=H=>{ne(H),F({name:H.name,email:H.email,phone:H.phone,position:H.position,department:H.department,availability:H.availability,team_id:H.team_id?.toString()||""}),q(H.department),L(!0),_(!0)},le=async H=>{if(H.preventDefault(),B.phone&&!Y3(B.phone)){ee({type:"error",message:"Please enter a valid Philippine mobile number (e.g., 09123456789 or +639123456789)"});return}try{const ye=M?`/api/staff/${M.id}`:"/api/staff",pe=M?"PUT":"POST",Le={...B,team_id:B.team_id===""?null:parseInt(B.team_id),availability:B.availability};console.log("Sending staff data:",Le);const We=await(await fetch(ye,{method:pe,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).token:""}`},body:JSON.stringify(Le)})).json();We.success?(_(!1),X(),ee({type:"success",message:M?"Staff updated successfully":"Staff added successfully. Login credentials have been sent via email."})):(console.error("Failed to save staff:",We.message),ee({type:"error",message:"Failed to save staff"}))}catch(ye){console.error("Error saving staff:",ye),ee({type:"error",message:"Error saving staff"})}},he=H=>{const{name:ye,value:pe}=H.target;ye==="department"?(q(pe),F(Le=>({...Le,[ye]:pe}))):F(Le=>({...Le,[ye]:pe}))},se=H=>{ne(H),P(!0)},ve=async H=>{if(M){if(H!=="")try{const pe=await(await fetch(`/api/teams/${H}`)).json();if(pe.success&&pe.team&&(pe.team.member_count||0)>=5){ee({type:"error",message:"Team is at maximum capacity (5 members). Choose a different team."});return}}catch(ye){console.error("Error checking team capacity:",ye),ee({type:"error",message:"Error checking team capacity"});return}try{const pe=await(await fetch(`/api/staff/${M.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).token:""}`},body:JSON.stringify({...M,team_id:H===""?null:parseInt(H)})})).json();pe.success?(P(!1),X(),ee({type:"success",message:"Staff assigned to team"})):(console.error("Failed to assign staff to team:",pe.message),ee({type:"error",message:"Failed to assign staff to team"}))}catch(ye){console.error("Error assigning staff to team:",ye),ee({type:"error",message:"Error assigning staff to team"})}}},E=t.filter(H=>{const ye=H.name.toLowerCase().includes(c.toLowerCase())||H.email.toLowerCase().includes(c.toLowerCase())||H.position.toLowerCase().includes(c.toLowerCase())||H.department.toLowerCase().includes(c.toLowerCase()),pe=u==="all"||H.status===u,Le=y==="all"||H.position===y;return ye&&pe&&Le}),ce=H=>{switch(H){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},K=H=>{switch(H){case"available":return"bg-green-100 text-green-800";case"busy":return"bg-yellow-100 text-yellow-800";case"off-duty":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ze=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:B.name,onChange:he,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter staff name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:B.email,onChange:he,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx(bc,{international:!0,defaultCountry:"PH",value:B.phone,onChange:H=>F(ye=>({...ye,phone:H||""})),className:"w-full pl-10 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",inputClassName:"w-full py-4 px-4 border-0 focus:ring-0 focus:outline-none bg-transparent text-gray-900 placeholder-gray-500",buttonClassName:"px-3 py-4 border-r border-gray-300 bg-gray-50 hover:bg-gray-100",dropdownClassName:"bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position"}),e.jsx("input",{type:"text",name:"position",value:B.position,onChange:he,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter position",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{name:"department",value:B.department,onChange:he,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"Emergency Response",children:"Emergency Response"}),e.jsx("option",{value:"Risk Assessment",children:"Risk Assessment"}),e.jsx("option",{value:"Medical Team",children:"Medical Team"}),e.jsx("option",{value:"Communications",children:"Communications"}),e.jsx("option",{value:"Logistics",children:"Logistics"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team"}),e.jsxs("select",{name:"team_id",value:B.team_id,onChange:he,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"No Team"}),fe.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:B.department?`Team automatically selected for ${B.department} department`:"Team will be auto-selected when department is chosen"})]})]})]}),Ie=()=>M&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:M.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900",children:M.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-900",children:xu(M.phone)||M.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Position"}),e.jsx("p",{className:"text-sm text-gray-900",children:M.position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Department"}),e.jsx("p",{className:"text-sm text-gray-900",children:M.department})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Availability"}),e.jsx("p",{className:"text-sm text-gray-900",children:M.availability.replace("-"," ").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team"}),e.jsx("p",{className:"text-sm text-gray-900",children:M.team_name||"No Team"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(M.created_at).toLocaleDateString()})]})]});if(n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const Ne=[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"position",label:"Position"},{key:"department",label:"Department"},{key:"availability",label:"Availability"},{key:"team_name",label:"Team"}],U=async H=>{const ye=E.map(Le=>({...Le})),pe={filename:"Staff_Export",title:"Staff List",logoUrl:"/images/partners/MDRRMO.png",includeTimestamp:!0};switch(H){case"csv":ft.exportToCSV(ye,Ne,pe);break;case"pdf":G(!0);break;case"excel":ft.exportToExcel(ye,Ne,pe);break;case"json":ft.exportToJSON(ye,pe);break}},xe=async()=>{const H=E.map(Re=>({...Re}));let ye="Staff List";const pe=[];if(c.trim()&&pe.push(`Search: "${c.trim()}"`),u!=="all"&&pe.push(`Status: ${u.replace("_"," ").replace(/\b\w/g,Re=>Re.toUpperCase())}`),y!=="all"&&pe.push(`Role: ${y.replace("_"," ").replace(/\b\w/g,Re=>Re.toUpperCase())}`),j!=="all"){const Re=r.find(We=>We.id.toString()===j);pe.push(`Team: ${Re?Re.name:j}`)}pe.length>0&&(ye+=" ("+pe.join(", ")+")");const Le={filename:"Staff_Export",title:ye,logoUrl:"/images/partners/MDRRMO.png",includeTimestamp:!0};await ft.exportToPDF(H,Ne,Le),G(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage emergency response staff and personnel"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:J,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-user-add-line mr-2"}),"Add Staff"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"Export Staff",onClick:()=>U("pdf"),children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Staff"]}),e.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded shadow-lg z-10 hidden group-hover:block",children:[e.jsx("button",{className:"block w-full text-left px-4 py-2 hover:bg-gray-100",onClick:()=>U("csv"),children:"Export as CSV"}),e.jsx("button",{className:"block w-full text-left px-4 py-2 hover:bg-gray-100",onClick:()=>U("excel"),children:"Export as Excel"}),e.jsx("button",{className:"block w-full text-left px-4 py-2 hover:bg-gray-100",onClick:()=>U("json"),children:"Export as JSON"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-team-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-check-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Staff"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t?.filter(H=>H.status==="active").length||0})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-unfollow-line text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Busy"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(H=>H.availability==="busy").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-building-2-line text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Departments"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Set(t.map(H=>H.department)).size})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff...",value:c,onChange:H=>d(H.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("select",{value:u,onChange:H=>f(H.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("select",{value:g,onChange:H=>x(H.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Availability"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"busy",children:"Busy"}),e.jsx("option",{value:"off-duty",children:"Off Duty"})]}),e.jsxs("select",{value:j,onChange:H=>N(H.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Teams"}),r.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",E.length," of ",t.length," staff members"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Availability"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(H=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.name}),e.jsx("div",{className:"text-sm text-gray-500",children:H.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:H.team_name?e.jsxs("div",{children:[e.jsx("div",{children:H.team_name}),H.team_member_no&&e.jsxs("div",{className:"text-xs text-gray-500",children:["#",H.team_member_no]})]}):"No Team"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:xu(H.phone)||H.phone})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ce(H.status)}`,children:H.status.replace("_"," ").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K(H.availability)}`,children:H.availability.replace("-"," ").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>W(H),className:"text-blue-600 hover:text-blue-900",title:"Edit Staff",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>se(H),className:"text-green-600 hover:text-green-900",title:"Assign to Team",children:e.jsx("i",{className:"ri-team-line"})}),e.jsxs("select",{value:H.status,onChange:ye=>T(H.id,ye.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",title:"Change Status",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})})]},H.id))})]})})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:V?M?"Edit Staff Member":"Add New Staff Member":"Staff Details"}),e.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:le,children:[e.jsx("div",{className:"p-6 space-y-4",children:V?ze():Ie()}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),V&&e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:M?"Update Staff":"Add Staff"})]})]})]})}),e.jsx(tr,{open:ge,onClose:()=>G(!1),onExportPDF:xe,onExportCSV:()=>U("csv"),onExportExcel:()=>U("excel"),data:E,columns:Ne}),A&&M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Assign Staff to Team"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Assign ",M.name," to a team"]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Team"}),e.jsx("p",{className:"text-sm text-gray-900",children:M.team_name||"No team assigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team"}),e.jsxs("select",{onChange:H=>ve(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"No Team"}),r.map(H=>{const ye=H.member_count||0,pe=ye>=5;return e.jsxs("option",{value:H.id,disabled:pe,children:[H.name," (",ye,"/5 members)",pe?" - FULL":""]},H.id)})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teams with 5 members are at maximum capacity"})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"})})]})})]})};delete Xt.Icon.Default.prototype._getIconUrl;Xt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const e4=(t,s)=>{let r="#6b7280";return s==="resolved"||s==="closed"?r="#059669":s==="in_progress"?r="#0891b2":s==="pending"&&(t==="critical"?r="#be123c":r="#f59e0b"),Xt.divIcon({className:"custom-incident-marker",html:`
      <div style="
        background-color: ${r};
        width: 30px;
        height: 30px;
        border-radius: 50% 50% 50% 0;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        transform: rotate(-45deg);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      ">
        <div style="
          color: white;
          font-weight: bold;
          font-size: 12px;
          transform: rotate(45deg);
          text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        ">!</div>
      </div>
    `,iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]})},t4=({center:t,zoom:s})=>{const r=Sl();return b.useEffect(()=>{r.setView(t,s)},[r,t,s]),null},s4=({isOpen:t,onClose:s,incident:r})=>{const[a,n]=b.useState([13.7565,121.3851]),[i,l]=b.useState(15);if(b.useEffect(()=>{if(r&&r.latitude&&r.longitude){const u=[r.latitude,r.longitude];n(u),l(16)}},[r]),!t||!r)return null;const o=u=>{switch(u){case"critical":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},c=u=>{switch(u){case"pending":return"text-gray-600 bg-gray-100";case"in_progress":return"text-blue-600 bg-blue-100";case"resolved":return"text-green-600 bg-green-100";case"closed":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},d=u=>{switch(u){case"safe":return"text-green-600 bg-green-100";case"at_risk":return"text-yellow-600 bg-yellow-100";case"injured":return"text-red-600 bg-red-100";case"unknown":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["Incident Location - #",r.id]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[r.type.toUpperCase()," • ",r.location]})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-lg",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs(Ma,{center:a,zoom:i,style:{height:"100%",width:"100%"},className:"z-0",zoomControl:!0,children:[e.jsx(t4,{center:a,zoom:i}),e.jsx(Ba,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19}),e.jsx(hr,{position:[r.latitude,r.longitude],icon:e4(r.priorityLevel,r.status),children:e.jsx(Xr,{children:e.jsxs("div",{className:"p-2 min-w-[200px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"font-bold text-gray-900",children:["#",r.id]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(r.priorityLevel)}`,children:r.priorityLevel.toUpperCase()})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:r.type.toUpperCase()}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:r.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsxs("div",{children:["Reported by: ",r.reportedBy]}),e.jsxs("div",{children:["Date: ",new Date(r.dateReported).toLocaleDateString()]})]})]})})})]}),e.jsx("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-800",children:["#",r.id]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Incident Location"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.latitude.toFixed(6),", ",r.longitude.toFixed(6)]})]})})]}),e.jsx("div",{className:"w-80 border-l border-gray-200 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Incident Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.type.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Priority:"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(r.priorityLevel)}`,children:r.priorityLevel.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c(r.status)}`,children:r.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Safety:"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${d(r.safetyStatus)}`,children:r.safetyStatus.replace("_"," ").toUpperCase()})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Location Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Address:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:r.location})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Latitude:"}),e.jsx("p",{className:"text-sm font-mono text-gray-900",children:r.latitude.toFixed(6)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Longitude:"}),e.jsx("p",{className:"text-sm font-mono text-gray-900",children:r.longitude.toFixed(6)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:r.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Reporter Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Name:"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.reportedBy})]}),r.reporterPhone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Phone:"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.reporterPhone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Date Reported:"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(r.dateReported).toLocaleString()})]})]})]}),(r.assignedTeamName||r.assignedStaffName||r.allAssignedTeams)&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Assignment"}),e.jsxs("div",{className:"space-y-2",children:[r.allAssignedTeams&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Teams:"}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:r.allAssignedTeams})]}),r.assignedTeamName&&!r.allAssignedTeams&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Team:"}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:r.assignedTeamName})]}),r.assignedStaffName&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Staff:"}),e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:r.assignedStaffName})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Validation"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.validationStatus==="validated"?"text-green-600 bg-green-100":r.validationStatus==="rejected"?"text-red-600 bg-red-100":"text-yellow-600 bg-yellow-100"}`,children:r.validationStatus.charAt(0).toUpperCase()+r.validationStatus.slice(1)})]}),r.validationNotes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-2 mt-1",children:r.validationNotes})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>{const u=`https://www.google.com/maps?q=${r.latitude},${r.longitude}`;window.open(u,"_blank")},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[e.jsx("i",{className:"ri-external-link-line mr-2"}),"Open in Google Maps"]}),e.jsxs("button",{onClick:()=>{const u=`https://www.openstreetmap.org/?mlat=${r.latitude}&mlon=${r.longitude}&zoom=16`;window.open(u,"_blank")},className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[e.jsx("i",{className:"ri-map-line mr-2"}),"Open in OpenStreetMap"]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(`${r.latitude}, ${r.longitude}`)},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",children:[e.jsx("i",{className:"ri-clipboard-line mr-2"}),"Copy Coordinates"]})]})]})]})})]})]})})},_o=[{key:"dateReported",label:"Date Reported",format:t=>t?ft.formatDateTime(t):""},{key:"type",label:"Type",format:t=>t.toUpperCase()},{key:"priorityLevel",label:"Priority",format:t=>t?.charAt(0).toUpperCase()+t?.slice(1)||""},{key:"status",label:"Status",format:t=>t?.replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase())||""},{key:"location",label:"Location",format:(t,s)=>{if(t)return t;const r=s.description?.match(/Location:\s*([^\n]+)/i);return r?r[1].trim():""}},{key:"description",label:"Description",format:t=>t?.length>50?`${t.substring(0,50)}...`:t||""},{key:"reportedBy",label:"Reported By",format:(t,s)=>t||s.reporterName||"Unknown"},{key:"assignedTeamName",label:"Team",format:t=>t||"Unassigned"}],r4=()=>{const{showToast:t}=Gs(),[s,r]=b.useState([]),[a,n]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState(!0),[,d]=b.useState(null),[u,f]=b.useState(""),[g,x]=b.useState("all"),[y,$]=b.useState("all"),[j,N]=b.useState(""),[S,_]=b.useState(""),[A,P]=b.useState(null),[M,ne]=b.useState(!1),[V,L]=b.useState(!1),[Q,w]=b.useState("team"),[R,Z]=b.useState(null),[I,re]=b.useState([]),[ee,ge]=b.useState(null),[G,fe]=b.useState(null),[ke,X]=b.useState(!1),[k,q]=b.useState(!1),[T,B]=b.useState(""),[F,J]=b.useState(!1),[W,le]=b.useState(!1),[he,se]=b.useState(!1),[ve,E]=b.useState(!1),ce=()=>ke||!A?!0:Q==="staff"?A.status==="pending"?!0:!ee:Q==="teams"?I.length===0?!1:I.filter(Oe=>a.find(je=>je.id===Oe)?.member_count===0).length>0:Q==="team"&&R?a.find(Oe=>Oe.id===R)?.member_count===0:!1;b.useEffect(()=>{K(),ze(),Ie()},[]);const K=async()=>{try{c(!0),d(null);const oe=((await Hs.getIncidents())?.incidents??[]).map(je=>{const Me=Number(je.incident_id),et=String(je.incident_type||""),Ze=String(je.description||""),mt=Number(je.latitude??0),xt=Number(je.longitude??0),Dt=je.date_reported?new Date(je.date_reported).toISOString():new Date().toISOString(),Kt=String(je.priority_level||"moderate"),Et=String(je.reporter_safe_status||"unknown"),gt=String(je.status||"pending"),be=Kt==="moderate"?"medium":Kt,st=Et==="danger"?"unknown":Et;return{id:Me,type:et,description:Ze,location:Ne(Ze),latitude:mt,longitude:xt,priorityLevel:be,safetyStatus:st,status:gt,validationStatus:je.validation_status||"unvalidated",validationNotes:je.validation_notes||void 0,reportedBy:je.reporter_type==="guest"?String(je.guest_name??"Unknown Guest"):String(je.reporter_name??je.reported_by??""),reporterPhone:je.reporter_type==="guest"?je.guest_contact?String(je.guest_contact):void 0:je.reporter_phone?String(je.reporter_phone):void 0,assignedTo:je.assigned_to?String(je.assigned_to):void 0,assignedTeamId:je.assigned_team_id?Number(je.assigned_team_id):void 0,assignedTeamName:je.assigned_team_name||void 0,assignedStaffId:je.assigned_staff_id?Number(je.assigned_staff_id):void 0,assignedStaffName:je.assigned_staff_name||void 0,assignedTeamIds:je.assigned_team_ids||void 0,allAssignedTeams:je.all_assigned_teams||void 0,attachment:je.attachment||void 0,dateReported:Dt,dateResolved:void 0}});r(oe)}catch(ae){console.error("Error fetching incidents:",ae),d("Failed to load incidents. Please try again.")}finally{c(!1)}},ze=async()=>{try{const ae=await Bu.getTeams();ae?.teams&&n(ae.teams)}catch(ae){console.error("Error fetching teams:",ae)}},Ie=async()=>{try{const ae=await Xi.getStaff();ae&&typeof ae=="object"&&("staff"in ae&&Array.isArray(ae.staff)?l(ae.staff):"data"in ae&&ae.data&&"staff"in ae.data&&Array.isArray(ae.data.staff)?l(ae.data.staff):"users"in ae&&Array.isArray(ae.users)&&l(ae.users))}catch(ae){console.error("Error fetching staff:",ae)}},Ne=ae=>{if(!ae)return"";const Oe=/Location:\s*([^\n]+)/i.exec(ae);return Oe?Oe[1].trim():""},U=async(ae,Oe)=>{try{X(!0),fe(null);const oe=await Hs.assignTeamToIncident(ae,Oe);if(r(je=>je.map(Me=>{if(Me.id===ae){const et=a.find(Ze=>Ze.id===Oe);return{...Me,assignedTeamId:Oe,assignedTeamName:et?.name||void 0,assignedStaffId:void 0,assignedStaffName:void 0}}return Me})),oe?.emailSent){fe({sent:!0,details:oe.emailDetails});const je=a.find(Me=>Me.id===Oe);t({type:"success",message:`Team "${je?.name||"Unknown"}" assigned successfully!`})}else fe({sent:!1,details:oe.emailDetails||{error:"No email details provided"}});setTimeout(()=>{Le()},2e3)}catch(oe){console.error("Error assigning team to incident:",oe),oe instanceof Error&&oe.message.includes("Cannot assign team with no active members")?fe({sent:!1,details:{error:"Cannot assign team with no active members. Please add members to the team first.",teamName:"Selected Team"}}):fe({sent:!1,details:{error:oe instanceof Error?oe.message:"Unknown error"}})}finally{X(!1)}},xe=async(ae,Oe)=>{try{X(!0),fe(null);const oe=await Hs.assignTeamsToIncident(ae,Oe);if(r(je=>je.map(Me=>{if(Me.id===ae){const et=a.filter(Ze=>Oe.includes(Ze.id));return{...Me,assignedTeamIds:Oe.join(","),allAssignedTeams:et.map(Ze=>Ze.name).join(", "),assignedTeamId:Oe[0]||void 0,assignedTeamName:et[0]?.name||void 0,assignedStaffId:void 0,assignedStaffName:void 0}}return Me})),oe?.emailSent){fe({sent:!0,details:oe.emailDetails});const je=a.filter(Me=>Oe.includes(Me.id));t({type:"success",message:`${je.length} teams assigned successfully!`})}else fe({sent:!1,details:oe.emailDetails||{error:"No email details provided"}});setTimeout(()=>{Le()},2e3)}catch(oe){console.error("Error assigning multiple teams to incident:",oe),oe instanceof Error&&oe.message.includes("Cannot assign teams with no active members")?fe({sent:!1,details:{error:"Cannot assign teams with no active members. Please add members to the teams first.",teamNames:"Selected Teams"}}):fe({sent:!1,details:{error:oe instanceof Error?oe.message:"Unknown error"}})}finally{X(!1)}},H=async(ae,Oe,oe)=>{try{J(!0);const je=s.find(mt=>mt.id===ae);if(!je)throw new Error("Incident not found");const Me=oe||je.validationNotes;try{const mt=await Hs.validateIncident(ae,{validationStatus:Oe,validationNotes:Me,assignedTo:null});if(!mt.success)throw new Error(mt.message||"Failed to update validation")}catch(mt){console.error("API call failed, using local validation as fallback:",mt)}r(mt=>mt.map(xt=>{if(xt.id===ae){const Dt=Oe==="validated"?"in_progress":Oe==="rejected"?"closed":xt.status;return{...xt,validationStatus:Oe,validationNotes:Me,status:Dt}}return xt})),q(!1),B("");const et=je.validationStatus==="validated",Ze=Oe==="validated"?"in_progress":Oe==="rejected"?"closed":je.status;fe({sent:!0,details:{message:et?`Incident validation updated successfully to ${Oe}. Status changed to ${Ze}.`:`Incident ${Oe==="validated"?"validated":"rejected"} successfully. Status changed to ${Ze}.`,incidentId:ae,note:"Note: Validation saved locally. Backend sync may be unavailable."}}),setTimeout(()=>{fe(null)},3e3)}catch(je){console.error("Error validating incident:",je),fe({sent:!1,details:{error:je instanceof Error?je.message:"Unknown error",details:"Check console for more information"}})}finally{J(!1)}},ye=async(ae,Oe)=>{try{X(!0),fe(null);const oe=await Hs.assignStaffToIncident(ae,Oe);if(r(je=>je.map(Me=>{if(Me.id===ae){const et=i.find(Ze=>Ze.id===Oe);return{...Me,assignedStaffId:Oe,assignedStaffName:et?.name||void 0,assignedTeamId:void 0,assignedTeamName:void 0}}return Me})),oe?.emailSent){fe({sent:!0,details:oe.emailDetails});const je=i.find(Me=>Me.id===Oe);t({type:"success",message:`Staff member "${je?.name||"Unknown"}" assigned successfully!`})}else fe({sent:!1,details:oe.emailDetails||{error:"No email details provided"}});setTimeout(()=>{Le()},2e3)}catch(oe){console.error("Error assigning staff to incident:",oe),fe({sent:!1,details:{error:oe instanceof Error?oe.message:"Unknown error"}})}finally{X(!1)}},pe=(ae,Oe)=>{P(ae),w(Oe);{const oe=ae.assignedTeamIds?ae.assignedTeamIds.split(",").map(je=>parseInt(je.trim())).filter(je=>!isNaN(je)):[];re(oe),Z(null)}ge(ae.assignedStaffId||null),fe(null),L(!0)},Le=()=>{L(!1),P(null),w("team"),Z(null),re([]),ge(null),fe(null),X(!1)},Re=ae=>ae.toUpperCase(),We=s.filter(ae=>{const Oe=Re(ae.type).includes(u.toUpperCase())||ae.type.toLowerCase().includes(u.toLowerCase())||ae.location.toLowerCase().includes(u.toLowerCase())||ae.description.toLowerCase().includes(u.toLowerCase()),oe=g==="all"||ae.status===g,je=y==="all"||ae.priorityLevel===y,Me=(()=>{if(!j&&!S)return!0;const et=new Date(ae.dateReported),Ze=j?new Date(j):null,mt=S?new Date(S):null;return Ze&&mt?et>=Ze&&et<=mt:Ze?et>=Ze:mt?et<=mt:!0})();return Oe&&oe&&je&&Me}).sort((ae,Oe)=>{const oe={pending:1,in_progress:2,resolved:3,closed:4},je={critical:1,high:2,medium:3,low:4},Me=oe[ae.status]-oe[Oe.status];if(Me!==0)return Me;const et=je[ae.priorityLevel]-je[Oe.priorityLevel];return et!==0?et:new Date(Oe.dateReported).getTime()-new Date(ae.dateReported).getTime()}),Ye=ae=>{switch(ae){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Ce=ae=>{switch(ae){case"pending":return"bg-gray-100 text-gray-800";case"in_progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},Fe=ae=>{switch(ae){case"safe":return"bg-green-100 text-green-800";case"at_risk":return"bg-yellow-100 text-yellow-800";case"injured":return"bg-red-100 text-red-800";case"unknown":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Xe=async()=>{if(We.length!==0){le(!0);try{let ae="Incidents Report";const Oe=[];if(u&&u.trim()&&Oe.push(`Search: "${u.trim()}"`),g&&g!=="all"&&Oe.push(`Status: ${g.replace("_"," ").replace(/\b\w/g,je=>je.toUpperCase())}`),y&&y!=="all"&&Oe.push(`Priority: ${y.replace("_"," ").replace(/\b\w/g,je=>je.toUpperCase())}`),j||S){let je="";j&&S?je=`${j} to ${S}`:j?je=`From ${j}`:S&&(je=`Until ${S}`),Oe.push(`Date: ${je}`)}Oe.length>0&&(ae+=" ("+Oe.join(", ")+")");const oe={filename:"incidents_report",title:ae,includeTimestamp:!0};await ft.exportToPDF(We,_o,oe)}catch(ae){console.error("Export failed:",ae)}finally{le(!1)}}};return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"View Incidents"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and manage reported incidents"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>se(!0),disabled:We.length===0||W,className:`px-4 py-2 rounded-lg transition-colors flex items-center ${We.length===0||W?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:We.length===0?"No data to export":"Export incidents report",children:W?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Report (",We.length,")"]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-error-warning-line text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Incidents"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-time-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.filter(ae=>ae.status==="in_progress").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-check-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Resolved"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.filter(ae=>ae.status==="resolved").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-alarm-warning-line text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"High Priority"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.filter(ae=>ae.priorityLevel==="high"||ae.priorityLevel==="critical").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-team-line text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Team Assigned"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.filter(ae=>ae.assignedTeamName).length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search incidents...",value:u,onChange:ae=>f(ae.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("select",{value:g,onChange:ae=>x(ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("select",{value:y,onChange:ae=>$(ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Priority"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From:"}),e.jsx("input",{type:"date",value:j,onChange:ae=>N(ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"To:"}),e.jsx("input",{type:"date",value:S,onChange:ae=>_(ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(j||S)&&e.jsx("button",{onClick:()=>{N(""),_("")},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear Dates"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",We.length," of ",s.length," incidents"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:e.jsx("div",{className:"divide-y divide-gray-200",children:We.map(ae=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:[Re(ae.type)," - #",ae.id]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${Ye(ae.priorityLevel)}`,children:ae.priorityLevel.toUpperCase()}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ae.validationStatus==="rejected"&&ae.status==="closed"?"bg-red-100 text-red-800 border border-red-200":Ce(ae.status)}`,children:[ae.status.replace("_"," ").toUpperCase(),ae.validationStatus==="rejected"&&ae.status==="closed"&&e.jsx("span",{className:"ml-1 text-xs",children:"(Rejected)"})]})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:ae.description}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[e.jsxs("span",{children:[e.jsx("i",{className:"ri-map-pin-line mr-1"}),ae.location]}),e.jsxs("span",{children:[e.jsx("i",{className:"ri-user-line mr-1"}),"Reported by: ",ae.reportedBy]}),e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),new Date(ae.dateReported).toLocaleString()]}),ae.allAssignedTeams&&e.jsxs("span",{className:"text-green-600",children:[e.jsx("i",{className:"ri-team-line mr-1"}),"Teams: ",ae.allAssignedTeams,(()=>{const oe=(ae.assignedTeamIds?ae.assignedTeamIds.split(",").map(je=>parseInt(je.trim())):[]).reduce((je,Me)=>{const et=a.find(Ze=>Ze.id===Me);return je+(et?.member_count||0)},0);return oe>0?` (${oe} total members)`:""})()]}),ae.assignedTeamName&&!ae.allAssignedTeams&&e.jsxs("span",{className:"text-green-600",children:[e.jsx("i",{className:"ri-team-line mr-1"}),"Team: ",ae.assignedTeamName,(()=>{const Oe=a.find(oe=>oe.name===ae.assignedTeamName);return Oe?` (${Oe.member_count} members)`:""})()]}),ae.assignedStaffName&&e.jsxs("span",{className:"text-purple-600",children:[e.jsx("i",{className:"ri-user-line mr-1"}),"Staff: ",ae.assignedStaffName]}),!ae.assignedTeamName&&!ae.assignedStaffName&&ae.assignedTo&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-team-line mr-1"}),"Assigned to: ",ae.assignedTo]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>{P(ae),ne(!0)},className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-lg hover:bg-blue-200 transition-colors",children:[e.jsx("i",{className:"ri-eye-line mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>{P(ae),B(ae.validationNotes||""),q(!0)},className:`px-3 py-1 text-sm rounded-lg transition-colors ${ae.validationStatus==="validated"?"bg-orange-100 text-orange-700 hover:bg-orange-200":ae.validationStatus==="rejected"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,title:ae.validationStatus==="validated"?"Update Validation":ae.validationStatus==="rejected"?"Update Rejection":"Validate Incident",children:[e.jsx("i",{className:"ri-check-double-line mr-1"}),ae.validationStatus==="validated"||ae.validationStatus==="rejected"?"Update":"Validate"]}),ae.validationStatus==="validated"&&e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:()=>pe(ae,"teams"),className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-lg hover:bg-blue-200 transition-colors relative group",title:"Assign Multiple Teams - All team members will receive email notifications",children:[e.jsx("i",{className:"ri-team-fill mr-1"}),"Assign Teams",e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:[e.jsx("i",{className:"ri-mail-line mr-1"}),"Multiple teams support",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})]})]})})]})]})},ae.id))})}),M&&A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Incident Details - #",A.id]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),e.jsx("p",{className:"text-sm text-gray-900",children:Re(A.type)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full border ${Ye(A.priorityLevel)}`,children:A.priorityLevel.toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Safety Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${Fe(A.safetyStatus)}`,children:A.safetyStatus.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Validation Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${A.validationStatus==="validated"?"bg-green-100 text-green-800 border border-green-200":A.validationStatus==="rejected"?"bg-red-100 text-red-800 border border-red-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,children:A.validationStatus.charAt(0).toUpperCase()+A.validationStatus.slice(1)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900",children:A.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("p",{className:"text-sm text-gray-900",children:A.location})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Latitude"}),e.jsx("p",{className:"text-sm text-gray-900",children:A.latitude})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Longitude"}),e.jsx("p",{className:"text-sm text-gray-900",children:A.longitude})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reported By"}),e.jsx("p",{className:"text-sm text-gray-900",children:A.reportedBy}),A.reporterPhone&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("i",{className:"ri-phone-line mr-1"}),A.reporterPhone]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Teams"}),e.jsx("p",{className:"text-sm text-gray-900",children:A.allAssignedTeams?e.jsx("span",{className:"text-green-600",children:A.allAssignedTeams}):A.assignedTeamName?e.jsx("span",{className:"text-green-600",children:A.assignedTeamName}):"Not assigned"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Team Information"}),e.jsx("div",{className:"space-y-3",children:A.assignedStaffName?(()=>{const ae=i.find(Oe=>Oe.id===A.assignedStaffId);if(ae&&ae.team_id){const Oe=a.find(je=>je.id===ae.team_id),oe=i.filter(je=>je.team_id===ae.team_id);return e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("i",{className:"ri-team-line text-purple-600 mr-2"}),e.jsx("span",{className:"font-medium text-purple-800",children:"Assigned Staff & Team"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Assigned Staff:"}),e.jsx("span",{className:"ml-2 font-medium text-purple-700",children:A.assignedStaffName})]}),ae&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Position:"}),e.jsx("span",{className:"ml-2 font-medium text-purple-700",children:ae.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Department:"}),e.jsx("span",{className:"ml-2 font-medium text-purple-700",children:ae.department})]})]}),Oe&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Team:"}),e.jsx("span",{className:"ml-2 font-medium text-purple-700",children:Oe.name})]}),oe.length>0&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600 text-sm",children:["Active Team Members (",oe.length,"):"]}),e.jsx("div",{className:"mt-1 space-y-1",children:oe.map(je=>e.jsxs("div",{className:"text-purple-700 ml-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full mr-2"}),je.name," - ",je.position,je.id===A.assignedStaffId&&e.jsx("span",{className:"ml-2 text-xs bg-purple-200 text-purple-800 px-2 py-1 rounded",children:"Assigned"})]},je.id))})]})]})]})}return e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("i",{className:"ri-user-line text-purple-600 mr-2"}),e.jsx("span",{className:"font-medium text-purple-800",children:"Assigned Staff"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Assigned Staff:"}),e.jsx("span",{className:"ml-2 font-medium text-purple-700",children:A.assignedStaffName})]}),ae&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Position:"}),e.jsx("span",{className:"ml-2 font-medium text-purple-700",children:ae.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Department:"}),e.jsx("span",{className:"ml-2 font-medium text-purple-700",children:ae.department})]})]}),e.jsx("div",{className:"text-gray-500 text-sm",children:"No team assignment found for this staff member"})]})]})})():A.allAssignedTeams?e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:"ri-team-fill text-blue-600 mr-2"}),e.jsx("span",{className:"font-medium text-blue-800",children:"Multiple Team Assignment"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Assigned Teams:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-700",children:A.allAssignedTeams})]}),(()=>{const ae=A.assignedTeamIds?A.assignedTeamIds.split(",").map(oe=>parseInt(oe.trim())):[],Oe=ae.reduce((oe,je)=>{const Me=a.find(et=>et.id===je);return oe+(Me?.member_count||0)},0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Total Teams:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-700",children:ae.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Total Members:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-700",children:Oe})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Team Details:"}),ae.map(oe=>{const je=a.find(et=>et.id===oe),Me=je?i.filter(et=>et.team_id===oe):[];return je?e.jsxs("div",{className:"ml-4 p-2 bg-white rounded border border-blue-100",children:[e.jsx("div",{className:"font-medium text-blue-800",children:je.name}),e.jsx("div",{className:"text-xs text-blue-600",children:je.description||"No description"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[Me.length," active members"]})]},oe):null})]})]})})()]})]}):A.assignedTeamName?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:"ri-team-line text-green-600 mr-2"}),e.jsx("span",{className:"font-medium text-green-800",children:"Direct Team Assignment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Team Name:"}),e.jsx("span",{className:"ml-2 font-medium text-green-700",children:A.assignedTeamName})]}),(()=>{const ae=a.find(oe=>oe.name===A.assignedTeamName),Oe=ae?i.filter(oe=>oe.team_id===ae.id):[];return ae?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Description:"}),e.jsx("span",{className:"ml-2 font-medium text-green-700",children:ae.description||"No description available"})]}),Oe.length>0&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600 text-sm",children:["Team Members (",Oe.length,"):"]}),e.jsx("div",{className:"mt-1 space-y-1",children:Oe.map(oe=>e.jsxs("div",{className:"text-green-700 ml-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),oe.name," - ",oe.position]},oe.id))})]})]}):null})()]})]}):A.assignedTo?e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:"ri-team-line text-blue-600 mr-2"}),e.jsx("span",{className:"font-medium text-blue-800",children:"Legacy Assignment"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Assigned to:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-700",children:A.assignedTo})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-user-line text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"No staff member assigned"})]})})})]}),A.attachment&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),e.jsx("div",{className:"space-y-2",children:A.attachment.split(",").map((ae,Oe)=>e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("i",{className:"ri-file-line text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 flex-1",children:ae}),e.jsxs("a",{href:`/uploads/incidents/${ae}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded hover:bg-blue-200 transition-colors",children:[e.jsx("i",{className:"ri-eye-line mr-1"}),"View"]})]},Oe))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date Reported"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(A.dateReported).toLocaleString()})]}),A.dateResolved&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date Resolved"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(A.dateResolved).toLocaleString()})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>ne(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"}),e.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-map-pin-line mr-2"}),"View on Map"]})]})]})}),V&&A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",onClick:Le,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",onClick:ae=>ae.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Assign ",Q==="team"?"Team":Q==="teams"?"Teams":"Staff"," to Incident #",A.id]}),e.jsx("button",{onClick:Le,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:ke,children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsx("div",{className:"p-6 space-y-4",children:Q==="team"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team"}),e.jsxs("select",{value:R||"",onChange:ae=>Z(ae.target.value?Number(ae.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"No Team Assigned"}),a.filter(ae=>ae.member_count>0).map(ae=>e.jsxs("option",{value:ae.id,children:[ae.name," (",ae.member_count," members)"]},ae.id)),a.filter(ae=>ae.member_count===0).length>0&&e.jsx("optgroup",{label:"Teams with no members (disabled)",children:a.filter(ae=>ae.member_count===0).map(ae=>e.jsxs("option",{value:ae.id,disabled:!0,className:"text-gray-400",children:[ae.name," (0 members) - Add members first"]},ae.id))})]}),R&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:"ri-team-line text-blue-600 mr-2"}),e.jsx("span",{className:"font-medium text-blue-800",children:"Team Details"})]}),(()=>{const ae=a.find(Oe=>Oe.id===R);return ae?e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",ae.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",ae.description||"No description"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Active Members:"})," ",ae.member_count]}),ae.member_count===0?e.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded border border-red-200",children:[e.jsxs("div",{className:"flex items-center text-red-700",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),e.jsx("span",{className:"font-medium",children:"Warning:"})]}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"This team has no active members. Email notifications cannot be sent and the team may not be able to respond effectively."})]}):e.jsxs("p",{className:"mt-2 text-blue-600",children:[e.jsx("i",{className:"ri-mail-line mr-1"}),"All ",ae.member_count," team members will receive email notifications when assigned."]})]}):null})()]}),e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"ri-mail-send-line text-green-600 text-lg"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-800 mb-2",children:"Automatic Email Notifications"}),e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-check-line text-green-600 mr-2"}),e.jsx("span",{children:"All active team members receive detailed incident information"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-check-line text-green-600 mr-2"}),e.jsx("span",{children:"Email includes incident type, location, priority level, and description"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-check-line text-green-600 mr-2"}),e.jsx("span",{children:"Direct link to incident dashboard for immediate response"})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-green-100 rounded border border-green-200",children:e.jsxs("div",{className:"text-xs text-green-600",children:[e.jsx("i",{className:"ri-information-line mr-1"}),e.jsx("strong",{children:"Note:"})," Only teams with active members will receive notifications. Teams with no members are automatically excluded."]})})]})]})})]}):Q==="teams"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Teams (Multiple Selection)"}),I.length>0&&e.jsxs("button",{onClick:()=>re([]),className:"text-sm text-red-600 hover:text-red-800 flex items-center",children:[e.jsx("i",{className:"ri-close-line mr-1"}),"Clear All"]})]}),a.filter(ae=>ae.member_count>0).length>0&&e.jsx("div",{className:"mb-3",children:e.jsxs("button",{onClick:()=>{const ae=a.filter(Oe=>Oe.member_count>0).map(Oe=>Oe.id);re(ae)},className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx("i",{className:"ri-checkbox-multiple-line mr-1"}),"Select All Teams with Members"]})}),e.jsxs("div",{className:"max-h-60 overflow-y-auto border border-gray-300 rounded-lg",children:[a.filter(ae=>ae.member_count>0).map(ae=>e.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50 border-b border-gray-200 last:border-b-0 transition-colors",children:[e.jsx("input",{type:"checkbox",id:`team-${ae.id}`,checked:I.includes(ae.id),onChange:Oe=>{Oe.target.checked?re([...I,ae.id]):re(I.filter(oe=>oe!==ae.id))},className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:`team-${ae.id}`,className:"flex-1 cursor-pointer",children:[e.jsxs("div",{className:"font-medium text-gray-900 flex items-center",children:[ae.name,e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[ae.member_count," member",ae.member_count!==1?"s":""]})]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:ae.description||"No description available"})]})]},ae.id)),a.filter(ae=>ae.member_count===0).length>0&&e.jsxs("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Teams with no members (disabled)"}),a.filter(ae=>ae.member_count===0).map(ae=>e.jsxs("div",{className:"flex items-center p-2 text-gray-400",children:[e.jsx("input",{type:"checkbox",disabled:!0,className:"mr-3 h-4 w-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:ae.name}),e.jsx("div",{className:"text-xs",children:"0 members - Add members first"})]})]},ae.id))]})]}),I.length>0&&e.jsxs("div",{className:"mt-3 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-team-fill text-blue-600 mr-2"}),e.jsxs("span",{className:"font-medium text-blue-800",children:["Selected Teams (",I.length,")"]})]}),e.jsxs("div",{className:"text-sm text-blue-600 font-medium",children:[I.reduce((ae,Oe)=>{const oe=a.find(je=>je.id===Oe);return ae+(oe?.member_count||0)},0)," total members"]})]}),e.jsxs("div",{className:"space-y-2",children:[I.map(ae=>{const Oe=a.find(oe=>oe.id===ae);return Oe?e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-blue-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-team-line text-blue-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:Oe.name}),e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[Oe.member_count," member",Oe.member_count!==1?"s":""]})]}),e.jsx("button",{onClick:()=>re(I.filter(oe=>oe!==ae)),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Remove team",children:e.jsx("i",{className:"ri-close-line text-sm"})})]},ae):null}),e.jsx("div",{className:"mt-3 p-2 bg-blue-100 rounded border border-blue-200",children:e.jsxs("div",{className:"flex items-center text-xs text-blue-700",children:[e.jsx("i",{className:"ri-mail-line mr-1"}),e.jsx("span",{className:"font-medium",children:"Email Notifications:"}),e.jsxs("span",{className:"ml-1",children:["All ",I.reduce((ae,Oe)=>{const oe=a.find(je=>je.id===Oe);return ae+(oe?.member_count||0)},0)," team members will receive incident assignment notifications"]})]})})]})]})]}):A.status==="pending"?e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-600 mr-2"}),e.jsx("span",{className:"font-medium text-red-800",children:"Staff Assignment Not Available"})]}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:'Staff assignments are not available for pending incidents. Please assign a team first or change the incident status to "In Progress".'})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Staff Member"}),e.jsxs("select",{value:ee||"",onChange:ae=>ge(ae.target.value?Number(ae.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"No Staff Assigned"}),i.filter(ae=>ae.status==="active"||ae.status===1).sort((ae,Oe)=>ae.name.localeCompare(Oe.name)).map(ae=>e.jsxs("option",{value:ae.id,children:[ae.name," - ",ae.position,ae.team_name&&` (${ae.team_name})`]},ae.id))]}),e.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:[e.jsx("i",{className:"ri-mail-line mr-1"}),"The selected staff member will receive an email notification when assigned."]})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200",children:[G&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg ${G.sent?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`mr-2 ${G.sent?"ri-check-line":"ri-error-warning-line"}`}),e.jsx("span",{className:"font-medium",children:G.sent?"Email notifications sent successfully!":"Failed to send email notifications"})]}),G.details&&e.jsx("div",{className:"mt-2 text-sm",children:G.sent?e.jsxs("div",{children:[G.details.teamName&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"Team:"})," ",G.details.teamName]}),G.details.staffName&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"Staff:"})," ",G.details.staffName]}),G.details.totalMembers!==void 0&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"Total Team Members:"})," ",G.details.totalMembers]}),G.details.emailsSent!==void 0&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"Emails Sent Successfully:"})," ",G.details.emailsSent]}),G.details.emailsFailed>0&&e.jsxs("div",{className:"mb-1 text-orange-600",children:[e.jsx("span",{className:"font-medium",children:"Failed Emails:"})," ",G.details.emailsFailed]}),G.details.failedEmails&&G.details.failedEmails.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-orange-50 rounded border border-orange-200",children:[e.jsx("div",{className:"font-medium text-orange-800 mb-1",children:"Failed Email Addresses:"}),e.jsx("div",{className:"text-xs text-orange-700",children:G.details.failedEmails.join(", ")})]}),G.details.teamName&&G.details.emailsSent>0&&e.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded border border-green-200",children:[e.jsxs("div",{className:"font-medium text-green-800 mb-1",children:[e.jsx("i",{className:"ri-mail-line mr-1"}),"Team Notification Summary"]}),e.jsxs("div",{className:"text-xs text-green-700",children:["All ",G.details.emailsSent,' active team members of "',G.details.teamName,'" have been notified about this incident assignment.']})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-1",children:"Error Details:"}),e.jsx("div",{className:"text-red-700",children:G.details.error||"Unknown error occurred"}),G.details.teamName&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:"Team:"})," ",G.details.teamName]}),G.details.staffName&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:"Staff:"})," ",G.details.staffName]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-500",children:Q==="teams"&&I.length>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-information-line mr-1"}),e.jsxs("span",{children:[I.length," team",I.length!==1?"s":""," selected •",I.reduce((ae,Oe)=>{const oe=a.find(je=>je.id===Oe);return ae+(oe?.member_count||0)},0)," total members"]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:Le,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors flex items-center",disabled:ke,children:[e.jsx("i",{className:"ri-close-line mr-1"}),"Cancel"]}),e.jsx("button",{onClick:()=>{if(A)if(Q==="team"){const ae=a.find(Oe=>Oe.id===R);if(ae&&ae.member_count===0){t({type:"error",message:"Cannot assign team with no members. Please add members to the team first."});return}U(A.id,R)}else if(Q==="teams"){if(I.filter(Oe=>a.find(je=>je.id===Oe)?.member_count===0).length>0){t({type:"error",message:"Cannot assign teams with no members. Please add members to the teams first."});return}xe(A.id,I)}else ye(A.id,ee)},disabled:ce(),className:`px-6 py-2 rounded-lg transition-colors flex items-center font-medium ${ce()?"bg-gray-400 text-gray-200 cursor-not-allowed":Q==="teams"&&I.length===0?"bg-orange-600 text-white hover:bg-orange-700":"bg-blue-600 text-white hover:bg-blue-700"}`,title:ce()?Q==="staff"&&A?.status==="pending"?"Staff assignment not available for pending incidents":Q==="teams"&&I.some(ae=>a.find(Oe=>Oe.id===ae)?.member_count===0)?"Cannot assign teams with no members":Q==="team"&&R&&a.find(ae=>ae.id===R)?.member_count===0?"Cannot assign team with no members":"Please select a team or staff member":Q==="team"?R?"Assign selected team":"Unassign team":Q==="teams"?I.length>0?`Assign ${I.length} teams`:"Clear all team assignments":"Assign selected staff member",children:ke?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Assigning..."]}):e.jsx(e.Fragment,{children:Q==="team"?R?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-team-line mr-1"}),"Assign Team"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-team-line mr-1"}),"Unassign Team"]}):Q==="teams"?I.length>0?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-team-fill mr-1"}),"Assign Teams (",I.length,")"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Clear All Teams"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-user-line mr-1"}),"Assign Staff"]})})})]})]})]})]})}),k&&A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[A.validationStatus==="validated"?"Update Validation":"Validate"," Incident #",A.id]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-information-line text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:A.validationStatus==="validated"?"Update Validation":"Validation Required"})]}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:A.validationStatus==="validated"?"You can update the validation status or modify the validation notes for this incident.":"Please validate this incident before proceeding with team assignment. Note: Rejected incidents will be marked as closed."})]}),A.validationStatus==="validated"&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-check-line text-green-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Currently Validated"})]}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"This incident is currently validated. You can update the validation status or modify the notes."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Validation Notes ",e.jsx("span",{className:"text-red-600",children:"*"})]}),A.validationStatus==="validated"&&A.validationNotes&&e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:e.jsx("strong",{children:"Current Notes:"})}),e.jsx("div",{className:"text-sm text-gray-700",children:A.validationNotes})]}),e.jsx("textarea",{value:T,onChange:ae=>B(ae.target.value),placeholder:A.validationStatus==="validated"?"Update validation notes...":"Enter notes about the validation decision (required)...",required:!0,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${T.trim()?"border-gray-300":"border-red-300"}`,rows:3}),!T.trim()&&e.jsxs("p",{className:"mt-1 text-sm text-red-600",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),"Validation notes are required"]})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{q(!1),B("")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>H(A.id,"rejected",T),disabled:F||!T.trim(),className:`px-4 py-2 rounded-lg transition-colors ${F||!T.trim()?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,title:T.trim()?"":"Validation notes are required",children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):A.validationStatus==="validated"?"Change to Rejected":"Reject"}),e.jsx("button",{onClick:()=>H(A.id,"validated",T),disabled:F||!T.trim(),className:`px-4 py-2 rounded-lg transition-colors ${F||!T.trim()?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:T.trim()?"":"Validation notes are required",children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):A.validationStatus==="validated"?"Update Validation":"Validate"})]})})]})}),e.jsx(tr,{open:he,onClose:()=>se(!1),onExportPDF:Xe,onExportCSV:()=>{ft.exportToCSV(We,_o,{filename:"incidents_export",title:"Incidents Report",includeTimestamp:!0}),t({type:"success",message:"Incidents data exported to CSV successfully"}),se(!1)},onExportExcel:()=>{ft.exportToExcel(We,_o,{filename:"incidents_export",title:"Incidents Report",includeTimestamp:!0}),t({type:"success",message:"Incidents data exported to Excel successfully"}),se(!1)},data:We,columns:_o.map(ae=>({key:ae.key,label:ae.label})),title:`Incidents Report (${We.length})`}),e.jsx(s4,{isOpen:ve,onClose:()=>E(!1),incident:A})]})};function Dg(t,s){return function(){return t.apply(s,arguments)}}const{toString:a4}=Object.prototype,{getPrototypeOf:sm}=Object,{iterator:Nc,toStringTag:Mg}=Symbol,wc=(t=>s=>{const r=a4.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Mr=t=>(t=t.toLowerCase(),s=>wc(s)===t),Sc=t=>s=>typeof s===t,{isArray:fi}=Array,yl=Sc("undefined");function $l(t){return t!==null&&!yl(t)&&t.constructor!==null&&!yl(t.constructor)&&Qs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bg=Mr("ArrayBuffer");function n4(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Bg(t.buffer),s}const i4=Sc("string"),Qs=Sc("function"),Ug=Sc("number"),kl=t=>t!==null&&typeof t=="object",l4=t=>t===!0||t===!1,Vo=t=>{if(wc(t)!=="object")return!1;const s=sm(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Mg in t)&&!(Nc in t)},o4=t=>{if(!kl(t)||$l(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},c4=Mr("Date"),d4=Mr("File"),u4=Mr("Blob"),m4=Mr("FileList"),h4=t=>kl(t)&&Qs(t.pipe),x4=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Qs(t.append)&&((s=wc(t))==="formdata"||s==="object"&&Qs(t.toString)&&t.toString()==="[object FormData]"))},f4=Mr("URLSearchParams"),[g4,p4,b4,y4]=["ReadableStream","Request","Response","Headers"].map(Mr),v4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _l(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),fi(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if($l(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let o;for(a=0;a<l;a++)o=i[a],s.call(null,t[o],o,t)}}function qg(t,s){if($l(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const pn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zg=t=>!yl(t)&&t!==pn;function Au(){const{caseless:t}=zg(this)&&this||{},s={},r=(a,n)=>{const i=t&&qg(s,n)||n;Vo(s[i])&&Vo(a)?s[i]=Au(s[i],a):Vo(a)?s[i]=Au({},a):fi(a)?s[i]=a.slice():s[i]=a};for(let a=0,n=arguments.length;a<n;a++)arguments[a]&&_l(arguments[a],r);return s}const j4=(t,s,r,{allOwnKeys:a}={})=>(_l(s,(n,i)=>{r&&Qs(n)?t[i]=Dg(n,r):t[i]=n},{allOwnKeys:a}),t),N4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),w4=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},S4=(t,s,r,a)=>{let n,i,l;const o={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!a||a(l,t,s))&&!o[l]&&(s[l]=t[l],o[l]=!0);t=r!==!1&&sm(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},C4=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},$4=t=>{if(!t)return null;if(fi(t))return t;let s=t.length;if(!Ug(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},k4=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&sm(Uint8Array)),_4=(t,s)=>{const a=(t&&t[Nc]).call(t);let n;for(;(n=a.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},A4=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},P4=Mr("HTMLFormElement"),L4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),bx=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),E4=Mr("RegExp"),Wg=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};_l(r,(n,i)=>{let l;(l=s(n,i,t))!==!1&&(a[i]=l||n)}),Object.defineProperties(t,a)},T4=t=>{Wg(t,(s,r)=>{if(Qs(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(Qs(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},I4=(t,s)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return fi(t)?a(t):a(String(t).split(s)),r},R4=()=>{},F4=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function O4(t){return!!(t&&Qs(t.append)&&t[Mg]==="FormData"&&t[Nc])}const D4=t=>{const s=new Array(10),r=(a,n)=>{if(kl(a)){if(s.indexOf(a)>=0)return;if($l(a))return a;if(!("toJSON"in a)){s[n]=a;const i=fi(a)?[]:{};return _l(a,(l,o)=>{const c=r(l,n+1);!yl(c)&&(i[o]=c)}),s[n]=void 0,i}}return a};return r(t,0)},M4=Mr("AsyncFunction"),B4=t=>t&&(kl(t)||Qs(t))&&Qs(t.then)&&Qs(t.catch),Hg=((t,s)=>t?setImmediate:s?((r,a)=>(pn.addEventListener("message",({source:n,data:i})=>{n===pn&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),pn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Qs(pn.postMessage)),U4=typeof queueMicrotask<"u"?queueMicrotask.bind(pn):typeof process<"u"&&process.nextTick||Hg,q4=t=>t!=null&&Qs(t[Nc]),Te={isArray:fi,isArrayBuffer:Bg,isBuffer:$l,isFormData:x4,isArrayBufferView:n4,isString:i4,isNumber:Ug,isBoolean:l4,isObject:kl,isPlainObject:Vo,isEmptyObject:o4,isReadableStream:g4,isRequest:p4,isResponse:b4,isHeaders:y4,isUndefined:yl,isDate:c4,isFile:d4,isBlob:u4,isRegExp:E4,isFunction:Qs,isStream:h4,isURLSearchParams:f4,isTypedArray:k4,isFileList:m4,forEach:_l,merge:Au,extend:j4,trim:v4,stripBOM:N4,inherits:w4,toFlatObject:S4,kindOf:wc,kindOfTest:Mr,endsWith:C4,toArray:$4,forEachEntry:_4,matchAll:A4,isHTMLForm:P4,hasOwnProperty:bx,hasOwnProp:bx,reduceDescriptors:Wg,freezeMethods:T4,toObjectSet:I4,toCamelCase:L4,noop:R4,toFiniteNumber:F4,findKey:qg,global:pn,isContextDefined:zg,isSpecCompliantForm:O4,toJSONObject:D4,isAsyncFn:M4,isThenable:B4,setImmediate:Hg,asap:U4,isIterable:q4};function St(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}Te.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const Vg=St.prototype,Gg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gg[t]={value:t}});Object.defineProperties(St,Gg);Object.defineProperty(Vg,"isAxiosError",{value:!0});St.from=(t,s,r,a,n,i)=>{const l=Object.create(Vg);return Te.toFlatObject(t,l,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),St.call(l,t.message,s,r,a,n),l.cause=t,l.name=t.name,i&&Object.assign(l,i),l};const z4=null;function Pu(t){return Te.isPlainObject(t)||Te.isArray(t)}function Jg(t){return Te.endsWith(t,"[]")?t.slice(0,-2):t}function yx(t,s,r){return t?t.concat(s).map(function(n,i){return n=Jg(n),!r&&i?"["+n+"]":n}).join(r?".":""):s}function W4(t){return Te.isArray(t)&&!t.some(Pu)}const H4=Te.toFlatObject(Te,{},null,function(s){return/^is[A-Z]/.test(s)});function Cc(t,s,r){if(!Te.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=Te.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,j){return!Te.isUndefined(j[$])});const a=r.metaTokens,n=r.visitor||u,i=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(s);if(!Te.isFunction(n))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(Te.isDate(y))return y.toISOString();if(Te.isBoolean(y))return y.toString();if(!c&&Te.isBlob(y))throw new St("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(y)||Te.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,$,j){let N=y;if(y&&!j&&typeof y=="object"){if(Te.endsWith($,"{}"))$=a?$:$.slice(0,-2),y=JSON.stringify(y);else if(Te.isArray(y)&&W4(y)||(Te.isFileList(y)||Te.endsWith($,"[]"))&&(N=Te.toArray(y)))return $=Jg($),N.forEach(function(_,A){!(Te.isUndefined(_)||_===null)&&s.append(l===!0?yx([$],A,i):l===null?$:$+"[]",d(_))}),!1}return Pu(y)?!0:(s.append(yx(j,$,i),d(y)),!1)}const f=[],g=Object.assign(H4,{defaultVisitor:u,convertValue:d,isVisitable:Pu});function x(y,$){if(!Te.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+$.join("."));f.push(y),Te.forEach(y,function(N,S){(!(Te.isUndefined(N)||N===null)&&n.call(s,N,Te.isString(S)?S.trim():S,$,g))===!0&&x(N,$?$.concat(S):[S])}),f.pop()}}if(!Te.isObject(t))throw new TypeError("data must be an object");return x(t),s}function vx(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function rm(t,s){this._pairs=[],t&&Cc(t,this,s)}const Kg=rm.prototype;Kg.append=function(s,r){this._pairs.push([s,r])};Kg.toString=function(s){const r=s?function(a){return s.call(this,a,vx)}:vx;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function V4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Yg(t,s,r){if(!s)return t;const a=r&&r.encode||V4;Te.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(s,r):i=Te.isURLSearchParams(s)?s.toString():new rm(s,r).toString(a),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class jx{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Te.forEach(this.handlers,function(a){a!==null&&s(a)})}}const Zg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},G4=typeof URLSearchParams<"u"?URLSearchParams:rm,J4=typeof FormData<"u"?FormData:null,K4=typeof Blob<"u"?Blob:null,Y4={isBrowser:!0,classes:{URLSearchParams:G4,FormData:J4,Blob:K4},protocols:["http","https","file","blob","url","data"]},am=typeof window<"u"&&typeof document<"u",Lu=typeof navigator=="object"&&navigator||void 0,Z4=am&&(!Lu||["ReactNative","NativeScript","NS"].indexOf(Lu.product)<0),X4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Q4=am&&window.location.href||"http://localhost",e6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:am,hasStandardBrowserEnv:Z4,hasStandardBrowserWebWorkerEnv:X4,navigator:Lu,origin:Q4},Symbol.toStringTag,{value:"Module"})),Bs={...e6,...Y4};function t6(t,s){return Cc(t,new Bs.classes.URLSearchParams,{visitor:function(r,a,n,i){return Bs.isNode&&Te.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function s6(t){return Te.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function r6(t){const s={},r=Object.keys(t);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],s[i]=t[i];return s}function Xg(t){function s(r,a,n,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=r.length;return l=!l&&Te.isArray(n)?n.length:l,c?(Te.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!o):((!n[l]||!Te.isObject(n[l]))&&(n[l]=[]),s(r,a,n[l],i)&&Te.isArray(n[l])&&(n[l]=r6(n[l])),!o)}if(Te.isFormData(t)&&Te.isFunction(t.entries)){const r={};return Te.forEachEntry(t,(a,n)=>{s(s6(a),n,r,0)}),r}return null}function a6(t,s,r){if(Te.isString(t))try{return(s||JSON.parse)(t),Te.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Al={transitional:Zg,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=Te.isObject(s);if(i&&Te.isHTMLForm(s)&&(s=new FormData(s)),Te.isFormData(s))return n?JSON.stringify(Xg(s)):s;if(Te.isArrayBuffer(s)||Te.isBuffer(s)||Te.isStream(s)||Te.isFile(s)||Te.isBlob(s)||Te.isReadableStream(s))return s;if(Te.isArrayBufferView(s))return s.buffer;if(Te.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return t6(s,this.formSerializer).toString();if((o=Te.isFileList(s))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Cc(o?{"files[]":s}:s,c&&new c,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),a6(s)):s}],transformResponse:[function(s){const r=this.transitional||Al.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(Te.isResponse(s)||Te.isReadableStream(s))return s;if(s&&Te.isString(s)&&(a&&!this.responseType||n)){const l=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s)}catch(o){if(l)throw o.name==="SyntaxError"?St.from(o,St.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bs.classes.FormData,Blob:Bs.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],t=>{Al.headers[t]={}});const n6=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),i6=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),r=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!r||s[r]&&n6[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},Nx=Symbol("internals");function Ki(t){return t&&String(t).trim().toLowerCase()}function Go(t){return t===!1||t==null?t:Te.isArray(t)?t.map(Go):String(t)}function l6(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const o6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Od(t,s,r,a,n){if(Te.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!Te.isString(s)){if(Te.isString(a))return s.indexOf(a)!==-1;if(Te.isRegExp(a))return a.test(s)}}function c6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function d6(t,s){const r=Te.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,i,l){return this[a].call(this,s,n,i,l)},configurable:!0})})}let er=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function i(o,c,d){const u=Ki(c);if(!u)throw new Error("header name must be a non-empty string");const f=Te.findKey(n,u);(!f||n[f]===void 0||d===!0||d===void 0&&n[f]!==!1)&&(n[f||c]=Go(o))}const l=(o,c)=>Te.forEach(o,(d,u)=>i(d,u,c));if(Te.isPlainObject(s)||s instanceof this.constructor)l(s,r);else if(Te.isString(s)&&(s=s.trim())&&!o6(s))l(i6(s),r);else if(Te.isObject(s)&&Te.isIterable(s)){let o={},c,d;for(const u of s){if(!Te.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?Te.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,r)}else s!=null&&i(r,s,a);return this}get(s,r){if(s=Ki(s),s){const a=Te.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return l6(n);if(Te.isFunction(r))return r.call(this,n,a);if(Te.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Ki(s),s){const a=Te.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||Od(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function i(l){if(l=Ki(l),l){const o=Te.findKey(a,l);o&&(!r||Od(a,a[o],o,r))&&(delete a[o],n=!0)}}return Te.isArray(s)?s.forEach(i):i(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!s||Od(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const r=this,a={};return Te.forEach(this,(n,i)=>{const l=Te.findKey(a,i);if(l){r[l]=Go(n),delete r[i];return}const o=s?c6(i):String(i).trim();o!==i&&delete r[i],r[o]=Go(n),a[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return Te.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&Te.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[Nx]=this[Nx]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=Ki(l);a[o]||(d6(n,l),a[o]=!0)}return Te.isArray(s)?s.forEach(i):i(s),this}};er.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(er.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});Te.freezeMethods(er);function Dd(t,s){const r=this||Al,a=s||r,n=er.from(a.headers);let i=a.data;return Te.forEach(t,function(o){i=o.call(r,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function Qg(t){return!!(t&&t.__CANCEL__)}function gi(t,s,r){St.call(this,t??"canceled",St.ERR_CANCELED,s,r),this.name="CanceledError"}Te.inherits(gi,St,{__CANCEL__:!0});function ep(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new St("Request failed with status code "+r.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function u6(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function m6(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,i=0,l;return s=s!==void 0?s:1e3,function(c){const d=Date.now(),u=a[i];l||(l=d),r[n]=c,a[n]=d;let f=i,g=0;for(;f!==n;)g+=r[f++],f=f%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),d-l<s)return;const x=u&&d-u;return x?Math.round(g*1e3/x):void 0}}function h6(t,s){let r=0,a=1e3/s,n,i;const l=(d,u=Date.now())=>{r=u,n=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const u=Date.now(),f=u-r;f>=a?l(d,u):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},a-f)))},()=>n&&l(n)]}const ic=(t,s,r=3)=>{let a=0;const n=m6(50,250);return h6(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-a,d=n(c),u=l<=o;a=l;const f={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(f)},r)},wx=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},Sx=t=>(...s)=>Te.asap(()=>t(...s)),x6=Bs.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,Bs.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(Bs.origin),Bs.navigator&&/(msie|trident)/i.test(Bs.navigator.userAgent)):()=>!0,f6=Bs.hasStandardBrowserEnv?{write(t,s,r,a,n,i){const l=[t+"="+encodeURIComponent(s)];Te.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Te.isString(a)&&l.push("path="+a),Te.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function g6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function p6(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function tp(t,s,r){let a=!g6(s);return t&&(a||r==!1)?p6(t,s):s}const Cx=t=>t instanceof er?{...t}:t;function Sn(t,s){s=s||{};const r={};function a(d,u,f,g){return Te.isPlainObject(d)&&Te.isPlainObject(u)?Te.merge.call({caseless:g},d,u):Te.isPlainObject(u)?Te.merge({},u):Te.isArray(u)?u.slice():u}function n(d,u,f,g){if(Te.isUndefined(u)){if(!Te.isUndefined(d))return a(void 0,d,f,g)}else return a(d,u,f,g)}function i(d,u){if(!Te.isUndefined(u))return a(void 0,u)}function l(d,u){if(Te.isUndefined(u)){if(!Te.isUndefined(d))return a(void 0,d)}else return a(void 0,u)}function o(d,u,f){if(f in s)return a(d,u);if(f in t)return a(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,f)=>n(Cx(d),Cx(u),f,!0)};return Te.forEach(Object.keys({...t,...s}),function(u){const f=c[u]||n,g=f(t[u],s[u],u);Te.isUndefined(g)&&f!==o||(r[u]=g)}),r}const sp=t=>{const s=Sn({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=s;s.headers=l=er.from(l),s.url=Yg(tp(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(Te.isFormData(r)){if(Bs.hasStandardBrowserEnv||Bs.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[d,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Bs.hasStandardBrowserEnv&&(a&&Te.isFunction(a)&&(a=a(s)),a||a!==!1&&x6(s.url))){const d=n&&i&&f6.read(i);d&&l.set(n,d)}return s},b6=typeof XMLHttpRequest<"u",y6=b6&&function(t){return new Promise(function(r,a){const n=sp(t);let i=n.data;const l=er.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,u,f,g,x,y;function $(){x&&x(),y&&y(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(n.method.toUpperCase(),n.url,!0),j.timeout=n.timeout;function N(){if(!j)return;const _=er.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),P={data:!o||o==="text"||o==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:_,config:t,request:j};ep(function(ne){r(ne),$()},function(ne){a(ne),$()},P),j=null}"onloadend"in j?j.onloadend=N:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(N)},j.onabort=function(){j&&(a(new St("Request aborted",St.ECONNABORTED,t,j)),j=null)},j.onerror=function(){a(new St("Network Error",St.ERR_NETWORK,t,j)),j=null},j.ontimeout=function(){let A=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const P=n.transitional||Zg;n.timeoutErrorMessage&&(A=n.timeoutErrorMessage),a(new St(A,P.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,t,j)),j=null},i===void 0&&l.setContentType(null),"setRequestHeader"in j&&Te.forEach(l.toJSON(),function(A,P){j.setRequestHeader(P,A)}),Te.isUndefined(n.withCredentials)||(j.withCredentials=!!n.withCredentials),o&&o!=="json"&&(j.responseType=n.responseType),d&&([g,y]=ic(d,!0),j.addEventListener("progress",g)),c&&j.upload&&([f,x]=ic(c),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",x)),(n.cancelToken||n.signal)&&(u=_=>{j&&(a(!_||_.type?new gi(null,t,j):_),j.abort(),j=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const S=u6(n.url);if(S&&Bs.protocols.indexOf(S)===-1){a(new St("Unsupported protocol "+S+":",St.ERR_BAD_REQUEST,t));return}j.send(i||null)})},v6=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const i=function(d){if(!n){n=!0,o();const u=d instanceof Error?d:this.reason;a.abort(u instanceof St?u:new gi(u instanceof Error?u.message:u))}};let l=s&&setTimeout(()=>{l=null,i(new St(`timeout ${s} of ms exceeded`,St.ETIMEDOUT))},s);const o=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=a;return c.unsubscribe=()=>Te.asap(o),c}},j6=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},N6=async function*(t,s){for await(const r of w6(t))yield*j6(r,s)},w6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},$x=(t,s,r,a)=>{const n=N6(t,s);let i=0,l,o=c=>{l||(l=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){o(),c.close();return}let f=u.byteLength;if(r){let g=i+=f;r(g)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},$c=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",rp=$c&&typeof ReadableStream=="function",S6=$c&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),ap=(t,...s)=>{try{return!!t(...s)}catch{return!1}},C6=rp&&ap(()=>{let t=!1;const s=new Request(Bs.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),kx=64*1024,Eu=rp&&ap(()=>Te.isReadableStream(new Response("").body)),lc={stream:Eu&&(t=>t.body)};$c&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!lc[s]&&(lc[s]=Te.isFunction(t[s])?r=>r[s]():(r,a)=>{throw new St(`Response type '${s}' is not supported`,St.ERR_NOT_SUPPORT,a)})})})(new Response);const $6=async t=>{if(t==null)return 0;if(Te.isBlob(t))return t.size;if(Te.isSpecCompliantForm(t))return(await new Request(Bs.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(t)||Te.isArrayBuffer(t))return t.byteLength;if(Te.isURLSearchParams(t)&&(t=t+""),Te.isString(t))return(await S6(t)).byteLength},k6=async(t,s)=>{const r=Te.toFiniteNumber(t.getContentLength());return r??$6(s)},_6=$c&&(async t=>{let{url:s,method:r,data:a,signal:n,cancelToken:i,timeout:l,onDownloadProgress:o,onUploadProgress:c,responseType:d,headers:u,withCredentials:f="same-origin",fetchOptions:g}=sp(t);d=d?(d+"").toLowerCase():"text";let x=v6([n,i&&i.toAbortSignal()],l),y;const $=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let j;try{if(c&&C6&&r!=="get"&&r!=="head"&&(j=await k6(u,a))!==0){let P=new Request(s,{method:"POST",body:a,duplex:"half"}),M;if(Te.isFormData(a)&&(M=P.headers.get("content-type"))&&u.setContentType(M),P.body){const[ne,V]=wx(j,ic(Sx(c)));a=$x(P.body,kx,ne,V)}}Te.isString(f)||(f=f?"include":"omit");const N="credentials"in Request.prototype;y=new Request(s,{...g,signal:x,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:a,duplex:"half",credentials:N?f:void 0});let S=await fetch(y,g);const _=Eu&&(d==="stream"||d==="response");if(Eu&&(o||_&&$)){const P={};["status","statusText","headers"].forEach(L=>{P[L]=S[L]});const M=Te.toFiniteNumber(S.headers.get("content-length")),[ne,V]=o&&wx(M,ic(Sx(o),!0))||[];S=new Response($x(S.body,kx,ne,()=>{V&&V(),$&&$()}),P)}d=d||"text";let A=await lc[Te.findKey(lc,d)||"text"](S,t);return!_&&$&&$(),await new Promise((P,M)=>{ep(P,M,{data:A,headers:er.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:y})})}catch(N){throw $&&$(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new St("Network Error",St.ERR_NETWORK,t,y),{cause:N.cause||N}):St.from(N,N&&N.code,t,y)}}),Tu={http:z4,xhr:y6,fetch:_6};Te.forEach(Tu,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const _x=t=>`- ${t}`,A6=t=>Te.isFunction(t)||t===null||t===!1,np={getAdapter:t=>{t=Te.isArray(t)?t:[t];const{length:s}=t;let r,a;const n={};for(let i=0;i<s;i++){r=t[i];let l;if(a=r,!A6(r)&&(a=Tu[(l=String(r)).toLowerCase()],a===void 0))throw new St(`Unknown adapter '${l}'`);if(a)break;n[l||"#"+i]=a}if(!a){const i=Object.entries(n).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=s?i.length>1?`since :
`+i.map(_x).join(`
`):" "+_x(i[0]):"as no adapter specified";throw new St("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:Tu};function Md(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gi(null,t)}function Ax(t){return Md(t),t.headers=er.from(t.headers),t.data=Dd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),np.getAdapter(t.adapter||Al.adapter)(t).then(function(a){return Md(t),a.data=Dd.call(t,t.transformResponse,a),a.headers=er.from(a.headers),a},function(a){return Qg(a)||(Md(t),a&&a.response&&(a.response.data=Dd.call(t,t.transformResponse,a.response),a.response.headers=er.from(a.response.headers))),Promise.reject(a)})}const ip="1.11.0",kc={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{kc[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const Px={};kc.transitional=function(s,r,a){function n(i,l){return"[Axios v"+ip+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,o)=>{if(s===!1)throw new St(n(l," has been removed"+(r?" in "+r:"")),St.ERR_DEPRECATED);return r&&!Px[l]&&(Px[l]=!0,console.warn(n(l," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(i,l,o):!0}};kc.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function P6(t,s,r){if(typeof t!="object")throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const i=a[n],l=s[i];if(l){const o=t[i],c=o===void 0||l(o,i,t);if(c!==!0)throw new St("option "+i+" must be "+c,St.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new St("Unknown option "+i,St.ERR_BAD_OPTION)}}const Jo={assertOptions:P6,validators:kc},Kr=Jo.validators;let vn=class{constructor(s){this.defaults=s||{},this.interceptors={request:new jx,response:new jx}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=Sn(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&Jo.assertOptions(a,{silentJSONParsing:Kr.transitional(Kr.boolean),forcedJSONParsing:Kr.transitional(Kr.boolean),clarifyTimeoutError:Kr.transitional(Kr.boolean)},!1),n!=null&&(Te.isFunction(n)?r.paramsSerializer={serialize:n}:Jo.assertOptions(n,{encode:Kr.function,serialize:Kr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Jo.assertOptions(r,{baseUrl:Kr.spelling("baseURL"),withXsrfToken:Kr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&Te.merge(i.common,i[r.method]);i&&Te.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),r.headers=er.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(r)===!1||(c=c&&$.synchronous,o.unshift($.fulfilled,$.rejected))});const d=[];this.interceptors.response.forEach(function($){d.push($.fulfilled,$.rejected)});let u,f=0,g;if(!c){const y=[Ax.bind(this),void 0];for(y.unshift(...o),y.push(...d),g=y.length,u=Promise.resolve(r);f<g;)u=u.then(y[f++],y[f++]);return u}g=o.length;let x=r;for(f=0;f<g;){const y=o[f++],$=o[f++];try{x=y(x)}catch(j){$.call(this,j);break}}try{u=Ax.call(this,x)}catch(y){return Promise.reject(y)}for(f=0,g=d.length;f<g;)u=u.then(d[f++],d[f++]);return u}getUri(s){s=Sn(this.defaults,s);const r=tp(s.baseURL,s.url,s.allowAbsoluteUrls);return Yg(r,s.params,s.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(s){vn.prototype[s]=function(r,a){return this.request(Sn(a||{},{method:s,url:r,data:(a||{}).data}))}});Te.forEach(["post","put","patch"],function(s){function r(a){return function(i,l,o){return this.request(Sn(o||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}vn.prototype[s]=r(),vn.prototype[s+"Form"]=r(!0)});let L6=class lp{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{a.subscribe(o),i=o}).then(n);return l.cancel=function(){a.unsubscribe(i)},l},s(function(i,l,o){a.reason||(a.reason=new gi(i,l,o),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new lp(function(n){s=n}),cancel:s}}};function E6(t){return function(r){return t.apply(null,r)}}function T6(t){return Te.isObject(t)&&t.isAxiosError===!0}const Iu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Iu).forEach(([t,s])=>{Iu[s]=t});function op(t){const s=new vn(t),r=Dg(vn.prototype.request,s);return Te.extend(r,vn.prototype,s,{allOwnKeys:!0}),Te.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return op(Sn(t,n))},r}const Jt=op(Al);Jt.Axios=vn;Jt.CanceledError=gi;Jt.CancelToken=L6;Jt.isCancel=Qg;Jt.VERSION=ip;Jt.toFormData=Cc;Jt.AxiosError=St;Jt.Cancel=Jt.CanceledError;Jt.all=function(s){return Promise.all(s)};Jt.spread=E6;Jt.isAxiosError=T6;Jt.mergeConfig=Sn;Jt.AxiosHeaders=er;Jt.formToJSON=t=>Xg(Te.isHTMLForm(t)?new FormData(t):t);Jt.getAdapter=np.getAdapter;Jt.HttpStatusCode=Iu;Jt.default=Jt;const{Axios:D8,AxiosError:M8,CanceledError:B8,isCancel:U8,CancelToken:q8,VERSION:z8,all:W8,Cancel:H8,isAxiosError:V8,spread:G8,toFormData:J8,AxiosHeaders:K8,HttpStatusCode:Y8,formToJSON:Z8,getAdapter:X8,mergeConfig:Q8}=Jt,I6=()=>{const{id:t}=Ux(),s=gs(),[r,a]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState(null);b.useEffect(()=>{(async()=>{if(t)try{i(!0);const g=await Jt.get(`/api/incidents/${t}`);g.data.success?a(g.data.incident):o("Incident not found")}catch(g){console.error("Error fetching incident:",g),o("Failed to load incident details")}finally{i(!1)}})()},[t]);const c=f=>{switch(f){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=f=>{switch(f){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"moderate":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},u=f=>f.toUpperCase();return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):l||!r?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-error-warning-line mx-auto text-5xl text-red-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Error"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l||"Incident not found"}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>s("/admin/incidents/view"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to Incidents"]})})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>s("/admin/incidents/view"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to Incidents"]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Incident #",r.incident_id]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(r.status)}`,children:r.status.replace("_"," ").toUpperCase()}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d(r.priority_level)}`,children:r.priority_level.toUpperCase()})]})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Incident Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",u(r.incident_type)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Priority:"})," ",r.priority_level]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",r.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Validation:"})," ",r.validation_status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reporter Safety:"})," ",r.reporter_safe_status]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx("i",{className:"ri-map-pin-line mr-2"}),"Location"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Coordinates: ",r.latitude,", ",r.longitude]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx("i",{className:"ri-time-line mr-2"}),"Reported"]}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(r.date_reported).toLocaleString()})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assignment Information"}),e.jsxs("div",{className:"space-y-2",children:[r.assigned_team_name&&e.jsxs("p",{children:[e.jsx("strong",{children:"Assigned Team:"})," ",r.assigned_team_name]}),r.assigned_staff_name&&e.jsxs("p",{children:[e.jsx("strong",{children:"Assigned Staff:"})," ",r.assigned_staff_name]}),r.reporter_name&&e.jsxs("p",{children:[e.jsx("strong",{children:"Reported By:"})," ",r.reporter_name]})]})]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Description"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.description})})]})]})]})]})})},Yi="http://localhost:3001",Bd={getReports:async t=>(await Jt.get(`${Yi}/api/reports`,{params:t})).data,generateReport:async t=>(await Jt.post(`${Yi}/api/reports/generate`,t)).data,downloadReport:async t=>(await Jt.get(`${Yi}/api/reports/${t}/download`,{responseType:"blob"})).data,exportReports:async t=>(await Jt.post(`${Yi}/api/reports/export`,t,{responseType:"blob"})).data,deleteReport:async t=>(await Jt.delete(`${Yi}/api/reports/${t}`)).data},R6=()=>{const[t,s]=b.useState("all"),[r,a]=b.useState("grid"),[n,i]=b.useState({startDate:"",endDate:""}),l=[{id:"1",name:"Incident Summary Report",description:"Comprehensive summary of all incidents including status, response times, and resolutions.",type:"incidents",status:"available",frequency:"daily",lastGenerated:"2025-08-28"},{id:"2",name:"Evacuation Center Status",description:"Current status and historical data of evacuation centers including occupancy rates.",type:"evacuations",status:"generating",frequency:"daily",lastGenerated:"2025-08-27"},{id:"3",name:"Resource Allocation Report",description:"Overview of resource distribution and utilization across different centers.",type:"resources",status:"available",frequency:"weekly",lastGenerated:"2025-08-29"},{id:"4",name:"Activity Logs Report",description:"Detailed log of all system activities and user actions.",type:"activity",status:"available",frequency:"daily",lastGenerated:"2025-08-29"},{id:"5",name:"Emergency Response Times",description:"Analysis of response times for different types of emergencies and locations.",type:"response",status:"available",frequency:"weekly",lastGenerated:"2025-08-29"},{id:"6",name:"Team Performance Report",description:"Evaluation of team performance, response efficiency, and task completion rates.",type:"team",status:"failed",frequency:"monthly",lastGenerated:"2025-08-28"},{id:"7",name:"Emergency Preparedness Assessment",description:"Assessment of current emergency preparedness levels and recommendations.",type:"emergency",status:"available",frequency:"monthly",lastGenerated:"2025-08-25"}],o=t==="all"?l:l.filter(f=>f.type===t),c=async f=>{try{const g=l.find(y=>y.id===f);if(!g)return;const x=await Bd.generateReport({title:g.name,type:g.type,description:g.description,parameters:{dateRange:n,status:"all"}});if(x.reportId){const y=await Bd.downloadReport(x.reportId),$=window.URL.createObjectURL(y),j=document.createElement("a");j.href=$,j.download=`${g.name}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(j),j.click(),window.URL.revokeObjectURL($),document.body.removeChild(j)}}catch(g){console.error("Error generating report:",g),alert("Failed to generate report. Please try again.")}},d=async f=>{try{const g=await Bd.exportReports({format:f,type:t,dateRange:{startDate:n.startDate,endDate:n.endDate}}),x=window.URL.createObjectURL(g),y=document.createElement("a");y.href=x,y.download=`emergency-reports-${new Date().toISOString().split("T")[0]}.${f}`,document.body.appendChild(y),y.click(),window.URL.revokeObjectURL(x),document.body.removeChild(y)}catch(g){console.error("Error exporting reports:",g),alert("Failed to export reports. Please try again.")}},u=f=>{switch(f){case"available":return"bg-green-100 text-green-800";case"generating":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reports"}),e.jsx("p",{className:"text-gray-600",children:"Generate and manage various reports for emergency management operations."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-blue-600 text-sm font-medium",children:"Total Reports"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:l.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-green-600 text-sm font-medium",children:"Available Reports"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:l.filter(f=>f.status==="available").length})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-yellow-600 text-sm font-medium",children:"Generating"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:l.filter(f=>f.status==="generating").length})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-red-600 text-sm font-medium",children:"Failed"}),e.jsx("div",{className:"text-2xl font-bold text-red-900",children:l.filter(f=>f.status==="failed").length})]})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center justify-between bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("select",{value:t,onChange:f=>s(f.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Reports"}),e.jsx("option",{value:"incidents",children:"Incidents"}),e.jsx("option",{value:"evacuations",children:"Evacuations"}),e.jsx("option",{value:"resources",children:"Resources"}),e.jsx("option",{value:"response",children:"Response Times"}),e.jsx("option",{value:"emergency",children:"Emergency Preparedness"}),e.jsx("option",{value:"team",children:"Team Performance"}),e.jsx("option",{value:"activity",children:"Activity Logs"})]}),e.jsx("input",{type:"date",value:n.startDate,onChange:f=>i(g=>({...g,startDate:f.target.value})),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"date",value:n.endDate,onChange:f=>i(g=>({...g,endDate:f.target.value})),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[e.jsx("button",{onClick:()=>a("grid"),className:r==="grid"?"px-3 py-2 bg-blue-50 text-blue-600":"px-3 py-2 bg-white text-gray-600",children:e.jsx("i",{className:"ri-grid-line"})}),e.jsx("button",{onClick:()=>a("table"),className:r==="table"?"px-3 py-2 bg-blue-50 text-blue-600":"px-3 py-2 bg-white text-gray-600",children:e.jsx("i",{className:"ri-list-check"})})]}),e.jsx("button",{onClick:()=>d("pdf"),className:"px-4 py-2 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Export as PDF"}),e.jsx("button",{onClick:()=>d("excel"),className:"px-4 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Export as Excel"})]})]}),r==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(f=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100 hover:border-blue-500 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f.description})]}),e.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:f.type})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${u(f.status)}`,children:f.status}),f.frequency&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Generated ",f.frequency]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:f.lastGenerated&&e.jsxs("span",{children:["Last generated: ",f.lastGenerated]})}),e.jsx("button",{onClick:()=>c(f.id),disabled:f.status==="generating",className:`px-4 py-2 text-sm rounded-md focus:outline-none focus:ring-2 ${f.status==="generating"?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500"}`,children:f.status==="generating"?"Generating...":"Generate Report"})]})]})]},f.id))}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frequency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Generated"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.name}),e.jsx("div",{className:"text-sm text-gray-500",children:f.description})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:f.type})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${u(f.status)}`,children:f.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:f.frequency||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:f.lastGenerated||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>c(f.id),disabled:f.status==="generating",className:`px-4 py-2 text-sm rounded-md focus:outline-none focus:ring-2 ${f.status==="generating"?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500"}`,children:f.status==="generating"?"Generating...":"Generate Report"})})]},f.id))})]})})]})};delete Xt.Icon.Default.prototype._getIconUrl;Xt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const F6=Xt.divIcon({html:`
    <div style="
      background-color: #3b82f6;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
    ">
      <div style="
        width: 8px;
        height: 8px;
        background-color: white;
        border-radius: 50%;
      "></div>
    </div>
  `,className:"coordinate-picker-marker",iconSize:[24,24],iconAnchor:[12,12]}),O6=({onCoordinateChange:t})=>(fu({click:s=>{const{lat:r,lng:a}=s.latlng;t(r,a)}}),null),D6=({latitude:t,longitude:s,onCoordinateChange:r,height:a="300px",center:n=[13.7565,121.3851],zoom:i=13})=>{const[l,o]=b.useState(n),c=d=>{if(d==null)return null;const u=typeof d=="string"?parseFloat(d):d;return isNaN(u)?null:u};return b.useEffect(()=>{const d=c(t),u=c(s);d!==null&&u!==null&&o([d,u])},[t,s]),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"w-full rounded-lg overflow-hidden border border-gray-300",style:{height:a},children:e.jsxs(Ma,{center:l,zoom:i,style:{height:"100%",width:"100%"},className:"z-0",zoomControl:!0,children:[e.jsx(Ba,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19}),e.jsx(O6,{onCoordinateChange:r}),t&&s&&(()=>{const d=c(t),u=c(s);return d!==null&&u!==null?e.jsx(hr,{position:[d,u],icon:F6}):null})()]})}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Click on the map to select coordinates. Selected: ",(()=>{const d=c(t);return d!==null?d.toFixed(6):"N/A"})(),", ",(()=>{const d=c(s);return d!==null?d.toFixed(6):"N/A"})()]})]})},M6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),B6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),U6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),q6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Ud=t=>e.jsxs("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Ao=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),Lx=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),z6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),W6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),H6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ex=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),V6=()=>{const{showToast:t}=Gs(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(""),[o,c]=b.useState("all"),[d,u]=b.useState("name"),[f,g]=b.useState(!1),[x,y]=b.useState(!1),[$,j]=b.useState(!1),[N,S]=b.useState(null),[_,A]=b.useState({}),[P,M]=b.useState({}),[ne,V]=b.useState(!1),[L,Q]=b.useState(!1),[w,R]=b.useState(!1);b.useEffect(()=>{Z()},[]);const Z=async()=>{n(!0);try{const F=await Xs.getCenters(),J=F?.data||F;r(Array.isArray(J)?J:[])}catch(F){console.error("Failed to load centers:",F)}finally{n(!1)}},I=b.useMemo(()=>{let F=s;if(i.trim()){const J=i.toLowerCase();F=F.filter(W=>W.name.toLowerCase().includes(J)||W.address?.toLowerCase().includes(J)||W.contact_person?.toLowerCase().includes(J))}return o!=="all"&&(F=F.filter(J=>J.status===o)),F=[...F].sort((J,W)=>{switch(d){case"name":return J.name.localeCompare(W.name);case"capacity":return W.capacity-J.capacity;case"occupancy":return W.current_occupancy-J.current_occupancy;case"status":return J.status.localeCompare(W.status);default:return 0}}),F},[s,i,o,d]),re=b.useCallback(F=>{const J={};return F.name?.trim()||(J.name="Name is required"),(!F.latitude||F.latitude<-90||F.latitude>90)&&(J.latitude="Valid latitude required (-90 to 90)"),(!F.longitude||F.longitude<-180||F.longitude>180)&&(J.longitude="Valid longitude required (-180 to 180)"),(!F.capacity||F.capacity<0)&&(J.capacity="Valid capacity required (greater than 0)"),F.current_occupancy!==void 0&&F.current_occupancy<0&&(J.current_occupancy="Occupancy cannot be negative"),F.current_occupancy!==void 0&&F.capacity&&F.current_occupancy>F.capacity&&(J.current_occupancy="Occupancy cannot exceed capacity"),M(J),Object.keys(J).length===0},[]),ee=async()=>{if(re(_)){V(!0);try{const F={name:_.name,latitude:Number(_.latitude),longitude:Number(_.longitude),capacity:Number(_.capacity),current_occupancy:Number(_.current_occupancy)||0,status:_.status||"open",contact_person:_.contact_person||null,contact_number:_.contact_number||null,email:_.email||null,address:_.address||null},J=await Xs.createCenter(F),W=J?.data||J;W&&(r(le=>[W,...le]),g(!1),A({}),M({}),t({type:"success",title:"Success",message:"Evacuation center created successfully"}))}catch(F){console.error("Failed to create center:",F),t({type:"error",title:"Error",message:"Failed to create evacuation center. Please try again."})}finally{V(!1)}}},ge=async()=>{if(!(!N||!re(_))){V(!0);try{const F={name:_.name,latitude:Number(_.latitude),longitude:Number(_.longitude),capacity:Number(_.capacity),current_occupancy:Number(_.current_occupancy)||0,status:_.status||"open",contact_person:_.contact_person||null,contact_number:_.contact_number||null,email:_.email||null,address:_.address||null},J=await Xs.updateCenter(N.center_id,F),W=J?.data||J;W&&(r(le=>le.map(he=>he.center_id===N.center_id?W:he)),y(!1),S(null),A({}),M({}),t({type:"success",title:"Success",message:"Evacuation center updated successfully"}))}catch(F){console.error("Failed to update center:",F),t({type:"error",title:"Error",message:"Failed to update evacuation center. Please try again."})}finally{V(!1)}}},G=async()=>{if(N)try{await Xs.deleteCenter(N.center_id),r(F=>F.filter(J=>J.center_id!==N.center_id)),j(!1),S(null),t({type:"success",title:"Success",message:"Evacuation center deleted successfully"})}catch(F){console.error("Failed to delete center:",F),t({type:"error",title:"Error",message:"Failed to delete evacuation center. Please try again."})}},fe=F=>{S(F),A(F),y(!0)},ke=(F,J)=>{A(W=>({...W,latitude:F,longitude:J}))},X=F=>{S(F),j(!0)},k=async(F,J)=>{try{const W=I.map(he=>({name:he.name,status:he.status,capacity:he.capacity,current_occupancy:he.current_occupancy,occupancy_rate:`${T(he)}%`,latitude:he.latitude,longitude:he.longitude,contact_person:he.contact_person||"N/A",contact_number:he.contact_number||"N/A",address:he.address||"N/A",created_at:he.created_at||"N/A",updated_at:he.updated_at||"N/A"})),le=J.map(he=>({key:he.key,label:he.label,format:he.format}));switch(F){case"csv":ft.exportToCSV(W,le,{filename:`evacuation-centers-${new Date().toISOString().split("T")[0]}`,title:"Evacuation Centers Report"});break;case"excel":ft.exportToExcel(W,le,{filename:`evacuation-centers-${new Date().toISOString().split("T")[0]}`,title:"Evacuation Centers Report"});break;case"pdf":await ft.exportToPDF(W,le,{filename:`evacuation-centers-${new Date().toISOString().split("T")[0]}`,title:"Evacuation Centers Report"});break}t({type:"success",title:"Success",message:`Data exported successfully as ${F.toUpperCase()}`}),Q(!1)}catch(W){console.error("Export failed:",W),t({type:"error",title:"Error",message:"Failed to export data. Please try again."})}},q=F=>{switch(F){case"open":return"bg-green-100 text-green-800";case"full":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=F=>Math.round(F.current_occupancy/F.capacity*100),B=F=>{const J=typeof F=="number"?F:typeof F=="string"?parseFloat(F):NaN;return Number.isFinite(J)?J.toFixed(4):"N/A"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Evacuation Centers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and monitor all evacuation centers in the system"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>{A({}),M({}),g(!0)},className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx(B6,{className:"w-5 h-5 mr-2"}),"Add New Center"]}),e.jsxs("button",{onClick:()=>Q(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Centers"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Ao,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Centers"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(H6,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Open Centers"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.filter(F=>F.status==="open").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(W6,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Full Centers"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.filter(F=>F.status==="full").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Ex,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Closed Centers"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.filter(F=>F.status==="closed").length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(M6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search centers...",value:i,onChange:F=>l(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("select",{value:o,onChange:F=>c(F.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"full",children:"Full"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("select",{value:d,onChange:F=>u(F.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"capacity",children:"Sort by Capacity"}),e.jsx("option",{value:"occupancy",children:"Sort by Occupancy"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]})}),a?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((F,J)=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},J))}):I.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ao,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No centers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i||o!=="all"?"Try adjusting your search or filters.":"Get started by creating a new center."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(F=>e.jsx("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:F.name}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q(F.status)}`,children:F.status})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>fe(F),className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"Edit center",children:e.jsx(U6,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>X(F),className:"p-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete center",children:e.jsx(q6,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ud,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[B(F.latitude),", ",B(F.longitude)]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ao,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsxs("span",{children:[F.current_occupancy," / ",F.capacity," (",T(F),"%)"]})]}),F.contact_person&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Lx,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:F.contact_person})]}),F.contact_number&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(z6,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:F.contact_number})]}),F.address&&e.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[e.jsx(Ud,{className:"w-4 h-4 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"truncate",children:F.address})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${T(F)>80?"bg-red-500":T(F)>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(T(F),100)}%`}})})})]})},F.center_id))}),(f||x)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[95vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:f?"Create New Evacuation Center":"Edit Evacuation Center"}),e.jsx("button",{onClick:()=>{g(!1),y(!1),A({}),M({})},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ex,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Center Name *"}),e.jsx("input",{type:"text",value:_.name||"",onChange:F=>A({..._,name:F.target.value}),placeholder:"Enter evacuation center name",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${P.name?"border-red-500":"border-gray-300"}`}),P.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.name})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[e.jsx(Ud,{className:"w-5 h-5 inline mr-2"}),"Location Information"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Coordinates *"}),e.jsx("div",{className:"text-xs text-gray-500 mb-3",children:"Click on the map below to select coordinates, or enter them manually"}),e.jsx("div",{className:"mb-4",children:e.jsx(D6,{latitude:_.latitude||null,longitude:_.longitude||null,onCoordinateChange:ke,height:"250px"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),e.jsx("input",{type:"number",step:"0.0001",value:_.latitude||"",onChange:F=>A({..._,latitude:parseFloat(F.target.value)}),placeholder:"e.g., 13.7565",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${P.latitude?"border-red-500":"border-gray-300"}`}),P.latitude&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.latitude})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),e.jsx("input",{type:"number",step:"0.0001",value:_.longitude||"",onChange:F=>A({..._,longitude:parseFloat(F.target.value)}),placeholder:"e.g., 121.3851",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${P.longitude?"border-red-500":"border-gray-300"}`}),P.longitude&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.longitude})]})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[e.jsx(Ao,{className:"w-5 h-5 inline mr-2"}),"Capacity & Status"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"}),e.jsx("input",{type:"number",min:"0",value:_.capacity||"",onChange:F=>A({..._,capacity:parseInt(F.target.value)}),placeholder:"Enter maximum capacity",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${P.capacity?"border-red-500":"border-gray-300"}`}),P.capacity&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.capacity})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Occupancy"}),e.jsx("input",{type:"number",min:"0",value:_.current_occupancy||"",onChange:F=>A({..._,current_occupancy:parseInt(F.target.value)}),placeholder:"Enter current occupancy",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${P.current_occupancy?"border-red-500":"border-gray-300"}`}),P.current_occupancy&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.current_occupancy})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:_.status||"open",onChange:F=>A({..._,status:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"full",children:"Full"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[e.jsx(Lx,{className:"w-5 h-5 inline mr-2"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Person"}),e.jsx("input",{type:"text",value:_.contact_person||"",onChange:F=>A({..._,contact_person:F.target.value}),placeholder:"Enter contact person name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),e.jsx("input",{type:"tel",value:_.contact_number||"",onChange:F=>A({..._,contact_number:F.target.value}),placeholder:"Enter contact number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{g(!1),y(!1),A({}),M({})},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:f?ee:ge,disabled:ne,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:ne?"Saving...":f?"Create":"Update"})]})]})})}),e.jsx(pa,{isOpen:$,onClose:()=>{j(!1),S(null)},onConfirm:G,title:"Delete Evacuation Center",message:`Are you sure you want to delete the evacuation center "${N?.name}"? This action cannot be undone.`,confirmText:"Delete Center",cancelText:"Cancel",confirmVariant:"secondary",icon:"ri-delete-bin-line",iconColor:"text-red-600",isLoading:ne}),e.jsx(tr,{open:L,data:I,columns:[{key:"name",label:"Center Name"},{key:"status",label:"Status"},{key:"capacity",label:"Capacity"},{key:"current_occupancy",label:"Current Occupancy"},{key:"occupancy_rate",label:"Occupancy Rate"},{key:"contact_person",label:"Contact Person"},{key:"contact_number",label:"Contact Number"}],title:"Evacuation Centers Export",onClose:()=>Q(!1),onExportPDF:()=>k("pdf",[{key:"name",label:"Center Name"},{key:"status",label:"Status"},{key:"capacity",label:"Capacity"},{key:"current_occupancy",label:"Current Occupancy"},{key:"occupancy_rate",label:"Occupancy Rate"},{key:"contact_person",label:"Contact Person"},{key:"contact_number",label:"Contact Number"}]),onExportCSV:()=>k("csv",[{key:"name",label:"Center Name"},{key:"status",label:"Status"},{key:"capacity",label:"Capacity"},{key:"current_occupancy",label:"Current Occupancy"},{key:"occupancy_rate",label:"Occupancy Rate"},{key:"contact_person",label:"Contact Person"},{key:"contact_number",label:"Contact Number"}]),onExportExcel:()=>k("excel",[{key:"name",label:"Center Name"},{key:"status",label:"Status"},{key:"capacity",label:"Capacity"},{key:"current_occupancy",label:"Current Occupancy"},{key:"occupancy_rate",label:"Occupancy Rate"},{key:"contact_person",label:"Contact Person"},{key:"contact_number",label:"Contact Number"}])})]})},Zi=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})}),G6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),J6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),K6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Po=t=>e.jsxs("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Y6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Z6=t=>e.jsxs("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),X6=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})}),Tx=[{name:"Alupay",lat:13.8404,lng:121.2922},{name:"Antipolo",lat:13.708,lng:121.3096},{name:"Bagong Pook",lat:13.8402,lng:121.2216},{name:"Balibago",lat:13.8512,lng:121.2855},{name:"Barangay A",lat:13.8457,lng:121.2104},{name:"Barangay B",lat:13.8461,lng:121.2065},{name:"Barangay C",lat:13.8467,lng:121.2032},{name:"Barangay D",lat:13.844,lng:121.2035},{name:"Barangay E",lat:13.8415,lng:121.2047},{name:"Bayawang",lat:13.7944,lng:121.2798},{name:"Baybayin",lat:13.8277,lng:121.2589},{name:"Bulihan",lat:13.7967,lng:121.2351},{name:"Cahigam",lat:13.8021,lng:121.2501},{name:"Calantas",lat:13.734,lng:121.3129},{name:"Colongan",lat:13.8114,lng:121.1762},{name:"Itlugan",lat:13.819,lng:121.2036},{name:"Leviste",lat:13.7694,lng:121.2868},{name:"Lumbangan",lat:13.8122,lng:121.2649},{name:"Maalas-as",lat:13.8112,lng:121.2122},{name:"Mabato",lat:13.8144,lng:121.2913},{name:"Mabunga",lat:13.781,lng:121.2924},{name:"Macalamcam A",lat:13.8551,lng:121.3046},{name:"Macalamcam B",lat:13.8606,lng:121.3265},{name:"Malaya",lat:13.8535,lng:121.172},{name:"Maligaya",lat:13.8182,lng:121.2742},{name:"Marilag",lat:13.8562,lng:121.1764},{name:"Masaya",lat:13.8383,lng:121.1852},{name:"Matamis",lat:13.7216,lng:121.3305},{name:"Mavalor",lat:13.8177,lng:121.2315},{name:"Mayuro",lat:13.7944,lng:121.2623},{name:"Namuco",lat:13.8382,lng:121.2036},{name:"Namunga",lat:13.8431,lng:121.1978},{name:"Nasi",lat:13.7699,lng:121.3127},{name:"Natu",lat:13.842,lng:121.2683},{name:"Palakpak",lat:13.7079,lng:121.332},{name:"Pinagsibaan",lat:13.8438,lng:121.3141},{name:"Putingkahoy",lat:13.8349,lng:121.3227},{name:"Quilib",lat:13.8603,lng:121.2002},{name:"Salao",lat:13.8578,lng:121.3455},{name:"San Carlos",lat:13.8478,lng:121.2475},{name:"San Ignacio",lat:13.8335,lng:121.1764},{name:"San Isidro",lat:13.8074,lng:121.3152},{name:"San Jose",lat:13.8419,lng:121.2329},{name:"San Roque",lat:13.8518,lng:121.2039},{name:"Santa Cruz",lat:13.8599,lng:121.1853},{name:"Timbugan",lat:13.8095,lng:121.1869},{name:"Tiquiwan",lat:13.8284,lng:121.2399},{name:"Tulos",lat:13.7231,lng:121.2971}],Q6=()=>{const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,f]=b.useState("all"),[g,x]=b.useState(!1),[y,$]=b.useState(!1),[j,N]=b.useState(null),[S,_]=b.useState(null),[A,P]=b.useState(!1),[M,ne]=b.useState(null),[V,L]=b.useState(""),[Q,w]=b.useState(!1),[R,Z]=b.useState({name:"",description:"",center_id:"",start_location:"",end_location:"",priority:"primary",status:"active"}),{showToast:I}=Gs(),[re,ee]=b.useState(!1),[ge,G]=b.useState(null),fe=E=>{const ce=r.find(K=>K.center_id.toString()===E);Z(K=>({...K,center_id:E,end_location:ce?`${ce.name}, Rosario, Batangas`:""}))},ke=async E=>{P(!0);try{const ce=r.find(H=>H.center_id===E.center_id);if(!ce){_(null);return}const K=X(E.start_location);if(!K){_(null);return}const ze=[[K.lat,K.lng],...E.waypoints.map(H=>[H.lat,H.lng]),[Number(ce.latitude),Number(ce.longitude)]];let Ie=0;for(let H=0;H<ze.length-1;H++){const ye=ze[H][0],pe=ze[H][1],Le=ze[H+1][0],Re=ze[H+1][1],We=6371,Ye=(Le-ye)*Math.PI/180,Ce=(Re-pe)*Math.PI/180,Fe=Math.sin(Ye/2)*Math.sin(Ye/2)+Math.cos(ye*Math.PI/180)*Math.cos(Le*Math.PI/180)*Math.sin(Ce/2)*Math.sin(Ce/2),Xe=2*Math.atan2(Math.sqrt(Fe),Math.sqrt(1-Fe));Ie+=We*Xe}const Ne=Math.round(Ie/30*60),U={coordinates:ze.map(H=>[H[1],H[0]])},xe={distance:Ie*1e3,duration:Ne*60,distanceKm:Math.round(Ie*100)/100,durationMinutes:Ne,geometry:U,steps:[]};_(xe)}catch(ce){console.error("Error calculating direct route:",ce),_(null)}finally{P(!1)}},X=E=>{const ce=Tx.find(K=>K.name===E);return ce?{lat:ce.lat,lng:ce.lng}:null};b.useEffect(()=>{k()},[]);const k=async()=>{try{i(!0),L("");const E=await Xs.getCenters();let ce=[];E&&typeof E=="object"&&(E.success&&E.data?ce=E.data:Array.isArray(E)?ce=E:E.data&&Array.isArray(E.data)&&(ce=E.data)),a(ce);const K=await xo.getRoutes();let ze=[];K&&typeof K=="object"&&(K.success&&K.routes?ze=K.routes:K.success&&K.data?ze=K.data:Array.isArray(K)&&(ze=K));const Ie=ze.filter(Ne=>{const U=ce.some(xe=>xe.center_id===Ne.center_id);return U||console.warn(`Route ${Ne.id} has invalid center_id: ${Ne.center_id}`),U});s(Ie)}catch(E){console.error("Error loading data:",E),L("Failed to load evacuation routes data. Please try again.")}finally{i(!1)}},q=E=>{switch(E){case"emergency":return"bg-red-100 text-red-800";case"primary":return"bg-blue-100 text-blue-800";case"secondary":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},T=E=>{switch(E){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"under_review":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},B=()=>{ne(null),Z({name:"",description:"",center_id:"",start_location:"",end_location:"",priority:"primary",status:"active"}),L(""),x(!0)},F=E=>{ne(E),Z({name:E.name,description:E.description,center_id:E.center_id.toString(),start_location:E.start_location||"",end_location:E.end_location,priority:E.priority,status:E.status}),L(""),x(!0)},J=E=>{N(E),_(null),P(!1),ke(E),$(!0)},W=E=>{G(E),ee(!0)},le=async()=>{if(ge!=null)try{L(""),await xo.deleteRoute(ge),await k(),I({type:"success",message:"Route deleted successfully"})}catch(E){console.error("Error deleting route:",E),L("Failed to delete route. Please try again."),I({type:"error",message:"Failed to delete route"})}finally{ee(!1),G(null)}},he=async E=>{if(E.preventDefault(),!R.name.trim()){L("Route name is required.");return}if(!R.center_id){L("Please select a destination center.");return}if(!R.start_location.trim()){L("Start location is required.");return}if(!R.end_location.trim()){L("End location is required.");return}try{w(!0),L("");const ce=X(R.start_location),K={name:R.name.trim(),description:R.description.trim(),center_id:parseInt(R.center_id),start_location:R.start_location.trim(),end_location:R.end_location.trim(),start_latitude:ce?.lat||0,start_longitude:ce?.lng||0,priority:R.priority,status:R.status,distance:S?S.distanceKm:0,estimated_time:S?S.durationMinutes:0};M?(await xo.updateRoute(M.id,K),I({type:"success",message:"Route updated successfully"})):(await xo.createRoute(K),I({type:"success",message:"Route created successfully"})),x(!1),ne(null),await k()}catch(ce){console.error("Error saving route:",ce);const K=ce.message||"Failed to save route. Please try again.";L(K),I({type:"error",message:"Failed to save route"})}finally{w(!1)}},se=E=>{const ce=r.find(K=>K.center_id===E.center_id);if(ce){const K=`${ce.latitude},${ce.longitude}`,ze=E.start_location,Ie=`https://www.google.com/maps/dir/${encodeURIComponent(ze)}/${encodeURIComponent(K)}`;window.open(Ie,"_blank")}},ve=t.filter(E=>{const ce=r.find(Ne=>Ne.center_id===E.center_id),K=E.name.toLowerCase().includes(l.toLowerCase())||E.description.toLowerCase().includes(l.toLowerCase())||E.start_location.toLowerCase().includes(l.toLowerCase())||E.end_location.toLowerCase().includes(l.toLowerCase())||ce&&ce.name.toLowerCase().includes(l.toLowerCase()),ze=c==="all"||E.priority===c,Ie=u==="all"||E.status===u;return K&&ze&&Ie});return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Evacuation Routes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage evacuation routes and driving directions"})]}),e.jsxs("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(G6,{className:"w-4 h-4 mr-2"}),"Add New Route"]})]}),V&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:V})}),e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("button",{onClick:()=>L(""),className:"inline-flex text-red-400 hover:text-red-600",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Zi,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Routes"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Zi,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Routes"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(E=>E.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Zi,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Emergency Routes"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(E=>E.priority==="emergency").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Po,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Centers Connected"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Set(t.map(E=>E.center_id)).size})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Y6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search routes...",value:l,onChange:E=>o(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"primary",children:"Primary"}),e.jsx("option",{value:"secondary",children:"Secondary"}),e.jsx("option",{value:"emergency",children:"Emergency"})]}),e.jsxs("select",{value:u,onChange:E=>f(E.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"under_review",children:"Under Review"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Evacuation Routes"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destination"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ve.map(E=>{const ce=r.find(K=>K.center_id===E.center_id);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:E.description})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${q(E.priority)}`,children:E.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${T(E.status)}`,children:E.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Po,{className:"w-4 h-4 mr-1 text-gray-400"}),ce?ce.name:e.jsxs("span",{className:"text-red-500 text-xs",children:["Center ID: ",E.center_id," (Not Found)"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.start_location," → ",E.end_location]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>J(E),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"View route details",children:e.jsx(Z6,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F(E),className:"text-yellow-600 hover:text-yellow-900 transition-colors",title:"Edit route",children:e.jsx(J6,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>W(E.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete route",children:e.jsx(K6,{className:"w-4 h-4"})})]})})]},E.id)})})]})}),ve.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Zi,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No routes found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l||c!=="all"||u!=="all"?"Try adjusting your search or filters.":"Get started by adding a new evacuation route."})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:M?"Edit Route":"Add New Route"}),V&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:V})}),e.jsxs("form",{onSubmit:he,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"}),e.jsx("input",{type:"text",value:R.name,onChange:E=>Z({...R,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,placeholder:"Enter route name",disabled:Q,maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Center *"}),e.jsxs("select",{value:R.center_id,onChange:E=>fe(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:Q,children:[e.jsx("option",{value:"",children:"Select a center"}),r.map(E=>e.jsx("option",{value:E.center_id,children:E.name},E.center_id))]}),R.center_id&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"End location will be auto-filled when center is selected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:R.description,onChange:E=>Z({...R,description:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter route description",disabled:Q,rows:3,maxLength:500})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Location (Barangay) *"}),e.jsxs("select",{value:R.start_location,onChange:E=>Z({...R,start_location:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:Q,children:[e.jsx("option",{value:"",children:"Select a barangay"}),Tx.map(E=>e.jsx("option",{value:E.name,children:E.name},E.name))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the barangay where the evacuation route starts"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Location *"}),e.jsx("input",{type:"text",value:R.end_location,onChange:E=>Z({...R,end_location:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,placeholder:"e.g., Evacuation Center Name, Rosario, Batangas",disabled:Q,maxLength:255}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Destination evacuation center"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:R.priority,onChange:E=>Z({...R,priority:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:Q,children:[e.jsx("option",{value:"primary",children:"Primary"}),e.jsx("option",{value:"secondary",children:"Secondary"}),e.jsx("option",{value:"emergency",children:"Emergency"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:R.status,onChange:E=>Z({...R,status:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:Q,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"under_review",children:"Under Review"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),ne(null),L("")},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:Q,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",disabled:Q,children:Q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),M?"Updating...":"Creating..."]}):e.jsx(e.Fragment,{children:M?"Update Route":"Create Route"})})]})]})]})})}),y&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Route Details"}),e.jsx("button",{onClick:()=>{$(!1),N(null),_(null),P(!1)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Route Information"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",j.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"})," ",j.description]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:`ml-1 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${T(j.status)}`,children:j.status})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Priority:"}),e.jsx("span",{className:`ml-1 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${q(j.priority)}`,children:j.priority})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Distance:"})," ",S?`${S.distanceKm} km`:`${j.distance} km`]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Estimated Time:"})," ",S?`${S.durationMinutes} minutes`:`${j.estimated_time} minutes`]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Location Details"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Start:"})," ",j.start_location]}),e.jsxs("div",{children:[e.jsx("strong",{children:"End:"})," ",j.end_location]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Distance:"})," ",S?`${S.distanceKm} km`:`${j.distance} km`]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Estimated Time:"})," ",S?`${S.durationMinutes} minutes`:`${j.estimated_time} minutes`]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Destination Center"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:(()=>{const E=r.find(ce=>ce.center_id===j.center_id);return E?e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:E.name}),e.jsx("div",{className:"text-gray-600",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Po,{className:"w-4 h-4 mr-1"}),Number(E.latitude).toFixed(4),", ",Number(E.longitude).toFixed(4)]})}),E.address&&e.jsx("div",{className:"text-gray-600",children:E.address})]}):e.jsx("div",{className:"text-gray-500",children:"Center information not available"})})()})]}),j.waypoints&&j.waypoints.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Waypoints"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("div",{className:"space-y-1 text-sm",children:j.waypoints.map((E,ce)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zi,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{children:["Point ",ce+1,": ",E.lat.toFixed(4),", ",E.lng.toFixed(4)]})]},ce))})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Route Map"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:(()=>{const E=r.find(Ie=>Ie.center_id===j.center_id),ce=X(j.start_location);if(!E||!ce)return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Po,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"Map data not available for this route"})]});let K=[[ce.lat,ce.lng],...j.waypoints.map(Ie=>[Ie.lat,Ie.lng]),[Number(E.latitude),Number(E.longitude)]];if(S&&S.geometry&&S.geometry.coordinates)try{K=S.geometry.coordinates.map(Ne=>[Ne[1],Ne[0]])}catch(Ie){console.error("Error processing route geometry:",Ie)}const ze=Xt.latLngBounds(K.map(Ie=>[Ie[0],Ie[1]]));return e.jsxs("div",{className:"space-y-4",children:[S&&S.success?e.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Route calculated using OpenRouteService"]}):e.jsxs("div",{className:"flex items-center text-sm text-amber-600",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mr-2"}),"Showing direct route (routing service unavailable)"]}),e.jsx("div",{className:"h-96 rounded-lg overflow-hidden",children:e.jsxs(Ma,{bounds:ze,scrollWheelZoom:!0,className:"h-full w-full",children:[e.jsx(Ba,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(hr,{position:[ce.lat,ce.lng],children:e.jsx(Xr,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Start Location"}),e.jsx("br",{}),j.start_location]})})}),e.jsx(hr,{position:[Number(E.latitude),Number(E.longitude)],children:e.jsx(Xr,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Evacuation Center"}),e.jsx("br",{}),E.name,e.jsx("br",{}),E.address]})})}),j.waypoints.map((Ie,Ne)=>e.jsx(hr,{position:[Ie.lat,Ie.lng],children:e.jsx(Xr,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("strong",{children:["Waypoint ",Ne+1]}),e.jsx("br",{}),Ie.lat.toFixed(4),", ",Ie.lng.toFixed(4)]})})},Ne)),e.jsx(Cj,{positions:K,color:S&&S.success?"blue":"orange",weight:4,opacity:.7})]})}),S&&S.steps&&S.steps.length>0&&e.jsxs("div",{className:"p-3 bg-gray-100 rounded-lg max-h-64 overflow-y-auto text-sm text-gray-700",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Turn-by-Turn Directions"}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:S.steps.map((Ie,Ne)=>e.jsxs("li",{children:[Ie.instruction," (",(Ie.distance/1e3).toFixed(2)," km, ",(Ie.duration/60).toFixed(1)," min)"]},Ne))})]})]})})()})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxs("button",{onClick:()=>se(j),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[e.jsx(X6,{className:"w-4 h-4 mr-2"}),"Open in Google Maps"]}),e.jsx("button",{onClick:()=>{$(!1),N(null),_(null),P(!1)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]})]})})}),e.jsx(pa,{isOpen:re,onClose:()=>{ee(!1),G(null)},onConfirm:le,title:"Delete Route",message:"Are you sure you want to delete this route? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmVariant:"secondary",icon:"ri-delete-bin-line",iconColor:"text-red-600"})]})},e8=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t8=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s8=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),r8=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Lo=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),qd=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),Ix=t=>e.jsxs("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Rx=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Fx=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),a8=t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,f]=b.useState(null),[g,x]=b.useState(""),[y,$]=b.useState(""),[j,N]=b.useState("all"),[S,_]=b.useState(""),[A,P]=b.useState(!1),[M,ne]=b.useState({type:"facility",name:"",quantity:1}),[V,L]=b.useState(null),[Q,w]=b.useState(null),{showToast:R}=Gs(),[Z,I]=b.useState(!1),[re,ee]=b.useState(null),[ge,G]=b.useState(!1),[fe,ke]=b.useState(null),[X,k]=b.useState(!1);b.useEffect(()=>{q()},[]),b.useEffect(()=>()=>{Q&&Q.startsWith("blob:")&&URL.revokeObjectURL(Q)},[Q]);const q=async()=>{try{i(!0),_("");const Ce=await Xs.getCenters();let Fe=[];Ce&&typeof Ce=="object"&&(Ce.success&&Ce.data?Fe=Ce.data:Array.isArray(Ce)?Fe=Ce:Ce.data&&Array.isArray(Ce.data)&&(Fe=Ce.data)),a(Fe),Fe.length>0&&(x(Fe[0].center_id),await T(Fe[0].center_id))}catch(Ce){console.error("Error loading data:",Ce),_("Failed to load evacuation centers. Please try again.")}finally{i(!1)}},T=async Ce=>{try{o(!0),_("");const Fe=await Xs.getResources(Ce);let Xe=[];Fe&&typeof Fe=="object"&&(Fe.success&&Fe.data?Xe=Fe.data:Array.isArray(Fe)?Xe=Fe:Fe.data&&Array.isArray(Fe.data)&&(Xe=Fe.data)),Xe=Xe.map(ae=>({...ae,created_at:ae.created_at||ae.updated_at||new Date().toISOString(),updated_at:ae.updated_at||new Date().toISOString()})),s(Xe)}catch(Fe){console.error("Error loading resources:",Fe),_("Failed to load resources for this center. Please try again."),s([])}finally{o(!1)}},B=async Ce=>{x(Ce),$(""),N("all"),await T(Ce)},F=async Ce=>{if(Ce.preventDefault(),!g){_("Please select a center first.");return}if(!M.name.trim()){_("Resource name is required.");return}try{P(!0),_("");const Fe={...M,name:M.name.trim()};let Xe;if(u?(await Xs.updateResource(g,u.resource_id,Fe),Xe=u.resource_id,R({type:"success",message:"Resource updated successfully"})):(Xe=(await Xs.createResource(g,Fe)).data?.resource_id,R({type:"success",message:"Resource created successfully"})),V&&Xe)try{await Xs.uploadResourcePicture(g,Xe,V)}catch(ae){console.error("Error uploading picture:",ae),R({type:"warning",message:"Image upload failed, saved without image"})}d(!1),f(null),he(),Q&&Q.startsWith("blob:")&&URL.revokeObjectURL(Q),await T(g)}catch(Fe){console.error("Error saving resource:",Fe);const Xe=Fe.message||"Failed to save resource. Please try again.";_(Xe),R({type:"error",message:"Failed to save resource"})}finally{P(!1)}},J=Ce=>{f(Ce),ne({type:Ce.type,name:Ce.name,quantity:Ce.quantity}),L(null),w(Ce.picture||null),d(!0)},W=Ce=>{ee(Ce),I(!0)},le=async()=>{if(!(!g||re==null))try{_(""),await Xs.deleteResource(g,re),await T(g),R({type:"success",message:"Resource deleted successfully"})}catch(Ce){console.error("Error deleting resource:",Ce),_("Failed to delete resource. Please try again."),R({type:"error",message:"Failed to delete resource"})}finally{I(!1),ee(null)}},he=()=>{ne({type:"facility",name:"",quantity:1}),L(null),w(null),_("")},se=Ce=>{switch(Ce){case"facility":return"bg-blue-100 text-blue-800";case"feature":return"bg-green-100 text-green-800";case"water":return"bg-cyan-100 text-cyan-800";case"supply":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},ve=Ce=>{switch(Ce){case"facility":return qd;case"feature":return Ix;case"water":return Rx;case"supply":return Fx;default:return Lo}},E=Ce=>{const Fe=Ce.target.files?.[0];if(Fe){if(!Fe.type.startsWith("image/")){_("Please select an image file.");return}if(Fe.size>5*1024*1024){_("Image size must be less than 5MB.");return}L(Fe),_("");const Xe=URL.createObjectURL(Fe);w(Xe)}},ce=()=>{L(null),Q&&Q.startsWith("blob:")&&URL.revokeObjectURL(Q),w(null),u?.picture},K=(Ce,Fe)=>{ke({src:Ce,alt:Fe}),G(!0)},ze=()=>{G(!1),ke(null)},Ie=[{key:"name",label:"Resource Name"},{key:"type",label:"Type"},{key:"quantity",label:"Quantity"},{key:"created_at",label:"Created Date",format:Ce=>new Date(Ce).toLocaleDateString()},{key:"updated_at",label:"Last Updated",format:Ce=>new Date(Ce).toLocaleDateString()}],Ne=()=>ye.map(Ce=>({name:Ce.name,type:Ce.type.charAt(0).toUpperCase()+Ce.type.slice(1),quantity:Ce.quantity,created_at:Ce.created_at,updated_at:Ce.updated_at})),U=async()=>{try{const Ce=Ne();await ft.exportToPDF(Ce,Ie,{filename:`evacuation-resources-${r.find(Fe=>Fe.center_id===g)?.name||"all"}`,title:`Evacuation Resources - ${r.find(Fe=>Fe.center_id===g)?.name||"All Centers"}`,includeTimestamp:!0}),R({type:"success",message:"PDF exported successfully"}),k(!1)}catch(Ce){console.error("Error exporting PDF:",Ce),R({type:"error",message:"Failed to export PDF"})}},xe=()=>{try{const Ce=Ne();ft.exportToCSV(Ce,Ie,{filename:`evacuation-resources-${r.find(Fe=>Fe.center_id===g)?.name||"all"}`,includeTimestamp:!0}),R({type:"success",message:"CSV exported successfully"}),k(!1)}catch(Ce){console.error("Error exporting CSV:",Ce),R({type:"error",message:"Failed to export CSV"})}},H=()=>{try{const Ce=Ne();ft.exportToExcel(Ce,Ie,{filename:`evacuation-resources-${r.find(Fe=>Fe.center_id===g)?.name||"all"}`,title:`Evacuation Resources - ${r.find(Fe=>Fe.center_id===g)?.name||"All Centers"}`,includeTimestamp:!0}),R({type:"success",message:"Excel exported successfully"}),k(!1)}catch(Ce){console.error("Error exporting Excel:",Ce),R({type:"error",message:"Failed to export Excel"})}},ye=t.filter(Ce=>{const Fe=Ce.name.toLowerCase().includes(y.toLowerCase()),Xe=j==="all"||Ce.type===j;return Fe&&Xe}),pe=t.length,Le=t.filter(Ce=>Ce.type==="facility").length,Re=t.filter(Ce=>Ce.type==="feature").length,We=t.filter(Ce=>Ce.type==="water").length,Ye=t.filter(Ce=>Ce.type==="supply").length;return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):r.length?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Evacuation Resources"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage resources and supplies at evacuation centers"})]}),g&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{_(""),d(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(t8,{className:"w-4 h-4 mr-2"}),"Add New Resource"]}),e.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",title:"Export Resources",children:[e.jsx(a8,{className:"w-4 h-4 mr-2"}),"Export Resources"]})]})]}),S&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:S})}),e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("button",{onClick:()=>_(""),className:"inline-flex text-red-400 hover:text-red-600",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Center"}),e.jsx("select",{value:g,onChange:Ce=>B(parseInt(Ce.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:r.map(Ce=>e.jsx("option",{value:Ce.center_id,children:Ce.name},Ce.center_id))})]})})}),g&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Lo,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Resources"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:pe})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(qd,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Facilities"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:Le})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Ix,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Features"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:Re})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Rx,{className:"w-5 h-5 text-cyan-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Water"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:We})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Fx,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Supplies"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:Ye})]})]})})]}),g&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(e8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search resources...",value:y,onChange:Ce=>$(Ce.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("select",{value:j,onChange:Ce=>N(Ce.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"facility",children:"Facility"}),e.jsx("option",{value:"feature",children:"Feature"}),e.jsx("option",{value:"water",children:"Water"}),e.jsx("option",{value:"supply",children:"Supply"})]})]})}),g&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Resources at ",r.find(Ce=>Ce.center_id===g)?.name]})}),l?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading resources..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resource"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ye.map(Ce=>{const Fe=ve(Ce.type);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ce.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${se(Ce.type)}`,children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),Ce.type]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ce.quantity}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[Ce.picture?e.jsx("img",{src:Ce.picture,alt:Ce.name,className:"w-10 h-10 rounded object-cover cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>K(Ce.picture,Ce.name),onError:Xe=>{const ae=Xe.target;ae.style.display="none",ae.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-10 h-10 bg-gray-200 rounded flex items-center justify-center ${Ce.picture?"hidden":""}`,children:e.jsx(Lo,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(Ce.updated_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>J(Ce),className:"text-blue-600 hover:text-blue-900 p-1 rounded transition-colors",title:"Edit resource",children:e.jsx(s8,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>W(Ce.resource_id),className:"text-red-600 hover:text-red-900 p-1 rounded transition-colors",title:"Delete resource",children:e.jsx(r8,{className:"w-4 h-4"})})]})})]},Ce.resource_id)})})]})}),ye.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Lo,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No resources found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:y||j!=="all"?"Try adjusting your search or filters.":"Get started by adding a new resource."})]})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:u?"Edit Resource":"Add New Resource"}),S&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:S})}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{value:M.type,onChange:Ce=>ne({...M,type:Ce.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:A,children:[e.jsx("option",{value:"facility",children:"Facility"}),e.jsx("option",{value:"feature",children:"Feature"}),e.jsx("option",{value:"water",children:"Water"}),e.jsx("option",{value:"supply",children:"Supply"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:M.name,onChange:Ce=>ne({...M,name:Ce.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,placeholder:"Enter resource name",disabled:A,maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),e.jsx("input",{type:"number",min:"1",max:"999999",value:M.quantity,onChange:Ce=>ne({...M,quantity:Math.max(1,parseInt(Ce.target.value)||1)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,placeholder:"Enter quantity",disabled:A})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Picture"}),e.jsxs("div",{className:"space-y-2",children:[Q&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Q,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border border-gray-300"}),e.jsx("button",{type:"button",onClick:ce,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-colors",disabled:A,children:"×"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",disabled:A}),e.jsx("p",{className:"text-xs text-gray-500",children:"Accepted formats: JPG, PNG, GIF. Max size: 5MB"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),f(null),he(),Q&&Q.startsWith("blob:")&&URL.revokeObjectURL(Q)},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:A,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",disabled:A,children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),u?"Updating...":"Creating..."]}):e.jsx(e.Fragment,{children:u?"Update Resource":"Create Resource"})})]})]})]})})}),e.jsx(pa,{isOpen:Z,onClose:()=>{I(!1),ee(null)},onConfirm:le,title:"Delete Resource",message:"Are you sure you want to delete this resource? This action cannot be undone.",confirmText:"Delete Resource",cancelText:"Cancel",confirmVariant:"secondary",icon:"ri-delete-bin-line",iconColor:"text-red-600",isLoading:A}),ge&&fe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",onClick:ze,children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("img",{src:fe.src,alt:fe.alt,className:"max-w-full max-h-full object-contain",onClick:Ce=>Ce.stopPropagation()}),e.jsx("button",{onClick:ze,className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-75 transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx(tr,{open:X,onClose:()=>k(!1),onExportPDF:U,onExportCSV:xe,onExportExcel:H,data:Ne(),columns:Ie,title:`Evacuation Resources - ${r.find(Ce=>Ce.center_id===g)?.name||"All Centers"}`})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Evacuation Resources"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage resources and supplies at evacuation centers"})]})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qd,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No evacuation centers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You need to create evacuation centers first before managing resources."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>window.location.href="/admin/evacuation/centers",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go to Evacuation Centers"})})]})]})},i8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all"),[c,d]=b.useState(!1),[u,f]=b.useState(null),[g,x]=b.useState(!1),[y,$]=b.useState(!1),{showToast:j}=Gs(),[N,S]=b.useState(!1),[_,A]=b.useState(null),[P,M]=b.useState(""),[ne,V]=b.useState(""),[L,Q]=b.useState(""),[w,R]=b.useState(""),[Z,I]=b.useState(!1),[re,ee]=b.useState(!1),[ge,G]=b.useState([]),[fe,ke]=b.useState([]),X=()=>{let U="Export Safety Protocols";return(l!=="all"||n.trim()!=="")&&(U+=" - ",l!=="all"&&(U+=l),n.trim()!==""&&(U+=(l!=="all"?" | ":"")+`Search: "${n.trim()}"`)),U};b.useEffect(()=>{W()},[]);const k=()=>{const U=[{key:"title",label:"Title"},{key:"description",label:"Description"},{key:"category",label:"Category"},{key:"status",label:"Status"},{key:"createdAt",label:"Created At",format:ft.formatDateTime}];ke(U),G(Ne),ee(!0)},q=U=>{const xe=(U||"").toLowerCase();return xe==="fire"?"Fire Safety":xe==="earthquake"?"Natural Disasters":xe==="medical"?"Medical":xe==="intrusion"?"Security":xe==="general"?"Other":U||"Other"},T=U=>{const xe=(U||"").toLowerCase();return xe==="low"||xe==="medium"||xe==="high"||xe==="critical"?xe:"medium"},B=U=>{const xe=(U||"").toLowerCase();return xe==="active"||xe==="draft"||xe==="archived"?xe:"active"},F=U=>{if(Array.isArray(U?.steps))return U.steps;if(typeof U?.steps_json=="string")try{const xe=JSON.parse(U.steps_json);if(Array.isArray(xe))return xe}catch{}return typeof U?.steps=="string"?U.steps.split(/\r?\n/).map(xe=>xe.trim()).filter(Boolean):[]},J=U=>({id:Number(U?.protocol_id??U?.id??0),title:String(U?.title??""),description:String(U?.description??""),category:q(String(U?.type??U?.category??"General")),priority:T(String(U?.priority??"medium")),status:B(String(U?.status??"active")),steps:F(U),createdAt:U?.created_at?new Date(U.created_at).toISOString():new Date().toISOString(),updatedAt:U?.updated_at?new Date(U.updated_at).toISOString():new Date().toISOString(),protocol_id:U?.protocol_id??null,type:U?.type??void 0,file_attachment:U?.file_attachment??null,created_by:U?.created_by??null,created_at:U?.created_at??void 0,updated_at:U?.updated_at??void 0}),W=async()=>{try{const U=await Kn.getProtocols(),xe=Array.isArray(U)?U.map(J):[];s(xe)}catch(U){console.error("Error fetching protocols:",U)}finally{a(!1)}},le=()=>{f(null),x(!0),d(!0),M(""),V(""),Q(""),R("")},he=U=>{f(U),x(!0),d(!0),M(U.title||""),V(U.description||""),Q(U.type||""),R(U.file_attachment||"")},se=U=>{f(U),x(!1),d(!0)},ve=async()=>{try{$(!0);const xe=JSON.parse(localStorage.getItem("adminInfo")||"{}")?.admin?.id;if(u){const H=Number(u.protocol_id??u.id),ye={};P.trim()!==""&&(ye.title=P.trim()),ne.trim()!==""&&(ye.description=ne.trim()),L&&L!==""&&(ye.type=L),ye.file_attachment=w.trim()?w.trim():null,await Kn.updateProtocol(H,ye),j({type:"success",message:"Protocol updated successfully"})}else{const H={title:P.trim(),description:ne.trim(),type:L||"general",file_attachment:w.trim()||null,created_by:xe||null};await Kn.createProtocol(H),j({type:"success",message:"Protocol created successfully"})}await W(),d(!1)}catch(U){console.error("Save failed:",U),j({type:"error",message:"Failed to save protocol"})}finally{$(!1)}},E=async U=>{const xe=U.target.files&&U.target.files[0];if(xe)try{I(!0);const H=await Kn.uploadAttachment(xe);H&&H.filename&&(R(H.filename),j({type:"success",message:"File uploaded"}))}catch(H){console.error("Attachment upload failed:",H),j({type:"error",message:"Failed to upload file"})}finally{I(!1)}},ce=U=>{A(U),S(!0)},K=async()=>{if(_)try{const U=Number(_.protocol_id??_.id);await Kn.deleteProtocol(U),await W(),j({type:"success",message:"Protocol deleted successfully"})}catch(U){console.error("Delete failed:",U),j({type:"error",message:"Failed to delete protocol"})}finally{S(!1),A(null)}},ze=U=>{const xe=U.toLowerCase();return xe==="fire"?"bg-red-50 text-red-600":xe==="earthquake"?"bg-orange-50 text-orange-600":xe==="medical"?"bg-green-50 text-green-600":xe==="intrusion"?"bg-purple-50 text-purple-600":"bg-gray-50 text-gray-600"},Ie=async U=>{try{const xe={filename:"SafetyProtocols",title:X(),includeTimestamp:!0};switch(U){case"pdf":await ft.exportToPDF(ge,fe,xe);break;case"csv":ft.exportToCSV(ge,fe,xe);break;case"excel":ft.exportToExcel(ge,fe,xe);break}ee(!1),j({type:"success",message:"Export successful"})}catch(xe){console.error("Export failed:",xe),j({type:"error",message:"Export failed"})}},Ne=t.filter(U=>{const xe=U.title.toLowerCase().includes(n.toLowerCase())||U.description.toLowerCase().includes(n.toLowerCase())||U.category.toLowerCase().includes(n.toLowerCase()),H=l==="all"||U.category===l;return xe&&H});return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Safety Protocols Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage emergency safety protocols"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:le,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add Protocol"]}),e.jsxs("button",{onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Protocols"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-shield-check-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Protocols"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-folder-line text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Categories"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Set(t.map(U=>U.category)).size})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-check-circle-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Protocols"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(U=>U.status==="active").length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-5",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search protocols...",value:n,onChange:U=>i(U.target.value),className:"w-full md:w-64 pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})]}),e.jsxs("select",{value:l,onChange:U=>o(U.target.value),className:"w-full md:w-auto px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"Fire Safety",children:"Fire Safety"}),e.jsx("option",{value:"Natural Disasters",children:"Natural Disasters"}),e.jsx("option",{value:"Medical",children:"Medical"}),e.jsx("option",{value:"Security",children:"Security"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-lg",children:["Showing ",e.jsx("span",{className:"font-medium text-gray-900",children:Ne.length})," of ",e.jsx("span",{className:"font-medium text-gray-900",children:t.length})," protocols"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ne.map(U=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-5 hover:shadow-lg transition-all duration-200 group",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-3",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${ze(U.type||"general")}`,children:U.category})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:U.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:U.description})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx("i",{className:"ri-time-line mr-1"}),new Date(U.updatedAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>se(U),className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-all",title:"View Protocol",children:e.jsx("i",{className:"ri-eye-line text-lg"})}),e.jsx("button",{onClick:()=>he(U),className:"p-1.5 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-md transition-all",title:"Edit Protocol",children:e.jsx("i",{className:"ri-edit-line text-lg"})}),e.jsx("button",{onClick:()=>ce(U),className:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-all",title:"Delete Protocol",children:e.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]})]},U.id))}),e.jsx(jn,{isOpen:c,onClose:()=>d(!1),title:g?u?"Edit Safety Protocol":"Add New Safety Protocol":"Safety Protocol Details",size:"xl",children:e.jsxs("div",{className:"space-y-4",children:[u&&!g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-2.5 py-1 bg-blue-50 text-blue-600 text-xs font-medium rounded-full",children:u.type?u.type==="general"?"Other":u.type.charAt(0).toUpperCase()+u.type.slice(1):"General"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",u.protocol_id??u.id]})]}),u.file_attachment&&e.jsxs("a",{href:`/uploads/${u.file_attachment}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200 transition-all",children:[e.jsx("i",{className:"ri-file-text-line mr-1.5"}),"View Attachment"]})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:u.title}),e.jsx("p",{className:"text-gray-600 mb-4 whitespace-pre-line",children:u.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Created Information"}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("i",{className:"ri-user-line text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Created by:"}),e.jsx("span",{className:`font-medium ${u.creator_name!=="System"?"text-gray-900":"text-gray-500 italic"}`,children:u.creator_name||"System"})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm mt-2",children:[e.jsx("i",{className:"ri-time-line text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:u.created_at?new Date(u.created_at).toLocaleString():new Date(u.createdAt).toLocaleString()})]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Last Update"}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("i",{className:"ri-history-line text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Updated:"}),e.jsx("span",{className:"font-medium text-gray-900",children:u.updated_at?new Date(u.updated_at).toLocaleString():new Date(u.updatedAt).toLocaleString()})]})})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:P,onChange:U=>M(U.target.value),className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Enter protocol title"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:L,onChange:U=>Q(U.target.value),className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"fire",children:"Fire"}),e.jsx("option",{value:"earthquake",children:"Earthquake"}),e.jsx("option",{value:"medical",children:"Medical"}),e.jsx("option",{value:"intrusion",children:"Intrusion"}),e.jsx("option",{value:"general",children:"Other"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:ne,onChange:U=>V(U.target.value),rows:4,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Enter detailed protocol description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Attachment"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-200 border-dashed rounded-lg hover:border-blue-400 transition-all cursor-pointer",children:e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsx("input",{type:"file",accept:"*/*",onChange:E,className:"sr-only",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md font-medium text-blue-600 hover:text-blue-700 focus-within:outline-none",children:e.jsx("span",{children:"Upload a file"})}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, Images up to 10MB"}),Z&&e.jsxs("div",{className:"flex items-center justify-center text-sm text-blue-600",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Uploading..."]}),w&&e.jsxs("div",{className:"flex items-center justify-center text-sm text-green-600",children:[e.jsx("i",{className:"ri-check-line mr-1"}),w]})]})})]})]}),e.jsxs("div",{className:"pt-4 mt-2 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:g?"Cancel":"Close"}),g&&e.jsx("button",{onClick:ve,disabled:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60",children:y?"Saving...":u?"Update Protocol":"Create Protocol"})]})]})}),e.jsx(pa,{isOpen:N,onClose:()=>{S(!1),A(null)},onConfirm:K,title:"Delete Protocol",message:_?`Are you sure you want to delete "${_.title}"? This action cannot be undone.`:"Are you sure you want to delete this protocol?",confirmText:"Delete",cancelText:"Cancel",confirmVariant:"secondary",icon:"ri-delete-bin-line",iconColor:"text-red-600"}),e.jsx(tr,{open:re,onClose:()=>ee(!1),onExportPDF:()=>Ie("pdf"),onExportCSV:()=>Ie("csv"),onExportExcel:()=>Ie("excel"),data:ge,columns:fe,title:X()})]})},Eo=[{key:"id",label:"ID"},{key:"user_type",label:"User Type",format:t=>t.charAt(0).toUpperCase()+t.slice(1)},{key:"user_name",label:"User Name"},{key:"action",label:"Action",format:t=>t.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase())},{key:"details",label:"Details"},{key:"ip_address",label:"IP Address"},{key:"created_at",label:"Date & Time",format:t=>new Date(t).toLocaleString()}],l8=()=>{const{showToast:t}=Gs(),[s,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(!0),[o,c]=b.useState(""),[d,u]=b.useState("all"),[f,g]=b.useState(1),[x,y]=b.useState(1),[$,j]=b.useState(0),[N,S]=b.useState(null),[_,A]=b.useState(null),[P,M]=b.useState(!1);b.useEffect(()=>{ne(),V()},[f,o,d]),b.useEffect(()=>{g(1)},[o,d]);const ne=async()=>{try{n(!0),A(null);const I={page:f,limit:20,search:o.trim()};if(d!=="all"){const ee=new Date;if(d==="today"){const ge=ee.toISOString().split("T")[0];I.date_from=ge,I.date_to=ge}else if(d==="week"){const ge=new Date(ee.getTime()-6048e5);I.date_from=ge.toISOString().split("T")[0],I.date_to=ee.toISOString().split("T")[0]}else if(d==="month"){const ge=new Date(ee.getTime()-2592e6);I.date_from=ge.toISOString().split("T")[0],I.date_to=ee.toISOString().split("T")[0]}}console.log("🔍 Fetching activity logs with params:",I);const re=await ld.getLogs(I);if(re.success)r(re.logs),y(re.pagination.totalPages),j(re.pagination.totalLogs),console.log("✅ Successfully fetched",re.logs.length,"logs");else{const ee=re.message||"Failed to fetch activity logs";console.error("❌ API returned error:",ee),A(ee)}}catch(I){console.error("❌ Error fetching activity logs:",I);let re="Failed to fetch activity logs. Please try again.";I.message&&(I.message.includes("Failed to fetch")?re="Unable to connect to the server. Please check if the backend is running.":I.message.includes("Table not found")?re="Activity logs table not found. Please contact an administrator to set up the system.":I.message.includes("Database")?re="Database connection error. Please try again later.":re=I.message),A(re)}finally{n(!1)}},V=async()=>{try{l(!0);const I=await ld.getLogStats();I.success&&S(I.stats)}catch(I){console.error("Error fetching activity stats:",I)}finally{l(!1)}},L=async()=>{try{const I={limit:1e6,search:o.trim()};if(d!=="all"){const ee=new Date;if(d==="today"){const ge=ee.toISOString().split("T")[0];I.date_from=ge,I.date_to=ge}else if(d==="week"){const ge=new Date(ee.getTime()-6048e5);I.date_from=ge.toISOString().split("T")[0],I.date_to=ee.toISOString().split("T")[0]}else if(d==="month"){const ge=new Date(ee.getTime()-2592e6);I.date_from=ge.toISOString().split("T")[0],I.date_to=ee.toISOString().split("T")[0]}}console.log("🔍 Fetching all activity logs with params:",I);const re=await ld.getLogs(I);if(re.success)return console.log("✅ Successfully fetched",re.logs.length,"logs for export"),re.logs;{const ee=re.message||"Failed to fetch all activity logs";throw console.error("❌ API returned error:",ee),new Error(ee)}}catch(I){throw console.error("❌ Error fetching all activity logs:",I),I}},Q=()=>{g(1),ne(),V()},w=I=>{g(I)},R=I=>{switch(I){case"admin":return"bg-red-100 text-red-800";case"staff":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Z=I=>I.includes("create")?"ri-add-circle-line":I.includes("update")?"ri-edit-line":I.includes("delete")?"ri-delete-bin-line":I.includes("login")?"ri-login-circle-line":I.includes("logout")?"ri-logout-circle-line":I.includes("alert")?"ri-notification-3-line":I.includes("incident")?"ri-error-warning-line":"ri-information-line";return a&&s.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Activity Logs"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor system activities and user actions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:Q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:()=>M(!0),disabled:$===0,className:`px-4 py-2 rounded-lg transition-colors flex items-center ${$===0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:$===0?"No data to export":"Export all activity logs with current filters",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export All (",$,")"]})]})]}),_&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("i",{className:"ri-error-warning-line text-red-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:_})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-history-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Activities"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:$})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-admin-line text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Admin Actions"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:N?.userTypeDistribution.find(I=>I.user_type==="admin")?.count||0})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-team-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Staff Actions"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:N?.userTypeDistribution.find(I=>I.user_type==="staff")?.count||0})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"User Actions"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:N?.userTypeDistribution.find(I=>I.user_type==="user")?.count||0})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search activities...",value:o,onChange:I=>c(I.target.value),className:"pl-10 pr-4 py-2 w-96 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-time-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsxs("select",{value:d,onChange:I=>u(I.target.value),className:"pl-10 pr-4 py-2 w-48 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last Week"}),e.jsx("option",{value:"month",children:"Last Month"})]})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",s.length," of ",$," activities"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:a?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"divide-y divide-gray-200",children:s.map(I=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:`${Z(I.action)} text-gray-600`})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(I.user_type)}`,children:I.user_type.toUpperCase()}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:I.user_name}),e.jsx("span",{className:"text-sm text-gray-500",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500",children:I.action.replace(/_/g," ")})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:I.details}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),new Date(I.created_at).toLocaleString()]}),I.ip_address&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-computer-line mr-1"}),I.ip_address]})]})]})]})},I.id))})}),x>1&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",f," of ",x," (",$," total activities)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(f-1),disabled:f===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,x)},(I,re)=>{const ee=Math.max(1,Math.min(x-4,f-2))+re;return ee>x?null:e.jsx("button",{onClick:()=>w(ee),className:`px-3 py-2 text-sm font-medium rounded-lg ${ee===f?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:ee},ee)}),e.jsx("button",{onClick:()=>w(f+1),disabled:f===x,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),s.length===0&&!a&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx("i",{className:"ri-history-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No activities found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters to see more results."})]}),e.jsx(tr,{open:P,onClose:()=>M(!1),onExportPDF:async()=>{try{const I=await L();ft.exportToPDF(I,Eo,{filename:"activity_logs_export",title:"Activity Logs Report",includeTimestamp:!0}),t({type:"success",message:`All ${I.length} activity logs exported to PDF successfully`}),M(!1)}catch(I){console.error("PDF export failed:",I),t({type:"error",message:"Failed to export activity logs to PDF"})}},onExportCSV:async()=>{try{const I=await L();ft.exportToCSV(I,Eo,{filename:"activity_logs_export",title:"Activity Logs Report",includeTimestamp:!0}),t({type:"success",message:`All ${I.length} activity logs exported to CSV successfully`}),M(!1)}catch(I){console.error("CSV export failed:",I),t({type:"error",message:"Failed to export activity logs to CSV"})}},onExportExcel:async()=>{try{const I=await L();ft.exportToExcel(I,Eo,{filename:"activity_logs_export",title:"Activity Logs Report",includeTimestamp:!0}),t({type:"success",message:`All ${I.length} activity logs exported to Excel successfully`}),M(!1)}catch(I){console.error("Excel export failed:",I),t({type:"error",message:"Failed to export activity logs to Excel"})}},data:s,columns:Eo.map(I=>({key:I.key,label:I.label})),title:`Activity Logs Report (${$})`})]})};function o8(){const t=gs(),[s,r]=b.useState(null),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[d,u]=b.useState(!1),[f,g]=b.useState({}),[x,y]=b.useState(!1),[$,j]=b.useState(""),[N,S]=b.useState(!0),[_,A]=b.useState(!1),[P,M]=b.useState(""),[ne,V]=b.useState(!1),[L,Q]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[w,R]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Z,I]=b.useState(!1);b.useEffect(()=>{const B=Lt();if(!B.isAuthenticated||B.userType!=="admin"){t("/admin/login");return}r(B.userData||{}),n(!0),(async()=>{try{S(!0);const le=await ti.getProfile();le.success&&le.admin&&(r(he=>he?{...he,...le.admin}:le.admin),Xn(le.admin))}catch(le){console.error("Failed to fetch profile data:",le),j("Failed to load profile data")}finally{S(!1)}})();const J=()=>{const le=Lt();if(!le.isAuthenticated||le.userType!=="admin"){t("/admin/login");return}n(le.isAuthenticated),r(le.userData||{})},W=le=>{_&&(le.preventDefault(),le.returnValue="")};return window.addEventListener("storage",J),window.addEventListener("authStateChanged",J),window.addEventListener("beforeunload",W),()=>{window.removeEventListener("storage",J),window.removeEventListener("authStateChanged",J),window.removeEventListener("beforeunload",W)}},[t,_]),b.useEffect(()=>{if(d&&s){const B=f.name!==s.name||f.email!==s.email;A(B)}else A(!1)},[f,s,d]),b.useEffect(()=>{if(P){const B=setTimeout(()=>{M("")},5e3);return()=>clearTimeout(B)}},[P]);const re=()=>{_&&!window.confirm("You have unsaved changes. Are you sure you want to logout?")||l(!0)},ee=async()=>{c(!0);try{await new Promise(B=>setTimeout(B,1e3)),Da(),t("/admin/login")}catch(B){console.error("Logout error:",B)}finally{c(!1),l(!1)}},ge=()=>{l(!1)},G=()=>{s&&(g({...s}),u(!0),j(""),M(""))},fe=async()=>{if(!f.name||!f.email){j("Name and email are required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)){j("Please enter a valid email address");return}y(!0),j("");try{const F=await ti.updateProfile({name:f.name,email:f.email});console.log("Update profile response:",F),F.success&&F.admin?(r(F.admin),Xn(F.admin),u(!1),g({}),A(!1),M("Profile updated successfully!")):j(F.message||"Failed to update profile")}catch(F){console.error("Failed to update profile:",F),j(F.message||"Failed to update profile")}finally{y(!1)}},ke=()=>{_&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||(u(!1),g({}),j(""),A(!1))},X=(B,F)=>{Q(J=>({...J,[B]:F})),w[B]&&R(J=>({...J,[B]:""}))},k=()=>{const B={currentPassword:"",newPassword:"",confirmPassword:""};return L.currentPassword||(B.currentPassword="Current password is required"),L.newPassword?L.newPassword.length<8?B.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(L.newPassword)||(B.newPassword="Password must contain at least one uppercase letter, one lowercase letter, and one number"):B.newPassword="New password is required",L.confirmPassword?L.newPassword!==L.confirmPassword&&(B.confirmPassword="Passwords do not match"):B.confirmPassword="Please confirm your new password",L.currentPassword&&L.newPassword&&L.currentPassword===L.newPassword&&(B.newPassword="New password must be different from current password"),R(B),!Object.values(B).some(F=>F!=="")},q=async B=>{if(B.preventDefault(),!!k()){I(!0);try{const F=await ti.changePassword(L.currentPassword,L.newPassword);F.success?(Q({currentPassword:"",newPassword:"",confirmPassword:""}),V(!1),M("Password changed successfully!"),setTimeout(()=>M(""),5e3)):R(J=>({...J,currentPassword:F.message||"Failed to change password"}))}catch(F){console.error("Password change failed:",F),R(J=>({...J,currentPassword:F instanceof Error?F.message:"Failed to change password. Please try again."}))}finally{I(!1)}}},T=()=>{Z||(V(!1),Q({currentPassword:"",newPassword:"",confirmPassword:""}),R({currentPassword:"",newPassword:"",confirmPassword:""}))};return!a||N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-600 rounded-2xl flex items-center justify-center",children:e.jsx("i",{className:"ri-loader-4-line text-2xl text-white animate-spin"})}),e.jsx("p",{className:"text-gray-600",children:N?"Loading profile...":"Checking authentication..."})]})}):e.jsxs("div",{className:"max-w-5xl mx-auto",children:[(P||$)&&e.jsx("div",{className:`mb-6 p-4 rounded-lg border-l-4 ${P?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} transition-all duration-300 ease-in-out`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`${P?"ri-check-circle-line":"ri-error-warning-line"} text-lg mr-2`}),e.jsx("span",{children:P||$}),e.jsx("button",{onClick:()=>{M(""),j("")},className:"ml-auto text-lg hover:opacity-70",children:e.jsx("i",{className:"ri-close-line"})})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 sticky top-8",children:e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(ri,{name:s?.name,email:s?.email,size:"xl",className:"mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:s?.name||"Admin Profile"}),e.jsx("p",{className:"text-gray-600 mb-2",children:s?.email||"No email provided"}),e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mb-4",children:[e.jsx("i",{className:"ri-shield-check-line mr-1"}),"Administrator"]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex flex-col gap-2",children:d?e.jsxs(e.Fragment,{children:[_&&e.jsxs("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded-lg mb-2 flex items-center gap-1",children:[e.jsx("i",{className:"ri-information-line"}),"You have unsaved changes"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:fe,disabled:x||!_,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1",children:x?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line"}),"Save"]})}),e.jsxs("button",{onClick:ke,disabled:x,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[e.jsx("i",{className:"ri-close-line"}),"Cancel"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:G,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-edit-line"}),"Edit Profile"]}),e.jsxs("button",{onClick:re,className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-logout-box-line"}),"Logout"]})]})})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:d?"Edit Profile Information":"Profile Information"}),e.jsx("p",{className:"text-blue-100 mt-1",children:d?"Update your admin profile details":"View your admin profile details"})]}),!d&&e.jsxs("button",{onClick:G,className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("i",{className:"ri-edit-line"}),"Edit"]})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",d&&e.jsx("span",{className:"text-red-500",children:"*"})]}),d?e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:f.name||"",onChange:B=>g({...f,name:B.target.value}),placeholder:"Enter your full name"}):e.jsx("p",{className:"text-gray-900",children:s?.name||"Not provided"})]}),!d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-gray-900",children:s?.role||"Administrator"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-gray-900",children:s?.status||"Active"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-mail-line text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Information"})]}),e.jsx("div",{className:"grid md:grid-cols-1 gap-6",children:e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",d&&e.jsx("span",{className:"text-red-500",children:"*"})]}),d?e.jsx("input",{type:"email",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:f.email||"",onChange:B=>g({...f,email:B.target.value}),placeholder:"Enter your email address"}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-gray-900",children:s?.email||"Not provided"}),s?.email&&e.jsx("i",{className:"ri-verified-badge-line text-green-500",title:"Verified email"})]})]})})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-lock-line text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your password to keep your account secure"})]}),e.jsxs("button",{onClick:()=>V(!0),className:"bg-red-50 border border-red-200 text-red-600 hover:bg-red-100 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("i",{className:"ri-key-line"}),"Change Password"]})]})})]})]})})]})})]}),e.jsx(jl,{isOpen:i,onClose:ge,onConfirm:ee,isLoading:o}),e.jsx(jn,{isOpen:ne,onClose:T,title:"Change Password",size:"md",children:e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsx("div",{children:e.jsx(qt,{label:"Current Password",type:"password",name:"currentPassword",id:"currentPassword",value:L.currentPassword,onChange:B=>X("currentPassword",B.target.value),error:w.currentPassword,placeholder:"Enter your current password",required:!0,icon:e.jsx("i",{className:"ri-lock-line"})})}),e.jsxs("div",{children:[e.jsx(qt,{label:"New Password",type:"password",name:"newPassword",id:"newPassword",value:L.newPassword,onChange:B=>X("newPassword",B.target.value),error:w.newPassword,placeholder:"Enter your new password",required:!0,icon:e.jsx("i",{className:"ri-key-line"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long and contain uppercase, lowercase, and number."})]}),e.jsx("div",{children:e.jsx(qt,{label:"Confirm New Password",type:"password",name:"confirmPassword",id:"confirmPassword",value:L.confirmPassword,onChange:B=>X("confirmPassword",B.target.value),error:w.confirmPassword,placeholder:"Confirm your new password",required:!0,icon:e.jsx("i",{className:"ri-key-line"})})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(vt,{type:"button",variant:"outline",size:"md",onClick:T,disabled:Z,children:"Cancel"}),e.jsx(vt,{type:"submit",variant:"primary",size:"md",disabled:Z,children:Z?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Changing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-key-line mr-2"}),"Change Password"]})})]})]})})]})}const c8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(null),[l,o]=b.useState(""),[c,d]=b.useState(!1),[u,f]=b.useState(!1),[g,x]=b.useState(null),[y,$]=b.useState(!1),[j,N]=b.useState([]),[S,_]=b.useState(1),[A,P]=b.useState(1),[M,ne]=b.useState(0),{showToast:V}=Gs(),[L,Q]=b.useState(!1),[w,R]=b.useState(null),[Z,I]=b.useState(!1),[re,ee]=b.useState({member_no:"",name:"",description:""}),[ge,G]=b.useState(null),[fe,ke]=b.useState(""),X=[{key:"member_no",label:"Member No"},{key:"name",label:"Team Name"},{key:"description",label:"Description"},{key:"member_count",label:"Members",format:Ne=>`${Ne||0}/5 members`},{key:"created_at",label:"Created Date",format:Ne=>ft.formatDate(Ne)},{key:"updated_at",label:"Updated Date",format:Ne=>ft.formatDate(Ne)}],k=()=>{try{ft.exportToCSV(Ie,X,{filename:"teams_export",title:"Teams Management Report"}),V({type:"success",message:"Teams exported to CSV successfully"}),I(!1)}catch(Ne){console.error("Export to CSV failed:",Ne),V({type:"error",message:"Failed to export to CSV"})}},q=()=>{try{ft.exportToExcel(Ie,X,{filename:"teams_export",title:"Teams Management Report"}),V({type:"success",message:"Teams exported to Excel successfully"}),I(!1)}catch(Ne){console.error("Export to Excel failed:",Ne),V({type:"error",message:"Failed to export to Excel"})}},T=async()=>{try{await ft.exportToPDF(Ie,X,{filename:"teams_export",title:"Teams Management Report"}),V({type:"success",message:"Teams exported to PDF successfully"}),I(!1)}catch(Ne){console.error("Export to PDF failed:",Ne),V({type:"error",message:"Failed to export to PDF"})}};b.useEffect(()=>{B()},[S]);const B=async()=>{try{a(!0),i(null);const Ne=new URLSearchParams({page:S.toString()});console.log("Fetching teams with params:",Ne.toString());const xe=await(await fetch(`/api/teams?${Ne}`)).json();console.log("Teams API response:",xe),xe.success?(s(xe.teams||[]),P(xe.pagination?.pages||1),ne(xe.pagination?.total||xe.teams?.length||0),console.log("Teams data set:",xe.teams?.length||0,"teams")):(i(xe.message||"Failed to fetch teams"),s([]))}catch(Ne){i("Failed to connect to server"),console.error("Error fetching teams:",Ne)}finally{a(!1)}},F=()=>{x(null),ee({member_no:"",name:"",description:""}),$(!0),d(!0)},J=Ne=>{x(Ne),ee({member_no:Ne.member_no||"",name:Ne.name,description:Ne.description||""}),$(!0),d(!0)},W=async Ne=>{Ne.preventDefault();try{const U=g?`/api/teams/${g.id}`:"/api/teams",ye=await(await fetch(U,{method:g?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)})).json();ye.success?(d(!1),B(),V({type:"success",message:g?"Team updated successfully":"Team added successfully"})):(console.error("Failed to save team:",ye.message),V({type:"error",message:"Failed to save team"}))}catch(U){console.error("Error saving team:",U),V({type:"error",message:"Failed to save team"})}},le=Ne=>{const{name:U,value:xe}=Ne.target;ee(H=>({...H,[U]:xe}))},he=async Ne=>{x(Ne),f(!0);try{const xe=await(await fetch("/api/staff")).json();xe.success&&N(xe.staff||[])}catch(U){console.error("Error fetching staff:",U)}},se=async(Ne,U)=>{if(g){if(U&&j.filter(H=>H.team_id===g.id).length>=5){V({type:"error",message:"Team is at maximum capacity (5 members). Remove a member first."});return}try{const H=await(await fetch(`/api/staff/${Ne}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({team_id:U?g.id:null})})).json();if(H.success){B();const pe=await(await fetch("/api/staff")).json();pe.success&&N(pe.staff||[]),V({type:"success",message:U?"Member added to team":"Member removed from team"})}else console.error("Failed to assign staff to team:",H.message),V({type:"error",message:`Failed to update member: ${H.message}`})}catch(xe){console.error("Error assigning staff to team:",xe),V({type:"error",message:"Error assigning staff to team"})}}},ve=Ne=>{R(Ne),Q(!0)},E=async()=>{if(w!=null)try{const U=await(await fetch(`/api/teams/${w}`,{method:"DELETE"})).json();U.success?(B(),V({type:"success",message:"Team deleted successfully"})):(console.error("Failed to delete team:",U.message),V({type:"error",message:"Failed to delete team"}))}catch(Ne){console.error("Error deleting team:",Ne),V({type:"error",message:"Error deleting team"})}finally{Q(!1),R(null)}},ce=Ne=>{G(Ne.id),ke((Ne.member_count||0).toString())},K=async Ne=>{try{const U=parseInt(fe);if(isNaN(U)||U<3||U>5){V({type:"warning",message:"Team size must be between 3 and 5 members"});return}(await(await fetch(`/api/teams/${Ne}/member-count`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({member_count:U})})).json()).success?(s(ye=>ye.map(pe=>pe.id===Ne?{...pe,member_count:U}:pe)),G(null),ke(""),V({type:"success",message:"Member count updated"})):V({type:"error",message:"Failed to update member count"})}catch(U){console.error("Error updating member count:",U),V({type:"error",message:"Error updating member count"})}},ze=()=>{G(null),ke("")},Ie=t.filter(Ne=>Ne.name.toLowerCase().includes(l.toLowerCase())||Ne.description.toLowerCase().includes(l.toLowerCase())||Ne.member_no&&Ne.member_no.toLowerCase().includes(l.toLowerCase()));return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teams Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage emergency response teams and personnel groups"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-team-line mr-2"}),"Add Team"]}),e.jsxs("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Team"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-team-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Teams"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.reduce((Ne,U)=>Ne+(U.member_count||0),0)}),e.jsx("p",{className:"text-xs text-gray-500",children:t.reduce((Ne,U)=>Ne+(U.member_count||0),0)===1?"member":"members"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-team-line text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Optimal Teams"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.filter(Ne=>{const U=Ne.member_count||0;return U>=3&&U<=5}).length}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.filter(Ne=>(Ne.member_count||0)<3).length," understaffed, ",t.filter(Ne=>(Ne.member_count||0)>=5).length," full"]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search teams...",value:l,onChange:Ne=>o(Ne.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Ie.length," of ",t.length," teams"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Members"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ie.map(Ne=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ne.member_no||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-team-line text-blue-600"})}),e.jsx("div",{children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ne.name})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:Ne.description||"No description"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:ge===Ne.id?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"3",max:"5",value:fe,onChange:U=>ke(U.target.value),onBlur:()=>K(Ne.id),onKeyDown:U=>{U.key==="Enter"?K(Ne.id):U.key==="Escape"&&ze()},className:"w-16 px-2 py-1 border border-gray-300 rounded-md text-center focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0}),e.jsx("span",{className:"text-gray-500",children:parseInt(fe)===1?"member":"members"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>K(Ne.id),className:"text-green-600 hover:text-green-800 text-xs",title:"Save",children:e.jsx("i",{className:"ri-check-line"})}),e.jsx("button",{onClick:ze,className:"text-red-600 hover:text-red-800 text-xs",title:"Cancel",children:e.jsx("i",{className:"ri-close-line"})})]})]}):e.jsxs("div",{onClick:()=>ce(Ne),className:`cursor-pointer hover:bg-blue-50 px-2 py-1 rounded-md transition-colors ${(Ne.member_count||0)>=5?"bg-red-50 text-red-700":(Ne.member_count||0)>=3?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"}`,title:"Click to edit member count (3-5 members required)",children:[e.jsxs("span",{className:"font-medium",children:[Ne.member_count||0,"/5"]}),e.jsx("span",{className:"ml-1 text-xs",children:(Ne.member_count||0)===1?"member":"members"}),(Ne.member_count||0)>=5&&e.jsx("i",{className:"ri-error-warning-line ml-1 text-xs",title:"Team at maximum capacity"}),(Ne.member_count||0)<3&&e.jsx("i",{className:"ri-alert-line ml-1 text-xs",title:"Team below minimum size"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(Ne.created_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>J(Ne),className:"text-blue-600 hover:text-blue-900",title:"Edit Team",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>he(Ne),className:"text-green-600 hover:text-green-900",title:"Manage Members",children:e.jsx("i",{className:"ri-user-settings-line"})}),e.jsx("button",{onClick:()=>ve(Ne.id),className:"text-red-600 hover:text-red-900",title:"Delete Team",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},Ne.id))})]})})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y?g?"Edit Team":"Add New Team":"Team Details"})}),e.jsxs("form",{onSubmit:W,children:[e.jsx("div",{className:"p-6 space-y-4",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Member No"}),e.jsx("input",{type:"text",name:"member_no",value:re.member_no,onChange:le,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter member number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),e.jsx("input",{type:"text",name:"name",value:re.name,onChange:le,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter team name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:re.description,onChange:le,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter team description"})]})]}):g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Member No"}),e.jsx("p",{className:"text-sm text-gray-900",children:g.member_no||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:g.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900",children:g.description||"No description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(g.created_at).toLocaleDateString()})]})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),y&&e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:g?"Update Team":"Add Team"})]})]})]})}),u&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Manage Team Members - ",g.name]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Assign or remove staff members from this team"}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${(g.member_count||0)>=5?"bg-red-100 text-red-700":(g.member_count||0)>=3?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[g.member_count||0,"/5 members"]}),(g.member_count||0)>=5&&e.jsxs("span",{className:"text-xs text-red-600 flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),"Team at maximum capacity"]}),(g.member_count||0)<3&&e.jsxs("span",{className:"text-xs text-yellow-600 flex items-center",children:[e.jsx("i",{className:"ri-alert-line mr-1"}),"Team below minimum size (3 members required)"]})]})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Current Team Members"}),e.jsxs("div",{className:"space-y-2",children:[j.filter(Ne=>Ne.team_id===g.id).map(Ne=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Ne.name}),e.jsx("p",{className:"text-sm text-gray-600",children:Ne.position})]}),e.jsx("button",{onClick:()=>se(Ne.id,!1),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},Ne.id)),j.filter(Ne=>Ne.team_id===g.id).length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"No members assigned to this team"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Available Staff"}),e.jsxs("div",{className:"space-y-2",children:[j.filter(Ne=>!Ne.team_id).map(Ne=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Ne.name}),e.jsx("p",{className:"text-sm text-gray-600",children:Ne.position}),e.jsx("p",{className:"text-xs text-green-600",children:"No team assigned"})]}),e.jsx("button",{onClick:()=>se(Ne.id,!0),disabled:(g.member_count||0)>=5,className:`text-sm ${(g.member_count||0)>=5?"text-gray-400 cursor-not-allowed":"text-green-600 hover:text-green-800"}`,title:(g.member_count||0)>=5?"Team is at maximum capacity (5 members)":"Add to team",children:"Add"})]},Ne.id)),j.filter(Ne=>!Ne.team_id).length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"No available staff members"})]})]})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})}),e.jsx(pa,{isOpen:L,onClose:()=>{Q(!1),R(null)},onConfirm:E,title:"Delete Team",message:"Are you sure you want to delete this team? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmVariant:"secondary",icon:"ri-delete-bin-line",iconColor:"text-red-600"}),e.jsx(tr,{open:Z,onClose:()=>I(!1),onExportPDF:T,onExportCSV:k,onExportExcel:q,data:Ie,columns:X.map(Ne=>({key:Ne.key,label:Ne.label})),title:"Export Teams Data"})]})},d8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState("all"),[u,f]=b.useState("all"),g=Gs(),x=[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"type",label:"Type"},{key:"message",label:"Message"},{key:"rating",label:"Rating",format:N=>N?`${N}/5`:"N/A"},{key:"created_at",label:"Created At",format:ft.formatDateTime}],y=t.map(N=>({name:N.user_info.name,email:N.user_info.email,type:N.user_info.type,message:N.message,rating:N.rating,created_at:N.created_at})),$=async()=>{try{a(!0),i(null);const N=await Uu.getFeedback({page:1,limit:50});N.success?s(N.feedback):i("Failed to fetch feedback")}catch(N){i(N.message||"Failed to fetch feedback")}finally{a(!1)}};b.useEffect(()=>{$()},[]);const j=t.filter(N=>{const S=c==="all"||N.user_info.type===c,_=u==="all"||u==="none"&&N.rating===null||u!=="none"&&N.rating===parseInt(u);return S&&_});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Feedback"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage user feedback"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:$,disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:()=>o(!0),disabled:r||t.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Feeback"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-filter-line mr-2"}),"Filter by Type"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>d("all"),className:`px-3 py-2 text-sm rounded-lg transition-colors ${c==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>d("user"),className:`px-3 py-2 text-sm rounded-lg transition-colors ${c==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"User"}),e.jsx("button",{onClick:()=>d("staff"),className:`px-3 py-2 text-sm rounded-lg transition-colors ${c==="staff"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Staff"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("i",{className:"ri-star-line mr-2"}),"Filter by Rating"]}),e.jsxs("select",{value:u,onChange:N=>f(N.target.value),className:"w-full py-2 px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"all",children:"All Ratings"}),e.jsx("option",{value:"5",children:"5 Stars"}),e.jsx("option",{value:"4",children:"4 Stars"}),e.jsx("option",{value:"3",children:"3 Stars"}),e.jsx("option",{value:"2",children:"2 Stars"}),e.jsx("option",{value:"1",children:"1 Star"}),e.jsx("option",{value:"none",children:"No Rating"})]})]})]}),(c!=="all"||u!=="all")&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:()=>{d("all"),f("all")},className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 text-sm",children:[e.jsx("i",{className:"ri-refresh-line"}),e.jsx("span",{children:"Clear Filters"})]})})]}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("i",{className:"ri-error-warning-line text-red-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:n})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:r?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):j.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("i",{className:"ri-chat-1-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c==="all"&&u==="all"?"No feedback available":"No feedback matches your filters"}),e.jsx("p",{className:"text-gray-600",children:c==="all"&&u==="all"?"No user feedback has been submitted yet.":"Try adjusting your filter criteria to see more results."})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:j.map(N=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-blue-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.user_info.name}),N.user_info.type==="user"&&e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:N.user_info.type.charAt(0).toUpperCase()+N.user_info.type.slice(1)}),N.user_info.type==="staff"&&e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:N.user_info.type.charAt(0).toUpperCase()+N.user_info.type.slice(1)}),N.user_info.type==="staff"&&N.user_info.department&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"•"}),e.jsx("span",{className:"text-sm text-blue-600",children:N.user_info.department.charAt(0).toUpperCase()+N.user_info.department.slice(1)})]}),N.rating!==null&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"•"}),e.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((S,_)=>e.jsx("i",{className:`ri-star-${_<N.rating?"fill":"line"} text-yellow-400 text-sm`},_)),e.jsxs("span",{className:"ml-1 text-sm text-gray-600",children:["(",N.rating,")"]})]})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:N.message}),e.jsx("div",{className:"flex items-center text-xs text-gray-500",children:e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),new Date(N.created_at).toLocaleString()]})})]})]})},N.id))})}),e.jsx(tr,{open:l,onClose:()=>o(!1),onExportCSV:()=>{ft.exportToCSV(y,x,{filename:"feedback",title:"User Feedback"}),o(!1),g.showToast({type:"success",message:"Feedback exported to CSV successfully!"})},onExportExcel:()=>{ft.exportToExcel(y,x,{filename:"feedback",title:"User Feedback"}),o(!1),g.showToast({type:"success",message:"Feedback exported to Excel successfully!"})},onExportPDF:()=>{ft.exportToPDF(y,x,{filename:"feedback",title:"User Feedback"}),o(!1),g.showToast({type:"success",message:"Feedback exported to PDF successfully!"})},data:y,columns:x.map(N=>({key:N.key,label:N.label})),title:"Export User Feedback"})]})},To=[{key:"id",label:"ID"},{key:"title",label:"Title"},{key:"description",label:"Description"},{key:"isActive",label:"Status",format:t=>t?"Active":"Inactive"},{key:"messageWhenDisabled",label:"Disabled Message"},{key:"createdAt",label:"Created At",format:t=>t?new Date(t).toLocaleString():"N/A"},{key:"updatedAt",label:"Updated At",format:t=>t?new Date(t).toLocaleString():"N/A"}],Io=[{key:"first_name",label:"Name",format:(t,s)=>`${s.first_name||""} ${s.last_name||""}`.trim()||s.user_name||"N/A"},{key:"email",label:"Email",format:(t,s)=>t||s.user_email||"N/A"},{key:"address",label:"Address",format:(t,s)=>{const r=[];return s.address&&r.push(s.address),s.city&&r.push(s.city),s.state&&r.push(s.state),s.zip_code&&r.push(s.zip_code),r.length>0?r.join(", "):"N/A"}},{key:"status",label:"Status",format:t=>t==="safe"?"Safe":"Needs Help"},{key:"additional_info",label:"Additional Info"},{key:"submitted_at",label:"Submitted At",format:t=>new Date(t).toLocaleString()}];function u8(){const{showToast:t}=Gs(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(null),[d,u]=b.useState(!1),[f,g]=b.useState(!1),[x,y]=b.useState(null),[$,j]=b.useState(!1),[N,S]=b.useState(null),[_,A]=b.useState(!1),[P,M]=b.useState([]),[ne,V]=b.useState(!1),[L,Q]=b.useState(null),[w,R]=b.useState(""),[Z,I]=b.useState("all"),[re,ee]=b.useState(null),[ge,G]=b.useState(!1),[fe,ke]=b.useState(!1),[X,k]=b.useState(1),[q,T]=b.useState(1),[B,F]=b.useState(0),[J,W]=b.useState(null),[le,he]=b.useState(!1),[se,ve]=b.useState(null);b.useEffect(()=>{E(),ce()},[]),b.useEffect(()=>{k(1)},[w,Z]);const E=async()=>{try{n(!0),W(null),console.log("Fetching welfare settings...");const oe={page:X,limit:20,search:w.trim()};Z!=="all"&&(oe.status=Z);const je=await Je(`/admin/welfare/settings?${new URLSearchParams(oe).toString()}`);if(console.log("Welfare settings response:",je),je.success){const Me=Array.isArray(je.settings)?je.settings:je.settings?[je.settings]:[];console.log("Loaded settings:",Me),console.log("Settings count:",Me.length),r(Me),F(Me.length),T(je.pagination?.totalPages||1)}else{const Me=je.message||"Failed to load welfare settings";console.error("❌ API returned error:",Me),W(Me)}}catch(oe){console.error("❌ Error fetching settings:",oe);let je="Failed to fetch welfare settings. Please try again.";oe.message&&(oe.message.includes("Failed to fetch")?je="Unable to connect to the server. Please check if the backend is running.":oe.message.includes("Table not found")?je="Welfare settings table not found. Please contact an administrator to set up the system.":oe.message.includes("Database")?je="Database connection error. Please try again later.":je=oe.message),W(je)}finally{n(!1)}},ce=async()=>{try{const oe=await Je("/admin/welfare/stats");oe.success&&ee(oe.stats)}catch(oe){console.error("Error fetching welfare stats:",oe)}},K=async oe=>{try{V(!0),console.log("Fetching welfare reports for setting ID:",oe);const je=oe?`/admin/welfare/reports?setting_id=${oe}`:"/admin/welfare/reports",Me=await Je(je);if(console.log("Welfare reports response:",Me),Me.success){const et=Me.reports||[];console.log("Loaded reports:",et),console.log("Sample report data:",et[0]),M(et)}else c({type:"error",text:Me.message||"Failed to load welfare reports"})}catch(je){console.error("Error fetching reports:",je),c({type:"error",text:je.message||"Failed to load welfare reports. Please check if the backend server is running."})}finally{V(!1)}},ze=async()=>{try{const oe={limit:1e6,search:w.trim()};Z!=="all"&&(oe.status=Z),console.log("🔍 Fetching all welfare settings with params:",oe);const je=await Je(`/admin/welfare/settings?${new URLSearchParams(oe).toString()}`);if(je.success){const Me=Array.isArray(je.settings)?je.settings:je.settings?[je.settings]:[];return console.log("✅ Successfully fetched",Me.length,"settings for export"),Me}else{const Me=je.message||"Failed to fetch all welfare settings";throw console.error("❌ API returned error:",Me),new Error(Me)}}catch(oe){throw console.error("❌ Error fetching all welfare settings:",oe),oe}},Ie=async()=>{try{console.log("🔍 Fetching all welfare reports");const oe=await Je("/admin/welfare/reports");if(oe.success)return console.log("✅ Successfully fetched",oe.reports?.length||0,"reports for export"),oe.reports||[];{const je=oe.message||"Failed to fetch all welfare reports";throw console.error("❌ API returned error:",je),new Error(je)}}catch(oe){throw console.error("❌ Error fetching all welfare reports:",oe),oe}},Ne=oe=>{k(oe)},U=()=>{y({isActive:!1,title:"Welfare Check System",description:"",messageWhenDisabled:"Welfare check system is currently disabled."}),g(!1),u(!0)},xe=oe=>{if(!oe.id){c({type:"error",text:"Cannot edit setting without ID. Please create a new setting instead."});return}y({...oe}),g(!0),u(!0)},H=async oe=>{if(!oe.id){c({type:"error",text:"Cannot delete setting without ID"});return}try{l(!0),console.log("Deleting welfare settings with ID:",oe.id);const je=await Je("/admin/welfare/settings",{method:"DELETE",body:JSON.stringify({id:oe.id})});console.log("Delete settings response:",je),je.success?(t({type:"success",message:"Welfare settings deleted successfully"}),await E(),await ce(),j(!1),S(null)):t({type:"error",message:je.message||"Failed to delete settings"})}catch(je){console.error("Error deleting settings:",je),t({type:"error",message:je.message||"Failed to delete settings. Please check if the backend server is running."})}finally{l(!1)}},ye=async oe=>{if(!oe.id){c({type:"error",text:"Cannot toggle setting without ID"});return}if(!oe.isActive&&s.filter(Me=>Me.isActive&&Me.id!==oe.id).length>0){ve(oe),he(!0);return}await pe(oe)},pe=async oe=>{try{l(!0);const je={...oe,isActive:!oe.isActive};console.log("Toggling active status for setting:",oe.id),console.log("Current setting:",oe),console.log("Updated setting:",je);const Me=await Je("/admin/welfare/settings",{method:"PUT",body:JSON.stringify(je)});console.log("Toggle response:",Me),Me.success?(t({type:"success",message:`Setting ${oe.isActive?"deactivated":"activated"} successfully`}),await E(),await ce()):t({type:"error",message:Me.message||"Failed to toggle setting status"})}catch(je){console.error("Error toggling setting:",je),t({type:"error",message:je.message||"Failed to toggle setting status. Please check if the backend server is running."})}finally{l(!1)}},Le=async()=>{se&&(await pe(se),he(!1),ve(null))},Re=async()=>{if(x){if(f&&!x.id){c({type:"error",text:"Cannot update setting without ID. Please create a new setting instead."});return}try{l(!0),console.log(`${f?"Updating":"Creating"} welfare settings...`,x),console.log("Editing settings ID:",x.id),console.log("Is edit mode:",f);let oe;f?oe={id:x.id,isActive:x.isActive,title:x.title,description:x.description,messageWhenDisabled:x.messageWhenDisabled}:oe={isActive:x.isActive,title:x.title,description:x.description,messageWhenDisabled:x.messageWhenDisabled},console.log("Request body:",oe);const je=await Je("/admin/welfare/settings",{method:f?"PUT":"POST",body:JSON.stringify(oe)});console.log("Save settings response:",je),je.success?(t({type:"success",message:`Welfare settings ${f?"updated":"created"} successfully`}),await E(),await ce(),u(!1),y(null)):t({type:"error",message:je.message||`Failed to ${f?"update":"create"} settings`})}catch(oe){console.error("Error saving settings:",oe),t({type:"error",message:oe.message||`Failed to ${f?"update":"create"} settings. Please check if the backend server is running.`})}finally{l(!1)}}},We=oe=>{const{name:je,value:Me,type:et}=oe.target;x?y(Ze=>Ze?{...Ze,[je]:et==="checkbox"?oe.target.checked:Me}:null):r(Ze=>Array.isArray(Ze)?Ze.map(mt=>({...mt,[je]:et==="checkbox"?oe.target.checked:Me})):Ze)},Ye=oe=>new Date(oe).toLocaleString(),Ce=oe=>oe?"bg-green-100 text-green-800":"bg-red-100 text-red-800",Fe=oe=>oe?"ri-check-circle-line":"ri-close-circle-line",Xe=oe=>{switch(oe){case"safe":return"bg-green-100 text-green-800";case"needs_help":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ae=oe=>{switch(oe){case"safe":return"ri-check-circle-line";case"needs_help":return"ri-error-warning-line";default:return"ri-question-line"}},Oe=s.filter(oe=>{const je=w===""||oe.title.toLowerCase().includes(w.toLowerCase())||oe.description.toLowerCase().includes(w.toLowerCase()),Me=Z==="all"||Z==="active"&&oe.isActive||Z==="disabled"&&!oe.isActive;return je&&Me});return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welfare Check Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage welfare check system settings"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:U,disabled:i,className:`px-4 py-2 rounded-lg transition-colors flex items-center ${i?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,title:"Add new welfare settings",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add Welfare"]})}),e.jsxs("button",{onClick:()=>G(!0),disabled:B===0,className:`px-4 py-2 rounded-lg transition-colors flex items-center ${B===0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:B===0?"No data to export":"Export all welfare settings with current filters",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export All (",B,")"]})]})]}),J&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("i",{className:"ri-error-warning-line text-red-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:J})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-settings-3-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Settings"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:B})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-check-circle-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Settings"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:re?.activeSettings||s.filter(oe=>oe.isActive).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-file-list-3-line text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Reports"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:re?.totalReports||0})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-user-line text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unique Users"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:re?.uniqueUsers||0})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search settings...",value:w,onChange:oe=>R(oe.target.value),className:"pl-10 pr-4 py-2 w-96 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-filter-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsxs("select",{value:Z,onChange:oe=>I(oe.target.value),className:"pl-10 pr-4 py-2 w-48 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",Oe.length," of ",B," settings"]})]}),o&&e.jsx("div",{className:`p-4 rounded-lg ${o.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`mr-2 ${o.type==="success"?"ri-check-circle-line":"ri-error-warning-line"}`}),o.text]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:e.jsx("div",{className:"divide-y divide-gray-200",children:Oe.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-settings-line text-4xl text-gray-300"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"No welfare settings found"}),e.jsxs("button",{onClick:U,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add First Setting"]})]}):Oe.map(oe=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:oe.title}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ce(oe.isActive)}`,children:[e.jsx("i",{className:`${Fe(oe.isActive)} mr-1`}),oe.isActive?"Active":"Disabled"]}),oe.isActive&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("i",{className:"ri-star-fill mr-1"}),"Currently Active"]})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:oe.description||"No description provided"}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[e.jsxs("span",{children:[e.jsx("i",{className:"ri-calendar-line mr-1"}),"Created: ",oe.createdAt?Ye(oe.createdAt):"Unknown"]}),oe.updatedAt&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),"Updated: ",Ye(oe.updatedAt)]}),!oe.isActive&&e.jsxs("span",{className:"text-red-600",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),"Message: ",oe.messageWhenDisabled]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[oe.id&&e.jsxs("button",{onClick:()=>ye(oe),disabled:i,className:`px-3 py-1 text-sm rounded-lg transition-colors ${i?"bg-gray-100 text-gray-400 cursor-not-allowed":oe.isActive?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,title:oe.isActive?"Deactivate this setting":"Activate this setting",children:[e.jsx("i",{className:`mr-1 ${oe.isActive?"ri-pause-line":"ri-play-line"}`}),oe.isActive?"Deactivate":"Activate"]}),e.jsxs("button",{onClick:()=>{Q(oe),K(oe.id),A(!0)},className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-lg hover:bg-blue-200 transition-colors",children:[e.jsx("i",{className:"ri-eye-line mr-1"}),"View Reports"]}),e.jsxs("button",{onClick:()=>xe(oe),disabled:!oe.id,className:`px-3 py-1 text-sm rounded-lg transition-colors ${oe.id?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:oe.id?"Edit setting":"Cannot edit setting without ID",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>{S(oe),j(!0)},className:"px-3 py-1 bg-red-100 text-red-700 text-sm rounded-lg hover:bg-red-200 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line mr-1"})})]})]})},oe.id||"default"))})}),q>1&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",X," of ",q," (",B," total settings)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Ne(X-1),disabled:X===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,q)},(oe,je)=>{const Me=Math.max(1,Math.min(q-4,X-2))+je;return Me>q?null:e.jsx("button",{onClick:()=>Ne(Me),className:`px-3 py-2 text-sm font-medium rounded-lg ${Me===X?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:Me},Me)}),e.jsx("button",{onClick:()=>Ne(X+1),disabled:X===q,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),Oe.length===0&&!a&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx("i",{className:"ri-settings-3-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No settings found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters to see more results."})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Welfare Check Reports",L&&e.jsxs("span",{className:"text-sm font-normal text-gray-600 ml-2",children:["- ",L.title]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>ke(!0),disabled:P.length===0,className:`px-3 py-2 rounded-lg transition-colors flex items-center text-sm ${P.length===0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:P.length===0?"No data to export":"Export reports",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export (",P.length,")"]}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})]})}),e.jsx("div",{className:"p-6",children:ne?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):P.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-file-list-line text-4xl text-gray-300"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"No welfare reports found"})]}):e.jsx("div",{className:"space-y-4",children:P.map((oe,je)=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:[oe.first_name," ",oe.last_name]}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Xe(oe.status)}`,children:[e.jsx("i",{className:`mr-1 ${ae(oe.status)}`}),oe.status==="safe"?"Safe":"Needs Help"]})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:oe.email}),(oe.address||oe.city||oe.state||oe.zip_code)&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Address:"}),e.jsx("p",{className:"text-sm text-gray-600",children:[oe.address,oe.city,oe.state,oe.zip_code].filter(Boolean).join(", ")||"N/A"})]}),oe.additional_info&&e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:oe.additional_info}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("i",{className:"ri-time-line mr-1"}),"Submitted: ",Ye(oe.submitted_at)]})]})})},oe.report_id||je))})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"}),e.jsxs("button",{onClick:()=>K(L?.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Refresh"]})]})]})}),d&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f?"Edit Welfare Settings":"Add Welfare Settings"}),e.jsx("button",{onClick:()=>{u(!1),y(null),g(!1)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"System Title"}),e.jsx("input",{type:"text",name:"title",value:x.title,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter system title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:x.description,onChange:We,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter system description"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:x.isActive,onChange:We,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-700",children:"Enable welfare check system"})]}),!x.isActive&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message when disabled"}),e.jsx("textarea",{name:"messageWhenDisabled",value:x.messageWhenDisabled,onChange:We,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter message to show when system is disabled"})]})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{u(!1),y(null),g(!1)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Re,disabled:i,className:`px-4 py-2 rounded-lg transition-colors ${i?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),"Saving..."]}):f?"Update Settings":"Create Settings"})]})]})}),e.jsx(pa,{isOpen:$,onClose:()=>{j(!1),S(null)},onConfirm:()=>N&&H(N),title:"Delete Welfare Settings",message:`Are you sure you want to delete the welfare check settings for "${N?.title}"? This action cannot be undone.`,confirmText:"Delete Settings",cancelText:"Cancel",confirmVariant:"secondary",icon:"ri-delete-bin-line",iconColor:"text-red-600",isLoading:i}),e.jsx(pa,{isOpen:le,onClose:()=>{he(!1),ve(null)},onConfirm:Le,title:"Activate Welfare Setting",message:`Activating "${se?.title}" will automatically deactivate the currently active welfare setting. Are you sure you want to continue?`,confirmText:"Activate Setting",cancelText:"Cancel",confirmVariant:"primary",icon:"ri-play-line",iconColor:"text-blue-600",isLoading:i}),e.jsx(tr,{open:ge,onClose:()=>G(!1),onExportPDF:async()=>{try{const oe=await ze();ft.exportToPDF(oe,To,{filename:"welfare_settings_export",title:"Welfare Settings Report",includeTimestamp:!0}),t({type:"success",message:`All ${oe.length} welfare settings exported to PDF successfully`}),G(!1)}catch(oe){console.error("PDF export failed:",oe),t({type:"error",message:"Failed to export welfare settings to PDF"})}},onExportCSV:async()=>{try{const oe=await ze();ft.exportToCSV(oe,To,{filename:"welfare_settings_export",title:"Welfare Settings Report",includeTimestamp:!0}),t({type:"success",message:`All ${oe.length} welfare settings exported to CSV successfully`}),G(!1)}catch(oe){console.error("CSV export failed:",oe),t({type:"error",message:"Failed to export welfare settings to CSV"})}},onExportExcel:async()=>{try{const oe=await ze();ft.exportToExcel(oe,To,{filename:"welfare_settings_export",title:"Welfare Settings Report",includeTimestamp:!0}),t({type:"success",message:`All ${oe.length} welfare settings exported to Excel successfully`}),G(!1)}catch(oe){console.error("Excel export failed:",oe),t({type:"error",message:"Failed to export welfare settings to Excel"})}},data:s,columns:To.map(oe=>({key:oe.key,label:oe.label})),title:`Welfare Settings Report (${B})`}),e.jsx(tr,{open:fe,onClose:()=>ke(!1),onExportPDF:async()=>{try{const oe=await Ie();ft.exportToPDF(oe,Io,{filename:"welfare_reports_export",title:`Welfare Reports${L?` - ${L.title}`:""}`,includeTimestamp:!0}),t({type:"success",message:`All ${oe.length} welfare reports exported to PDF successfully`}),ke(!1)}catch(oe){console.error("PDF export failed:",oe),t({type:"error",message:"Failed to export welfare reports to PDF"})}},onExportCSV:async()=>{try{const oe=await Ie();ft.exportToCSV(oe,Io,{filename:"welfare_reports_export",title:`Welfare Reports${L?` - ${L.title}`:""}`,includeTimestamp:!0}),t({type:"success",message:`All ${oe.length} welfare reports exported to CSV successfully`}),ke(!1)}catch(oe){console.error("CSV export failed:",oe),t({type:"error",message:"Failed to export welfare reports to CSV"})}},onExportExcel:async()=>{try{const oe=await Ie();ft.exportToExcel(oe,Io,{filename:"welfare_reports_export",title:`Welfare Reports${L?` - ${L.title}`:""}`,includeTimestamp:!0}),t({type:"success",message:`All ${oe.length} welfare reports exported to Excel successfully`}),ke(!1)}catch(oe){console.error("Excel export failed:",oe),t({type:"error",message:"Failed to export welfare reports to Excel"})}},data:P,columns:Io.map(oe=>({key:oe.key,label:oe.label})),title:`Welfare Reports${L?` - ${L.title}`:""} (${P.length})`})]})}delete Xt.Icon.Default.prototype._getIconUrl;Xt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});Xt.divIcon({html:`
    <div style="
      background-color: #ef4444;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
    ">
      <i class="ri-alert-line" style="color: white; font-size: 10px;"></i>
    </div>
  `,className:"incident-marker",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-10]});const Ox=()=>{const[t,s]=b.useState([]),[r,a]=b.useState({totalIncidents:0,pendingIncidents:0,inProgressIncidents:0,resolvedIncidents:0,criticalIncidents:0,highPriorityIncidents:0}),[n,i]=b.useState(!0),[l,o]=b.useState([]),[c,d]=b.useState(new Date),[u,f]=b.useState([]),[g,x]=b.useState([]),[y,$]=b.useState([]),j=Lt(),N=j.userData?.id||j.userData?.staff_id||j.userData?.user_id;console.log("🔐 Auth state:",j),console.log("👤 Current staff ID:",N),b.useEffect(()=>{N&&(M(),S(),_(),A());const w=setInterval(()=>{d(new Date)},6e4);return()=>clearInterval(w)},[N]),b.useEffect(()=>{const w=[...y].sort((R,Z)=>new Date(Z.date_reported).getTime()-new Date(R.date_reported).getTime());o(w.slice(0,5))},[y]);const S=async()=>{try{i(!0),console.log("🔍 Fetching incidents assigned to staff ID:",N);const w=await Hs.getStaffIncidents(Number(N));w.success&&w.incidents&&(console.log("📋 Assigned incidents:",w.incidents),$(w.incidents),s(w.incidents),P(w.incidents))}catch(w){console.error("Error fetching incidents:",w)}finally{i(!1)}},_=async()=>{try{const w=await Xs.getCenters();w.success&&w.data&&x(w.data)}catch(w){console.error("Error fetching evacuation centers:",w)}},A=async()=>{try{const w=await Jn.getAlerts();w.success&&w.alerts&&f(w.alerts)}catch(w){console.error("Error fetching alerts:",w)}},P=w=>{const R={totalIncidents:w.length,pendingIncidents:w.filter(Z=>Z.status==="pending").length,inProgressIncidents:w.filter(Z=>Z.status==="in_progress").length,resolvedIncidents:w.filter(Z=>Z.status==="resolved").length,criticalIncidents:w.filter(Z=>Z.priority_level==="critical").length,highPriorityIncidents:w.filter(Z=>Z.priority_level==="high").length};a(R)},M=async()=>{try{const w=await xb.getStats();w.success&&w.stats&&console.log("Global stats (for reference):",w.stats)}catch(w){console.error("Error fetching global stats:",w)}},ne=w=>{switch(w){case"critical":return"bg-red-50 text-red-700 border-red-200 ring-1 ring-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200 ring-1 ring-orange-200";case"moderate":return"bg-yellow-50 text-yellow-700 border-yellow-200 ring-1 ring-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200 ring-1 ring-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200 ring-1 ring-gray-200"}},V=w=>{switch(w){case"pending":return"bg-amber-50 text-amber-700 border-amber-200 ring-1 ring-amber-200";case"in_progress":return"bg-blue-50 text-blue-700 border-blue-200 ring-1 ring-blue-200";case"resolved":return"bg-emerald-50 text-emerald-700 border-emerald-200 ring-1 ring-emerald-200";case"closed":return"bg-gray-50 text-gray-700 border-gray-200 ring-1 ring-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200 ring-1 ring-gray-200"}},L=w=>w.replace("_"," ").replace(/\b\w/g,R=>R.toUpperCase()),Q=()=>{const w=c.getHours();return w<12?"Good morning":w<17?"Good afternoon":"Good evening"};return n?e.jsx("div",{className:"flex items-center justify-center min-h-[500px] bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-blue-400 rounded-full animate-spin mx-auto",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsx("p",{className:"mt-6 text-slate-600 font-medium",children:"Loading your dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl shadow-2xl",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-48 translate-x-48 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white/5 rounded-full translate-y-32 -translate-x-32 blur-2xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-32 h-32 bg-white/10 rounded-full -translate-x-16 -translate-y-16 animate-pulse"})]}),e.jsx("div",{className:"relative z-10 p-4 sm:p-8 lg:p-12",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 lg:gap-8",children:[e.jsxs("div",{className:"flex-1 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white leading-tight",children:[Q(),", ",e.jsx("span",{className:"text-blue-200",children:j.userData?.name}),"!"]}),e.jsx("p",{className:"text-blue-100 text-base sm:text-lg lg:text-xl font-medium",children:"Welcome to your emergency response command center"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 text-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-calendar-line text-lg sm:text-xl"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:c.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("div",{className:"hidden sm:block w-1 h-1 bg-blue-300 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-time-line text-lg sm:text-xl"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:c.toLocaleTimeString()})]})]})]}),e.jsx("div",{className:"flex justify-center lg:justify-end",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-28 lg:h-28 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-xl border border-white/30",children:e.jsx("i",{className:"ri-shield-check-line text-3xl sm:text-4xl lg:text-5xl text-white"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-green-400 rounded-full border-2 border-white animate-pulse"})]})})]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/50 p-4 sm:p-8",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:e.jsx("i",{className:"ri-dashboard-3-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900",children:"Priority Overview"}),e.jsx("p",{className:"text-slate-600 font-medium text-sm sm:text-base",children:"Real-time metrics for your assigned incidents"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-2xl p-4 sm:p-6 border border-blue-200/50 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-blue-600/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-blue-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"ri-alert-line text-white text-xl sm:text-2xl"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:r.totalIncidents}),e.jsx("div",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wider",children:"Total"})]})]}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600 font-medium",children:"All assigned incidents"})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-amber-50 to-amber-100/50 rounded-2xl p-4 sm:p-6 border border-amber-200/50 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-amber-600/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-amber-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"ri-time-line text-white text-xl sm:text-2xl"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:r.pendingIncidents}),e.jsx("div",{className:"text-xs font-semibold text-amber-600 uppercase tracking-wider",children:"Pending"})]})]}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600 font-medium",children:"Awaiting response"})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-indigo-50 to-indigo-100/50 rounded-2xl p-4 sm:p-6 border border-indigo-200/50 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-indigo-600/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-indigo-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"ri-loader-4-line text-white text-xl sm:text-2xl"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:r.inProgressIncidents}),e.jsx("div",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wider",children:"Active"})]})]}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600 font-medium",children:"Currently handling"})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-red-50 to-red-100/50 rounded-2xl p-4 sm:p-6 border border-red-200/50 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-red-600/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-red-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"ri-error-warning-line text-white text-xl sm:text-2xl"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:r.criticalIncidents}),e.jsx("div",{className:"text-xs font-semibold text-red-600 uppercase tracking-wider",children:"Critical"})]})]}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600 font-medium",children:"Immediate attention"})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-50 to-orange-100/50 rounded-2xl p-4 sm:p-6 border border-orange-200/50 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-orange-600/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-orange-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"ri-alert-line text-white text-xl sm:text-2xl"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:r.highPriorityIncidents}),e.jsx("div",{className:"text-xs font-semibold text-orange-600 uppercase tracking-wider",children:"High"})]})]}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600 font-medium",children:"Priority cases"})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-emerald-50 to-emerald-100/50 rounded-2xl p-4 sm:p-6 border border-emerald-200/50 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-emerald-600/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-emerald-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"ri-check-double-line text-white text-xl sm:text-2xl"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:r.resolvedIncidents}),e.jsx("div",{className:"text-xs font-semibold text-emerald-600 uppercase tracking-wider",children:"Resolved"})]})]}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600 font-medium",children:"Successfully closed"})]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/50 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 px-4 sm:px-8 py-4 sm:py-6 border-b border-slate-200/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-br from-slate-600 to-slate-700 rounded-xl shadow-lg",children:e.jsx("i",{className:"ri-file-list-3-line text-white text-xl sm:text-2xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Recent Incidents"}),e.jsx("p",{className:"text-slate-600 font-medium text-sm sm:text-base",children:"Your latest assigned cases"})]})]}),e.jsxs(kt,{to:"/staff/incidents",className:"inline-flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 text-sm sm:text-base",children:["View All Cases",e.jsx("i",{className:"ri-arrow-right-line"})]})]})}),e.jsx("div",{className:"p-4 sm:p-8",children:l.length===0?e.jsxs("div",{className:"text-center py-12 sm:py-16",children:[e.jsxs("div",{className:"relative mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-slate-100 to-slate-200 rounded-2xl flex items-center justify-center mx-auto shadow-lg",children:e.jsx("i",{className:"ri-inbox-line text-4xl sm:text-5xl text-slate-400"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 sm:w-8 sm:h-8 bg-green-400 rounded-full border-4 border-white flex items-center justify-center",children:e.jsx("i",{className:"ri-check-line text-white text-xs sm:text-sm"})})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-slate-900 mb-3",children:"All Clear!"}),e.jsx("p",{className:"text-slate-600 text-base sm:text-lg max-w-md mx-auto",children:"You don't have any assigned incidents at the moment. Great work keeping things under control!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-hidden rounded-xl border border-slate-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Incident Details"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Date Reported"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:l.map(w=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900",children:w.incident_type}),e.jsx("div",{className:"text-sm text-slate-600 line-clamp-2 max-w-xs",children:w.description})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx("i",{className:"ri-map-pin-line text-slate-400"}),w.location]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("span",{className:`inline-flex px-3 py-1.5 text-xs font-bold rounded-lg ${ne(w.priority_level)}`,children:w.priority_level.charAt(0).toUpperCase()+w.priority_level.slice(1)})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("span",{className:`inline-flex px-3 py-1.5 text-xs font-bold rounded-lg ${V(w.status)}`,children:L(w.status)})}),e.jsx("td",{className:"px-6 py-5 text-sm font-medium text-slate-700",children:new Date(w.date_reported).toLocaleDateString()})]},w.incident_id))})]})}),e.jsx("div",{className:"lg:hidden space-y-3 sm:space-y-4",children:l.map(w=>e.jsx("div",{className:"bg-gradient-to-br from-white to-slate-50/50 rounded-xl p-4 sm:p-6 border border-slate-200 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02]",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-bold text-slate-900 text-base sm:text-lg leading-tight",children:w.incident_type}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed line-clamp-3",children:w.description})]}),e.jsxs("div",{className:"flex flex-col gap-2 shrink-0",children:[e.jsx("span",{className:`inline-flex px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-bold rounded-lg ${ne(w.priority_level)}`,children:w.priority_level.charAt(0).toUpperCase()+w.priority_level.slice(1)}),e.jsx("span",{className:`inline-flex px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-bold rounded-lg ${V(w.status)}`,children:L(w.status)})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 pt-3 sm:pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("i",{className:"ri-map-pin-line text-slate-400"}),e.jsx("span",{className:"font-medium truncate",children:w.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("i",{className:"ri-calendar-line text-slate-400"}),e.jsx("span",{children:new Date(w.date_reported).toLocaleDateString()})]})]})]})},w.incident_id))})]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/50 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 px-4 sm:px-8 py-4 sm:py-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg border border-white/30",children:e.jsx("i",{className:"ri-megaphone-line text-white text-xl sm:text-2xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"System Announcements"}),e.jsx("p",{className:"text-blue-100 font-medium text-sm sm:text-base",children:"Latest alerts and notifications"})]})]})})}),e.jsx("div",{className:"p-4 sm:p-8",children:u.length===0?e.jsxs("div",{className:"text-center py-12 sm:py-16",children:[e.jsxs("div",{className:"relative mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl flex items-center justify-center mx-auto shadow-lg",children:e.jsx("i",{className:"ri-shield-check-line text-4xl sm:text-5xl text-green-500"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 sm:w-8 sm:h-8 bg-green-400 rounded-full border-4 border-white flex items-center justify-center animate-pulse",children:e.jsx("i",{className:"ri-check-line text-white text-xs sm:text-sm"})})]}),e.jsx("h4",{className:"text-xl sm:text-2xl font-bold text-slate-900 mb-3",children:"All Systems Operational"}),e.jsx("p",{className:"text-slate-600 text-base sm:text-lg max-w-md mx-auto",children:"No active alerts or announcements. All emergency systems are running smoothly."})]}):e.jsx("div",{className:"max-w-4xl",children:(()=>{const w=u.sort((R,Z)=>new Date(Z.created_at).getTime()-new Date(R.created_at).getTime())[0];return e.jsxs("div",{className:"relative bg-gradient-to-br from-slate-50 to-blue-50/30 border-2 border-blue-200/50 rounded-2xl p-4 sm:p-8 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4",children:e.jsx("div",{className:`w-3 h-3 sm:w-4 sm:h-4 rounded-full animate-pulse ${w.status==="active"?"bg-red-500":"bg-gray-400"}`})}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2 sm:gap-3",children:[e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-bold rounded-xl shadow-sm ${w.alert_severity==="emergency"?"bg-red-100 text-red-800 border-2 border-red-200":w.alert_severity==="warning"?"bg-amber-100 text-amber-800 border-2 border-amber-200":"bg-blue-100 text-blue-800 border-2 border-blue-200"}`,children:[e.jsx("i",{className:`text-base sm:text-lg ${w.alert_severity==="emergency"?"ri-alarm-warning-line":w.alert_severity==="warning"?"ri-error-warning-line":"ri-information-line"}`}),w.alert_severity.charAt(0).toUpperCase()+w.alert_severity.slice(1)," ","Alert"]}),e.jsx("span",{className:"text-xs sm:text-sm font-bold text-slate-700 bg-slate-100 px-3 sm:px-4 py-1.5 sm:py-2 rounded-xl border border-slate-200 capitalize",children:w.alert_type})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("h4",{className:"text-lg sm:text-2xl font-bold text-slate-900 leading-tight",children:w.title}),e.jsx("p",{className:"text-slate-700 text-base sm:text-lg leading-relaxed",children:w.description})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 pt-4 sm:pt-6 border-t border-slate-200",children:[e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 text-xs sm:text-sm text-slate-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-time-line text-blue-500 text-base sm:text-lg"}),e.jsx("span",{className:"font-semibold",children:"Posted:"}),e.jsx("span",{children:new Date(w.created_at).toLocaleString()})]})}),w.location_text&&e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-slate-600",children:[e.jsx("i",{className:"ri-map-pin-line text-red-500 text-base sm:text-lg"}),e.jsx("span",{className:"font-semibold",children:"Location:"}),e.jsx("span",{className:"truncate",children:w.location_text})]})]})]})]})})()})})]})]})})},m8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState(""),[u,f]=b.useState("all"),[g,x]=b.useState("all"),[y,$]=b.useState("all"),[j,N]=b.useState("active"),[S,_]=b.useState(null),[A,P]=b.useState(!1),[M,ne]=b.useState(!1),[V,L]=b.useState(!1),[Q,w]=b.useState("team"),[R,Z]=b.useState(null),[I,re]=b.useState(null),[ee,ge]=b.useState(null),[G,fe]=b.useState(!1),[ke,X]=b.useState(!1),[k,q]=b.useState(""),[T,B]=b.useState(""),[F,J]=b.useState([]),[W,le]=b.useState(!1),[he,se]=b.useState(!1),ve=Gs(),E=(be,st)=>{const nt=Date.now().toString();J(_t=>[..._t,{id:nt,message:be,type:st}]),setTimeout(()=>{J(_t=>_t.filter(It=>It.id!==nt))},5e3)},[ce,K]=b.useState({}),[ze,Ie]=b.useState({}),Ne=Lt(),U=Ne.userData?.id||Ne.userData?.staff_id||Ne.userData?.user_id,xe=Ne.userData?.assigned_team_id;console.log("🔐 Auth state:",Ne),console.log("👤 Current staff ID:",U),console.log("👥 Current staff team ID:",xe),b.useEffect(()=>{U&&(Re(),We(),Ye())},[U]),b.useEffect(()=>{Fe()},[t,c,u,g,y,j]);const H=[{key:"incident_id",label:"Incident ID"},{key:"incident_type",label:"Type",format:be=>et(be)},{key:"description",label:"Description"},{key:"resolvedLocation",label:"Location"},{key:"reporter_name",label:"Reporter"},{key:"reporter_type",label:"Reporter Type"},{key:"assigned_team_name",label:"Assigned Team"},{key:"date_reported",label:"Date Reported",format:be=>ft.formatDateTime(be)},{key:"updated_at",label:"Date Resolved",format:be=>be?ft.formatDateTime(be):""}],ye=async()=>{try{await ft.exportToPDF(r,H,{filename:"staff_incidents",title:"Staff Incidents Report",includeTimestamp:!0}),ve.showToast({type:"success",message:"PDF export completed successfully"}),le(!1)}catch(be){console.error("PDF export failed:",be),ve.showToast({type:"error",message:"Failed to export PDF"})}},pe=()=>{try{ft.exportToCSV(r,H,{filename:"staff_incidents",includeTimestamp:!0}),ve.showToast({type:"success",message:"CSV export completed successfully"}),le(!1)}catch(be){console.error("CSV export failed:",be),ve.showToast({type:"error",message:"Failed to export CSV"})}},Le=()=>{try{ft.exportToExcel(r,H,{filename:"staff_incidents",includeTimestamp:!0}),ve.showToast({type:"success",message:"Excel export completed successfully"}),le(!1)}catch(be){console.error("Excel export failed:",be),ve.showToast({type:"error",message:"Failed to export Excel"})}},Re=async()=>{try{if(console.log("🔍 Fetching incidents for staff ID:",U),!U){console.error("❌ No staff ID available");return}const be=await Hs.getStaffIncidents(Number(U));if(be.success&&be.incidents){console.log("📋 Staff incidents response:",be),console.log("👤 Staff info:",be.staffInfo),console.log("📊 Assignment stats:",be.assignmentStats);const st=await Promise.all(be.incidents.map(async nt=>{try{const _t=await Ce(nt.latitude,nt.longitude);return{...nt,resolvedLocation:_t}}catch(_t){return console.error("Error geocoding incident location:",_t),{...nt,resolvedLocation:`${Number(nt.latitude).toFixed(4)}, ${Number(nt.longitude).toFixed(4)}`}}}));s(st),be.staffInfo?.teamId&&!xe&&console.log("🔄 Updating team ID from response:",be.staffInfo.teamId)}}catch(be){console.error("Error fetching staff incidents:",be)}},We=async()=>{try{const be=await Bu.getTeams();be.success&&be.teams&&i(be.teams)}catch(be){console.error("Error fetching teams:",be)}},Ye=async()=>{try{const be=await Xi.getStaff({status:"active"});be.success&&be.data?.users&&o(be.data.users)}catch(be){console.error("Error fetching available staff:",be)}},Ce=async(be,st)=>{const nt=Number(be),_t=Number(st),It=`${nt},${_t}`;if(ce[It])return ce[It];Ie(tt=>({...tt,[It]:!0}));try{const tt=await fetch(`/api/geocoding/reverse?lat=${nt}&lon=${_t}`,{headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(!tt.ok)throw console.error("Geocoding API error:",{status:tt.status,statusText:tt.statusText}),new Error(`Geocoding failed: ${tt.status} ${tt.statusText}`);const Qt=await tt.json();if(!Qt.success)throw console.error("Geocoding API error:",Qt.message),new Error(Qt.message||"Geocoding failed");const xr=Qt.data||"Unknown Location";return K(Js=>({...Js,[It]:xr})),xr}catch(tt){console.error("Error geocoding coordinates:",tt)}finally{Ie(tt=>({...tt,[It]:!1}))}return`${nt.toFixed(4)}, ${_t.toFixed(4)}`},Fe=()=>{let be=t;j==="active"?be=be.filter(st=>st.status==="pending"||st.status==="in_progress"):j==="history"&&(be=be.filter(st=>st.status==="resolved"||st.status==="closed")),c&&(be=be.filter(st=>et(st.incident_type).includes(c.toUpperCase())||st.incident_type.toLowerCase().includes(c.toLowerCase())||st.description.toLowerCase().includes(c.toLowerCase())||st.location.toLowerCase().includes(c.toLowerCase()))),u!=="all"&&(be=be.filter(st=>st.status===u)),g!=="all"&&(be=be.filter(st=>st.priority_level===g)),y!=="all"&&(y==="individual"?be=be.filter(st=>st.assigned_staff_id===U):y==="team"&&(be=be.filter(st=>st.assigned_team_id===xe?!0:st.assigned_team_ids&&xe?st.assigned_team_ids.split(",").map(_t=>Number(_t.trim())).includes(xe):!1))),y==="all"&&xe&&(be=be.filter(st=>st.assigned_team_id===xe?!0:st.assigned_team_ids?st.assigned_team_ids.split(",").map(_t=>Number(_t.trim())).includes(xe):st.assigned_staff_id===U)),a(be)},Xe=async(be,st)=>{try{fe(!0),ge(null),console.log("🔄 Assigning team to incident:",{incidentId:be,teamId:st});const nt=await Hs.assignTeamToIncident(be,st);console.log("✅ Team assignment response:",nt),s(_t=>_t.map(It=>{if(It.incident_id===be){const tt=n.find(Qt=>Qt.id===st);return{...It,assigned_team_id:st,assigned_team_name:tt?.name||void 0,assigned_staff_id:void 0,assigned_staff_name:void 0}}return It})),nt?.emailSent?(ge({sent:!0,details:nt.emailDetails}),console.log("📧 Email notifications sent successfully:",nt.emailDetails)):(ge({sent:!1,details:nt.emailDetails||{error:"No email details provided"}}),console.log("⚠️ Email notifications failed:",nt.emailDetails)),setTimeout(()=>{ne(!1),ge(null)},3e3)}catch(nt){console.error("❌ Error assigning team to incident:",nt),ge({sent:!1,details:{error:nt instanceof Error?nt.message:"Unknown error"}})}finally{fe(!1)}},ae=async(be,st)=>{try{fe(!0),ge(null),console.log("🔄 Assigning staff to incident:",{incidentId:be,staffId:st});const nt=await Hs.assignStaffToIncident(be,st);console.log("✅ Staff assignment response:",nt),s(_t=>_t.map(It=>It.incident_id===be?{...It,assigned_staff_id:st,assigned_staff_name:st?"Assigned Staff":void 0,assigned_team_id:void 0,assigned_team_name:void 0}:It)),nt?.emailSent?(ge({sent:!0,details:nt.emailDetails}),console.log("📧 Email notification sent successfully:",nt.emailDetails)):(ge({sent:!1,details:nt.emailDetails||{error:"No email details provided"}}),console.log("⚠️ Email notification failed:",nt.emailDetails)),setTimeout(()=>{ne(!1),ge(null)},3e3)}catch(nt){console.error("❌ Error assigning staff to incident:",nt),ge({sent:!1,details:{error:nt instanceof Error?nt.message:"Unknown error"}})}finally{fe(!1)}},Oe=async(be,st,nt)=>{try{X(!0),ge(null),console.log("🔄 Updating incident:",{incidentId:be,status:st,notes:nt});const _t=await Hs.updateIncidentStatus(be,{status:st,notes:nt});console.log("✅ Update response:",_t),s(tt=>tt.map(Qt=>Qt.incident_id===be?{...Qt,status:st}:Qt));const It=Date.now().toString();J(tt=>[...tt,{id:It,message:"Incident updated successfully",type:"success"}]),setTimeout(()=>{J(tt=>tt.filter(Qt=>Qt.id!==It))},3e3),setTimeout(()=>{L(!1),q(""),B("")},1e3)}catch(_t){console.error("❌ Error updating incident:",_t);const It=Date.now().toString();J(tt=>[...tt,{id:It,message:"Failed to update incident",type:"error"}]),setTimeout(()=>{J(tt=>tt.filter(Qt=>Qt.id!==It))},3e3)}finally{X(!1)}},oe=be=>{switch(be){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"moderate":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},je=be=>{switch(be){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Me=be=>be.replace("_"," ").replace(/\b\w/g,st=>st.toUpperCase()),et=be=>be.toUpperCase(),Ze=be=>{if(be.assignment_type)return be.assignment_type;if(be.assigned_staff_id===U)return"individual";if(be.assigned_team_ids){const st=be.assigned_team_ids.split(",").map(nt=>Number(nt.trim()));if(xe&&st.includes(xe))return"teams"}else if(be.assigned_team_id===xe)return"team";return"unknown"},mt=be=>{const st=Ze(be);return st==="individual"?e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 border border-blue-200",children:"Individual"}):st==="teams"?e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800 border border-indigo-200",children:"Multiple Teams"}):st==="team"?e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800 border border-purple-200",children:"Team"}):null},xt=be=>{_(be),P(!0)},Dt=()=>{P(!1),_(null)},Kt=()=>{ne(!1),_(null),Z(null),re(null),ge(null)},Et=be=>{if(be.status==="resolved"||be.status==="closed"){E("Cannot update incident. Resolved and closed incidents cannot be modified.","error");return}_(be),q(be.status),B(""),L(!0)},gt=()=>{L(!1),_(null),q(""),B("")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-3 sm:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:j==="active"?"Active Incidents":"Incident History"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:j==="active"?"Manage incidents assigned to you individually or to your team":"View all resolved and closed incidents"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:e.jsxs("button",{onClick:()=>le(!0),className:"inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export"]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-3 sm:py-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-4 sm:mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex flex-col sm:flex-row sm:space-x-8 px-3 sm:px-4 md:px-6 space-y-1 sm:space-y-0","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>N("active"),className:`py-3 sm:py-4 px-1 border-b-2 font-medium text-sm transition-colors ${j==="active"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-alert-line mr-2"}),"Active Incidents",e.jsx("span",{className:"ml-2 py-0.5 px-2 rounded-full text-xs bg-blue-100 text-blue-800",children:t.filter(be=>be.status==="pending"||be.status==="in_progress").length})]}),e.jsxs("button",{onClick:()=>N("history"),className:`py-3 sm:py-4 px-1 border-b-2 font-medium text-sm transition-colors ${j==="history"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-history-line mr-2"}),"Incident History",e.jsx("span",{className:"ml-2 py-0.5 px-2 rounded-full text-xs bg-green-100 text-green-800",children:t.filter(be=>be.status==="resolved"||be.status==="closed").length})]})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-3 sm:py-4 md:py-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4 md:p-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 sm:gap-4 mb-3 sm:mb-4 lg:mb-0",children:[e.jsxs("div",{className:"flex-1 lg:max-w-md",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search incidents...",value:c,onChange:be=>d(be.target.value),className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base"}),e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),e.jsxs("div",{className:"flex items-center justify-between lg:hidden",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," of ",t.length," incidents"]}),e.jsxs("button",{onClick:()=>se(!he),className:"inline-flex items-center px-3 py-2.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:`mr-2 ${he?"ri-filter-off-line":"ri-filter-line"}`}),he?"Hide Filters":"Show Filters"]})]}),e.jsxs("div",{className:"hidden lg:flex items-center text-sm text-gray-600",children:[r.length," of ",t.length," incidents"]})]}),e.jsx("div",{className:`${he?"block":"hidden"} lg:block`,children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 pt-3 sm:pt-4 lg:pt-6 border-t border-gray-200 lg:border-t-0",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:u,onChange:be=>f(be.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",children:[e.jsxs("option",{value:"all",children:["All ",j==="active"?"Active":"History"," Statuses"]}),j==="active"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:g,onChange:be=>x(be.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"moderate",children:"Moderate"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-3 sm:px-4 md:px-6 py-3 md:py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j==="active"?"Active Incidents":"Incident History"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",r.length," of"," ",j==="active"?t.filter(be=>be.status==="pending"||be.status==="in_progress").length:t.filter(be=>be.status==="resolved"||be.status==="closed").length," ",j==="active"?"active":"resolved"," incidents"]})]})}),r.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12 px-4",children:[e.jsx("i",{className:`text-3xl sm:text-4xl mb-3 sm:mb-4 ${j==="active"?"ri-inbox-line text-gray-400":"ri-history-line text-green-400"}`}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:j==="active"?"No active incidents":"No incident history"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-md mx-auto",children:j==="active"?t.filter(be=>be.status==="pending"||be.status==="in_progress").length===0?"You don't have any active incidents at the moment.":"No active incidents match your current filters.":t.filter(be=>be.status==="resolved"||be.status==="closed").length===0?"You haven't resolved any incidents yet.":"No resolved incidents match your current filters."}),j==="active"&&t.filter(be=>be.status==="pending"||be.status==="in_progress").length===0&&e.jsx("div",{className:"mt-3 sm:mt-4",children:e.jsxs("div",{className:"text-xs text-gray-400",children:[e.jsx("i",{className:"ri-information-line mr-1"}),"Active incidents will appear here when assigned to you or your team"]})})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4 md:gap-6 p-3 sm:p-4 md:p-6",children:r.map(be=>e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border transition-all duration-300 hover:shadow-lg ${be.status==="resolved"||be.status==="closed"?"border-green-200 bg-green-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${be.status==="resolved"||be.status==="closed"?"bg-green-500":be.status==="in_progress"?"bg-blue-500":"bg-yellow-500"}`}),e.jsx("div",{children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",be.incident_id]})})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1.5 sm:space-y-2",children:[e.jsxs("span",{className:`inline-flex px-2 sm:px-3 py-1 text-xs font-semibold rounded-full border ${oe(be.priority_level)}`,children:[e.jsx("i",{className:"ri-flag-line mr-1"}),be.priority_level.charAt(0).toUpperCase()+be.priority_level.slice(1)]}),e.jsx("span",{className:`inline-flex px-2 sm:px-3 py-1 text-xs font-semibold rounded-full border ${je(be.status)}`,children:Me(be.status)})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-2",children:et(be.incident_type)}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 line-clamp-2 leading-relaxed",children:be.description})]})]}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-map-pin-line text-red-600 text-xs sm:text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Location"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-900 break-words",children:ze[`${be.latitude},${be.longitude}`]?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-blue-600 mr-2"}),e.jsx("span",{className:"text-gray-500",children:"Loading location..."})]}):be.resolvedLocation||be.location})]})]}),e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-team-line text-blue-600 text-xs sm:text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Assignment"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2",children:[mt(be),be.all_assigned_teams?e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 font-medium break-words",children:be.all_assigned_teams}),be.assigned_team_ids&&e.jsxs("span",{className:"text-xs text-gray-500",children:[be.assigned_team_ids.split(",").length," teams assigned"]})]}):be.assigned_team_name?e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 font-medium break-words",children:be.assigned_team_name}):null,be.assigned_staff_name&&e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 font-medium break-words",children:be.assigned_staff_name})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-2 border-t border-gray-100 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-time-line text-gray-400"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("div",{className:"font-medium",children:new Date(be.date_reported).toLocaleDateString()}),e.jsx("div",{children:new Date(be.date_reported).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-user-line text-gray-400"}),be.reporter_type==="guest"?e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("div",{className:"font-medium",children:be.guest_name||"Unknown Guest"}),e.jsxs("div",{className:"text-gray-400",children:["ID: ",be.guest_id||"N/A"]}),be.guest_contact&&e.jsxs("div",{className:"text-gray-400 break-all",children:["📞 ",be.guest_contact]})]}):e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("div",{className:"font-medium",children:be.reporter_name}),be.reporter_phone&&e.jsxs("div",{className:"text-gray-400 break-all",children:["📞 ",be.reporter_phone]})]})]})]})]}),e.jsx("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("button",{onClick:()=>xt(be),className:"w-full inline-flex items-center justify-center px-3 py-2.5 text-sm font-medium text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg border border-blue-200 transition-colors",children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"View Details"]}),e.jsxs("button",{onClick:()=>Et(be),disabled:be.status==="resolved"||be.status==="closed",className:`w-full inline-flex items-center justify-center px-3 py-2.5 text-sm font-medium rounded-lg border transition-colors ${be.status==="resolved"||be.status==="closed"?"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed":"text-green-600 hover:text-green-900 hover:bg-green-50 border-green-200"}`,children:[e.jsx("i",{className:"ri-edit-line mr-2"}),be.status==="resolved"||be.status==="closed"?"Completed":"Update"]})]})})]},be.incident_id))})})]})]}),A&&S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-4 sm:px-6 py-3 sm:py-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-alert-line text-lg sm:text-xl"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold",children:["Incident #",S.incident_id]}),e.jsx("p",{className:"text-blue-100 text-xs sm:text-sm",children:et(S.incident_type)})]})]}),e.jsx("button",{onClick:Dt,className:"text-white hover:text-blue-100 transition-colors p-2 rounded-lg hover:bg-white hover:bg-opacity-20",children:e.jsx("i",{className:"ri-close-line text-lg sm:text-xl"})})]})}),e.jsxs("div",{className:"p-3 sm:p-4 md:p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-file-text-line text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Description"})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed text-sm sm:text-base",children:S.description})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-map-pin-line text-red-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Location"})]}),e.jsx("p",{className:"text-gray-700 mb-2 text-sm sm:text-base break-words",children:S.resolvedLocation||S.location}),S.resolvedLocation&&S.resolvedLocation!==S.location&&e.jsxs("p",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded break-all",children:["Coordinates: ",Number(S.latitude).toFixed(4),","," ",Number(S.longitude).toFixed(4)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-team-line text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Assignment"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[mt(S),S.assigned_team_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-team-line text-gray-400"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 break-words",children:S.assigned_team_name})]}),S.assigned_staff_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-user-line text-gray-400"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 break-words",children:S.assigned_staff_name})]})]})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-flag-line text-orange-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Priority"})]}),e.jsx("span",{className:`inline-flex px-2 sm:px-3 py-1 text-xs sm:text-sm font-semibold rounded-full border ${oe(S.priority_level)}`,children:S.priority_level.charAt(0).toUpperCase()+S.priority_level.slice(1)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-time-line text-purple-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Status"})]}),e.jsx("span",{className:`inline-flex px-2 sm:px-3 py-1 text-xs sm:text-sm font-semibold rounded-full border ${je(S.status)}`,children:Me(S.status)})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-user-line text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Reporter"})]}),S.reporter_type==="guest"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-indigo-600 text-xs sm:text-sm"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:S.guest_name||"Unknown Guest"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Guest Reporter"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Guest ID"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:S.guest_id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Incident ID"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:S.incident_id})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Contact"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-900 break-all",children:S.guest_contact||"N/A"})]})]})]}):e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-indigo-600 text-xs sm:text-sm"})}),e.jsx("div",{className:"text-gray-700 font-medium text-sm sm:text-base",children:S.reporter_name})]}),S.reporter_phone&&e.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 pl-8 sm:pl-10 break-all",children:["📞 ",S.reporter_phone]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-calendar-line text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Timeline"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Reported:"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:new Date(S.date_reported).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Time:"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:new Date(S.date_reported).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),S.date_resolved&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Resolved:"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-green-600",children:new Date(S.date_resolved).toLocaleDateString()})]})]})]})]})]}),S.attachment&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 md:p-4 mt-4 md:mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-sm sm:text-base",children:"Attachments"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:S.attachment.split(",").map((be,st)=>{const nt=`/uploads/incidents/${be.trim()}`;return e.jsx("a",{href:nt,target:"_blank",rel:"noopener noreferrer",className:"block border border-gray-300 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:e.jsx("img",{src:nt||"/placeholder.svg",alt:`Attachment ${st+1}`,className:"w-full h-20 sm:h-24 md:h-32 object-cover",onError:_t=>{_t.target.src="/images/placeholder-image.png"}})},st)})})]})]}),e.jsx("div",{className:"bg-gray-50 px-3 sm:px-4 md:px-6 py-3 md:py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsxs("button",{onClick:()=>{Dt(),Et(S)},disabled:S.status==="resolved"||S.status==="closed",className:`w-full sm:w-auto inline-flex items-center justify-center px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${S.status==="resolved"||S.status==="closed"?"bg-gray-400 text-white cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[e.jsx("i",{className:"ri-edit-line mr-2"}),S.status==="resolved"||S.status==="closed"?"Incident Completed":"Update Incident"]}),e.jsxs("button",{onClick:Dt,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Close"]})]})})]})}),M&&S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 sm:p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-[95vw] sm:max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:["Reassign Incident #",S.incident_id]}),e.jsx("button",{onClick:Kt,className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Type"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"team",checked:Q==="team",onChange:be=>w(be.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Team Assignment"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"staff",checked:Q==="staff",onChange:be=>w(be.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Individual Staff Assignment"})]})]})]}),Q==="team"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team"}),e.jsxs("select",{value:R||"",onChange:be=>Z(be.target.value?Number(be.target.value):null),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",children:[e.jsx("option",{value:"",children:"Clear Assignment"}),n.map(be=>e.jsxs("option",{value:be.id,children:[be.name," (",be.member_count," members)"]},be.id))]})]}),Q==="staff"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Staff"}),e.jsxs("select",{value:I||"",onChange:be=>re(be.target.value?Number(be.target.value):null),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",children:[e.jsx("option",{value:"",children:"Clear Assignment"}),l.map(be=>e.jsxs("option",{value:be.id,children:[be.name," - ",be.position]},be.id))]})]}),ee&&e.jsxs("div",{className:`p-3 rounded-md ${ee.sent?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`mr-2 ${ee.sent?"ri-check-line":"ri-error-warning-line"}`}),e.jsx("span",{className:"text-sm font-medium",children:ee.sent?"Email notifications sent successfully":"Email notifications failed"})]}),ee.details&&e.jsxs("div",{className:"mt-2 text-xs",children:[ee.details.error&&e.jsxs("p",{children:["Error: ",ee.details.error]}),ee.details.teamName&&e.jsxs("p",{children:["Team: ",ee.details.teamName]}),ee.details.totalMembers&&e.jsxs("p",{children:["Members: ",ee.details.totalMembers]}),ee.details.emailsSent&&e.jsxs("p",{children:["Sent: ",ee.details.emailsSent]}),ee.details.emailsFailed&&e.jsxs("p",{children:["Failed: ",ee.details.emailsFailed]})]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx("button",{onClick:Kt,className:"w-full sm:w-auto px-4 py-2.5 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",disabled:G,children:"Cancel"}),e.jsx("button",{onClick:()=>{S&&(Q==="team"?Xe(S.incident_id,R):ae(S.incident_id,I))},disabled:G,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg transition-colors flex items-center justify-center text-sm font-medium ${G?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Assigning..."]}):"Assign"})]})]})})}),V&&S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 sm:p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-[95vw] sm:max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:["Update Incident #",S.incident_id]}),e.jsx("button",{onClick:gt,className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Status"}),e.jsx("div",{className:"text-sm text-gray-900 mb-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${je(S.status)}`,children:Me(S.status)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Status"}),e.jsxs("select",{value:k,onChange:be=>q(be.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",children:[e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx("button",{onClick:gt,className:"w-full sm:w-auto px-4 py-2.5 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",disabled:ke,children:"Cancel"}),e.jsx("button",{onClick:()=>{S&&Oe(S.incident_id,k,T)},disabled:ke||!k,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg transition-colors flex items-center justify-center text-sm font-medium ${ke||!k?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:ke?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Update Incident"})]})]})})}),e.jsx(tr,{open:W,onClose:()=>le(!1),onExportPDF:ye,onExportCSV:pe,onExportExcel:Le,data:r,columns:H.map(be=>({key:be.key,label:be.label})),title:"Export Staff Incidents"}),e.jsx("div",{className:"fixed top-4 right-3 sm:right-4 z-50 space-y-2 max-w-[calc(100vw-24px)] sm:max-w-sm",children:F.map(be=>e.jsx("div",{className:`px-3 sm:px-4 py-2 sm:py-3 rounded-lg shadow-lg transform transition-all duration-300 ${be.type==="success"?"bg-green-500 text-white":be.type==="error"?"bg-red-500 text-white":be.type==="warning"?"bg-yellow-500 text-white":"bg-blue-500 text-white"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`mr-2 ${be.type==="success"?"ri-check-line":be.type==="error"?"ri-error-warning-line":be.type==="warning"?"ri-alert-line":"ri-information-line"}`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium break-words",children:be.message})]})},be.id))})]})};class h8{cache={};pendingRequests={};rateLimitDelay=100;lastRequestTime=0;CACHE_DURATION=1440*60*1e3;MAX_BATCH_SIZE=5;BATCH_DELAY=200;constructor(){this.loadCacheFromStorage()}loadCacheFromStorage(){try{const s=localStorage.getItem("geocoding_cache");s&&(this.cache=JSON.parse(s),this.cleanExpiredCache())}catch(s){console.warn("Failed to load geocoding cache from localStorage:",s),this.cache={}}}saveCacheToStorage(){try{localStorage.setItem("geocoding_cache",JSON.stringify(this.cache))}catch(s){console.warn("Failed to save geocoding cache to localStorage:",s)}}cleanExpiredCache(){const s=Date.now();let r=!1;Object.keys(this.cache).forEach(a=>{this.cache[a].expiresAt<s&&(delete this.cache[a],r=!0)}),r&&this.saveCacheToStorage()}generateCacheKey(s,r){return`${s.toFixed(4)},${r.toFixed(4)}`}async makeGeocodingRequest(s,r){const a=Date.now();a-this.lastRequestTime<this.rateLimitDelay&&await new Promise(n=>setTimeout(n,this.rateLimitDelay-(a-this.lastRequestTime))),this.lastRequestTime=Date.now();try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${s}&lon=${r}&zoom=16&addressdetails=1`,{headers:{"User-Agent":"PROTEQ-MDRRMO/1.0"}});if(!n.ok)throw new Error(`Geocoding API error: ${n.status}`);const i=await n.json();let l="";if(i.display_name)l=i.display_name.split(", ").slice(0,3).join(", ");else if(i.address){const o=i.address;o.road&&o.city?l=`${o.road}, ${o.city}`:o.city?l=o.city:o.town?l=o.town:o.village?l=o.village:l="Unknown Location"}else l="Unknown Location";return l}catch(n){throw console.error("Geocoding request failed:",n),n}}async processBatch(s){const r=s.map(async a=>{try{const n=await this.makeGeocodingRequest(a.lat,a.lng);a.resolve(n)}catch(n){a.reject(n instanceof Error?n:new Error("Geocoding failed"))}});await Promise.allSettled(r),Object.keys(this.pendingRequests).length>0&&await new Promise(a=>setTimeout(a,this.BATCH_DELAY))}async getLocationName(s,r){const a=this.generateCacheKey(s,r),n=Date.now(),i=this.cache[a];return i&&i.expiresAt>n?i.locationName:this.pendingRequests[a]?new Promise((l,o)=>{this.pendingRequests[a].push({lat:s,lng:r,resolve:l,reject:o})}):new Promise(async(l,o)=>{this.pendingRequests[a]=[{lat:s,lng:r,resolve:l,reject:o}];try{const c=await this.makeGeocodingRequest(s,r);this.cache[a]={locationName:c,timestamp:n,expiresAt:n+this.CACHE_DURATION},this.saveCacheToStorage();const d=this.pendingRequests[a];delete this.pendingRequests[a],d.forEach(u=>u.resolve(c))}catch(c){const d=this.pendingRequests[a];delete this.pendingRequests[a],d.forEach(f=>f.reject(c instanceof Error?c:new Error("Geocoding failed")));const u=`${s.toFixed(4)}, ${r.toFixed(4)}`;l(u)}})}async getLocationNamesBatch(s){const r=[];for(let a=0;a<s.length;a+=this.MAX_BATCH_SIZE){const i=s.slice(a,a+this.MAX_BATCH_SIZE).map(c=>this.getLocationName(c.lat,c.lng)),o=(await Promise.allSettled(i)).map(c=>c.status==="fulfilled"?c.value:"Unknown Location");r.push(...o),a+this.MAX_BATCH_SIZE<s.length&&await new Promise(c=>setTimeout(c,this.BATCH_DELAY))}return r}clearCache(){this.cache={},localStorage.removeItem("geocoding_cache")}getCacheStats(){const s=Date.now();let r=0,a=0;return Object.values(this.cache).forEach(n=>{n.expiresAt<s?r++:a++}),{total:r+a,expired:r,valid:a}}}const x8=new h8,f8=async()=>{try{await Mo(()=>import("./leaflet-heat-hQeRTJ38.js"),[])}catch(t){console.warn("Heatmap plugin not available:",t)}},g8=()=>{if(!document.querySelector('link[href*="leaflet"]')){const s=document.createElement("link");s.rel="stylesheet",s.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",s.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",s.crossOrigin="",document.head.appendChild(s)}};delete Xt.Icon.Default.prototype._getIconUrl;Xt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const p8=(t,s)=>{let r="#6b7280";return s==="resolved"||s==="closed"?r="#10b981":s==="in_progress"?r="#3b82f6":s==="pending"&&(r="#f59e0b"),(s==="pending"||s==="in_progress")&&t==="critical"&&(r="#ef4444"),Xt.divIcon({html:`<div style="background-color: ${r}; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;">
            <i class="ri-alert-line" style="color: white; font-size: 12px;"></i>
          </div>`,className:"custom-incident-marker",iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]})},b8=({center:t,zoom:s})=>{const r=Sl();return b.useEffect(()=>{r.setView(t,s)},[r,t,s]),null},Ro={north:14.2,south:13.5,east:121.5,west:120.8},Dx=[13.84542,121.206189],ts={CRITICAL:"critical",PENDING:"pending",IN_PROGRESS:"in_progress",RESOLVED:"resolved"},y8=t=>{const s=t.filter(n=>n.latitude&&n.longitude&&!isNaN(Number(n.latitude))&&!isNaN(Number(n.longitude)));if(s.length===0)return null;const r=s.map(n=>Number(n.latitude)),a=s.map(n=>Number(n.longitude));return{minLat:Math.min(...r),maxLat:Math.max(...r),minLng:Math.min(...a),maxLng:Math.max(...a),centerLat:(Math.min(...r)+Math.max(...r))/2,centerLng:(Math.min(...a)+Math.max(...a))/2,validIncidents:s}},Mx=t=>{if(!t)return 10;const{minLat:s,maxLat:r,minLng:a,maxLng:n,validIncidents:i}=t;if(i.length===1)return 15;const l=i.every(u=>{const f=Number(u.latitude),g=Number(u.longitude);return f>=Ro.south&&f<=Ro.north&&g>=Ro.west&&g<=Ro.east}),o=r-s,c=n-a,d=Math.max(o,c);return l?d<.01?16:d<.05?14:d<.2?12:10:d<.01?16:d<.05?14:d<.2?12:d<1?10:8},v8=t=>{let s=.3;switch(t.priority_level){case"critical":s=1;break;case"high":s=.8;break;case"moderate":s=.6;break;case"low":s=.4;break}return(t.status==="pending"||t.status==="in_progress")&&(s*=1.2),Math.min(s,1)},j8=({incidents:t,showHeatmap:s,onHeatmapLayerChange:r})=>{const a=Sl(),n={low:"#10B981",moderate:"#FFD966",high:"#E67E22",critical:"#EF4444"};return b.useEffect(()=>{if(!s){a.eachLayer(l=>{l.options&&l.options.heatLayer&&a.removeLayer(l)}),r([]);return}const i=()=>{if(window.L&&window.L.heatLayer){console.log("Creating separate heatmaps for each priority level"),a.eachLayer(c=>{c.options&&c.options.heatLayer&&(console.log("Removing existing heatmap layer"),a.removeLayer(c))});const l=[],o={low:t.filter(c=>c.latitude&&c.longitude&&!isNaN(Number(c.latitude))&&!isNaN(Number(c.longitude))&&c.priority_level==="low"),moderate:t.filter(c=>c.latitude&&c.longitude&&!isNaN(Number(c.latitude))&&!isNaN(Number(c.longitude))&&c.priority_level==="moderate"),high:t.filter(c=>c.latitude&&c.longitude&&!isNaN(Number(c.latitude))&&!isNaN(Number(c.longitude))&&c.priority_level==="high"),critical:t.filter(c=>c.latitude&&c.longitude&&!isNaN(Number(c.latitude))&&!isNaN(Number(c.longitude))&&c.priority_level==="critical")};Object.entries(o).forEach(([c,d])=>{const u=d.map(f=>{const g=Number(f.latitude),x=Number(f.longitude),y=v8(f);return[g,x,y]});if(u.length>0){const f=n[c],g=window.L.heatLayer(u,{radius:35,blur:15,maxZoom:18,minZoom:8,minOpacity:.65,maxOpacity:.8,gradient:{.5:f,1:f},heatLayer:!0});console.log(`Adding heatmap layer for ${c} with color ${f}`),g.addTo(a),l.push(g)}}),r(l),setTimeout(()=>{a.invalidateSize()},100)}else console.log("Heatmap plugin not available, retrying..."),setTimeout(i,100)};f8().then(i)},[t,s,a,r]),null},N8=t=>{const s={red:{bg:"bg-red-50",border:"border-red-200",ring:"ring-red-300",text:"text-red-600",gradient:"from-red-500 to-red-500"},amber:{bg:"bg-amber-50",border:"border-amber-200",ring:"ring-amber-300",text:"text-amber-600",gradient:"from-amber-500 to-amber-500"},blue:{bg:"bg-blue-50",border:"border-blue-200",ring:"ring-blue-300",text:"text-blue-600",gradient:"from-blue-500 to-blue-500"},green:{bg:"bg-green-50",border:"border-green-200",ring:"ring-green-300",text:"text-green-600",gradient:"from-green-500 to-green-500"}};return s[t]||s.blue},Fo=({type:t,label:s,color:r,isActive:a,onClick:n})=>{const i=N8(r);return e.jsxs("div",{className:`flex items-center text-sm cursor-pointer rounded-lg p-2 transition-all duration-200 hover:bg-gray-50 ${a?`${i.bg} border ${i.border}`:"opacity-60"}`,onClick:n,children:[e.jsx("div",{className:`w-4 h-4 bg-gradient-to-r ${i.gradient} rounded-full mr-3 shadow-sm ${a?`ring-2 ${i.ring}`:""}`}),e.jsx("span",{className:`font-medium ${a?"text-gray-900":"text-gray-500"}`,children:s}),a&&e.jsx("i",{className:`ri-check-line ml-auto ${i.text} text-sm`})]})},w8=({userLocation:t,incidents:s,showHeatmap:r,filteredIncidentsCount:a,onCenterUserLocation:n,onShowAllIncidents:i,onToggleHeatmap:l})=>e.jsxs("div",{className:"absolute top-4 right-4 z-10 space-y-3",children:[t&&e.jsx("button",{onClick:n,className:"group bg-white/90 backdrop-blur-sm hover:bg-white border border-white/20 rounded-xl p-3 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",title:"Center on my location",children:e.jsx("i",{className:"ri-focus-3-line text-blue-600 text-lg group-hover:text-blue-700"})}),e.jsx("button",{onClick:i,className:"group bg-white/90 backdrop-blur-sm hover:bg-white border border-white/20 rounded-xl p-3 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",title:"Show all incidents",children:e.jsx("i",{className:"ri-fullscreen-line text-blue-600 text-lg group-hover:text-blue-700"})}),e.jsx("button",{onClick:l,className:`group bg-white/90 backdrop-blur-sm hover:bg-white border border-white/20 rounded-xl p-3 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 ${r?"bg-blue-100 border-blue-300":""}`,title:r?"Hide heatmap":"Show heatmap",children:e.jsx("i",{className:`ri-fire-line text-lg group-hover:text-blue-700 ${r?"text-blue-600":"text-gray-600"}`})}),e.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl p-3 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:a}),e.jsx("div",{className:"text-xs text-gray-600",children:"Incidents"})]})})]}),cp=({incidents:t,onIncidentClick:s,height:r="24rem",showUserLocation:a=!1,userLocation:n=null})=>{const[i,l]=b.useState(Dx),[o,c]=b.useState(13),[d,u]=b.useState(!0),[f,g]=b.useState(!1),[x,y]=b.useState(new Set([ts.CRITICAL,ts.PENDING,ts.IN_PROGRESS,ts.RESOLVED])),[$,j]=b.useState(!1),[N,S]=b.useState(!1),[_,A]=b.useState(null),P=b.useMemo(()=>y8(t),[t]),M=b.useMemo(()=>t.filter(ee=>!!(x.size===0||x.has(ts.CRITICAL)&&ee.priority_level==="critical"&&(ee.status==="pending"||ee.status==="in_progress")||x.has(ts.PENDING)&&ee.status==="pending"&&ee.priority_level!=="critical"||x.has(ts.IN_PROGRESS)&&ee.status==="in_progress"&&ee.priority_level!=="critical"||x.has(ts.RESOLVED)&&(ee.status==="resolved"||ee.status==="closed"))),[t,x]),ne=b.useCallback(()=>{if(P&&P.validIncidents.length>0)if(P.validIncidents.length===1){const ee=P.validIncidents[0];l([Number(ee.latitude),Number(ee.longitude)]),c(15)}else l([P.centerLat,P.centerLng]),c(Mx(P));else n?(l([n.latitude,n.longitude]),c(14)):(l(Dx),c(10))},[P,n]);b.useEffect(()=>{ne()},[ne]),b.useEffect(()=>{g8()},[]),b.useEffect(()=>{const ee=setTimeout(()=>{d&&(console.log("Map loading timeout - setting error state"),g(!0),u(!1))},1e4);return()=>clearTimeout(ee)},[d]);const V=ee=>{switch(ee){case"critical":return"text-red-600";case"high":return"text-orange-600";case"moderate":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}},L=ee=>ee.replace("_"," ").replace(/\b\w/g,ge=>ge.toUpperCase()),Q=ee=>new Date(ee).toLocaleString(),w=b.useCallback(ee=>{y(ge=>{const G=new Set(ge);return G.has(ee)?G.delete(ee):G.add(ee),G})},[]),R=b.useCallback(()=>{y(new Set([ts.CRITICAL,ts.PENDING,ts.IN_PROGRESS,ts.RESOLVED]))},[]),Z=b.useCallback(()=>{S(ee=>!ee)},[]),I=b.useCallback(()=>{n&&(l([n.latitude,n.longitude]),c(15))},[n]),re=b.useCallback(()=>{if(P&&P.validIncidents.length>0){l([P.centerLat,P.centerLng]);const ee=Mx(P),ge=Math.min(ee,10);c(ge)}},[P]);return e.jsxs("div",{className:"relative",children:[e.jsx(w8,{userLocation:n,incidents:t,showHeatmap:N,filteredIncidentsCount:M.length,onCenterUserLocation:I,onShowAllIncidents:re,onToggleHeatmap:Z}),e.jsxs("div",{className:"w-full rounded-2xl overflow-hidden shadow-2xl border border-white/20 relative",style:{height:r,minHeight:"300px",position:"relative"},children:[d&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading map..."})]})}),f&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-error-warning-line text-4xl text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Failed to load interactive map"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Showing static map instead"}),e.jsx("button",{onClick:()=>{g(!1),u(!0),window.location.reload()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry Interactive Map"})]})}),f&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"ri-map-2-line text-6xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Incidents Map"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[t.length," incidents available"]}),e.jsxs("div",{className:"space-y-2 text-left max-w-md mx-auto",children:[t.slice(0,5).map(ee=>e.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["#",ee.incident_id," - ",ee.incident_type]}),e.jsx("p",{className:"text-sm text-gray-600",children:ee.description})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee.status==="resolved"?"bg-green-100 text-green-800":ee.status==="in_progress"?"bg-blue-100 text-blue-800":ee.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:ee.status})]})},ee.incident_id)),t.length>5&&e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["+",t.length-5," more incidents"]})]})]})}),e.jsxs(Ma,{center:i,zoom:o,style:{height:"100%",width:"100%"},className:"z-0 h-full w-full",zoomControl:!0,whenReady:()=>{console.log("Map is ready!"),u(!1),N&&setTimeout(()=>{S(!0)},500)},children:[e.jsx(b8,{center:i,zoom:o}),e.jsx(j8,{incidents:M,showHeatmap:N,onHeatmapLayerChange:A}),e.jsx(Ba,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19,errorTileUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",eventHandlers:{loading:()=>console.log("Tiles loading..."),load:()=>console.log("Tiles loaded successfully"),tileerror:ee=>{console.error("Tile loading error:",ee),g(!0)}}}),a&&n&&e.jsx(hr,{position:[n.latitude,n.longitude],icon:Xt.divIcon({html:`<div style="background-color: #3b82f6; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3); animation: pulse 2s infinite;"></div>
                       <style>@keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.7; } 100% { transform: scale(1); opacity: 1; } }</style>`,className:"user-location-marker",iconSize:[16,16],iconAnchor:[8,8]}),children:e.jsx(Xr,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("strong",{children:"Your Location"}),e.jsx("br",{}),e.jsxs("small",{className:"text-gray-600",children:["Lat: ",n.latitude.toFixed(6),e.jsx("br",{}),"Lng: ",n.longitude.toFixed(6)]})]})})}),!N&&M.map(ee=>{const ge=Number(ee.latitude),G=Number(ee.longitude);return isNaN(ge)||isNaN(G)?(console.warn("Invalid coordinates for incident:",ee.incident_id,ee.latitude,ee.longitude),null):e.jsx(hr,{position:[ge,G],icon:p8(ee.priority_level,ee.status),eventHandlers:{click:()=>s?.(ee)},children:e.jsx(Xr,{maxWidth:350,className:"incident-popup",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-900",children:["Incident #",ee.incident_id]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee.status==="resolved"?"bg-green-100 text-green-800":ee.status==="in_progress"?"bg-blue-100 text-blue-800":ee.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:L(ee.status)})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:ee.incident_type}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:ee.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",ee.resolvedLocation||ee.location]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Priority:"}),e.jsx("span",{className:`ml-1 ${V(ee.priority_level)}`,children:ee.priority_level.charAt(0).toUpperCase()+ee.priority_level.slice(1)})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Reporter:"})," ",ee.reporter_name]}),ee.assigned_team_name&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Assigned Team:"})," ",ee.assigned_team_name]}),ee.assigned_staff_name&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Assigned Staff:"})," ",ee.assigned_staff_name]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>s?.(ee),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded text-sm hover:bg-blue-700 transition-colors",children:"View Details"})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Reported: ",Q(ee.date_reported)]})]})})},ee.incident_id)})]})]}),$?e.jsxs("div",{className:"absolute bottom-4 left-4 z-10 bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",onClick:()=>j(!1),style:{cursor:"pointer"},children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 flex items-center",children:[e.jsx("i",{className:"ri-information-line mr-2 text-blue-600"}),"Legend"]}),e.jsx("button",{onClick:R,className:"text-xs text-blue-600 hover:text-blue-700 font-medium hover:underline",title:"Show all incident types",children:"Show All"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Fo,{type:ts.CRITICAL,label:"Critical Pending/In Progress",color:"red",isActive:x.has(ts.CRITICAL),onClick:()=>w(ts.CRITICAL)}),e.jsx(Fo,{type:ts.PENDING,label:"Pending",color:"amber",isActive:x.has(ts.PENDING),onClick:()=>w(ts.PENDING)}),e.jsx(Fo,{type:ts.IN_PROGRESS,label:"In Progress",color:"blue",isActive:x.has(ts.IN_PROGRESS),onClick:()=>w(ts.IN_PROGRESS)}),e.jsx(Fo,{type:ts.RESOLVED,label:"Resolved/Closed",color:"green",isActive:x.has(ts.RESOLVED),onClick:()=>w(ts.RESOLVED)})]})]}):e.jsx("button",{onClick:()=>j(!0),className:"absolute bottom-4 left-4 z-10 bg-white/90 backdrop-blur-sm hover:bg-white border border-white/20 rounded-xl p-3 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",title:"Show legend",children:e.jsx("i",{className:"ri-information-line text-blue-600 text-lg"})})]})},S8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(null),[n,i]=b.useState(!1),[l,o]=b.useState({}),[c,d]=b.useState({}),[u,f]=b.useState(!0),[g,x]=b.useState(null),y=Lt(),$=y.userData?.id||y.userData?.staff_id||y.userData?.user_id;b.useEffect(()=>{(async()=>{if(!$){x("No staff ID found. Please log in again."),f(!1);return}try{f(!0),x(null);const _=Number($),A=await Hs.getStaffIncidents(_);A.success?s(A.incidents||[]):x("Failed to fetch incidents")}catch(_){console.error("Error fetching incidents:",_),x(_ instanceof Error?_.message:"Failed to fetch incidents")}finally{f(!1)}})()},[$]);const j=S=>{a(S),i(!0)},N=()=>{i(!1),a(null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Incident Map"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"View incidents assigned to you or your team on the map"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(kt,{to:"/staff/incidents",className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:"ri-list-unordered mr-2"}),"List View"]})})]})})}),e.jsx("div",{className:"max-w-9xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"p-6",children:e.jsx(cp,{incidents:t,onIncidentClick:j,height:"calc(100vh - 220px)",showUserLocation:!1})})})}),n&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-alert-line text-xl"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Incident #",r.incident_id]}),e.jsx("p",{className:"text-blue-100 text-sm",children:r.incident_type})]})]}),e.jsx("button",{onClick:N,className:"text-white hover:text-blue-100 transition-colors p-2 rounded-lg hover:bg-white hover:bg-opacity-20",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-file-text-line text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Description"})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:r.description})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-map-pin-line text-red-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Location"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:r.resolvedLocation||r.location}),r.resolvedLocation&&r.resolvedLocation!==r.location&&e.jsxs("p",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["Coordinates: ",Number(r.latitude).toFixed(4),", ",Number(r.longitude).toFixed(4)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-team-line text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Assignment"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[r.assigned_team_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-team-line text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:r.assigned_team_name})]}),r.assigned_staff_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-user-line text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:r.assigned_staff_name})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-flag-line text-orange-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Priority"})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full border ${r.priority_level==="critical"?"bg-red-100 text-red-800 border-red-200":r.priority_level==="high"?"bg-orange-100 text-orange-800 border-orange-200":r.priority_level==="moderate"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"}`,children:r.priority_level.charAt(0).toUpperCase()+r.priority_level.slice(1)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-time-line text-purple-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Status"})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full border ${r.status==="pending"?"bg-yellow-100 text-yellow-800 border-yellow-200":r.status==="in_progress"?"bg-blue-100 text-blue-800 border-blue-200":r.status==="resolved"?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:r.status.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase())})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-user-line text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Reporter"})]}),r.reporter_type==="guest"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-indigo-600 text-sm"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.guest_name||"Unknown Guest"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Guest Reporter"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Guest ID"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.guest_id||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Contact"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.guest_contact||"N/A"})]})]})]}):e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-indigo-600 text-sm"})}),e.jsx("div",{className:"text-gray-700 font-medium",children:r.reporter_name})]}),r.reporter_phone&&e.jsxs("div",{className:"text-sm text-gray-500 pl-10",children:["📞 ",r.reporter_phone]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-calendar-line text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Timeline"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Reported:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(r.date_reported).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Time:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(r.date_reported).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.date_resolved&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Resolved:"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:new Date(r.date_resolved).toLocaleDateString()})]})]})]})]})]}),r.attachment&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Attachments"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:r.attachment.split(",").map((S,_)=>{const A=`/uploads/incidents/${S.trim()}`;return e.jsx("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:"block border border-gray-300 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:e.jsx("img",{src:A,alt:`Attachment ${_+1}`,className:"w-full h-32 object-cover",onError:P=>{P.target.src="/images/placeholder-image.png"}})},_)})})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(kt,{to:`/staff/incidents/${r.incident_id}`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-external-link-line mr-2"}),"View Full Details"]}),e.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Close"]})]})})]})})]})},C8=()=>{const{id:t}=Ux(),s=gs(),[r,a]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState(""),[u,f]=b.useState(!1),g=Lt(),x=g.userData?.id||g.userData?.staff_id||g.userData?.user_id;b.useEffect(()=>{t&&x&&y()},[t,x]);const y=async()=>{try{i(!0),console.log("🔍 Fetching incident details for staff:",t);const _=await Hs.getIncidentById(Number(t));if(_.success&&_.incident){const A=_.incident,P=A.assigned_staff_id===x,M=g.userData?.assigned_team_id;let ne=!1;if(M&&(A.assigned_team_id===M&&(ne=!0),A.assigned_team_ids&&A.assigned_team_ids.split(",").map(L=>Number(L.trim())).includes(M)&&(ne=!0)),!P&&!ne){o("You do not have permission to view this incident");return}a(A),A.latitude&&A.longitude&&$(A.latitude,A.longitude)}else o("Incident not found")}catch(_){console.error("Error fetching incident:",_),o("Failed to load incident details")}finally{i(!1)}},$=async(_,A)=>{const P=Number(_),M=Number(A);if(!(!P||!M)){f(!0);try{const ne=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${P}&lon=${M}&zoom=16&addressdetails=1`);if(ne.ok){const V=await ne.json();if(V.display_name){const Q=V.display_name.split(", ").slice(0,3).join(", ");d(Q)}}}catch(ne){console.error("Error geocoding coordinates:",ne),d(`${P.toFixed(4)}, ${M.toFixed(4)}`)}finally{f(!1)}}},j=_=>{switch(_){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=_=>{switch(_){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"moderate":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},S=_=>_.assignment_type==="individual"?e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 border border-blue-200",children:"Individual"}):_.assignment_type==="team"?e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800 border border-purple-200",children:"Team"}):null;return n?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l||!r?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-error-warning-line mx-auto text-5xl text-red-500 mb-4"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Error"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l||"Incident not found"}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>s("/staff/incidents"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to My Incidents"]})})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>s("/staff/incidents"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to My Incidents"]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Incident #",r.incident_id]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(r.status)}`,children:r.status.replace("_"," ").toUpperCase()}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(r.priority_level)}`,children:r.priority_level.toUpperCase()}),S(r)]})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Incident Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",r.incident_type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Priority:"})," ",r.priority_level]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",r.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Validation:"})," ",r.validation_status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reporter Safety:"})," ",r.reporter_safe_status]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx("i",{className:"ri-map-pin-line mr-2"}),"Location"]}),e.jsx("div",{className:"text-sm text-gray-600",children:u?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-blue-600 mr-2"}),e.jsx("span",{children:"Loading location..."})]}):e.jsx("p",{children:c||`${Number(r.latitude).toFixed(4)}, ${Number(r.longitude).toFixed(4)}`})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx("i",{className:"ri-time-line mr-2"}),"Reported"]}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(r.date_reported).toLocaleString()})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assignment Information"}),e.jsxs("div",{className:"space-y-2",children:[r.assigned_team_name&&e.jsxs("p",{children:[e.jsx("strong",{children:"Assigned Team:"})," ",r.assigned_team_name]}),r.assigned_staff_name&&e.jsxs("p",{children:[e.jsx("strong",{children:"Assigned Staff:"})," ",r.assigned_staff_name]}),r.reporter_name&&e.jsxs("p",{children:[e.jsx("strong",{children:"Reported By:"})," ",r.reporter_name]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Assignment Type"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[S(r),e.jsx("span",{className:"text-sm text-gray-600",children:r.assignment_type==="individual"?"Directly assigned to you":r.assignment_type==="team"?"Assigned to your team":"Assignment type unknown"})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Description"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.description})})]})]})]})]})})},$8=t=>{if(!t)return!1;if(t.startsWith("+63")){const r=t.replace(/\D/g,"");return/^639\d{9}$/.test(r)}if(t.startsWith("09")){const r=t.replace(/\D/g,"");return/^09\d{9}$/.test(r)}const s=t.replace(/\D/g,"");return s.startsWith("639")&&s.length===12?/^639\d{9}$/.test(s):s.startsWith("9")&&s.length===10?/^9\d{9}$/.test(s):!1},k8=()=>{const[t,s]=b.useState(null),[r,a]=b.useState(null),[n,i]=b.useState({totalAssigned:0,pending:0,inProgress:0,resolved:0,resolvedToday:0}),[l,o]=b.useState(!0),[c,d]=b.useState(null),[u,f]=b.useState(!1),[g,x]=b.useState({name:"",email:"",phone:"",position:"",department:"",availability:""}),[y,$]=b.useState(!1),[j,N]=b.useState(!1),[S,_]=b.useState(!1),[A,P]=b.useState(""),[M,ne]=b.useState(0),[V,L]=b.useState(!1),[Q,w]=b.useState(!1),[R,Z]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[I,re]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[ee,ge]=b.useState(!0),[G,fe]=b.useState(!1),[ke,X]=b.useState(!1),k=Lt(),q=k.userData?.id||k.userData?.staff_id||k.userData?.user_id,T=xe=>{const H=[xe.name,xe.email,xe.phone,xe.position,xe.department,xe.availability],ye=H.filter(pe=>pe&&pe.trim()!=="").length;return Math.round(ye/H.length*100)};b.useEffect(()=>{if(t&&u){const xe=g.name!==t.name||g.email!==t.email||g.phone!==t.phone||g.position!==t.position||g.department!==t.department||g.availability!==t.availability;N(xe)}},[g,t,u]),b.useEffect(()=>{const xe=H=>{j&&(H.preventDefault(),H.returnValue="")};return j&&window.addEventListener("beforeunload",xe),()=>{window.removeEventListener("beforeunload",xe)}},[j]),b.useEffect(()=>{q&&B()},[q]),b.useEffect(()=>{if(S){const xe=setTimeout(()=>{_(!1)},5e3);return()=>clearTimeout(xe)}},[S]);const B=async()=>{try{o(!0),d(null);const xe=await Xi.getStaffById(Number(q));if(xe.success&&xe.staff){const H={...xe.staff,availability:xe.staff.availability&&xe.staff.availability.trim()!==""?xe.staff.availability:"available"};if(s(H),ne(T(H)),xe.staff.team_id)try{const ye=await Bu.getTeamById(xe.staff.team_id);ye.success&&ye.team&&a(ye.team)}catch(ye){console.error("Error fetching team details:",ye)}await F()}else d("Failed to load profile data")}catch(xe){console.error("Error fetching profile data:",xe),d("Failed to load profile data")}finally{o(!1)}},F=async()=>{try{const xe=await Hs.getStaffIncidents(Number(q));if(xe.success&&xe.incidents){const H=xe.incidents,ye=new Date().toDateString();i({totalAssigned:H.length,pending:H.filter(pe=>pe.status==="pending").length,inProgress:H.filter(pe=>pe.status==="in_progress").length,resolved:H.filter(pe=>pe.status==="resolved"||pe.status==="closed").length,resolvedToday:H.filter(pe=>(pe.status==="resolved"||pe.status==="closed")&&new Date(pe.date_reported).toDateString()===ye).length})}}catch(xe){console.error("Error fetching incident stats:",xe)}},J=xe=>{switch(xe){case"available":return"bg-green-100 text-green-800 border-green-200";case"busy":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"off-duty":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},W=xe=>{switch(xe){case"available":return"ri-check-circle-line";case"busy":return"ri-time-line";case"off-duty":return"ri-moon-line";default:return"ri-question-line"}},le=()=>{x({name:t?.name||"",email:t?.email||"",phone:t?.phone||"",position:t?.position||"",department:t?.department||"",availability:t?.availability||"available"}),f(!0)},he=()=>{j&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||(f(!1),N(!1),x({name:t?.name||"",email:t?.email||"",phone:t?.phone||"",position:t?.position||"",department:t?.department||"",availability:t?.availability||"available"}))},se=async()=>{try{if($(!0),d(null),!g.name.trim()){d("Name is required");return}if(!g.email.trim()){d("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)){d("Please enter a valid email address");return}if(!$8(g.phone)){d("Please enter a valid Philippine mobile number (e.g., 09123456789 or +639123456789)");return}const xe={name:g.name.trim(),email:g.email.trim(),phone:g.phone.trim(),position:g.position.trim(),department:g.department.trim()};if(!(await Xi.updateStaff(Number(q),xe)).success){d("Failed to update profile");return}if(g.availability!==t?.availability){console.log("Updating availability:",{current:t?.availability,new:g.availability,staffId:q});const pe=await Xi.updateStaffAvailability(Number(q),g.availability);if(console.log("Availability update response:",pe),!pe.success){d("Profile updated but failed to update availability status");return}}const ye={...t,...xe,availability:g.availability};s(ye),ne(T(ye)),f(!1),N(!1),P("Profile updated successfully!"),_(!0),await B()}catch(xe){console.error("Error updating profile:",xe),d("Failed to update profile")}finally{$(!1)}},ve=(xe,H)=>{x(ye=>({...ye,[xe]:H}))},E=(xe,H)=>{Z(ye=>({...ye,[xe]:H})),I[xe]&&re(ye=>({...ye,[xe]:""}))},ce=()=>{L(!1),Z({currentPassword:"",newPassword:"",confirmPassword:""}),re({currentPassword:"",newPassword:"",confirmPassword:""})},K=xe=>xe.length<8?"Password must be at least 8 characters long":/(?=.*[a-z])/.test(xe)?/(?=.*[A-Z])/.test(xe)?/(?=.*\d)/.test(xe)?"":"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter",ze=async xe=>{if(xe.preventDefault(),re({currentPassword:"",newPassword:"",confirmPassword:""}),!R.currentPassword){re(ye=>({...ye,currentPassword:"Current password is required"}));return}const H=K(R.newPassword);if(H){re(ye=>({...ye,newPassword:H}));return}if(R.newPassword!==R.confirmPassword){re(ye=>({...ye,confirmPassword:"Passwords do not match"}));return}try{w(!0),await new Promise(ye=>setTimeout(ye,1e3)),P("Password changed successfully!"),_(!0),ce()}catch(ye){console.error("Error changing password:",ye),re(pe=>({...pe,currentPassword:"Failed to change password. Please try again."}))}finally{w(!1)}},Ie=()=>{fe(!0)},Ne=()=>{fe(!1)},U=async()=>{try{X(!0),await new Promise(xe=>setTimeout(xe,1e3)),ge(!1),fe(!1),window.location.href="/login"}catch(xe){console.error("Error during logout:",xe),fe(!1)}finally{X(!1)}};return l?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"})]})]})})}),e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"})]})]})})})]})})}):c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-error-warning-line text-2xl text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Profile"}),e.jsx("p",{className:"text-gray-600",children:c})]})}):t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[S&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-circle-line text-green-600"})}),e.jsx("span",{className:"font-medium",children:A})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sticky top-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(ri,{name:t?.name,email:t?.email,size:"xl",className:"mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:t?.name||"User Profile"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t?.email||"No email provided"}),!u&&e.jsxs(vt,{variant:"primary",size:"md",onClick:le,fullWidth:!0,children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Profile"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[M,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs(vt,{variant:"outline",size:"md",onClick:Ie,fullWidth:!0,children:[e.jsx("i",{className:"ri-logout-box-line mr-2"}),"Sign Out"]})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 px-8 py-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Personal Information"}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Keep your information up to date"})]}),u&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[e.jsx("i",{className:"ri-edit-line"}),e.jsx("span",{className:"text-sm font-medium",children:"Editing Mode"})]})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:se,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),!u&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t?.name?.split(" ")[0]||"Not provided"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t?.name?.split(" ").slice(1).join(" ")||"Not provided"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t?.position||"Not provided"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t?.department||"Not provided"})]})]}),u&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(qt,{label:"First Name",type:"text",name:"firstName",id:"firstName",value:g.name.split(" ")[0]||"",onChange:xe=>{const H=g.name.split(" ").slice(1).join(" ")||"",ye=xe.target.value+(H?" "+H:"");ve("name",ye)},error:"",placeholder:"Enter your first name",required:!0,disabled:!u,icon:e.jsx("i",{className:"ri-user-line"})}),e.jsx(qt,{label:"Last Name",type:"text",name:"lastName",id:"lastName",value:g.name.split(" ").slice(1).join(" ")||"",onChange:xe=>{const ye=(g.name.split(" ")[0]||"")+(xe.target.value?" "+xe.target.value:"");ve("name",ye)},error:"",placeholder:"Enter your last name",required:!0,disabled:!u,icon:e.jsx("i",{className:"ri-user-line"})}),e.jsx(qt,{label:"Position",type:"text",name:"position",id:"position",value:g.position,onChange:xe=>ve("position",xe.target.value),error:"",placeholder:"Enter your position",required:!0,disabled:!u,icon:e.jsx("i",{className:"ri-briefcase-line"})}),e.jsx(qt,{label:"Department",type:"text",name:"department",id:"department",value:g.department,onChange:xe=>ve("department",xe.target.value),error:"",placeholder:"Enter your department",required:!0,disabled:!u,icon:e.jsx("i",{className:"ri-building-line"})})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-phone-line text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Information"})]}),!u&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t?.email||"Not provided"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("p",{className:"text-gray-900 font-medium",children:xu(t?.phone)||"Not provided"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Availability"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`${W(t?.availability||"available")} text-lg`}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${J(t?.availability||"available")}`,children:t?.availability||"Not set"})]})]})]}),u&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(qt,{label:"Email Address",type:"email",name:"email",id:"email",value:g.email,onChange:xe=>ve("email",xe.target.value),error:"",placeholder:"Enter your email",required:!0,disabled:!u,icon:e.jsx("i",{className:"ri-mail-line"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx(bc,{international:!0,defaultCountry:"PH",value:g.phone,onChange:xe=>ve("phone",xe||""),className:"w-full pl-10 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all border-gray-300",inputClassName:"w-full py-4 px-4 border-0 focus:ring-0 focus:outline-none bg-transparent text-gray-900 placeholder-gray-500",buttonClassName:"px-3 py-4 border-r border-gray-300 bg-gray-50 hover:bg-gray-100",dropdownClassName:"bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto",inputProps:{required:!0},placeholder:"Enter your phone number",disabled:!u})]}),e.jsx(Df,{label:"Availability",name:"availability",id:"availability",value:g.availability,onChange:xe=>ve("availability",xe.target.value),error:"",required:!0,disabled:!u,options:[{value:"available",label:"Available"},{value:"busy",label:"Busy"},{value:"off-duty",label:"Off Duty"}]})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-lock-line text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your password to keep your account secure"})]}),e.jsxs(vt,{type:"button",variant:"outline",size:"md",onClick:()=>L(!0),className:"border-red-200 text-red-600 hover:bg-red-50",children:[e.jsx("i",{className:"ri-key-line mr-2"}),"Change Password"]})]})})]}),u&&e.jsx("div",{className:"border-t border-gray-100 pt-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(vt,{type:"submit",variant:"primary",size:"lg",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Saving Changes..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Save Changes"]})}),e.jsxs(vt,{type:"button",variant:"outline",size:"lg",onClick:he,disabled:y,children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Cancel"]})]})})]})})]})})]}),!u&&e.jsx("div",{className:"fixed bottom-6 right-6 lg:hidden",children:e.jsx(vt,{variant:"primary",size:"lg",onClick:le,className:"rounded-full w-14 h-14 shadow-2xl hover:shadow-3xl",children:e.jsx("i",{className:"ri-edit-line text-xl"})})})]})}),e.jsx(jn,{isOpen:V,onClose:ce,title:"Change Password",size:"md",children:e.jsxs("form",{onSubmit:ze,className:"space-y-6",children:[e.jsx("div",{children:e.jsx(qt,{label:"Current Password",type:"password",name:"currentPassword",id:"currentPassword",value:R.currentPassword,onChange:xe=>E("currentPassword",xe.target.value),error:I.currentPassword,placeholder:"Enter your current password",required:!0,icon:e.jsx("i",{className:"ri-lock-line"})})}),e.jsxs("div",{children:[e.jsx(qt,{label:"New Password",type:"password",name:"newPassword",id:"newPassword",value:R.newPassword,onChange:xe=>E("newPassword",xe.target.value),error:I.newPassword,placeholder:"Enter your new password",required:!0,icon:e.jsx("i",{className:"ri-key-line"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long and contain uppercase, lowercase, and number."})]}),e.jsx("div",{children:e.jsx(qt,{label:"Confirm New Password",type:"password",name:"confirmPassword",id:"confirmPassword",value:R.confirmPassword,onChange:xe=>E("confirmPassword",xe.target.value),error:I.confirmPassword,placeholder:"Confirm your new password",required:!0,icon:e.jsx("i",{className:"ri-key-line"})})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(vt,{type:"button",variant:"outline",size:"md",onClick:ce,disabled:Q,children:"Cancel"}),e.jsx(vt,{type:"submit",variant:"primary",size:"md",disabled:Q,children:Q?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Changing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-key-line mr-2"}),"Change Password"]})})]})]})}),e.jsx(jl,{isOpen:G,onClose:Ne,onConfirm:U,isLoading:ke})]}):e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-user-line text-2xl text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600",children:"Unable to load staff profile data."})]})})},_8=({children:t})=>{const s=gs(),r=vl(),[a,n]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[d,u]=b.useState(!1),[f,g]=b.useState(!1);b.useEffect(()=>{const M=Lt();if(!M.isAuthenticated){s("/auth/login");return}if(M.userType!=="staff"){s("/");return}n(M.userData)},[s]),b.useEffect(()=>{const M=V=>{V.key==="Escape"&&(i&&l(!1),o&&c(!1))},ne=V=>{const L=V.target;o&&!L.closest(".profile-dropdown")&&c(!1)};return i?(document.addEventListener("keydown",M),document.body.style.overflow="hidden"):document.body.style.overflow="unset",o&&(document.addEventListener("keydown",M),document.addEventListener("click",ne)),()=>{document.removeEventListener("keydown",M),document.removeEventListener("click",ne),document.body.style.overflow="unset"}},[i,o]);const x=()=>{l(!i),c(!1)},y=()=>{l(!1)},$=()=>{c(!o),l(!1)},j=()=>{c(!1)},N=M=>{j(),y(),s(M)},S=()=>{u(!0),j(),y()},_=async()=>{g(!0);try{await hb.logout(),Da(),s("/")}catch(M){console.error("Logout error:",M),Da(),s("/")}finally{g(!1),u(!1)}},A=()=>{u(!1)},P=M=>r.pathname===M||r.pathname.startsWith(M+"/");return a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm shadow-lg border-b border-gray-200 sticky top-0 z-50 transition-all duration-200",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("i",{className:"ri-shield-check-line text-xl text-white"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Staff Portal"}),e.jsx("span",{className:"block text-sm text-gray-600",children:"Emergency Response Management"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[e.jsx("button",{onClick:()=>N("/staff"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${P("/staff")&&!P("/staff/incidents")?"bg-blue-100 text-blue-700":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:"Home"}),e.jsx("button",{onClick:()=>N("/staff/incidents"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${P("/staff/incidents")&&!P("/staff/incidents/map")?"bg-blue-100 text-blue-700":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:"Incident Assigned"}),e.jsx("button",{onClick:()=>N("/staff/incidents/map"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${P("/staff/incidents/map")?"bg-blue-100 text-blue-700":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:"Map View"})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-4",children:e.jsxs("div",{className:"relative profile-dropdown",children:[e.jsxs("button",{onClick:$,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 font-medium focus:outline-none group",children:[e.jsx("div",{className:"w-9 h-9 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:a.name?.charAt(0)?.toUpperCase()||a.email?.charAt(0)?.toUpperCase()||"S"})}),e.jsxs("div",{className:"hidden lg:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-600",children:a.name||a.email?.split("@")[0]||"Staff Member"}),e.jsx("p",{className:"text-xs text-gray-500 truncate max-w-32",title:a?.email||"No email",children:a?.email||"No email"})]}),e.jsx("i",{className:`ri-arrow-down-s-line ml-1 transition-transform duration-200 ${o?"rotate-180":""} group-hover:text-blue-600`})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-xl z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("div",{className:"px-4 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-semibold text-lg",children:a.name?.charAt(0)?.toUpperCase()||a.email?.charAt(0)?.toUpperCase()||"S"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate",children:a.name||a.email?.split("@")[0]||"Staff Member"}),e.jsx("p",{className:"text-gray-600 text-xs truncate",title:a?.email||"No email",children:a?.email||"No email provided"}),e.jsx("p",{className:"text-gray-500 text-xs",children:a.position||"Staff Member"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Online"})]})]})]})}),e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>N("/staff/profile"),className:"flex items-center w-full text-left px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 group",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors",children:e.jsx("i",{className:"ri-user-settings-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Account Settings"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage your profile"})]})]}),e.jsxs("button",{onClick:()=>N("/staff/feedback"),className:"flex items-center w-full text-left px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 group",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors",children:e.jsx("i",{className:"ri-feedback-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Submit Feedback"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Help us improve the app"})]})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:S,className:"flex items-center w-full text-left px-4 py-3 text-gray-700 hover:bg-red-50 hover:text-red-600 transition-all duration-200 group",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-red-100 transition-colors",children:e.jsx("i",{className:"ri-logout-box-line text-gray-600 group-hover:text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Sign Out"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Logout from your account"})]})]})]})]})]})}),e.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none",onClick:x,"aria-label":"Toggle mobile menu",children:e.jsx("i",{className:`ri-${i?"close":"menu"}-line text-xl text-gray-700`})})]})})}),i&&e.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:y}),e.jsx("div",{className:"fixed top-16 left-0 right-0 bg-white shadow-xl border-t border-gray-200 max-h-[calc(100vh-4rem)] overflow-y-auto",children:e.jsxs("div",{className:"px-4 py-6 space-y-2",children:[e.jsxs("button",{onClick:()=>N("/staff"),className:`flex items-center w-full px-4 py-3 rounded-lg transition-all duration-200 font-medium ${P("/staff")&&!P("/staff/incidents")?"bg-blue-100 text-blue-700":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx("i",{className:"ri-dashboard-line text-lg mr-3"}),"Dashboard"]}),e.jsxs("button",{onClick:()=>N("/staff/incidents"),className:`flex items-center w-full px-4 py-3 rounded-lg transition-all duration-200 font-medium ${P("/staff/incidents")&&!P("/staff/incidents/map")?"bg-blue-100 text-blue-700":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx("i",{className:"ri-error-warning-line text-lg mr-3"}),"Incident Assigned"]}),e.jsxs("button",{onClick:()=>N("/staff/incidents/map"),className:`flex items-center w-full px-4 py-3 rounded-lg transition-all duration-200 font-medium ${P("/staff/incidents/map")?"bg-blue-100 text-blue-700":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx("i",{className:"ri-map-pin-line text-lg mr-3"}),"Map View"]}),e.jsx("div",{className:"border-t border-gray-200 my-4"}),e.jsx("div",{className:"px-4 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-semibold text-lg",children:a.name?.charAt(0)?.toUpperCase()||a.email?.charAt(0)?.toUpperCase()||"S"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-base truncate",children:a.name||a.email?.split("@")[0]||"Staff Member"}),e.jsx("p",{className:"text-gray-600 text-sm truncate",title:a?.email||"No email",children:a?.email||"No email provided"}),e.jsx("p",{className:"text-gray-500 text-xs",children:a.position||"Staff Member"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Online"})]})]})]})}),e.jsxs("button",{onClick:()=>N("/staff/profile"),className:"flex items-center w-full px-4 py-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-100 transition-colors",children:e.jsx("i",{className:"ri-settings-line text-gray-600 group-hover:text-blue-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm",children:"Account Settings"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage your profile"})]})]}),e.jsxs("button",{onClick:S,className:"flex items-center w-full px-4 py-3 rounded-lg text-gray-700 hover:text-red-600 hover:bg-red-50 transition-all duration-200 group",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-red-100 transition-colors",children:e.jsx("i",{className:"ri-logout-box-line text-gray-600 group-hover:text-red-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm",children:"Sign Out"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Logout from your account"})]})]})]})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("main",{className:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t||e.jsx(Bx,{})})})]}),e.jsx(jl,{isOpen:d,onClose:A,onConfirm:_,isLoading:f})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})},A8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(null),[n,i]=b.useState(!1),[l,o]=b.useState({}),[c,d]=b.useState({}),[u,f]=b.useState(null);b.useEffect(()=>{g()},[]);const g=async()=>{try{f(null),console.log("🔍 Fetching all incidents for admin");const _=await Hs.getIncidents();if(_.success&&_.incidents){console.log("📋 Admin incidents response:",_),console.log("📊 Total incidents received:",_.incidents.length);const A=await Promise.all(_.incidents.map(async P=>{try{const M=await x(P.latitude,P.longitude);return{...P,resolvedLocation:M}}catch(M){return console.error("Error geocoding incident location:",M),{...P,resolvedLocation:`${Number(P.latitude).toFixed(4)}, ${Number(P.longitude).toFixed(4)}`}}}));console.log("✅ Incidents with locations:",A),s(A)}else console.warn("❌ No incidents received or response not successful:",_),s([])}catch(_){console.error("❌ Error fetching admin incidents:",_),f("An error occurred while loading incidents. Please try again later."),s([])}},x=async(_,A)=>{const P=Number(_),M=Number(A);try{return await x8.getLocationName(P,M)}catch(ne){return console.error("Error geocoding coordinates:",ne),`${P.toFixed(4)}, ${M.toFixed(4)}`}},y=_=>{a(_),i(!0)},$=()=>{i(!1),a(null)},j=_=>{switch(_){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=_=>{switch(_){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"moderate":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},S=_=>{switch(_){case"validated":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";case"unvalidated":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return u?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-red-100 text-red-800 p-4 rounded-lg max-w-md",children:[e.jsx("i",{className:"ri-error-warning-line text-2xl mb-2"}),e.jsx("p",{className:"font-semibold",children:"Error Loading Incidents"}),e.jsx("p",{className:"text-sm mt-1",children:u})]}),e.jsxs("button",{onClick:g,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Try Again"]})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Incident Map"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View all incidents across the system on the interactive map"})]}),e.jsx("div",{className:"flex items-center space-x-3"})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"p-6",children:e.jsx(cp,{incidents:t,onIncidentClick:y,height:"calc(100vh - 220px)",showUserLocation:!1})})})}),n&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-alert-line text-xl"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Incident #",r.incident_id]}),e.jsx("p",{className:"text-blue-100 text-sm",children:r.incident_type})]})]}),e.jsx("button",{onClick:$,className:"text-white hover:text-blue-100 transition-colors p-2 rounded-lg hover:bg-white hover:bg-opacity-20",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-file-text-line text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Description"})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:r.description})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-map-pin-line text-red-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Location"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:r.resolvedLocation||r.location}),r.resolvedLocation&&r.resolvedLocation!==r.location&&e.jsxs("p",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["Coordinates: ",Number(r.latitude).toFixed(4),", ",Number(r.longitude).toFixed(4)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-team-line text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Assignment"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[r.assigned_team_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-team-line text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:r.assigned_team_name})]}),r.assigned_staff_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-user-line text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:r.assigned_staff_name})]}),!r.assigned_team_name&&!r.assigned_staff_name&&e.jsx("span",{className:"text-sm text-gray-500 italic",children:"Not assigned"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-flag-line text-orange-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Priority"})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full border ${N(r.priority_level)}`,children:r.priority_level.charAt(0).toUpperCase()+r.priority_level.slice(1)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-time-line text-purple-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Status"})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full border ${j(r.status)}`,children:r.status.replace("_"," ").replace(/\b\w/g,_=>_.toUpperCase())})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-shield-check-line text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Validation"})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full border ${S(r.validation_status||"unvalidated")}`,children:(r.validation_status||"unvalidated").charAt(0).toUpperCase()+(r.validation_status||"unvalidated").slice(1)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-user-line text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Reporter"})]}),r.reporter_type==="guest"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-indigo-600 text-sm"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.guest_name||"Unknown Guest"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Guest Reporter"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Guest ID"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.guest_id||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Contact"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.guest_contact||"N/A"})]})]})]}):e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-indigo-600 text-sm"})}),e.jsx("div",{className:"text-gray-700 font-medium",children:r.reporter_name})]}),r.reporter_phone&&e.jsxs("div",{className:"text-sm text-gray-500 pl-10",children:["📞 ",r.reporter_phone]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("i",{className:"ri-calendar-line text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Timeline"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Reported:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(r.date_reported).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Time:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(r.date_reported).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.date_resolved&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Resolved:"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:new Date(r.date_resolved).toLocaleDateString()})]})]})]})]})]}),r.attachment&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Attachments"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:r.attachment.split(",").map((_,A)=>{const P=`/uploads/incidents/${_.trim()}`;return e.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:"block border border-gray-300 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:e.jsx("img",{src:P,alt:`Attachment ${A+1}`,className:"w-full h-32 object-cover",onError:M=>{M.target.src="/images/placeholder-image.png"}})},A)})})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(kt,{to:`/admin/incidents/view/${r.incident_id}`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:[e.jsx("i",{className:"ri-external-link-line mr-2"}),"View Full Details"]}),e.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Close"]})]})})]})})]})},P8=[{path:"/",element:e.jsx(bb,{})},{path:"/auth/login",element:e.jsx(yb,{})},{path:"/auth/signup",element:e.jsx(vb,{})},{path:"/auth/forgot-password",element:e.jsx(jb,{})},{path:"/auth/verify-otp",element:e.jsx(Nb,{})},{path:"/auth/reset-password",element:e.jsx(wb,{})},{path:"/incident-report",element:e.jsx(lj,{})},{path:"/profile",element:e.jsx(dj,{})},{path:"/evacuation-center",element:e.jsx(Ij,{})},{path:"/safety-protocols",element:e.jsx(Rj,{})},{path:"/history-report",element:e.jsx(Oj,{})},{path:"/feedback",element:e.jsx(Dj,{})},{path:"/welfare-check",element:e.jsx(Mj,{})},{path:"/notifications",element:e.jsx(Bj,{})},{path:"/sitemap",element:e.jsx(Hj,{})},{path:"/about",element:e.jsx(Vj,{})},{path:"/admin/login",element:e.jsx(Yj,{})},{path:"/admin/signup",element:e.jsx(Zj,{})},{path:"/admin",element:e.jsx(Kj,{}),children:[{path:"dashboard",element:e.jsx(gx,{})},{path:"alerts",element:e.jsx(J3,{})},{path:"users",element:e.jsx(K3,{})},{path:"staff",element:e.jsx(Q3,{})},{path:"teams",element:e.jsx(c8,{})},{path:"incidents/view",element:e.jsx(r4,{})},{path:"incidents/view/:id",element:e.jsx(I6,{})},{path:"incidents/map",element:e.jsx(A8,{})},{path:"evacuation/centers",element:e.jsx(V6,{})},{path:"evacuation/routes",element:e.jsx(Q6,{})},{path:"evacuation/resources",element:e.jsx(n8,{})},{path:"safety-protocols",element:e.jsx(i8,{})},{path:"activity-logs",element:e.jsx(l8,{})},{path:"welfare",element:e.jsx(u8,{})},{path:"feedback",element:e.jsx(d8,{})},{path:"reports",element:e.jsx(R6,{})},{path:"profile",element:e.jsx(o8,{})},{path:"",element:e.jsx(gx,{})}]},{path:"/staff",element:e.jsx(_8,{}),children:[{path:"",element:e.jsx(Ox,{})},{path:"dashboard",element:e.jsx(Ox,{})},{path:"incidents",element:e.jsx(m8,{})},{path:"incidents/map",element:e.jsx(S8,{})},{path:"incidents/:id",element:e.jsx(C8,{})},{path:"feedback",element:e.jsx(Uj,{})},{path:"profile",element:e.jsx(k8,{})}]},{path:"*",element:e.jsx(db,{})}];let dp;new Promise(t=>{dp=t});function L8(){const t=Xp(P8),s=gs();return window.REACT_APP_NAVIGATE=s,dp(s),t}function E8(){return e.jsx(Sb,{children:e.jsx(Qp,{basename:"/",future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(L8,{})})})}cb.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(E8,{})}));export{Ut as _};
